/* IMPORTANT NOTE: This file is licensed only for use in providing the iCloud service,
*   or any part thereof, and is subject to the iCloud Terms and Conditions. You may not
*   port this file to another platform without Apple's written consent. */

/*!
 * jQuery JavaScript Library v1.6.2
 * http://jquery.com/
 *
 * Copyright 2011, John Resig
 * Dual licensed under the MIT or GPL Version 2 licenses.
 * http://jquery.org/license
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 * Copyright 2011, The Dojo Foundation
 * Released under the MIT, BSD, and GPL Licenses.
 *
 * Date: Thu Jun 30 14:16:56 2011 -0400
 */
(function(bb,M){var at=bb.document,bt=bb.navigator,bk=bb.location;var b=(function(){var bE=function(bZ,b0){return new bE.fn.init(bZ,b0,bC)},bU=bb.jQuery,bG=bb.$,bC,bY=/^(?:[^<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,bM=/\S/,bI=/^\s+/,bD=/\s+$/,bH=/\d/,bz=/^<(\w+)\s*\/?>(?:<\/\1>)?$/,bN=/^[\],:{}\s]*$/,bW=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,bP=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,bJ=/(?:^|:|,)(?:\s*\[)+/g,bx=/(webkit)[ \/]([\w.]+)/,bR=/(opera)(?:.*version)?[ \/]([\w.]+)/,bQ=/(msie) ([\w.]+)/,bS=/(mozilla)(?:.*? rv:([\w.]+))?/,bA=/-([a-z])/ig,bT=function(bZ,b0){return b0.toUpperCase()},bX=bt.userAgent,bV,bB,e,bL=Object.prototype.toString,bF=Object.prototype.hasOwnProperty,by=Array.prototype.push,bK=Array.prototype.slice,bO=String.prototype.trim,bu=Array.prototype.indexOf,bw={};bE.fn=bE.prototype={constructor:bE,init:function(bZ,b3,b2){var b1,b4,b0,b5;if(!bZ){return this}if(bZ.nodeType){this.context=this[0]=bZ;this.length=1;return this}if(bZ==="body"&&!b3&&at.body){this.context=at;this[0]=at.body;this.selector=bZ;this.length=1;return this}if(typeof bZ==="string"){if(bZ.charAt(0)==="<"&&bZ.charAt(bZ.length-1)===">"&&bZ.length>=3){b1=[null,bZ,null]}else{b1=bY.exec(bZ)}if(b1&&(b1[1]||!b3)){if(b1[1]){b3=b3 instanceof bE?b3[0]:b3;b5=(b3?b3.ownerDocument||b3:at);b0=bz.exec(bZ);if(b0){if(bE.isPlainObject(b3)){bZ=[at.createElement(b0[1])];bE.fn.attr.call(bZ,b3,true)}else{bZ=[b5.createElement(b0[1])]}}else{b0=bE.buildFragment([b1[1]],[b5]);bZ=(b0.cacheable?bE.clone(b0.fragment):b0.fragment).childNodes}return bE.merge(this,bZ)}else{b4=at.getElementById(b1[2]);if(b4&&b4.parentNode){if(b4.id!==b1[2]){return b2.find(bZ)}this.length=1;this[0]=b4}this.context=at;this.selector=bZ;return this}}else{if(!b3||b3.jquery){return(b3||b2).find(bZ)}else{return this.constructor(b3).find(bZ)}}}else{if(bE.isFunction(bZ)){return b2.ready(bZ)}}if(bZ.selector!==M){this.selector=bZ.selector;this.context=bZ.context}return bE.makeArray(bZ,this)},selector:"",jquery:"1.6.2",length:0,size:function(){return this.length},toArray:function(){return bK.call(this,0)},get:function(bZ){return bZ==null?this.toArray():(bZ<0?this[this.length+bZ]:this[bZ])},pushStack:function(b0,b2,bZ){var b1=this.constructor();if(bE.isArray(b0)){by.apply(b1,b0)}else{bE.merge(b1,b0)}b1.prevObject=this;b1.context=this.context;if(b2==="find"){b1.selector=this.selector+(this.selector?" ":"")+bZ}else{if(b2){b1.selector=this.selector+"."+b2+"("+bZ+")"}}return b1},each:function(b0,bZ){return bE.each(this,b0,bZ)},ready:function(bZ){bE.bindReady();bB.done(bZ);return this},eq:function(bZ){return bZ===-1?this.slice(bZ):this.slice(bZ,+bZ+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(bK.apply(this,arguments),"slice",bK.call(arguments).join(","))},map:function(bZ){return this.pushStack(bE.map(this,function(b1,b0){return bZ.call(b1,b0,b1)}))},end:function(){return this.prevObject||this.constructor(null)},push:by,sort:[].sort,splice:[].splice};bE.fn.init.prototype=bE.fn;bE.extend=bE.fn.extend=function(){var b8,b1,bZ,b0,b5,b6,b4=arguments[0]||{},b3=1,b2=arguments.length,b7=false;if(typeof b4==="boolean"){b7=b4;b4=arguments[1]||{};b3=2}if(typeof b4!=="object"&&!bE.isFunction(b4)){b4={}}if(b2===b3){b4=this;--b3}for(;b3<b2;b3++){if((b8=arguments[b3])!=null){for(b1 in b8){bZ=b4[b1];b0=b8[b1];if(b4===b0){continue}if(b7&&b0&&(bE.isPlainObject(b0)||(b5=bE.isArray(b0)))){if(b5){b5=false;b6=bZ&&bE.isArray(bZ)?bZ:[]}else{b6=bZ&&bE.isPlainObject(bZ)?bZ:{}}b4[b1]=bE.extend(b7,b6,b0)}else{if(b0!==M){b4[b1]=b0}}}}}return b4};bE.extend({noConflict:function(bZ){if(bb.$===bE){bb.$=bG}if(bZ&&bb.jQuery===bE){bb.jQuery=bU}return bE},isReady:false,readyWait:1,holdReady:function(bZ){if(bZ){bE.readyWait++}else{bE.ready(true)}},ready:function(bZ){if((bZ===true&&!--bE.readyWait)||(bZ!==true&&!bE.isReady)){if(!at.body){return setTimeout(bE.ready,1)}bE.isReady=true;if(bZ!==true&&--bE.readyWait>0){return}bB.resolveWith(at,[bE]);if(bE.fn.trigger){bE(at).trigger("ready").unbind("ready")}}},bindReady:function(){if(bB){return}bB=bE._Deferred();if(at.readyState==="complete"){return setTimeout(bE.ready,1)}if(at.addEventListener){at.addEventListener("DOMContentLoaded",e,false);bb.addEventListener("load",bE.ready,false)}else{if(at.attachEvent){at.attachEvent("onreadystatechange",e);bb.attachEvent("onload",bE.ready);var bZ=false;try{bZ=bb.frameElement==null}catch(b0){}if(at.documentElement.doScroll&&bZ){bv()}}}},isFunction:function(bZ){return bE.type(bZ)==="function"},isArray:Array.isArray||function(bZ){return bE.type(bZ)==="array"},isWindow:function(bZ){return bZ&&typeof bZ==="object"&&"setInterval" in bZ},isNaN:function(bZ){return bZ==null||!bH.test(bZ)||isNaN(bZ)},type:function(bZ){return bZ==null?String(bZ):bw[bL.call(bZ)]||"object"},isPlainObject:function(b0){if(!b0||bE.type(b0)!=="object"||b0.nodeType||bE.isWindow(b0)){return false}if(b0.constructor&&!bF.call(b0,"constructor")&&!bF.call(b0.constructor.prototype,"isPrototypeOf")){return false}var bZ;for(bZ in b0){}return bZ===M||bF.call(b0,bZ)},isEmptyObject:function(b0){for(var bZ in b0){return false}return true},error:function(bZ){throw bZ},parseJSON:function(bZ){if(typeof bZ!=="string"||!bZ){return null}bZ=bE.trim(bZ);if(bb.JSON&&bb.JSON.parse){return bb.JSON.parse(bZ)}if(bN.test(bZ.replace(bW,"@").replace(bP,"]").replace(bJ,""))){return(new Function("return "+bZ))()}bE.error("Invalid JSON: "+bZ)},parseXML:function(b1,bZ,b0){if(bb.DOMParser){b0=new DOMParser();bZ=b0.parseFromString(b1,"text/xml")}else{bZ=new ActiveXObject("Microsoft.XMLDOM");bZ.async="false";bZ.loadXML(b1)}b0=bZ.documentElement;if(!b0||!b0.nodeName||b0.nodeName==="parsererror"){bE.error("Invalid XML: "+b1)}return bZ},noop:function(){},globalEval:function(bZ){if(bZ&&bM.test(bZ)){(bb.execScript||function(b0){bb["eval"].call(bb,b0)})(bZ)}},camelCase:function(bZ){return bZ.replace(bA,bT)},nodeName:function(b0,bZ){return b0.nodeName&&b0.nodeName.toUpperCase()===bZ.toUpperCase()},each:function(b2,b5,b1){var b0,b3=0,b4=b2.length,bZ=b4===M||bE.isFunction(b2);if(b1){if(bZ){for(b0 in b2){if(b5.apply(b2[b0],b1)===false){break}}}else{for(;b3<b4;){if(b5.apply(b2[b3++],b1)===false){break}}}}else{if(bZ){for(b0 in b2){if(b5.call(b2[b0],b0,b2[b0])===false){break}}}else{for(;b3<b4;){if(b5.call(b2[b3],b3,b2[b3++])===false){break}}}}return b2},trim:bO?function(bZ){return bZ==null?"":bO.call(bZ)}:function(bZ){return bZ==null?"":bZ.toString().replace(bI,"").replace(bD,"")},makeArray:function(b2,b0){var bZ=b0||[];if(b2!=null){var b1=bE.type(b2);if(b2.length==null||b1==="string"||b1==="function"||b1==="regexp"||bE.isWindow(b2)){by.call(bZ,b2)}else{bE.merge(bZ,b2)}}return bZ},inArray:function(b1,b2){if(bu){return bu.call(b2,b1)}for(var bZ=0,b0=b2.length;bZ<b0;bZ++){if(b2[bZ]===b1){return bZ}}return -1},merge:function(b3,b1){var b2=b3.length,b0=0;if(typeof b1.length==="number"){for(var bZ=b1.length;b0<bZ;b0++){b3[b2++]=b1[b0]}}else{while(b1[b0]!==M){b3[b2++]=b1[b0++]}}b3.length=b2;return b3},grep:function(b0,b5,bZ){var b1=[],b4;bZ=!!bZ;for(var b2=0,b3=b0.length;b2<b3;b2++){b4=!!b5(b0[b2],b2);if(bZ!==b4){b1.push(b0[b2])}}return b1},map:function(bZ,b6,b7){var b4,b5,b3=[],b1=0,b0=bZ.length,b2=bZ instanceof bE||b0!==M&&typeof b0==="number"&&((b0>0&&bZ[0]&&bZ[b0-1])||b0===0||bE.isArray(bZ));if(b2){for(;b1<b0;b1++){b4=b6(bZ[b1],b1,b7);if(b4!=null){b3[b3.length]=b4}}}else{for(b5 in bZ){b4=b6(bZ[b5],b5,b7);if(b4!=null){b3[b3.length]=b4}}}return b3.concat.apply([],b3)},guid:1,proxy:function(b3,b2){if(typeof b2==="string"){var b1=b3[b2];b2=b3;b3=b1}if(!bE.isFunction(b3)){return M}var bZ=bK.call(arguments,2),b0=function(){return b3.apply(b2,bZ.concat(bK.call(arguments)))};b0.guid=b3.guid=b3.guid||b0.guid||bE.guid++;return b0},access:function(bZ,b7,b5,b1,b4,b6){var b0=bZ.length;if(typeof b7==="object"){for(var b2 in b7){bE.access(bZ,b2,b7[b2],b1,b4,b5)}return bZ}if(b5!==M){b1=!b6&&b1&&bE.isFunction(b5);for(var b3=0;b3<b0;b3++){b4(bZ[b3],b7,b1?b5.call(bZ[b3],b3,b4(bZ[b3],b7)):b5,b6)}return bZ}return b0?b4(bZ[0],b7):M},now:function(){return(new Date()).getTime()},uaMatch:function(b0){b0=b0.toLowerCase();var bZ=bx.exec(b0)||bR.exec(b0)||bQ.exec(b0)||b0.indexOf("compatible")<0&&bS.exec(b0)||[];return{browser:bZ[1]||"",version:bZ[2]||"0"}},sub:function(){function bZ(b2,b3){return new bZ.fn.init(b2,b3)}bE.extend(true,bZ,this);bZ.superclass=this;bZ.fn=bZ.prototype=this();bZ.fn.constructor=bZ;bZ.sub=this.sub;bZ.fn.init=function b1(b2,b3){if(b3&&b3 instanceof bE&&!(b3 instanceof bZ)){b3=bZ(b3)}return bE.fn.init.call(this,b2,b3,b0)};bZ.fn.init.prototype=bZ.fn;var b0=bZ(at);return bZ},browser:{}});bE.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(b0,bZ){bw["[object "+bZ+"]"]=bZ.toLowerCase()});bV=bE.uaMatch(bX);if(bV.browser){bE.browser[bV.browser]=true;bE.browser.version=bV.version}if(bE.browser.webkit){bE.browser.safari=true}if(bM.test("\xA0")){bI=/^[\s\xA0]+/;bD=/[\s\xA0]+$/}bC=bE(at);if(at.addEventListener){e=function(){at.removeEventListener("DOMContentLoaded",e,false);bE.ready()}}else{if(at.attachEvent){e=function(){if(at.readyState==="complete"){at.detachEvent("onreadystatechange",e);bE.ready()}}}}function bv(){if(bE.isReady){return}try{at.documentElement.doScroll("left")}catch(bZ){setTimeout(bv,1);return}bE.ready()}return bE})();var a="done fail isResolved isRejected promise then always pipe".split(" "),aH=[].slice;b.extend({_Deferred:function(){var bw=[],bx,bu,bv,e={done:function(){if(!bv){var bz=arguments,bA,bD,bC,bB,by;if(bx){by=bx;bx=0}for(bA=0,bD=bz.length;bA<bD;bA++){bC=bz[bA];bB=b.type(bC);if(bB==="array"){e.done.apply(e,bC)}else{if(bB==="function"){bw.push(bC)}}}if(by){e.resolveWith(by[0],by[1])}}return this},resolveWith:function(bz,by){if(!bv&&!bx&&!bu){by=by||[];bu=1;try{while(bw[0]){bw.shift().apply(bz,by)}}finally{bx=[bz,by];bu=0}}return this},resolve:function(){e.resolveWith(this,arguments);return this},isResolved:function(){return !!(bu||bx)},cancel:function(){bv=1;bw=[];return this}};return e},Deferred:function(bu){var e=b._Deferred(),bw=b._Deferred(),bv;b.extend(e,{then:function(by,bx){e.done(by).fail(bx);return this},always:function(){return e.done.apply(e,arguments).fail.apply(this,arguments)},fail:bw.done,rejectWith:bw.resolveWith,reject:bw.resolve,isRejected:bw.isResolved,pipe:function(by,bx){return b.Deferred(function(bz){b.each({done:[by,"resolve"],fail:[bx,"reject"]},function(bB,bE){var bA=bE[0],bD=bE[1],bC;if(b.isFunction(bA)){e[bB](function(){bC=bA.apply(this,arguments);if(bC&&b.isFunction(bC.promise)){bC.promise().then(bz.resolve,bz.reject)}else{bz[bD](bC)}})}else{e[bB](bz[bD])}})}).promise()},promise:function(by){if(by==null){if(bv){return bv}bv=by={}}var bx=a.length;while(bx--){by[a[bx]]=e[a[bx]]}return by}});e.done(bw.cancel).fail(e.cancel);delete e.cancel;if(bu){bu.call(e,e)}return e},when:function(bz){var bu=arguments,bv=0,by=bu.length,bx=by,e=by<=1&&bz&&b.isFunction(bz.promise)?bz:b.Deferred();function bw(bA){return function(bB){bu[bA]=arguments.length>1?aH.call(arguments,0):bB;if(!(--bx)){e.resolveWith(e,aH.call(bu,0))}}}if(by>1){for(;bv<by;bv++){if(bu[bv]&&b.isFunction(bu[bv].promise)){bu[bv].promise().then(bw(bv),e.reject)}else{--bx}}if(!bx){e.resolveWith(e,bu)}}else{if(e!==bz){e.resolveWith(e,by?[bz]:[])}}return e.promise()}});b.support=(function(){var bE=at.createElement("div"),bL=at.documentElement,bx,bM,bF,bv,bD,by,bB,bu,bC,bG,bA,bK,bI,bw,bz,bH,bN;bE.setAttribute("className","t");bE.innerHTML="   <link/><table></table><a href='/a' style='top:1px;float:left;opacity:.55;'>a</a><input type='checkbox'/>";bx=bE.getElementsByTagName("*");bM=bE.getElementsByTagName("a")[0];if(!bx||!bx.length||!bM){return{}}bF=at.createElement("select");bv=bF.appendChild(at.createElement("option"));bD=bE.getElementsByTagName("input")[0];bB={leadingWhitespace:(bE.firstChild.nodeType===3),tbody:!bE.getElementsByTagName("tbody").length,htmlSerialize:!!bE.getElementsByTagName("link").length,style:/top/.test(bM.getAttribute("style")),hrefNormalized:(bM.getAttribute("href")==="/a"),opacity:/^0.55$/.test(bM.style.opacity),cssFloat:!!bM.style.cssFloat,checkOn:(bD.value==="on"),optSelected:bv.selected,getSetAttribute:bE.className!=="t",submitBubbles:true,changeBubbles:true,focusinBubbles:false,deleteExpando:true,noCloneEvent:true,inlineBlockNeedsLayout:false,shrinkWrapBlocks:false,reliableMarginRight:true};bD.checked=true;bB.noCloneChecked=bD.cloneNode(true).checked;bF.disabled=true;bB.optDisabled=!bv.disabled;try{delete bE.test}catch(bJ){bB.deleteExpando=false}if(!bE.addEventListener&&bE.attachEvent&&bE.fireEvent){bE.attachEvent("onclick",function(){bB.noCloneEvent=false});bE.cloneNode(true).fireEvent("onclick")}bD=at.createElement("input");bD.value="t";bD.setAttribute("type","radio");bB.radioValue=bD.value==="t";bD.setAttribute("checked","checked");bE.appendChild(bD);bu=at.createDocumentFragment();bu.appendChild(bE.firstChild);bB.checkClone=bu.cloneNode(true).cloneNode(true).lastChild.checked;bE.innerHTML="";bE.style.width=bE.style.paddingLeft="1px";bC=at.getElementsByTagName("body")[0];bA=at.createElement(bC?"div":"body");bK={visibility:"hidden",width:0,height:0,border:0,margin:0};if(bC){b.extend(bK,{position:"absolute",left:-1000,top:-1000})}for(bH in bK){bA.style[bH]=bK[bH]}bA.appendChild(bE);bG=bC||bL;bG.insertBefore(bA,bG.firstChild);bB.appendChecked=bD.checked;bB.boxModel=bE.offsetWidth===2;if("zoom" in bE.style){bE.style.display="inline";bE.style.zoom=1;bB.inlineBlockNeedsLayout=(bE.offsetWidth===2);bE.style.display="";bE.innerHTML="<div style='width:4px;'></div>";bB.shrinkWrapBlocks=(bE.offsetWidth!==2)}bE.innerHTML="<table><tr><td style='padding:0;border:0;display:none'></td><td>t</td></tr></table>";bI=bE.getElementsByTagName("td");bN=(bI[0].offsetHeight===0);bI[0].style.display="";bI[1].style.display="none";bB.reliableHiddenOffsets=bN&&(bI[0].offsetHeight===0);bE.innerHTML="";if(at.defaultView&&at.defaultView.getComputedStyle){by=at.createElement("div");by.style.width="0";by.style.marginRight="0";bE.appendChild(by);bB.reliableMarginRight=(parseInt((at.defaultView.getComputedStyle(by,null)||{marginRight:0}).marginRight,10)||0)===0}bA.innerHTML="";bG.removeChild(bA);if(bE.attachEvent){for(bH in {submit:1,change:1,focusin:1}){bz="on"+bH;bN=(bz in bE);if(!bN){bE.setAttribute(bz,"return;");bN=(typeof bE[bz]==="function")}bB[bH+"Bubbles"]=bN}}bA=bu=bF=bv=bC=by=bE=bD=null;return bB})();b.boxModel=b.support.boxModel;var aO=/^(?:\{.*\}|\[.*\])$/,ay=/([a-z])([A-Z])/g;b.extend({cache:{},uuid:0,expando:"jQuery"+(b.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:true,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:true},hasData:function(e){e=e.nodeType?b.cache[e[b.expando]]:e[b.expando];return !!e&&!V(e)},data:function(bw,bu,by,bx){if(!b.acceptData(bw)){return}var bB=b.expando,bA=typeof bu==="string",bz,bC=bw.nodeType,e=bC?b.cache:bw,bv=bC?bw[b.expando]:bw[b.expando]&&b.expando;if((!bv||(bx&&bv&&!e[bv][bB]))&&bA&&by===M){return}if(!bv){if(bC){bw[b.expando]=bv=++b.uuid}else{bv=b.expando}}if(!e[bv]){e[bv]={};if(!bC){e[bv].toJSON=b.noop}}if(typeof bu==="object"||typeof bu==="function"){if(bx){e[bv][bB]=b.extend(e[bv][bB],bu)}else{e[bv]=b.extend(e[bv],bu)}}bz=e[bv];if(bx){if(!bz[bB]){bz[bB]={}}bz=bz[bB]}if(by!==M){bz[b.camelCase(bu)]=by}if(bu==="events"&&!bz[bu]){return bz[bB]&&bz[bB].events}return bA?bz[b.camelCase(bu)]||bz[bu]:bz},removeData:function(bx,bv,by){if(!b.acceptData(bx)){return}var bA=b.expando,bB=bx.nodeType,bu=bB?b.cache:bx,bw=bB?bx[b.expando]:b.expando;if(!bu[bw]){return}if(bv){var bz=by?bu[bw][bA]:bu[bw];if(bz){delete bz[bv];if(!V(bz)){return}}}if(by){delete bu[bw][bA];if(!V(bu[bw])){return}}var e=bu[bw][bA];if(b.support.deleteExpando||bu!=bb){delete bu[bw]}else{bu[bw]=null}if(e){bu[bw]={};if(!bB){bu[bw].toJSON=b.noop}bu[bw][bA]=e}else{if(bB){if(b.support.deleteExpando){delete bx[b.expando]}else{if(bx.removeAttribute){bx.removeAttribute(b.expando)}else{bx[b.expando]=null}}}}},_data:function(bu,e,bv){return b.data(bu,e,bv,true)},acceptData:function(bu){if(bu.nodeName){var e=b.noData[bu.nodeName.toLowerCase()];if(e){return !(e===true||bu.getAttribute("classid")!==e)}}return true}});b.fn.extend({data:function(bx,bz){var by=null;if(typeof bx==="undefined"){if(this.length){by=b.data(this[0]);if(this[0].nodeType===1){var e=this[0].attributes,bv;for(var bw=0,bu=e.length;bw<bu;bw++){bv=e[bw].name;if(bv.indexOf("data-")===0){bv=b.camelCase(bv.substring(5));a4(this[0],bv,by[bv])}}}}return by}else{if(typeof bx==="object"){return this.each(function(){b.data(this,bx)})}}var bA=bx.split(".");bA[1]=bA[1]?"."+bA[1]:"";if(bz===M){by=this.triggerHandler("getData"+bA[1]+"!",[bA[0]]);if(by===M&&this.length){by=b.data(this[0],bx);by=a4(this[0],bx,by)}return by===M&&bA[1]?this.data(bA[0]):by}else{return this.each(function(){var bC=b(this),bB=[bA[0],bz];bC.triggerHandler("setData"+bA[1]+"!",bB);b.data(this,bx,bz);bC.triggerHandler("changeData"+bA[1]+"!",bB)})}},removeData:function(e){return this.each(function(){b.removeData(this,e)})}});function a4(bw,bv,bx){if(bx===M&&bw.nodeType===1){var bu="data-"+bv.replace(ay,"$1-$2").toLowerCase();bx=bw.getAttribute(bu);if(typeof bx==="string"){try{bx=bx==="true"?true:bx==="false"?false:bx==="null"?null:!b.isNaN(bx)?parseFloat(bx):aO.test(bx)?b.parseJSON(bx):bx}catch(by){}b.data(bw,bv,bx)}else{bx=M}}return bx}function V(bu){for(var e in bu){if(e!=="toJSON"){return false}}return true}function bg(bx,bw,bz){var bv=bw+"defer",bu=bw+"queue",e=bw+"mark",by=b.data(bx,bv,M,true);if(by&&(bz==="queue"||!b.data(bx,bu,M,true))&&(bz==="mark"||!b.data(bx,e,M,true))){setTimeout(function(){if(!b.data(bx,bu,M,true)&&!b.data(bx,e,M,true)){b.removeData(bx,bv,true);by.resolve()}},0)}}b.extend({_mark:function(bu,e){if(bu){e=(e||"fx")+"mark";b.data(bu,e,(b.data(bu,e,M,true)||0)+1,true)}},_unmark:function(bx,bw,bu){if(bx!==true){bu=bw;bw=bx;bx=false}if(bw){bu=bu||"fx";var e=bu+"mark",bv=bx?0:((b.data(bw,e,M,true)||1)-1);if(bv){b.data(bw,e,bv,true)}else{b.removeData(bw,e,true);bg(bw,bu,"mark")}}},queue:function(bu,e,bw){if(bu){e=(e||"fx")+"queue";var bv=b.data(bu,e,M,true);if(bw){if(!bv||b.isArray(bw)){bv=b.data(bu,e,b.makeArray(bw),true)}else{bv.push(bw)}}return bv||[]}},dequeue:function(bw,bv){bv=bv||"fx";var e=b.queue(bw,bv),bu=e.shift(),bx;if(bu==="inprogress"){bu=e.shift()}if(bu){if(bv==="fx"){e.unshift("inprogress")}bu.call(bw,function(){b.dequeue(bw,bv)})}if(!e.length){b.removeData(bw,bv+"queue",true);bg(bw,bv,"queue")}}});b.fn.extend({queue:function(e,bu){if(typeof e!=="string"){bu=e;e="fx"}if(bu===M){return b.queue(this[0],e)}return this.each(function(){var bv=b.queue(this,e,bu);if(e==="fx"&&bv[0]!=="inprogress"){b.dequeue(this,e)}})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(bu,e){bu=b.fx?b.fx.speeds[bu]||bu:bu;e=e||"fx";return this.queue(e,function(){var bv=this;setTimeout(function(){b.dequeue(bv,e)},bu)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(bC,bv){if(typeof bC!=="string"){bv=bC;bC=M}bC=bC||"fx";var e=b.Deferred(),bu=this,bx=bu.length,bA=1,by=bC+"defer",bz=bC+"queue",bB=bC+"mark",bw;function bD(){if(!(--bA)){e.resolveWith(bu,[bu])}}while(bx--){if((bw=b.data(bu[bx],by,M,true)||(b.data(bu[bx],bz,M,true)||b.data(bu[bx],bB,M,true))&&b.data(bu[bx],by,b._Deferred(),true))){bA++;bw.done(bD)}}bD();return e.promise()}});var aM=/[\n\t\r]/g,ae=/\s+/,aQ=/\r/g,g=/^(?:button|input)$/i,F=/^(?:button|input|object|select|textarea)$/i,n=/^a(?:rea)?$/i,am=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,a7=/\:|^on/,a2,aW;b.fn.extend({attr:function(e,bu){return b.access(this,e,bu,true,b.attr)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,bu){return b.access(this,e,bu,true,b.prop)},removeProp:function(e){e=b.propFix[e]||e;return this.each(function(){try{this[e]=M;delete this[e]}catch(bu){}})},addClass:function(bx){var bz,bv,bu,bw,by,bA,e;if(b.isFunction(bx)){return this.each(function(bB){b(this).addClass(bx.call(this,bB,this.className))})}if(bx&&typeof bx==="string"){bz=bx.split(ae);for(bv=0,bu=this.length;bv<bu;bv++){bw=this[bv];if(bw.nodeType===1){if(!bw.className&&bz.length===1){bw.className=bx}else{by=" "+bw.className+" ";for(bA=0,e=bz.length;bA<e;bA++){if(!~by.indexOf(" "+bz[bA]+" ")){by+=bz[bA]+" "}}bw.className=b.trim(by)}}}}return this},removeClass:function(by){var bz,bv,bu,bx,bw,bA,e;if(b.isFunction(by)){return this.each(function(bB){b(this).removeClass(by.call(this,bB,this.className))})}if((by&&typeof by==="string")||by===M){bz=(by||"").split(ae);for(bv=0,bu=this.length;bv<bu;bv++){bx=this[bv];if(bx.nodeType===1&&bx.className){if(by){bw=(" "+bx.className+" ").replace(aM," ");for(bA=0,e=bz.length;bA<e;bA++){bw=bw.replace(" "+bz[bA]+" "," ")}bx.className=b.trim(bw)}else{bx.className=""}}}}return this},toggleClass:function(bw,bu){var bv=typeof bw,e=typeof bu==="boolean";if(b.isFunction(bw)){return this.each(function(bx){b(this).toggleClass(bw.call(this,bx,this.className,bu),bu)})}return this.each(function(){if(bv==="string"){var bz,by=0,bx=b(this),bA=bu,bB=bw.split(ae);while((bz=bB[by++])){bA=e?bA:!bx.hasClass(bz);bx[bA?"addClass":"removeClass"](bz)}}else{if(bv==="undefined"||bv==="boolean"){if(this.className){b._data(this,"__className__",this.className)}this.className=this.className||bw===false?"":b._data(this,"__className__")||""}}})},hasClass:function(e){var bw=" "+e+" ";for(var bv=0,bu=this.length;bv<bu;bv++){if((" "+this[bv].className+" ").replace(aM," ").indexOf(bw)>-1){return true}}return false},val:function(bw){var e,bu,bv=this[0];if(!arguments.length){if(bv){e=b.valHooks[bv.nodeName.toLowerCase()]||b.valHooks[bv.type];if(e&&"get" in e&&(bu=e.get(bv,"value"))!==M){return bu}bu=bv.value;return typeof bu==="string"?bu.replace(aQ,""):bu==null?"":bu}return M}var bx=b.isFunction(bw);return this.each(function(bz){var by=b(this),bA;if(this.nodeType!==1){return}if(bx){bA=bw.call(this,bz,by.val())}else{bA=bw}if(bA==null){bA=""}else{if(typeof bA==="number"){bA+=""}else{if(b.isArray(bA)){bA=b.map(bA,function(bB){return bB==null?"":bB+""})}}}e=b.valHooks[this.nodeName.toLowerCase()]||b.valHooks[this.type];if(!e||!("set" in e)||e.set(this,bA,"value")===M){this.value=bA}})}});b.extend({valHooks:{option:{get:function(e){var bu=e.attributes.value;return !bu||bu.specified?e.value:e.text}},select:{get:function(e){var bz,bx=e.selectedIndex,bA=[],bB=e.options,bw=e.type==="select-one";if(bx<0){return null}for(var bu=bw?bx:0,by=bw?bx+1:bB.length;bu<by;bu++){var bv=bB[bu];if(bv.selected&&(b.support.optDisabled?!bv.disabled:bv.getAttribute("disabled")===null)&&(!bv.parentNode.disabled||!b.nodeName(bv.parentNode,"optgroup"))){bz=b(bv).val();if(bw){return bz}bA.push(bz)}}if(bw&&!bA.length&&bB.length){return b(bB[bx]).val()}return bA},set:function(bu,bv){var e=b.makeArray(bv);b(bu).find("option").each(function(){this.selected=b.inArray(b(this).val(),e)>=0});if(!e.length){bu.selectedIndex=-1}return e}}},attrFn:{val:true,css:true,html:true,text:true,data:true,width:true,height:true,offset:true},attrFix:{tabindex:"tabIndex"},attr:function(bz,bw,bA,by){var bu=bz.nodeType;if(!bz||bu===3||bu===8||bu===2){return M}if(by&&bw in b.attrFn){return b(bz)[bw](bA)}if(!("getAttribute" in bz)){return b.prop(bz,bw,bA)}var bv,e,bx=bu!==1||!b.isXMLDoc(bz);if(bx){bw=b.attrFix[bw]||bw;e=b.attrHooks[bw];if(!e){if(am.test(bw)){e=aW}else{if(a2&&bw!=="className"&&(b.nodeName(bz,"form")||a7.test(bw))){e=a2}}}}if(bA!==M){if(bA===null){b.removeAttr(bz,bw);return M}else{if(e&&"set" in e&&bx&&(bv=e.set(bz,bA,bw))!==M){return bv}else{bz.setAttribute(bw,""+bA);return bA}}}else{if(e&&"get" in e&&bx&&(bv=e.get(bz,bw))!==null){return bv}else{bv=bz.getAttribute(bw);return bv===null?M:bv}}},removeAttr:function(bu,e){var bv;if(bu.nodeType===1){e=b.attrFix[e]||e;if(b.support.getSetAttribute){bu.removeAttribute(e)}else{b.attr(bu,e,"");bu.removeAttributeNode(bu.getAttributeNode(e))}if(am.test(e)&&(bv=b.propFix[e]||e) in bu){bu[bv]=false}}},attrHooks:{type:{set:function(e,bu){if(g.test(e.nodeName)&&e.parentNode){b.error("type property can't be changed")}else{if(!b.support.radioValue&&bu==="radio"&&b.nodeName(e,"input")){var bv=e.value;e.setAttribute("type",bu);if(bv){e.value=bv}return bu}}}},tabIndex:{get:function(bu){var e=bu.getAttributeNode("tabIndex");return e&&e.specified?parseInt(e.value,10):F.test(bu.nodeName)||n.test(bu.nodeName)&&bu.href?0:M}},value:{get:function(bu,e){if(a2&&b.nodeName(bu,"button")){return a2.get(bu,e)}return e in bu?bu.value:null},set:function(bu,bv,e){if(a2&&b.nodeName(bu,"button")){return a2.set(bu,bv,e)}bu.value=bv}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(by,bw,bz){var bu=by.nodeType;if(!by||bu===3||bu===8||bu===2){return M}var bv,e,bx=bu!==1||!b.isXMLDoc(by);if(bx){bw=b.propFix[bw]||bw;e=b.propHooks[bw]}if(bz!==M){if(e&&"set" in e&&(bv=e.set(by,bz,bw))!==M){return bv}else{return(by[bw]=bz)}}else{if(e&&"get" in e&&(bv=e.get(by,bw))!==M){return bv}else{return by[bw]}}},propHooks:{}});aW={get:function(bu,e){return b.prop(bu,e)?e.toLowerCase():M},set:function(bu,bw,e){var bv;if(bw===false){b.removeAttr(bu,e)}else{bv=b.propFix[e]||e;if(bv in bu){bu[bv]=true}bu.setAttribute(e,e.toLowerCase())}return e}};if(!b.support.getSetAttribute){b.attrFix=b.propFix;a2=b.attrHooks.name=b.attrHooks.title=b.valHooks.button={get:function(bv,bu){var e;e=bv.getAttributeNode(bu);return e&&e.nodeValue!==""?e.nodeValue:M},set:function(bv,bw,bu){var e=bv.getAttributeNode(bu);if(e){e.nodeValue=bw;return bw}}};b.each(["width","height"],function(bu,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{set:function(bv,bw){if(bw===""){bv.setAttribute(e,"auto");return bw}}})})}if(!b.support.hrefNormalized){b.each(["href","src","width","height"],function(bu,e){b.attrHooks[e]=b.extend(b.attrHooks[e],{get:function(bw){var bv=bw.getAttribute(e,2);return bv===null?M:bv}})})}if(!b.support.style){b.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||M},set:function(e,bu){return(e.style.cssText=""+bu)}}}if(!b.support.optSelected){b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(bu){var e=bu.parentNode;if(e){e.selectedIndex;if(e.parentNode){e.parentNode.selectedIndex}}}})}if(!b.support.checkOn){b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return e.getAttribute("value")===null?"on":e.value}}})}b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,bu){if(b.isArray(bu)){return(e.checked=b.inArray(b(e).val(),bu)>=0)}}})});var aY=/\.(.*)$/,bd=/^(?:textarea|input|select)$/i,P=/\./g,bh=/ /g,aE=/[^\w\s.|`]/g,I=function(e){return e.replace(aE,"\\$&")};b.event={add:function(bw,bA,bF,by){if(bw.nodeType===3||bw.nodeType===8){return}if(bF===false){bF=bj}else{if(!bF){return}}var bu,bE;if(bF.handler){bu=bF;bF=bu.handler}if(!bF.guid){bF.guid=b.guid++}var bB=b._data(bw);if(!bB){return}var bG=bB.events,bz=bB.handle;if(!bG){bB.events=bG={}}if(!bz){bB.handle=bz=function(bH){return typeof b!=="undefined"&&(!bH||b.event.triggered!==bH.type)?b.event.handle.apply(bz.elem,arguments):M}}bz.elem=bw;bA=bA.split(" ");var bD,bx=0,e;while((bD=bA[bx++])){bE=bu?b.extend({},bu):{handler:bF,data:by};if(bD.indexOf(".")>-1){e=bD.split(".");bD=e.shift();bE.namespace=e.slice(0).sort().join(".")}else{e=[];bE.namespace=""}bE.type=bD;if(!bE.guid){bE.guid=bF.guid}var bv=bG[bD],bC=b.event.special[bD]||{};if(!bv){bv=bG[bD]=[];if(!bC.setup||bC.setup.call(bw,by,e,bz)===false){if(bw.addEventListener){bw.addEventListener(bD,bz,false)}else{if(bw.attachEvent){bw.attachEvent("on"+bD,bz)}}}}if(bC.add){bC.add.call(bw,bE);if(!bE.handler.guid){bE.handler.guid=bF.guid}}bv.push(bE);b.event.global[bD]=true}bw=null},global:{},remove:function(bI,bD,bv,bz){if(bI.nodeType===3||bI.nodeType===8){return}if(bv===false){bv=bj}var bL,by,bA,bF,bG=0,bw,bB,bE,bx,bC,e,bK,bH=b.hasData(bI)&&b._data(bI),bu=bH&&bH.events;if(!bH||!bu){return}if(bD&&bD.type){bv=bD.handler;bD=bD.type}if(!bD||typeof bD==="string"&&bD.charAt(0)==="."){bD=bD||"";for(by in bu){b.event.remove(bI,by+bD)}return}bD=bD.split(" ");while((by=bD[bG++])){bK=by;e=null;bw=by.indexOf(".")<0;bB=[];if(!bw){bB=by.split(".");by=bB.shift();bE=new RegExp("(^|\\.)"+b.map(bB.slice(0).sort(),I).join("\\.(?:.*\\.)?")+"(\\.|$)")}bC=bu[by];if(!bC){continue}if(!bv){for(bF=0;bF<bC.length;bF++){e=bC[bF];if(bw||bE.test(e.namespace)){b.event.remove(bI,bK,e.handler,bF);bC.splice(bF--,1)}}continue}bx=b.event.special[by]||{};for(bF=bz||0;bF<bC.length;bF++){e=bC[bF];if(bv.guid===e.guid){if(bw||bE.test(e.namespace)){if(bz==null){bC.splice(bF--,1)}if(bx.remove){bx.remove.call(bI,e)}}if(bz!=null){break}}}if(bC.length===0||bz!=null&&bC.length===1){if(!bx.teardown||bx.teardown.call(bI,bB)===false){b.removeEvent(bI,by,bH.handle)}bL=null;delete bu[by]}}if(b.isEmptyObject(bu)){var bJ=bH.handle;if(bJ){bJ.elem=null}delete bH.events;delete bH.handle;if(b.isEmptyObject(bH)){b.removeData(bI,M,true)}}},customEvent:{getData:true,setData:true,changeData:true},trigger:function(e,bA,by,bF){var bD=e.type||e,bv=[],bu;if(bD.indexOf("!")>=0){bD=bD.slice(0,-1);bu=true}if(bD.indexOf(".")>=0){bv=bD.split(".");bD=bv.shift();bv.sort()}if((!by||b.event.customEvent[bD])&&!b.event.global[bD]){return}e=typeof e==="object"?e[b.expando]?e:new b.Event(bD,e):new b.Event(bD);e.type=bD;e.exclusive=bu;e.namespace=bv.join(".");e.namespace_re=new RegExp("(^|\\.)"+bv.join("\\.(?:.*\\.)?")+"(\\.|$)");if(bF||!by){e.preventDefault();e.stopPropagation()}if(!by){b.each(b.cache,function(){var bH=b.expando,bG=this[bH];if(bG&&bG.events&&bG.events[bD]){b.event.trigger(e,bA,bG.handle.elem)}});return}if(by.nodeType===3||by.nodeType===8){return}e.result=M;e.target=by;bA=bA!=null?b.makeArray(bA):[];bA.unshift(e);var bE=by,bw=bD.indexOf(":")<0?"on"+bD:"";do{var bB=b._data(bE,"handle");e.currentTarget=bE;if(bB){bB.apply(bE,bA)}if(bw&&b.acceptData(bE)&&bE[bw]&&bE[bw].apply(bE,bA)===false){e.result=false;e.preventDefault()}bE=bE.parentNode||bE.ownerDocument||bE===e.target.ownerDocument&&bb}while(bE&&!e.isPropagationStopped());if(!e.isDefaultPrevented()){var bx,bC=b.event.special[bD]||{};if((!bC._default||bC._default.call(by.ownerDocument,e)===false)&&!(bD==="click"&&b.nodeName(by,"a"))&&b.acceptData(by)){try{if(bw&&by[bD]){bx=by[bw];if(bx){by[bw]=null}b.event.triggered=bD;by[bD]()}}catch(bz){}if(bx){by[bw]=bx}b.event.triggered=M}}return e.result},handle:function(bA){bA=b.event.fix(bA||bb.event);var bu=((b._data(this,"events")||{})[bA.type]||[]).slice(0),bz=!bA.exclusive&&!bA.namespace,bx=Array.prototype.slice.call(arguments,0);bx[0]=bA;bA.currentTarget=this;for(var bw=0,e=bu.length;bw<e;bw++){var by=bu[bw];if(bz||bA.namespace_re.test(by.namespace)){bA.handler=by.handler;bA.data=by.data;bA.handleObj=by;var bv=by.handler.apply(this,bx);if(bv!==M){bA.result=bv;if(bv===false){bA.preventDefault();bA.stopPropagation()}}if(bA.isImmediatePropagationStopped()){break}}}return bA.result},props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode layerX layerY metaKey newValue offsetX offsetY pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target toElement view wheelDelta which".split(" "),fix:function(bx){if(bx[b.expando]){return bx}var bu=bx;bx=b.Event(bu);for(var bv=this.props.length,bz;bv;){bz=this.props[--bv];bx[bz]=bu[bz]}if(!bx.target){bx.target=bx.srcElement||at}if(bx.target.nodeType===3){bx.target=bx.target.parentNode}if(!bx.relatedTarget&&bx.fromElement){bx.relatedTarget=bx.fromElement===bx.target?bx.toElement:bx.fromElement}if(bx.pageX==null&&bx.clientX!=null){var bw=bx.target.ownerDocument||at,by=bw.documentElement,e=bw.body;bx.pageX=bx.clientX+(by&&by.scrollLeft||e&&e.scrollLeft||0)-(by&&by.clientLeft||e&&e.clientLeft||0);bx.pageY=bx.clientY+(by&&by.scrollTop||e&&e.scrollTop||0)-(by&&by.clientTop||e&&e.clientTop||0)}if(bx.which==null&&(bx.charCode!=null||bx.keyCode!=null)){bx.which=bx.charCode!=null?bx.charCode:bx.keyCode}if(!bx.metaKey&&bx.ctrlKey){bx.metaKey=bx.ctrlKey}if(!bx.which&&bx.button!==M){bx.which=(bx.button&1?1:(bx.button&2?3:(bx.button&4?2:0)))}return bx},guid:100000000,proxy:b.proxy,special:{ready:{setup:b.bindReady,teardown:b.noop},live:{add:function(e){b.event.add(this,r(e.origType,e.selector),b.extend({},e,{handler:ak,guid:e.handler.guid}))},remove:function(e){b.event.remove(this,r(e.origType,e.selector),e)}},beforeunload:{setup:function(bv,bu,e){if(b.isWindow(this)){this.onbeforeunload=e}},teardown:function(bu,e){if(this.onbeforeunload===e){this.onbeforeunload=null}}}}};b.removeEvent=at.removeEventListener?function(bu,e,bv){if(bu.removeEventListener){bu.removeEventListener(e,bv,false)}}:function(bu,e,bv){if(bu.detachEvent){bu.detachEvent("on"+e,bv)}};b.Event=function(bu,e){if(!this.preventDefault){return new b.Event(bu,e)}if(bu&&bu.type){this.originalEvent=bu;this.type=bu.type;this.isDefaultPrevented=(bu.defaultPrevented||bu.returnValue===false||bu.getPreventDefault&&bu.getPreventDefault())?j:bj}else{this.type=bu}if(e){b.extend(this,e)}this.timeStamp=b.now();this[b.expando]=true};function bj(){return false}function j(){return true}b.Event.prototype={preventDefault:function(){this.isDefaultPrevented=j;var bu=this.originalEvent;if(!bu){return}if(bu.preventDefault){bu.preventDefault()}else{bu.returnValue=false}},stopPropagation:function(){this.isPropagationStopped=j;var bu=this.originalEvent;if(!bu){return}if(bu.stopPropagation){bu.stopPropagation()}bu.cancelBubble=true},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=j;this.stopPropagation()},isDefaultPrevented:bj,isPropagationStopped:bj,isImmediatePropagationStopped:bj};var ad=function(bv){var bw=bv.relatedTarget,e=false,bu=bv.type;bv.type=bv.data;if(bw!==this){if(bw){e=b.contains(this,bw)}if(!e){b.event.handle.apply(this,arguments);bv.type=bu}}},aT=function(e){e.type=e.data;b.event.handle.apply(this,arguments)};b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(bu,e){b.event.special[bu]={setup:function(bv){b.event.add(this,e,bv&&bv.selector?aT:ad,bu)},teardown:function(bv){b.event.remove(this,e,bv&&bv.selector?aT:ad)}}});if(!b.support.submitBubbles){b.event.special.submit={setup:function(bu,e){if(!b.nodeName(this,"form")){b.event.add(this,"click.specialSubmit",function(bx){var bw=bx.target,bv=bw.type;if((bv==="submit"||bv==="image")&&b(bw).closest("form").length){aV("submit",this,arguments)}});b.event.add(this,"keypress.specialSubmit",function(bx){var bw=bx.target,bv=bw.type;if((bv==="text"||bv==="password")&&b(bw).closest("form").length&&bx.keyCode===13){aV("submit",this,arguments)}})}else{return false}},teardown:function(e){b.event.remove(this,".specialSubmit")}}}if(!b.support.changeBubbles){var bm,m=function(bu){var e=bu.type,bv=bu.value;if(e==="radio"||e==="checkbox"){bv=bu.checked}else{if(e==="select-multiple"){bv=bu.selectedIndex>-1?b.map(bu.options,function(bw){return bw.selected}).join("-"):""}else{if(b.nodeName(bu,"select")){bv=bu.selectedIndex}}}return bv},ab=function ab(bw){var bu=bw.target,bv,bx;if(!bd.test(bu.nodeName)||bu.readOnly){return}bv=b._data(bu,"_change_data");bx=m(bu);if(bw.type!=="focusout"||bu.type!=="radio"){b._data(bu,"_change_data",bx)}if(bv===M||bx===bv){return}if(bv!=null||bx){bw.type="change";bw.liveFired=M;b.event.trigger(bw,arguments[1],bu)}};b.event.special.change={filters:{focusout:ab,beforedeactivate:ab,click:function(bw){var bv=bw.target,bu=b.nodeName(bv,"input")?bv.type:"";if(bu==="radio"||bu==="checkbox"||b.nodeName(bv,"select")){ab.call(this,bw)}},keydown:function(bw){var bv=bw.target,bu=b.nodeName(bv,"input")?bv.type:"";if((bw.keyCode===13&&!b.nodeName(bv,"textarea"))||(bw.keyCode===32&&(bu==="checkbox"||bu==="radio"))||bu==="select-multiple"){ab.call(this,bw)}},beforeactivate:function(bv){var bu=bv.target;b._data(bu,"_change_data",m(bu))}},setup:function(bv,bu){if(this.type==="file"){return false}for(var e in bm){b.event.add(this,e+".specialChange",bm[e])}return bd.test(this.nodeName)},teardown:function(e){b.event.remove(this,".specialChange");return bd.test(this.nodeName)}};bm=b.event.special.change.filters;bm.focus=bm.beforeactivate}function aV(bu,bw,e){var bv=b.extend({},e[0]);bv.type=bu;bv.originalEvent={};bv.liveFired=M;b.event.handle.call(bw,bv);if(bv.isDefaultPrevented()){e[0].preventDefault()}}if(!b.support.focusinBubbles){b.each({focus:"focusin",blur:"focusout"},function(bw,e){var bu=0;b.event.special[e]={setup:function(){if(bu++===0){at.addEventListener(bw,bv,true)}},teardown:function(){if(--bu===0){at.removeEventListener(bw,bv,true)}}};function bv(bx){var by=b.event.fix(bx);by.type=e;by.originalEvent={};b.event.trigger(by,null,by.target);if(by.isDefaultPrevented()){bx.preventDefault()}}})}b.each(["bind","one"],function(bu,e){b.fn[e]=function(bA,bB,bz){var by;if(typeof bA==="object"){for(var bx in bA){this[e](bx,bB,bA[bx],bz)}return this}if(arguments.length===2||bB===false){bz=bB;bB=M}if(e==="one"){by=function(bC){b(this).unbind(bC,by);return bz.apply(this,arguments)};by.guid=bz.guid||b.guid++}else{by=bz}if(bA==="unload"&&e!=="one"){this.one(bA,bB,bz)}else{for(var bw=0,bv=this.length;bw<bv;bw++){b.event.add(this[bw],bA,by,bB)}}return this}});b.fn.extend({unbind:function(bx,bw){if(typeof bx==="object"&&!bx.preventDefault){for(var bv in bx){this.unbind(bv,bx[bv])}}else{for(var bu=0,e=this.length;bu<e;bu++){b.event.remove(this[bu],bx,bw)}}return this},delegate:function(e,bu,bw,bv){return this.live(bu,bw,bv,e)},undelegate:function(e,bu,bv){if(arguments.length===0){return this.unbind("live")}else{return this.die(bu,null,bv,e)}},trigger:function(e,bu){return this.each(function(){b.event.trigger(e,bu,this)})},triggerHandler:function(e,bu){if(this[0]){return b.event.trigger(e,bu,this[0],true)}},toggle:function(bw){var bu=arguments,e=bw.guid||b.guid++,bv=0,bx=function(by){var bz=(b.data(this,"lastToggle"+bw.guid)||0)%bv;b.data(this,"lastToggle"+bw.guid,bz+1);by.preventDefault();return bu[bz].apply(this,arguments)||false};bx.guid=e;while(bv<bu.length){bu[bv++].guid=e}return this.click(bx)},hover:function(e,bu){return this.mouseenter(e).mouseleave(bu||e)}});var aR={focus:"focusin",blur:"focusout",mouseenter:"mouseover",mouseleave:"mouseout"};b.each(["live","die"],function(bu,e){b.fn[e]=function(bE,bB,bG,bx){var bF,bC=0,bD,bw,bI,bz=bx||this.selector,bv=bx?this:b(this.context);if(typeof bE==="object"&&!bE.preventDefault){for(var bH in bE){bv[e](bH,bB,bE[bH],bz)}return this}if(e==="die"&&!bE&&bx&&bx.charAt(0)==="."){bv.unbind(bx);return this}if(bB===false||b.isFunction(bB)){bG=bB||bj;bB=M}bE=(bE||"").split(" ");while((bF=bE[bC++])!=null){bD=aY.exec(bF);bw="";if(bD){bw=bD[0];bF=bF.replace(aY,"")}if(bF==="hover"){bE.push("mouseenter"+bw,"mouseleave"+bw);continue}bI=bF;if(aR[bF]){bE.push(aR[bF]+bw);bF=bF+bw}else{bF=(aR[bF]||bF)+bw}if(e==="live"){for(var bA=0,by=bv.length;bA<by;bA++){b.event.add(bv[bA],"live."+r(bF,bz),{data:bB,selector:bz,handler:bG,origType:bF,origHandler:bG,preType:bI})}}else{bv.unbind("live."+r(bF,bz),bG)}}return this}});function ak(bE){var bB,bw,bK,by,e,bG,bD,bF,bC,bJ,bA,bz,bI,bH=[],bx=[],bu=b._data(this,"events");if(bE.liveFired===this||!bu||!bu.live||bE.target.disabled||bE.button&&bE.type==="click"){return}if(bE.namespace){bz=new RegExp("(^|\\.)"+bE.namespace.split(".").join("\\.(?:.*\\.)?")+"(\\.|$)")}bE.liveFired=this;var bv=bu.live.slice(0);for(bD=0;bD<bv.length;bD++){e=bv[bD];if(e.origType.replace(aY,"")===bE.type){bx.push(e.selector)}else{bv.splice(bD--,1)}}by=b(bE.target).closest(bx,bE.currentTarget);for(bF=0,bC=by.length;bF<bC;bF++){bA=by[bF];for(bD=0;bD<bv.length;bD++){e=bv[bD];if(bA.selector===e.selector&&(!bz||bz.test(e.namespace))&&!bA.elem.disabled){bG=bA.elem;bK=null;if(e.preType==="mouseenter"||e.preType==="mouseleave"){bE.type=e.preType;bK=b(bE.relatedTarget).closest(e.selector)[0];if(bK&&b.contains(bG,bK)){bK=bG}}if(!bK||bK!==bG){bH.push({elem:bG,handleObj:e,level:bA.level})}}}}for(bF=0,bC=bH.length;bF<bC;bF++){by=bH[bF];if(bw&&by.level>bw){break}bE.currentTarget=by.elem;bE.data=by.handleObj.data;bE.handleObj=by.handleObj;bI=by.handleObj.origHandler.apply(by.elem,arguments);if(bI===false||bE.isPropagationStopped()){bw=by.level;if(bI===false){bB=false}if(bE.isImmediatePropagationStopped()){break}}}return bB}function r(bu,e){return(bu&&bu!=="*"?bu+".":"")+e.replace(P,"`").replace(bh,"&")}b.each(("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error").split(" "),function(bu,e){b.fn[e]=function(bw,bv){if(bv==null){bv=bw;bw=null}return arguments.length>0?this.bind(e,bw,bv):this.trigger(e)};if(b.attrFn){b.attrFn[e]=true}});
/*!
 * Sizzle CSS Selector Engine
 *  Copyright 2011, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
(function(){var bE=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,bF=0,bI=Object.prototype.toString,bz=false,by=true,bG=/\\/g,bM=/\W/;[0,0].sort(function(){by=false;return 0});var bw=function(bR,e,bU,bV){bU=bU||[];e=e||at;var bX=e;if(e.nodeType!==1&&e.nodeType!==9){return[]}if(!bR||typeof bR!=="string"){return bU}var bO,bZ,b2,bN,bY,b1,b0,bT,bQ=true,bP=bw.isXML(e),bS=[],bW=bR;do{bE.exec("");bO=bE.exec(bW);if(bO){bW=bO[3];bS.push(bO[1]);if(bO[2]){bN=bO[3];break}}}while(bO);if(bS.length>1&&bA.exec(bR)){if(bS.length===2&&bB.relative[bS[0]]){bZ=bJ(bS[0]+bS[1],e)}else{bZ=bB.relative[bS[0]]?[e]:bw(bS.shift(),e);while(bS.length){bR=bS.shift();if(bB.relative[bR]){bR+=bS.shift()}bZ=bJ(bR,bZ)}}}else{if(!bV&&bS.length>1&&e.nodeType===9&&!bP&&bB.match.ID.test(bS[0])&&!bB.match.ID.test(bS[bS.length-1])){bY=bw.find(bS.shift(),e,bP);e=bY.expr?bw.filter(bY.expr,bY.set)[0]:bY.set[0]}if(e){bY=bV?{expr:bS.pop(),set:bC(bV)}:bw.find(bS.pop(),bS.length===1&&(bS[0]==="~"||bS[0]==="+")&&e.parentNode?e.parentNode:e,bP);bZ=bY.expr?bw.filter(bY.expr,bY.set):bY.set;if(bS.length>0){b2=bC(bZ)}else{bQ=false}while(bS.length){b1=bS.pop();b0=b1;if(!bB.relative[b1]){b1=""}else{b0=bS.pop()}if(b0==null){b0=e}bB.relative[b1](b2,b0,bP)}}else{b2=bS=[]}}if(!b2){b2=bZ}if(!b2){bw.error(b1||bR)}if(bI.call(b2)==="[object Array]"){if(!bQ){bU.push.apply(bU,b2)}else{if(e&&e.nodeType===1){for(bT=0;b2[bT]!=null;bT++){if(b2[bT]&&(b2[bT]===true||b2[bT].nodeType===1&&bw.contains(e,b2[bT]))){bU.push(bZ[bT])}}}else{for(bT=0;b2[bT]!=null;bT++){if(b2[bT]&&b2[bT].nodeType===1){bU.push(bZ[bT])}}}}}else{bC(b2,bU)}if(bN){bw(bN,bX,bU,bV);bw.uniqueSort(bU)}return bU};bw.uniqueSort=function(bN){if(bH){bz=by;bN.sort(bH);if(bz){for(var e=1;e<bN.length;e++){if(bN[e]===bN[e-1]){bN.splice(e--,1)}}}}return bN};bw.matches=function(e,bN){return bw(e,null,null,bN)};bw.matchesSelector=function(e,bN){return bw(bN,null,null,[e]).length>0};bw.find=function(bT,e,bU){var bS;if(!bT){return[]}for(var bP=0,bO=bB.order.length;bP<bO;bP++){var bQ,bR=bB.order[bP];if((bQ=bB.leftMatch[bR].exec(bT))){var bN=bQ[1];bQ.splice(1,1);if(bN.substr(bN.length-1)!=="\\"){bQ[1]=(bQ[1]||"").replace(bG,"");bS=bB.find[bR](bQ,e,bU);if(bS!=null){bT=bT.replace(bB.match[bR],"");break}}}}if(!bS){bS=typeof e.getElementsByTagName!=="undefined"?e.getElementsByTagName("*"):[]}return{set:bS,expr:bT}};bw.filter=function(bX,bW,b0,bQ){var bS,e,bO=bX,b2=[],bU=bW,bT=bW&&bW[0]&&bw.isXML(bW[0]);while(bX&&bW.length){for(var bV in bB.filter){if((bS=bB.leftMatch[bV].exec(bX))!=null&&bS[2]){var b1,bZ,bN=bB.filter[bV],bP=bS[1];e=false;bS.splice(1,1);if(bP.substr(bP.length-1)==="\\"){continue}if(bU===b2){b2=[]}if(bB.preFilter[bV]){bS=bB.preFilter[bV](bS,bU,b0,b2,bQ,bT);if(!bS){e=b1=true}else{if(bS===true){continue}}}if(bS){for(var bR=0;(bZ=bU[bR])!=null;bR++){if(bZ){b1=bN(bZ,bS,bR,bU);var bY=bQ^!!b1;if(b0&&b1!=null){if(bY){e=true}else{bU[bR]=false}}else{if(bY){b2.push(bZ);e=true}}}}}if(b1!==M){if(!b0){bU=b2}bX=bX.replace(bB.match[bV],"");if(!e){return[]}break}}}if(bX===bO){if(e==null){bw.error(bX)}else{break}}bO=bX}return bU};bw.error=function(e){throw"Syntax error, unrecognized expression: "+e};var bB=bw.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(bS,bN){var bP=typeof bN==="string",bR=bP&&!bM.test(bN),bT=bP&&!bR;if(bR){bN=bN.toLowerCase()}for(var bO=0,e=bS.length,bQ;bO<e;bO++){if((bQ=bS[bO])){while((bQ=bQ.previousSibling)&&bQ.nodeType!==1){}bS[bO]=bT||bQ&&bQ.nodeName.toLowerCase()===bN?bQ||false:bQ===bN}}if(bT){bw.filter(bN,bS,true)}},">":function(bS,bN){var bR,bQ=typeof bN==="string",bO=0,e=bS.length;if(bQ&&!bM.test(bN)){bN=bN.toLowerCase();for(;bO<e;bO++){bR=bS[bO];if(bR){var bP=bR.parentNode;bS[bO]=bP.nodeName.toLowerCase()===bN?bP:false}}}else{for(;bO<e;bO++){bR=bS[bO];if(bR){bS[bO]=bQ?bR.parentNode:bR.parentNode===bN}}if(bQ){bw.filter(bN,bS,true)}}},"":function(bP,bN,bR){var bQ,bO=bF++,e=bK;if(typeof bN==="string"&&!bM.test(bN)){bN=bN.toLowerCase();bQ=bN;e=bu}e("parentNode",bN,bO,bP,bQ,bR)},"~":function(bP,bN,bR){var bQ,bO=bF++,e=bK;if(typeof bN==="string"&&!bM.test(bN)){bN=bN.toLowerCase();bQ=bN;e=bu}e("previousSibling",bN,bO,bP,bQ,bR)}},find:{ID:function(bN,bO,bP){if(typeof bO.getElementById!=="undefined"&&!bP){var e=bO.getElementById(bN[1]);return e&&e.parentNode?[e]:[]}},NAME:function(bO,bR){if(typeof bR.getElementsByName!=="undefined"){var bN=[],bQ=bR.getElementsByName(bO[1]);for(var bP=0,e=bQ.length;bP<e;bP++){if(bQ[bP].getAttribute("name")===bO[1]){bN.push(bQ[bP])}}return bN.length===0?null:bN}},TAG:function(e,bN){if(typeof bN.getElementsByTagName!=="undefined"){return bN.getElementsByTagName(e[1])}}},preFilter:{CLASS:function(bP,bN,bO,e,bS,bT){bP=" "+bP[1].replace(bG,"")+" ";if(bT){return bP}for(var bQ=0,bR;(bR=bN[bQ])!=null;bQ++){if(bR){if(bS^(bR.className&&(" "+bR.className+" ").replace(/[\t\n\r]/g," ").indexOf(bP)>=0)){if(!bO){e.push(bR)}}else{if(bO){bN[bQ]=false}}}}return false},ID:function(e){return e[1].replace(bG,"")},TAG:function(bN,e){return bN[1].replace(bG,"").toLowerCase()},CHILD:function(e){if(e[1]==="nth"){if(!e[2]){bw.error(e[0])}e[2]=e[2].replace(/^\+|\s*/g,"");var bN=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=(bN[1]+(bN[2]||1))-0;e[3]=bN[3]-0}else{if(e[2]){bw.error(e[0])}}e[0]=bF++;return e},ATTR:function(bQ,bN,bO,e,bR,bS){var bP=bQ[1]=bQ[1].replace(bG,"");if(!bS&&bB.attrMap[bP]){bQ[1]=bB.attrMap[bP]}bQ[4]=(bQ[4]||bQ[5]||"").replace(bG,"");if(bQ[2]==="~="){bQ[4]=" "+bQ[4]+" "}return bQ},PSEUDO:function(bQ,bN,bO,e,bR){if(bQ[1]==="not"){if((bE.exec(bQ[3])||"").length>1||/^\w/.test(bQ[3])){bQ[3]=bw(bQ[3],null,null,bN)}else{var bP=bw.filter(bQ[3],bN,bO,true^bR);if(!bO){e.push.apply(e,bP)}return false}}else{if(bB.match.POS.test(bQ[0])||bB.match.CHILD.test(bQ[0])){return true}}return bQ},POS:function(e){e.unshift(true);return e}},filters:{enabled:function(e){return e.disabled===false&&e.type!=="hidden"},disabled:function(e){return e.disabled===true},checked:function(e){return e.checked===true},selected:function(e){if(e.parentNode){e.parentNode.selectedIndex}return e.selected===true},parent:function(e){return !!e.firstChild},empty:function(e){return !e.firstChild},has:function(bO,bN,e){return !!bw(e[3],bO).length},header:function(e){return(/h\d/i).test(e.nodeName)},text:function(bO){var e=bO.getAttribute("type"),bN=bO.type;return bO.nodeName.toLowerCase()==="input"&&"text"===bN&&(e===bN||e===null)},radio:function(e){return e.nodeName.toLowerCase()==="input"&&"radio"===e.type},checkbox:function(e){return e.nodeName.toLowerCase()==="input"&&"checkbox"===e.type},file:function(e){return e.nodeName.toLowerCase()==="input"&&"file"===e.type},password:function(e){return e.nodeName.toLowerCase()==="input"&&"password"===e.type},submit:function(bN){var e=bN.nodeName.toLowerCase();return(e==="input"||e==="button")&&"submit"===bN.type},image:function(e){return e.nodeName.toLowerCase()==="input"&&"image"===e.type},reset:function(bN){var e=bN.nodeName.toLowerCase();return(e==="input"||e==="button")&&"reset"===bN.type},button:function(bN){var e=bN.nodeName.toLowerCase();return e==="input"&&"button"===bN.type||e==="button"},input:function(e){return(/input|select|textarea|button/i).test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(bN,e){return e===0},last:function(bO,bN,e,bP){return bN===bP.length-1},even:function(bN,e){return e%2===0},odd:function(bN,e){return e%2===1},lt:function(bO,bN,e){return bN<e[3]-0},gt:function(bO,bN,e){return bN>e[3]-0},nth:function(bO,bN,e){return e[3]-0===bN},eq:function(bO,bN,e){return e[3]-0===bN}},filter:{PSEUDO:function(bO,bT,bS,bU){var e=bT[1],bN=bB.filters[e];if(bN){return bN(bO,bS,bT,bU)}else{if(e==="contains"){return(bO.textContent||bO.innerText||bw.getText([bO])||"").indexOf(bT[3])>=0}else{if(e==="not"){var bP=bT[3];for(var bR=0,bQ=bP.length;bR<bQ;bR++){if(bP[bR]===bO){return false}}return true}else{bw.error(e)}}}},CHILD:function(e,bP){var bS=bP[1],bN=e;switch(bS){case"only":case"first":while((bN=bN.previousSibling)){if(bN.nodeType===1){return false}}if(bS==="first"){return true}bN=e;case"last":while((bN=bN.nextSibling)){if(bN.nodeType===1){return false}}return true;case"nth":var bO=bP[2],bV=bP[3];if(bO===1&&bV===0){return true}var bR=bP[0],bU=e.parentNode;if(bU&&(bU.sizcache!==bR||!e.nodeIndex)){var bQ=0;for(bN=bU.firstChild;bN;bN=bN.nextSibling){if(bN.nodeType===1){bN.nodeIndex=++bQ}}bU.sizcache=bR}var bT=e.nodeIndex-bV;if(bO===0){return bT===0}else{return(bT%bO===0&&bT/bO>=0)}}},ID:function(bN,e){return bN.nodeType===1&&bN.getAttribute("id")===e},TAG:function(bN,e){return(e==="*"&&bN.nodeType===1)||bN.nodeName.toLowerCase()===e},CLASS:function(bN,e){return(" "+(bN.className||bN.getAttribute("class"))+" ").indexOf(e)>-1},ATTR:function(bR,bP){var bO=bP[1],e=bB.attrHandle[bO]?bB.attrHandle[bO](bR):bR[bO]!=null?bR[bO]:bR.getAttribute(bO),bS=e+"",bQ=bP[2],bN=bP[4];return e==null?bQ==="!=":bQ==="="?bS===bN:bQ==="*="?bS.indexOf(bN)>=0:bQ==="~="?(" "+bS+" ").indexOf(bN)>=0:!bN?bS&&e!==false:bQ==="!="?bS!==bN:bQ==="^="?bS.indexOf(bN)===0:bQ==="$="?bS.substr(bS.length-bN.length)===bN:bQ==="|="?bS===bN||bS.substr(0,bN.length+1)===bN+"-":false},POS:function(bQ,bN,bO,bR){var e=bN[2],bP=bB.setFilters[e];if(bP){return bP(bQ,bO,bN,bR)}}}};var bA=bB.match.POS,bv=function(bN,e){return"\\"+(e-0+1)};for(var bx in bB.match){bB.match[bx]=new RegExp(bB.match[bx].source+(/(?![^\[]*\])(?![^\(]*\))/.source));bB.leftMatch[bx]=new RegExp(/(^(?:.|\r|\n)*?)/.source+bB.match[bx].source.replace(/\\(\d+)/g,bv))}var bC=function(bN,e){bN=Array.prototype.slice.call(bN,0);if(e){e.push.apply(e,bN);return e}return bN};try{Array.prototype.slice.call(at.documentElement.childNodes,0)[0].nodeType}catch(bL){bC=function(bQ,bP){var bO=0,bN=bP||[];if(bI.call(bQ)==="[object Array]"){Array.prototype.push.apply(bN,bQ)}else{if(typeof bQ.length==="number"){for(var e=bQ.length;bO<e;bO++){bN.push(bQ[bO])}}else{for(;bQ[bO];bO++){bN.push(bQ[bO])}}}return bN}}var bH,bD;if(at.documentElement.compareDocumentPosition){bH=function(bN,e){if(bN===e){bz=true;return 0}if(!bN.compareDocumentPosition||!e.compareDocumentPosition){return bN.compareDocumentPosition?-1:1}return bN.compareDocumentPosition(e)&4?-1:1}}else{bH=function(bU,bT){if(bU===bT){bz=true;return 0}else{if(bU.sourceIndex&&bT.sourceIndex){return bU.sourceIndex-bT.sourceIndex}}var bR,bN,bO=[],e=[],bQ=bU.parentNode,bS=bT.parentNode,bV=bQ;if(bQ===bS){return bD(bU,bT)}else{if(!bQ){return -1}else{if(!bS){return 1}}}while(bV){bO.unshift(bV);bV=bV.parentNode}bV=bS;while(bV){e.unshift(bV);bV=bV.parentNode}bR=bO.length;bN=e.length;for(var bP=0;bP<bR&&bP<bN;bP++){if(bO[bP]!==e[bP]){return bD(bO[bP],e[bP])}}return bP===bR?bD(bU,e[bP],-1):bD(bO[bP],bT,1)};bD=function(bN,e,bO){if(bN===e){return bO}var bP=bN.nextSibling;while(bP){if(bP===e){return -1}bP=bP.nextSibling}return 1}}bw.getText=function(e){var bN="",bP;for(var bO=0;e[bO];bO++){bP=e[bO];if(bP.nodeType===3||bP.nodeType===4){bN+=bP.nodeValue}else{if(bP.nodeType!==8){bN+=bw.getText(bP.childNodes)}}}return bN};(function(){var bN=at.createElement("div"),bO="script"+(new Date()).getTime(),e=at.documentElement;bN.innerHTML="<a name='"+bO+"'/>";e.insertBefore(bN,e.firstChild);if(at.getElementById(bO)){bB.find.ID=function(bQ,bR,bS){if(typeof bR.getElementById!=="undefined"&&!bS){var bP=bR.getElementById(bQ[1]);return bP?bP.id===bQ[1]||typeof bP.getAttributeNode!=="undefined"&&bP.getAttributeNode("id").nodeValue===bQ[1]?[bP]:M:[]}};bB.filter.ID=function(bR,bP){var bQ=typeof bR.getAttributeNode!=="undefined"&&bR.getAttributeNode("id");return bR.nodeType===1&&bQ&&bQ.nodeValue===bP}}e.removeChild(bN);e=bN=null})();(function(){var e=at.createElement("div");e.appendChild(at.createComment(""));if(e.getElementsByTagName("*").length>0){bB.find.TAG=function(bN,bR){var bQ=bR.getElementsByTagName(bN[1]);if(bN[1]==="*"){var bP=[];for(var bO=0;bQ[bO];bO++){if(bQ[bO].nodeType===1){bP.push(bQ[bO])}}bQ=bP}return bQ}}e.innerHTML="<a href='#'></a>";if(e.firstChild&&typeof e.firstChild.getAttribute!=="undefined"&&e.firstChild.getAttribute("href")!=="#"){bB.attrHandle.href=function(bN){return bN.getAttribute("href",2)}}e=null})();if(at.querySelectorAll){(function(){var e=bw,bP=at.createElement("div"),bO="__sizzle__";bP.innerHTML="<p class='TEST'></p>";if(bP.querySelectorAll&&bP.querySelectorAll(".TEST").length===0){return}bw=function(b0,bR,bV,bZ){bR=bR||at;if(!bZ&&!bw.isXML(bR)){var bY=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(b0);if(bY&&(bR.nodeType===1||bR.nodeType===9)){if(bY[1]){return bC(bR.getElementsByTagName(b0),bV)}else{if(bY[2]&&bB.find.CLASS&&bR.getElementsByClassName){return bC(bR.getElementsByClassName(bY[2]),bV)}}}if(bR.nodeType===9){if(b0==="body"&&bR.body){return bC([bR.body],bV)}else{if(bY&&bY[3]){var bU=bR.getElementById(bY[3]);if(bU&&bU.parentNode){if(bU.id===bY[3]){return bC([bU],bV)}}else{return bC([],bV)}}}try{return bC(bR.querySelectorAll(b0),bV)}catch(bW){}}else{if(bR.nodeType===1&&bR.nodeName.toLowerCase()!=="object"){var bS=bR,bT=bR.getAttribute("id"),bQ=bT||bO,b2=bR.parentNode,b1=/^\s*[+~]/.test(b0);if(!bT){bR.setAttribute("id",bQ)}else{bQ=bQ.replace(/'/g,"\\$&")}if(b1&&b2){bR=bR.parentNode}try{if(!b1||b2){return bC(bR.querySelectorAll("[id='"+bQ+"'] "+b0),bV)}}catch(bX){}finally{if(!bT){bS.removeAttribute("id")}}}}}return e(b0,bR,bV,bZ)};for(var bN in e){bw[bN]=e[bN]}bP=null})()}(function(){var e=at.documentElement,bO=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(bO){var bQ=!bO.call(at.createElement("div"),"div"),bN=false;try{bO.call(at.documentElement,"[test!='']:sizzle")}catch(bP){bN=true}bw.matchesSelector=function(bS,bU){bU=bU.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']");if(!bw.isXML(bS)){try{if(bN||!bB.match.PSEUDO.test(bU)&&!/!=/.test(bU)){var bR=bO.call(bS,bU);if(bR||!bQ||bS.document&&bS.document.nodeType!==11){return bR}}}catch(bT){}}return bw(bU,null,null,[bS]).length>0}}})();(function(){var e=at.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0){return}e.lastChild.className="e";if(e.getElementsByClassName("e").length===1){return}bB.order.splice(1,0,"CLASS");bB.find.CLASS=function(bN,bO,bP){if(typeof bO.getElementsByClassName!=="undefined"&&!bP){return bO.getElementsByClassName(bN[1])}};e=null})();function bu(bN,bS,bR,bV,bT,bU){for(var bP=0,bO=bV.length;bP<bO;bP++){var e=bV[bP];if(e){var bQ=false;e=e[bN];while(e){if(e.sizcache===bR){bQ=bV[e.sizset];break}if(e.nodeType===1&&!bU){e.sizcache=bR;e.sizset=bP}if(e.nodeName.toLowerCase()===bS){bQ=e;break}e=e[bN]}bV[bP]=bQ}}}function bK(bN,bS,bR,bV,bT,bU){for(var bP=0,bO=bV.length;bP<bO;bP++){var e=bV[bP];if(e){var bQ=false;e=e[bN];while(e){if(e.sizcache===bR){bQ=bV[e.sizset];break}if(e.nodeType===1){if(!bU){e.sizcache=bR;e.sizset=bP}if(typeof bS!=="string"){if(e===bS){bQ=true;break}}else{if(bw.filter(bS,[e]).length>0){bQ=e;break}}}e=e[bN]}bV[bP]=bQ}}}if(at.documentElement.contains){bw.contains=function(bN,e){return bN!==e&&(bN.contains?bN.contains(e):true)}}else{if(at.documentElement.compareDocumentPosition){bw.contains=function(bN,e){return !!(bN.compareDocumentPosition(e)&16)}}else{bw.contains=function(){return false}}}bw.isXML=function(e){var bN=(e?e.ownerDocument||e:0).documentElement;return bN?bN.nodeName!=="HTML":false};var bJ=function(e,bT){var bR,bP=[],bQ="",bO=bT.nodeType?[bT]:bT;while((bR=bB.match.PSEUDO.exec(e))){bQ+=bR[0];e=e.replace(bB.match.PSEUDO,"")}e=bB.relative[e]?e+"*":e;for(var bS=0,bN=bO.length;bS<bN;bS++){bw(e,bO[bS],bP)}return bw.filter(bQ,bP)};b.find=bw;b.expr=bw.selectors;b.expr[":"]=b.expr.filters;b.unique=bw.uniqueSort;b.text=bw.getText;b.isXMLDoc=bw.isXML;b.contains=bw.contains})();var aa=/Until$/,ao=/^(?:parents|prevUntil|prevAll)/,a9=/,/,bp=/^.[^:#\[\.,]*$/,R=Array.prototype.slice,J=b.expr.match.POS,aw={children:true,contents:true,next:true,prev:true};b.fn.extend({find:function(e){var bv=this,bx,bu;if(typeof e!=="string"){return b(e).filter(function(){for(bx=0,bu=bv.length;bx<bu;bx++){if(b.contains(bv[bx],this)){return true}}})}var bw=this.pushStack("","find",e),bz,bA,by;for(bx=0,bu=this.length;bx<bu;bx++){bz=bw.length;b.find(e,this[bx],bw);if(bx>0){for(bA=bz;bA<bw.length;bA++){for(by=0;by<bz;by++){if(bw[by]===bw[bA]){bw.splice(bA--,1);break}}}}}return bw},has:function(bu){var e=b(bu);return this.filter(function(){for(var bw=0,bv=e.length;bw<bv;bw++){if(b.contains(this,e[bw])){return true}}})},not:function(e){return this.pushStack(aD(this,e,false),"not",e)},filter:function(e){return this.pushStack(aD(this,e,true),"filter",e)},is:function(e){return !!e&&(typeof e==="string"?b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(bD,bu){var bA=[],bx,bv,bC=this[0];if(b.isArray(bD)){var bz,bw,by={},e=1;if(bC&&bD.length){for(bx=0,bv=bD.length;bx<bv;bx++){bw=bD[bx];if(!by[bw]){by[bw]=J.test(bw)?b(bw,bu||this.context):bw}}while(bC&&bC.ownerDocument&&bC!==bu){for(bw in by){bz=by[bw];if(bz.jquery?bz.index(bC)>-1:b(bC).is(bz)){bA.push({selector:bw,elem:bC,level:e})}}bC=bC.parentNode;e++}}return bA}var bB=J.test(bD)||typeof bD!=="string"?b(bD,bu||this.context):0;for(bx=0,bv=this.length;bx<bv;bx++){bC=this[bx];while(bC){if(bB?bB.index(bC)>-1:b.find.matchesSelector(bC,bD)){bA.push(bC);break}else{bC=bC.parentNode;if(!bC||!bC.ownerDocument||bC===bu||bC.nodeType===11){break}}}}bA=bA.length>1?b.unique(bA):bA;return this.pushStack(bA,"closest",bD)},index:function(e){if(!e||typeof e==="string"){return b.inArray(this[0],e?b(e):this.parent().children())}return b.inArray(e.jquery?e[0]:e,this)},add:function(e,bu){var bw=typeof e==="string"?b(e,bu):b.makeArray(e&&e.nodeType?[e]:e),bv=b.merge(this.get(),bw);return this.pushStack(E(bw[0])||E(bv[0])?bv:b.unique(bv))},andSelf:function(){return this.add(this.prevObject)}});function E(e){return !e||!e.parentNode||e.parentNode.nodeType===11}b.each({parent:function(bu){var e=bu.parentNode;return e&&e.nodeType!==11?e:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(bu,e,bv){return b.dir(bu,"parentNode",bv)},next:function(e){return b.nth(e,2,"nextSibling")},prev:function(e){return b.nth(e,2,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(bu,e,bv){return b.dir(bu,"nextSibling",bv)},prevUntil:function(bu,e,bv){return b.dir(bu,"previousSibling",bv)},siblings:function(e){return b.sibling(e.parentNode.firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.makeArray(e.childNodes)}},function(e,bu){b.fn[e]=function(by,bv){var bx=b.map(this,bu,by),bw=R.call(arguments);if(!aa.test(e)){bv=by}if(bv&&typeof bv==="string"){bx=b.filter(bv,bx)}bx=this.length>1&&!aw[e]?b.unique(bx):bx;if((this.length>1||a9.test(bv))&&ao.test(e)){bx=bx.reverse()}return this.pushStack(bx,e,bw.join(","))}});b.extend({filter:function(bv,e,bu){if(bu){bv=":not("+bv+")"}return e.length===1?b.find.matchesSelector(e[0],bv)?[e[0]]:[]:b.find.matches(bv,e)},dir:function(bv,bu,bx){var e=[],bw=bv[bu];while(bw&&bw.nodeType!==9&&(bx===M||bw.nodeType!==1||!b(bw).is(bx))){if(bw.nodeType===1){e.push(bw)}bw=bw[bu]}return e},nth:function(bx,e,bv,bw){e=e||1;var bu=0;for(;bx;bx=bx[bv]){if(bx.nodeType===1&&++bu===e){break}}return bx},sibling:function(bv,bu){var e=[];for(;bv;bv=bv.nextSibling){if(bv.nodeType===1&&bv!==bu){e.push(bv)}}return e}});function aD(bw,bv,e){bv=bv||0;if(b.isFunction(bv)){return b.grep(bw,function(by,bx){var bz=!!bv.call(by,bx,by);return bz===e})}else{if(bv.nodeType){return b.grep(bw,function(by,bx){return(by===bv)===e})}else{if(typeof bv==="string"){var bu=b.grep(bw,function(bx){return bx.nodeType===1});if(bp.test(bv)){return b.filter(bv,bu,!e)}else{bv=b.filter(bv,bu)}}}}return b.grep(bw,function(by,bx){return(b.inArray(by,bv)>=0)===e})}var af=/ jQuery\d+="(?:\d+|null)"/g,ap=/^\s+/,U=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/ig,d=/<([\w:]+)/,y=/<tbody/i,X=/<|&#?\w+;/,Q=/<(?:script|object|embed|option|style)/i,p=/checked\s*(?:[^=]|=\s*.checked.)/i,bl=/\/(java|ecma)script/i,aL=/^\s*<!(?:\[CDATA\[|\-\-)/,av={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]};av.optgroup=av.option;av.tbody=av.tfoot=av.colgroup=av.caption=av.thead;av.th=av.td;if(!b.support.htmlSerialize){av._default=[1,"div<div>","</div>"]}b.fn.extend({text:function(e){if(b.isFunction(e)){return this.each(function(bv){var bu=b(this);bu.text(e.call(this,bv,bu.text()))})}if(typeof e!=="object"&&e!==M){return this.empty().append((this[0]&&this[0].ownerDocument||at).createTextNode(e))}return b.text(this)},wrapAll:function(e){if(b.isFunction(e)){return this.each(function(bv){b(this).wrapAll(e.call(this,bv))})}if(this[0]){var bu=b(e,this[0].ownerDocument).eq(0).clone(true);if(this[0].parentNode){bu.insertBefore(this[0])}bu.map(function(){var bv=this;while(bv.firstChild&&bv.firstChild.nodeType===1){bv=bv.firstChild}return bv}).append(this)}return this},wrapInner:function(e){if(b.isFunction(e)){return this.each(function(bu){b(this).wrapInner(e.call(this,bu))})}return this.each(function(){var bu=b(this),bv=bu.contents();if(bv.length){bv.wrapAll(e)}else{bu.append(e)}})},wrap:function(e){return this.each(function(){b(this).wrapAll(e)})},unwrap:function(){return this.parent().each(function(){if(!b.nodeName(this,"body")){b(this).replaceWith(this.childNodes)}}).end()},append:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.appendChild(e)}})},prepend:function(){return this.domManip(arguments,true,function(e){if(this.nodeType===1){this.insertBefore(e,this.firstChild)}})},before:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bu){this.parentNode.insertBefore(bu,this)})}else{if(arguments.length){var e=b(arguments[0]);e.push.apply(e,this.toArray());return this.pushStack(e,"before",arguments)}}},after:function(){if(this[0]&&this[0].parentNode){return this.domManip(arguments,false,function(bu){this.parentNode.insertBefore(bu,this.nextSibling)})}else{if(arguments.length){var e=this.pushStack(this,"after",arguments);e.push.apply(e,b(arguments[0]).toArray());return e}}},remove:function(e,bw){for(var bu=0,bv;(bv=this[bu])!=null;bu++){if(!e||b.filter(e,[bv]).length){if(!bw&&bv.nodeType===1){b.cleanData(bv.getElementsByTagName("*"));b.cleanData([bv])}if(bv.parentNode){bv.parentNode.removeChild(bv)}}}return this},empty:function(){for(var e=0,bu;(bu=this[e])!=null;e++){if(bu.nodeType===1){b.cleanData(bu.getElementsByTagName("*"))}while(bu.firstChild){bu.removeChild(bu.firstChild)}}return this},clone:function(bu,e){bu=bu==null?false:bu;e=e==null?bu:e;return this.map(function(){return b.clone(this,bu,e)})},html:function(bw){if(bw===M){return this[0]&&this[0].nodeType===1?this[0].innerHTML.replace(af,""):null}else{if(typeof bw==="string"&&!Q.test(bw)&&(b.support.leadingWhitespace||!ap.test(bw))&&!av[(d.exec(bw)||["",""])[1].toLowerCase()]){bw=bw.replace(U,"<$1></$2>");try{for(var bv=0,bu=this.length;bv<bu;bv++){if(this[bv].nodeType===1){b.cleanData(this[bv].getElementsByTagName("*"));this[bv].innerHTML=bw}}}catch(bx){this.empty().append(bw)}}else{if(b.isFunction(bw)){this.each(function(by){var e=b(this);e.html(bw.call(this,by,e.html()))})}else{this.empty().append(bw)}}}return this},replaceWith:function(e){if(this[0]&&this[0].parentNode){if(b.isFunction(e)){return this.each(function(bw){var bv=b(this),bu=bv.html();bv.replaceWith(e.call(this,bw,bu))})}if(typeof e!=="string"){e=b(e).detach()}return this.each(function(){var bv=this.nextSibling,bu=this.parentNode;b(this).remove();if(bv){b(bv).before(e)}else{b(bu).append(e)}})}else{return this.length?this.pushStack(b(b.isFunction(e)?e():e),"replaceWith",e):this}},detach:function(e){return this.remove(e,true)},domManip:function(bA,bE,bD){var bw,bx,bz,bC,bB=bA[0],bu=[];if(!b.support.checkClone&&arguments.length===3&&typeof bB==="string"&&p.test(bB)){return this.each(function(){b(this).domManip(bA,bE,bD,true)})}if(b.isFunction(bB)){return this.each(function(bG){var bF=b(this);bA[0]=bB.call(this,bG,bE?bF.html():M);bF.domManip(bA,bE,bD)})}if(this[0]){bC=bB&&bB.parentNode;if(b.support.parentNode&&bC&&bC.nodeType===11&&bC.childNodes.length===this.length){bw={fragment:bC}}else{bw=b.buildFragment(bA,this,bu)}bz=bw.fragment;if(bz.childNodes.length===1){bx=bz=bz.firstChild}else{bx=bz.firstChild}if(bx){bE=bE&&b.nodeName(bx,"tr");for(var bv=0,e=this.length,by=e-1;bv<e;bv++){bD.call(bE?ba(this[bv],bx):this[bv],bw.cacheable||(e>1&&bv<by)?b.clone(bz,true,true):bz)}}if(bu.length){b.each(bu,bo)}}return this}});function ba(e,bu){return b.nodeName(e,"table")?(e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody"))):e}function v(e,bA){if(bA.nodeType!==1||!b.hasData(e)){return}var bz=b.expando,bw=b.data(e),bx=b.data(bA,bw);if((bw=bw[bz])){var bB=bw.events;bx=bx[bz]=b.extend({},bw);if(bB){delete bx.handle;bx.events={};for(var by in bB){for(var bv=0,bu=bB[by].length;bv<bu;bv++){b.event.add(bA,by+(bB[by][bv].namespace?".":"")+bB[by][bv].namespace,bB[by][bv],bB[by][bv].data)}}}}}function ag(bu,e){var bv;if(e.nodeType!==1){return}if(e.clearAttributes){e.clearAttributes()}if(e.mergeAttributes){e.mergeAttributes(bu)}bv=e.nodeName.toLowerCase();if(bv==="object"){e.outerHTML=bu.outerHTML}else{if(bv==="input"&&(bu.type==="checkbox"||bu.type==="radio")){if(bu.checked){e.defaultChecked=e.checked=bu.checked}if(e.value!==bu.value){e.value=bu.value}}else{if(bv==="option"){e.selected=bu.defaultSelected}else{if(bv==="input"||bv==="textarea"){e.defaultValue=bu.defaultValue}}}}e.removeAttribute(b.expando)}b.buildFragment=function(by,bw,bu){var bx,e,bv,bz;if(bw&&bw[0]){bz=bw[0].ownerDocument||bw[0]}if(!bz.createDocumentFragment){bz=at}if(by.length===1&&typeof by[0]==="string"&&by[0].length<512&&bz===at&&by[0].charAt(0)==="<"&&!Q.test(by[0])&&(b.support.checkClone||!p.test(by[0]))){e=true;bv=b.fragments[by[0]];if(bv&&bv!==1){bx=bv}}if(!bx){bx=bz.createDocumentFragment();b.clean(by,bz,bx,bu)}if(e){b.fragments[by[0]]=bv?bx:1}return{fragment:bx,cacheable:e}};b.fragments={};b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,bu){b.fn[e]=function(bv){var by=[],bB=b(bv),bA=this.length===1&&this[0].parentNode;if(bA&&bA.nodeType===11&&bA.childNodes.length===1&&bB.length===1){bB[bu](this[0]);return this}else{for(var bz=0,bw=bB.length;bz<bw;bz++){var bx=(bz>0?this.clone(true):this).get();b(bB[bz])[bu](bx);by=by.concat(bx)}return this.pushStack(by,e,bB.selector)}}});function be(e){if("getElementsByTagName" in e){return e.getElementsByTagName("*")}else{if("querySelectorAll" in e){return e.querySelectorAll("*")}else{return[]}}}function ax(e){if(e.type==="checkbox"||e.type==="radio"){e.defaultChecked=e.checked}}function G(e){if(b.nodeName(e,"input")){ax(e)}else{if("getElementsByTagName" in e){b.grep(e.getElementsByTagName("input"),ax)}}}b.extend({clone:function(bx,bz,bv){var by=bx.cloneNode(true),e,bu,bw;if((!b.support.noCloneEvent||!b.support.noCloneChecked)&&(bx.nodeType===1||bx.nodeType===11)&&!b.isXMLDoc(bx)){ag(bx,by);e=be(bx);bu=be(by);for(bw=0;e[bw];++bw){ag(e[bw],bu[bw])}}if(bz){v(bx,by);if(bv){e=be(bx);bu=be(by);for(bw=0;e[bw];++bw){v(e[bw],bu[bw])}}}e=bu=null;return by},clean:function(bv,bx,bG,bz){var bE;bx=bx||at;if(typeof bx.createElement==="undefined"){bx=bx.ownerDocument||bx[0]&&bx[0].ownerDocument||at}var bH=[],bA;for(var bD=0,by;(by=bv[bD])!=null;bD++){if(typeof by==="number"){by+=""}if(!by){continue}if(typeof by==="string"){if(!X.test(by)){by=bx.createTextNode(by)}else{by=by.replace(U,"<$1></$2>");var bJ=(d.exec(by)||["",""])[1].toLowerCase(),bw=av[bJ]||av._default,bC=bw[0],bu=bx.createElement("div");bu.innerHTML=bw[1]+by+bw[2];while(bC--){bu=bu.lastChild}if(!b.support.tbody){var e=y.test(by),bB=bJ==="table"&&!e?bu.firstChild&&bu.firstChild.childNodes:bw[1]==="<table>"&&!e?bu.childNodes:[];for(bA=bB.length-1;bA>=0;--bA){if(b.nodeName(bB[bA],"tbody")&&!bB[bA].childNodes.length){bB[bA].parentNode.removeChild(bB[bA])}}}if(!b.support.leadingWhitespace&&ap.test(by)){bu.insertBefore(bx.createTextNode(ap.exec(by)[0]),bu.firstChild)}by=bu.childNodes}}var bF;if(!b.support.appendChecked){if(by[0]&&typeof(bF=by.length)==="number"){for(bA=0;bA<bF;bA++){G(by[bA])}}else{G(by)}}if(by.nodeType){bH.push(by)}else{bH=b.merge(bH,by)}}if(bG){bE=function(bK){return !bK.type||bl.test(bK.type)};for(bD=0;bH[bD];bD++){if(bz&&b.nodeName(bH[bD],"script")&&(!bH[bD].type||bH[bD].type.toLowerCase()==="text/javascript")){bz.push(bH[bD].parentNode?bH[bD].parentNode.removeChild(bH[bD]):bH[bD])}else{if(bH[bD].nodeType===1){var bI=b.grep(bH[bD].getElementsByTagName("script"),bE);bH.splice.apply(bH,[bD+1,0].concat(bI))}bG.appendChild(bH[bD])}}}return bH},cleanData:function(bu){var bx,bv,e=b.cache,bC=b.expando,bA=b.event.special,bz=b.support.deleteExpando;for(var by=0,bw;(bw=bu[by])!=null;by++){if(bw.nodeName&&b.noData[bw.nodeName.toLowerCase()]){continue}bv=bw[b.expando];if(bv){bx=e[bv]&&e[bv][bC];if(bx&&bx.events){for(var bB in bx.events){if(bA[bB]){b.event.remove(bw,bB)}else{b.removeEvent(bw,bB,bx.handle)}}if(bx.handle){bx.handle.elem=null}}if(bz){delete bw[b.expando]}else{if(bw.removeAttribute){bw.removeAttribute(b.expando)}}delete e[bv]}}}});function bo(e,bu){if(bu.src){b.ajax({url:bu.src,async:false,dataType:"script"})}else{b.globalEval((bu.text||bu.textContent||bu.innerHTML||"").replace(aL,"/*$0*/"))}if(bu.parentNode){bu.parentNode.removeChild(bu)}}var aj=/alpha\([^)]*\)/i,ar=/opacity=([^)]*)/,B=/([A-Z]|^ms)/g,bc=/^-?\d+(?:px)?$/i,bn=/^-?\d/,K=/^[+\-]=/,ai=/[^+\-\.\de]+/g,a6={position:"absolute",visibility:"hidden",display:"block"},al=["Left","Right"],a0=["Top","Bottom"],Y,aG,aU;b.fn.css=function(e,bu){if(arguments.length===2&&bu===M){return this}return b.access(this,e,bu,true,function(bw,bv,bx){return bx!==M?b.style(bw,bv,bx):b.css(bw,bv)})};b.extend({cssHooks:{opacity:{get:function(bv,bu){if(bu){var e=Y(bv,"opacity","opacity");return e===""?"1":e}else{return bv.style.opacity}}}},cssNumber:{fillOpacity:true,fontWeight:true,lineHeight:true,opacity:true,orphans:true,widows:true,zIndex:true,zoom:true},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(bw,bv,bC,bx){if(!bw||bw.nodeType===3||bw.nodeType===8||!bw.style){return}var bA,bB,by=b.camelCase(bv),bu=bw.style,bD=b.cssHooks[by];bv=b.cssProps[by]||by;if(bC!==M){bB=typeof bC;if(bB==="number"&&isNaN(bC)||bC==null){return}if(bB==="string"&&K.test(bC)){bC=+bC.replace(ai,"")+parseFloat(b.css(bw,bv));bB="number"}if(bB==="number"&&!b.cssNumber[by]){bC+="px"}if(!bD||!("set" in bD)||(bC=bD.set(bw,bC))!==M){try{bu[bv]=bC}catch(bz){}}}else{if(bD&&"get" in bD&&(bA=bD.get(bw,false,bx))!==M){return bA}return bu[bv]}},css:function(bx,bw,bu){var bv,e;bw=b.camelCase(bw);e=b.cssHooks[bw];bw=b.cssProps[bw]||bw;if(bw==="cssFloat"){bw="float"}if(e&&"get" in e&&(bv=e.get(bx,true,bu))!==M){return bv}else{if(Y){return Y(bx,bw)}}},swap:function(bw,bv,bx){var e={};for(var bu in bv){e[bu]=bw.style[bu];bw.style[bu]=bv[bu]}bx.call(bw);for(bu in bv){bw.style[bu]=e[bu]}}});b.curCSS=b.css;b.each(["height","width"],function(bu,e){b.cssHooks[e]={get:function(bx,bw,bv){var by;if(bw){if(bx.offsetWidth!==0){return q(bx,e,bv)}else{b.swap(bx,a6,function(){by=q(bx,e,bv)})}return by}},set:function(bv,bw){if(bc.test(bw)){bw=parseFloat(bw);if(bw>=0){return bw+"px"}}else{return bw}}}});if(!b.support.opacity){b.cssHooks.opacity={get:function(bu,e){return ar.test((e&&bu.currentStyle?bu.currentStyle.filter:bu.style.filter)||"")?(parseFloat(RegExp.$1)/100)+"":e?"1":""},set:function(bx,by){var bw=bx.style,bu=bx.currentStyle;bw.zoom=1;var e=b.isNaN(by)?"":"alpha(opacity="+by*100+")",bv=bu&&bu.filter||bw.filter||"";bw.filter=aj.test(bv)?bv.replace(aj,e):bv+" "+e}}}b(function(){if(!b.support.reliableMarginRight){b.cssHooks.marginRight={get:function(bv,bu){var e;b.swap(bv,{display:"inline-block"},function(){if(bu){e=Y(bv,"margin-right","marginRight")}else{e=bv.style.marginRight}});return e}}}});if(at.defaultView&&at.defaultView.getComputedStyle){aG=function(bx,bv){var bu,bw,e;bv=bv.replace(B,"-$1").toLowerCase();if(!(bw=bx.ownerDocument.defaultView)){return M}if((e=bw.getComputedStyle(bx,null))){bu=e.getPropertyValue(bv);if(bu===""&&!b.contains(bx.ownerDocument.documentElement,bx)){bu=b.style(bx,bv)}}return bu}}if(at.documentElement.currentStyle){aU=function(bx,bv){var by,bu=bx.currentStyle&&bx.currentStyle[bv],e=bx.runtimeStyle&&bx.runtimeStyle[bv],bw=bx.style;if(!bc.test(bu)&&bn.test(bu)){by=bw.left;if(e){bx.runtimeStyle.left=bx.currentStyle.left}bw.left=bv==="fontSize"?"1em":(bu||0);bu=bw.pixelLeft+"px";bw.left=by;if(e){bx.runtimeStyle.left=e}}return bu===""?"auto":bu}}Y=aG||aU;function q(bv,bu,e){var bx=bu==="width"?bv.offsetWidth:bv.offsetHeight,bw=bu==="width"?al:a0;if(bx>0){if(e!=="border"){b.each(bw,function(){if(!e){bx-=parseFloat(b.css(bv,"padding"+this))||0}if(e==="margin"){bx+=parseFloat(b.css(bv,e+this))||0}else{bx-=parseFloat(b.css(bv,"border"+this+"Width"))||0}})}return bx+"px"}bx=Y(bv,bu,bu);if(bx<0||bx==null){bx=bv.style[bu]||0}bx=parseFloat(bx)||0;if(e){b.each(bw,function(){bx+=parseFloat(b.css(bv,"padding"+this))||0;if(e!=="padding"){bx+=parseFloat(b.css(bv,"border"+this+"Width"))||0}if(e==="margin"){bx+=parseFloat(b.css(bv,e+this))||0}})}return bx+"px"}if(b.expr&&b.expr.filters){b.expr.filters.hidden=function(bv){var bu=bv.offsetWidth,e=bv.offsetHeight;return(bu===0&&e===0)||(!b.support.reliableHiddenOffsets&&(bv.style.display||b.css(bv,"display"))==="none")};b.expr.filters.visible=function(e){return !b.expr.filters.hidden(e)}}var k=/%20/g,an=/\[\]$/,bs=/\r?\n/g,bq=/#.*$/,aB=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,aX=/^(?:color|date|datetime|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,aK=/^(?:about|app|app\-storage|.+\-extension|file|widget):$/,aN=/^(?:GET|HEAD)$/,c=/^\/\//,N=/\?/,a5=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,s=/^(?:select|textarea)/i,h=/\s+/,br=/([?&])_=[^&]*/,L=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+))?)?/,C=b.fn.load,Z={},t={},aC,u;try{aC=bk.href}catch(au){aC=at.createElement("a");aC.href="";aC=aC.href}u=L.exec(aC.toLowerCase())||[];function f(e){return function(bx,bz){if(typeof bx!=="string"){bz=bx;bx="*"}if(b.isFunction(bz)){var bw=bx.toLowerCase().split(h),bv=0,by=bw.length,bu,bA,bB;for(;bv<by;bv++){bu=bw[bv];bB=/^\+/.test(bu);if(bB){bu=bu.substr(1)||"*"}bA=e[bu]=e[bu]||[];bA[bB?"unshift":"push"](bz)}}}}function aS(bu,bD,by,bC,bA,bw){bA=bA||bD.dataTypes[0];bw=bw||{};bw[bA]=true;var bz=bu[bA],bv=0,e=bz?bz.length:0,bx=(bu===Z),bB;for(;bv<e&&(bx||!bB);bv++){bB=bz[bv](bD,by,bC);if(typeof bB==="string"){if(!bx||bw[bB]){bB=M}else{bD.dataTypes.unshift(bB);bB=aS(bu,bD,by,bC,bB,bw)}}}if((bx||!bB)&&!bw["*"]){bB=aS(bu,bD,by,bC,"*",bw)}return bB}b.fn.extend({load:function(bv,by,bz){if(typeof bv!=="string"&&C){return C.apply(this,arguments)}else{if(!this.length){return this}}var bx=bv.indexOf(" ");if(bx>=0){var e=bv.slice(bx,bv.length);bv=bv.slice(0,bx)}var bw="GET";if(by){if(b.isFunction(by)){bz=by;by=M}else{if(typeof by==="object"){by=b.param(by,b.ajaxSettings.traditional);bw="POST"}}}var bu=this;b.ajax({url:bv,type:bw,dataType:"html",data:by,complete:function(bB,bA,bC){bC=bB.responseText;if(bB.isResolved()){bB.done(function(bD){bC=bD});bu.html(e?b("<div>").append(bC.replace(a5,"")).find(e):bC)}if(bz){bu.each(bz,[bC,bA,bB])}}});return this},serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?b.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||s.test(this.nodeName)||aX.test(this.type))}).map(function(e,bu){var bv=b(this).val();return bv==null?null:b.isArray(bv)?b.map(bv,function(bx,bw){return{name:bu.name,value:bx.replace(bs,"\r\n")}}):{name:bu.name,value:bv.replace(bs,"\r\n")}}).get()}});b.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,bu){b.fn[bu]=function(bv){return this.bind(bu,bv)}});b.each(["get","post"],function(e,bu){b[bu]=function(bv,bx,by,bw){if(b.isFunction(bx)){bw=bw||by;by=bx;bx=M}return b.ajax({type:bu,url:bv,data:bx,success:by,dataType:bw})}});b.extend({getScript:function(e,bu){return b.get(e,M,bu,"script")},getJSON:function(e,bu,bv){return b.get(e,bu,bv,"json")},ajaxSetup:function(bv,e){if(!e){e=bv;bv=b.extend(true,b.ajaxSettings,e)}else{b.extend(true,bv,b.ajaxSettings,e)}for(var bu in {context:1,url:1}){if(bu in e){bv[bu]=e[bu]}else{if(bu in b.ajaxSettings){bv[bu]=b.ajaxSettings[bu]}}}return bv},ajaxSettings:{url:aC,isLocal:aK.test(u[1]),global:true,type:"GET",contentType:"application/x-www-form-urlencoded",processData:true,async:true,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":"*/*"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":bb.String,"text html":true,"text json":b.parseJSON,"text xml":b.parseXML}},ajaxPrefilter:f(Z),ajaxTransport:f(t),ajax:function(by,bw){if(typeof by==="object"){bw=by;by=M}bw=bw||{};var bC=b.ajaxSetup({},bw),bR=bC.context||bC,bF=bR!==bC&&(bR.nodeType||bR instanceof b)?b(bR):b.event,bQ=b.Deferred(),bM=b._Deferred(),bA=bC.statusCode||{},bB,bG={},bN={},bP,bx,bK,bD,bH,bz=0,bv,bJ,bI={readyState:0,setRequestHeader:function(bS,bT){if(!bz){var e=bS.toLowerCase();bS=bN[e]=bN[e]||bS;bG[bS]=bT}return this},getAllResponseHeaders:function(){return bz===2?bP:null},getResponseHeader:function(bS){var e;if(bz===2){if(!bx){bx={};while((e=aB.exec(bP))){bx[e[1].toLowerCase()]=e[2]}}e=bx[bS.toLowerCase()]}return e===M?null:e},overrideMimeType:function(e){if(!bz){bC.mimeType=e}return this},abort:function(e){e=e||"abort";if(bK){bK.abort(e)}bE(0,e);return this}};function bE(bX,bV,bY,bU){if(bz===2){return}bz=2;if(bD){clearTimeout(bD)}bK=M;bP=bU||"";bI.readyState=bX?4:0;var bS,b2,b1,bW=bY?bi(bC,bI,bY):M,bT,b0;if(bX>=200&&bX<300||bX===304){if(bC.ifModified){if((bT=bI.getResponseHeader("Last-Modified"))){b.lastModified[bB]=bT}if((b0=bI.getResponseHeader("Etag"))){b.etag[bB]=b0}}if(bX===304){bV="notmodified";bS=true}else{try{b2=H(bC,bW);bV="success";bS=true}catch(bZ){bV="parsererror";b1=bZ}}}else{b1=bV;if(!bV||bX){bV="error";if(bX<0){bX=0}}}bI.status=bX;bI.statusText=bV;if(bS){bQ.resolveWith(bR,[b2,bV,bI])}else{bQ.rejectWith(bR,[bI,bV,b1])}bI.statusCode(bA);bA=M;if(bv){bF.trigger("ajax"+(bS?"Success":"Error"),[bI,bC,bS?b2:b1])}bM.resolveWith(bR,[bI,bV]);if(bv){bF.trigger("ajaxComplete",[bI,bC]);if(!(--b.active)){b.event.trigger("ajaxStop")}}}bQ.promise(bI);bI.success=bI.done;bI.error=bI.fail;bI.complete=bM.done;bI.statusCode=function(bS){if(bS){var e;if(bz<2){for(e in bS){bA[e]=[bA[e],bS[e]]}}else{e=bS[bI.status];bI.then(e,e)}}return this};bC.url=((by||bC.url)+"").replace(bq,"").replace(c,u[1]+"//");bC.dataTypes=b.trim(bC.dataType||"*").toLowerCase().split(h);if(bC.crossDomain==null){bH=L.exec(bC.url.toLowerCase());bC.crossDomain=!!(bH&&(bH[1]!=u[1]||bH[2]!=u[2]||(bH[3]||(bH[1]==="http:"?80:443))!=(u[3]||(u[1]==="http:"?80:443))))}if(bC.data&&bC.processData&&typeof bC.data!=="string"){bC.data=b.param(bC.data,bC.traditional)}aS(Z,bC,bw,bI);if(bz===2){return false}bv=bC.global;bC.type=bC.type.toUpperCase();bC.hasContent=!aN.test(bC.type);if(bv&&b.active++===0){b.event.trigger("ajaxStart")}if(!bC.hasContent){if(bC.data){bC.url+=(N.test(bC.url)?"&":"?")+bC.data}bB=bC.url;if(bC.cache===false){var bu=b.now(),bO=bC.url.replace(br,"$1_="+bu);bC.url=bO+((bO===bC.url)?(N.test(bC.url)?"&":"?")+"_="+bu:"")}}if(bC.data&&bC.hasContent&&bC.contentType!==false||bw.contentType){bI.setRequestHeader("Content-Type",bC.contentType)}if(bC.ifModified){bB=bB||bC.url;if(b.lastModified[bB]){bI.setRequestHeader("If-Modified-Since",b.lastModified[bB])}if(b.etag[bB]){bI.setRequestHeader("If-None-Match",b.etag[bB])}}bI.setRequestHeader("Accept",bC.dataTypes[0]&&bC.accepts[bC.dataTypes[0]]?bC.accepts[bC.dataTypes[0]]+(bC.dataTypes[0]!=="*"?", */*; q=0.01":""):bC.accepts["*"]);for(bJ in bC.headers){bI.setRequestHeader(bJ,bC.headers[bJ])}if(bC.beforeSend&&(bC.beforeSend.call(bR,bI,bC)===false||bz===2)){bI.abort();return false}for(bJ in {success:1,error:1,complete:1}){bI[bJ](bC[bJ])}bK=aS(t,bC,bw,bI);if(!bK){bE(-1,"No Transport")}else{bI.readyState=1;if(bv){bF.trigger("ajaxSend",[bI,bC])}if(bC.async&&bC.timeout>0){bD=setTimeout(function(){bI.abort("timeout")},bC.timeout)}try{bz=1;bK.send(bG,bE)}catch(bL){if(status<2){bE(-1,bL)}else{b.error(bL)}}}return bI},param:function(e,bv){var bu=[],bx=function(by,bz){bz=b.isFunction(bz)?bz():bz;bu[bu.length]=encodeURIComponent(by)+"="+encodeURIComponent(bz)};if(bv===M){bv=b.ajaxSettings.traditional}if(b.isArray(e)||(e.jquery&&!b.isPlainObject(e))){b.each(e,function(){bx(this.name,this.value)})}else{for(var bw in e){x(bw,e[bw],bv,bx)}}return bu.join("&").replace(k,"+")}});function x(bv,bx,bu,bw){if(b.isArray(bx)){b.each(bx,function(bz,by){if(bu||an.test(bv)){bw(bv,by)}else{x(bv+"["+(typeof by==="object"||b.isArray(by)?bz:"")+"]",by,bu,bw)}})}else{if(!bu&&bx!=null&&typeof bx==="object"){for(var e in bx){x(bv+"["+e+"]",bx[e],bu,bw)}}else{bw(bv,bx)}}}b.extend({active:0,lastModified:{},etag:{}});function bi(bC,bB,by){var bu=bC.contents,bA=bC.dataTypes,bv=bC.responseFields,bx,bz,bw,e;for(bz in bv){if(bz in by){bB[bv[bz]]=by[bz]}}while(bA[0]==="*"){bA.shift();if(bx===M){bx=bC.mimeType||bB.getResponseHeader("content-type")}}if(bx){for(bz in bu){if(bu[bz]&&bu[bz].test(bx)){bA.unshift(bz);break}}}if(bA[0] in by){bw=bA[0]}else{for(bz in by){if(!bA[0]||bC.converters[bz+" "+bA[0]]){bw=bz;break}if(!e){e=bz}}bw=bw||e}if(bw){if(bw!==bA[0]){bA.unshift(bw)}return by[bw]}}function H(bG,by){if(bG.dataFilter){by=bG.dataFilter(by,bG.dataType)}var bC=bG.dataTypes,bF={},bz,bD,bv=bC.length,bA,bB=bC[0],bw,bx,bE,bu,e;for(bz=1;bz<bv;bz++){if(bz===1){for(bD in bG.converters){if(typeof bD==="string"){bF[bD.toLowerCase()]=bG.converters[bD]}}}bw=bB;bB=bC[bz];if(bB==="*"){bB=bw}else{if(bw!=="*"&&bw!==bB){bx=bw+" "+bB;bE=bF[bx]||bF["* "+bB];if(!bE){e=M;for(bu in bF){bA=bu.split(" ");if(bA[0]===bw||bA[0]==="*"){e=bF[bA[1]+" "+bB];if(e){bu=bF[bu];if(bu===true){bE=e}else{if(e===true){bE=bu}}break}}}}if(!(bE||e)){b.error("No conversion from "+bx.replace(" "," to "))}if(bE!==true){by=bE?bE(by):e(bu(by))}}}}return by}var aA=b.now(),w=/(\=)\?(&|$)|\?\?/i;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){return b.expando+"_"+(aA++)}});b.ajaxPrefilter("json jsonp",function(bC,bz,bB){var bw=bC.contentType==="application/x-www-form-urlencoded"&&(typeof bC.data==="string");if(bC.dataTypes[0]==="jsonp"||bC.jsonp!==false&&(w.test(bC.url)||bw&&w.test(bC.data))){var bA,bv=bC.jsonpCallback=b.isFunction(bC.jsonpCallback)?bC.jsonpCallback():bC.jsonpCallback,by=bb[bv],e=bC.url,bx=bC.data,bu="$1"+bv+"$2";if(bC.jsonp!==false){e=e.replace(w,bu);if(bC.url===e){if(bw){bx=bx.replace(w,bu)}if(bC.data===bx){e+=(/\?/.test(e)?"&":"?")+bC.jsonp+"="+bv}}}bC.url=e;bC.data=bx;bb[bv]=function(bD){bA=[bD]};bB.always(function(){bb[bv]=by;if(bA&&b.isFunction(by)){bb[bv](bA[0])}});bC.converters["script json"]=function(){if(!bA){b.error(bv+" was not called")}return bA[0]};bC.dataTypes[0]="json";return"script"}});b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){b.globalEval(e);return e}}});b.ajaxPrefilter("script",function(e){if(e.cache===M){e.cache=false}if(e.crossDomain){e.type="GET";e.global=false}});b.ajaxTransport("script",function(bv){if(bv.crossDomain){var e,bu=at.head||at.getElementsByTagName("head")[0]||at.documentElement;return{send:function(bw,bx){e=at.createElement("script");e.async="async";if(bv.scriptCharset){e.charset=bv.scriptCharset}e.src=bv.url;e.onload=e.onreadystatechange=function(bz,by){if(by||!e.readyState||/loaded|complete/.test(e.readyState)){e.onload=e.onreadystatechange=null;if(bu&&e.parentNode){bu.removeChild(e)}e=M;if(!by){bx(200,"success")}}};bu.insertBefore(e,bu.firstChild)},abort:function(){if(e){e.onload(0,1)}}}}});var D=bb.ActiveXObject?function(){for(var e in O){O[e](0,1)}}:false,A=0,O;function aJ(){try{return new bb.XMLHttpRequest()}catch(bu){}}function ah(){try{return new bb.ActiveXObject("Microsoft.XMLHTTP")}catch(bu){}}b.ajaxSettings.xhr=bb.ActiveXObject?function(){return !this.isLocal&&aJ()||ah()}:aJ;(function(e){b.extend(b.support,{ajax:!!e,cors:!!e&&("withCredentials" in e)})})(b.ajaxSettings.xhr());if(b.support.ajax){b.ajaxTransport(function(e){if(!e.crossDomain||b.support.cors){var bu;return{send:function(bA,bv){var bz=e.xhr(),by,bx;if(e.username){bz.open(e.type,e.url,e.async,e.username,e.password)}else{bz.open(e.type,e.url,e.async)}if(e.xhrFields){for(bx in e.xhrFields){bz[bx]=e.xhrFields[bx]}}if(e.mimeType&&bz.overrideMimeType){bz.overrideMimeType(e.mimeType)}if(!e.crossDomain&&!bA["X-Requested-With"]){bA["X-Requested-With"]="XMLHttpRequest"}try{for(bx in bA){bz.setRequestHeader(bx,bA[bx])}}catch(bw){}bz.send((e.hasContent&&e.data)||null);bu=function(bJ,bD){var bE,bC,bB,bH,bG;try{if(bu&&(bD||bz.readyState===4)){bu=M;if(by){bz.onreadystatechange=b.noop;if(D){delete O[by]}}if(bD){if(bz.readyState!==4){bz.abort()}}else{bE=bz.status;bB=bz.getAllResponseHeaders();bH={};bG=bz.responseXML;if(bG&&bG.documentElement){bH.xml=bG}bH.text=bz.responseText;try{bC=bz.statusText}catch(bI){bC=""}if(!bE&&e.isLocal&&!e.crossDomain){bE=bH.text?200:404}else{if(bE===1223){bE=204}}}}}catch(bF){if(!bD){bv(-1,bF)}}if(bH){bv(bE,bC,bH,bB)}};if(!e.async||bz.readyState===4){bu()}else{by=++A;if(D){if(!O){O={};b(bb).unload(D)}O[by]=bu}bz.onreadystatechange=bu}},abort:function(){if(bu){bu(0,1)}}}}})}var S={},a8,o,az=/^(?:toggle|show|hide)$/,aP=/^([+\-]=)?([\d+.\-]+)([a-z%]*)$/i,a1,aF=[["height","marginTop","marginBottom","paddingTop","paddingBottom"],["width","marginLeft","marginRight","paddingLeft","paddingRight"],["opacity"]],a3,T=bb.webkitRequestAnimationFrame||bb.mozRequestAnimationFrame||bb.oRequestAnimationFrame;b.fn.extend({show:function(bw,bz,by){var bv,bx;if(bw||bw===0){return this.animate(aZ("show",3),bw,bz,by)}else{for(var bu=0,e=this.length;bu<e;bu++){bv=this[bu];if(bv.style){bx=bv.style.display;if(!b._data(bv,"olddisplay")&&bx==="none"){bx=bv.style.display=""}if(bx===""&&b.css(bv,"display")==="none"){b._data(bv,"olddisplay",z(bv.nodeName))}}}for(bu=0;bu<e;bu++){bv=this[bu];if(bv.style){bx=bv.style.display;if(bx===""||bx==="none"){bv.style.display=b._data(bv,"olddisplay")||""}}}return this}},hide:function(bv,by,bx){if(bv||bv===0){return this.animate(aZ("hide",3),bv,by,bx)}else{for(var bu=0,e=this.length;bu<e;bu++){if(this[bu].style){var bw=b.css(this[bu],"display");if(bw!=="none"&&!b._data(this[bu],"olddisplay")){b._data(this[bu],"olddisplay",bw)}}}for(bu=0;bu<e;bu++){if(this[bu].style){this[bu].style.display="none"}}return this}},_toggle:b.fn.toggle,toggle:function(bv,bu,bw){var e=typeof bv==="boolean";if(b.isFunction(bv)&&b.isFunction(bu)){this._toggle.apply(this,arguments)}else{if(bv==null||e){this.each(function(){var bx=e?bv:b(this).is(":hidden");b(this)[bx?"show":"hide"]()})}else{this.animate(aZ("toggle",3),bv,bu,bw)}}return this},fadeTo:function(e,bw,bv,bu){return this.filter(":hidden").css("opacity",0).show().end().animate({opacity:bw},e,bv,bu)},animate:function(bx,bu,bw,bv){var e=b.speed(bu,bw,bv);if(b.isEmptyObject(bx)){return this.each(e.complete,[false])}bx=b.extend({},bx);return this[e.queue===false?"each":"queue"](function(){if(e.queue===false){b._mark(this)}var bB=b.extend({},e),bI=this.nodeType===1,bF=bI&&b(this).is(":hidden"),by,bC,bA,bH,bG,bE,bz,bD,bJ;bB.animatedProperties={};for(bA in bx){by=b.camelCase(bA);if(bA!==by){bx[by]=bx[bA];delete bx[bA]}bC=bx[by];if(b.isArray(bC)){bB.animatedProperties[by]=bC[1];bC=bx[by]=bC[0]}else{bB.animatedProperties[by]=bB.specialEasing&&bB.specialEasing[by]||bB.easing||"swing"}if(bC==="hide"&&bF||bC==="show"&&!bF){return bB.complete.call(this)}if(bI&&(by==="height"||by==="width")){bB.overflow=[this.style.overflow,this.style.overflowX,this.style.overflowY];if(b.css(this,"display")==="inline"&&b.css(this,"float")==="none"){if(!b.support.inlineBlockNeedsLayout){this.style.display="inline-block"}else{bH=z(this.nodeName);if(bH==="inline"){this.style.display="inline-block"}else{this.style.display="inline";this.style.zoom=1}}}}}if(bB.overflow!=null){this.style.overflow="hidden"}for(bA in bx){bG=new b.fx(this,bB,bA);bC=bx[bA];if(az.test(bC)){bG[bC==="toggle"?bF?"show":"hide":bC]()}else{bE=aP.exec(bC);bz=bG.cur();if(bE){bD=parseFloat(bE[2]);bJ=bE[3]||(b.cssNumber[bA]?"":"px");if(bJ!=="px"){b.style(this,bA,(bD||1)+bJ);bz=((bD||1)/bG.cur())*bz;b.style(this,bA,bz+bJ)}if(bE[1]){bD=((bE[1]==="-="?-1:1)*bD)+bz}bG.custom(bz,bD,bJ)}else{bG.custom(bz,bC,"")}}}return true})},stop:function(bu,e){if(bu){this.queue([])}this.each(function(){var bw=b.timers,bv=bw.length;if(!e){b._unmark(true,this)}while(bv--){if(bw[bv].elem===this){if(e){bw[bv](true)}bw.splice(bv,1)}}});if(!e){this.dequeue()}return this}});function bf(){setTimeout(aq,0);return(a3=b.now())}function aq(){a3=M}function aZ(bu,e){var bv={};b.each(aF.concat.apply([],aF.slice(0,e)),function(){bv[this]=bu});return bv}b.each({slideDown:aZ("show",1),slideUp:aZ("hide",1),slideToggle:aZ("toggle",1),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,bu){b.fn[e]=function(bv,bx,bw){return this.animate(bu,bv,bx,bw)}});b.extend({speed:function(bv,bw,bu){var e=bv&&typeof bv==="object"?b.extend({},bv):{complete:bu||!bu&&bw||b.isFunction(bv)&&bv,duration:bv,easing:bu&&bw||bw&&!b.isFunction(bw)&&bw};e.duration=b.fx.off?0:typeof e.duration==="number"?e.duration:e.duration in b.fx.speeds?b.fx.speeds[e.duration]:b.fx.speeds._default;e.old=e.complete;e.complete=function(bx){if(b.isFunction(e.old)){e.old.call(this)}if(e.queue!==false){b.dequeue(this)}else{if(bx!==false){b._unmark(this)}}};return e},easing:{linear:function(bv,bw,e,bu){return e+bu*bv},swing:function(bv,bw,e,bu){return((-Math.cos(bv*Math.PI)/2)+0.5)*bu+e}},timers:[],fx:function(bu,e,bv){this.options=e;this.elem=bu;this.prop=bv;e.orig=e.orig||{}}});b.fx.prototype={update:function(){if(this.options.step){this.options.step.call(this.elem,this.now,this)}(b.fx.step[this.prop]||b.fx.step._default)(this)},cur:function(){if(this.elem[this.prop]!=null&&(!this.elem.style||this.elem.style[this.prop]==null)){return this.elem[this.prop]}var e,bu=b.css(this.elem,this.prop);return isNaN(e=parseFloat(bu))?!bu||bu==="auto"?0:bu:e},custom:function(bz,by,bw){var e=this,bv=b.fx,bx;this.startTime=a3||bf();this.start=bz;this.end=by;this.unit=bw||this.unit||(b.cssNumber[this.prop]?"":"px");this.now=this.start;this.pos=this.state=0;function bu(bA){return e.step(bA)}bu.elem=this.elem;if(bu()&&b.timers.push(bu)&&!a1){if(T){a1=true;bx=function(){if(a1){T(bx);bv.tick()}};T(bx)}else{a1=setInterval(bv.tick,bv.interval)}}},show:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.show=true;this.custom(this.prop==="width"||this.prop==="height"?1:0,this.cur());b(this.elem).show()},hide:function(){this.options.orig[this.prop]=b.style(this.elem,this.prop);this.options.hide=true;this.custom(this.cur(),0)},step:function(bx){var bw=a3||bf(),e=true,by=this.elem,bu=this.options,bv,bA;if(bx||bw>=bu.duration+this.startTime){this.now=this.end;this.pos=this.state=1;this.update();bu.animatedProperties[this.prop]=true;for(bv in bu.animatedProperties){if(bu.animatedProperties[bv]!==true){e=false}}if(e){if(bu.overflow!=null&&!b.support.shrinkWrapBlocks){b.each(["","X","Y"],function(bB,bC){by.style["overflow"+bC]=bu.overflow[bB]})}if(bu.hide){b(by).hide()}if(bu.hide||bu.show){for(var bz in bu.animatedProperties){b.style(by,bz,bu.orig[bz])}}bu.complete.call(by)}return false}else{if(bu.duration==Infinity){this.now=bw}else{bA=bw-this.startTime;this.state=bA/bu.duration;this.pos=b.easing[bu.animatedProperties[this.prop]](this.state,bA,0,1,bu.duration);this.now=this.start+((this.end-this.start)*this.pos)}this.update()}return true}};b.extend(b.fx,{tick:function(){for(var bu=b.timers,e=0;e<bu.length;++e){if(!bu[e]()){bu.splice(e--,1)}}if(!bu.length){b.fx.stop()}},interval:13,stop:function(){clearInterval(a1);a1=null},speeds:{slow:600,fast:200,_default:400},step:{opacity:function(e){b.style(e.elem,"opacity",e.now)},_default:function(e){if(e.elem.style&&e.elem.style[e.prop]!=null){e.elem.style[e.prop]=(e.prop==="width"||e.prop==="height"?Math.max(0,e.now):e.now)+e.unit}else{e.elem[e.prop]=e.now}}}});if(b.expr&&b.expr.filters){b.expr.filters.animated=function(e){return b.grep(b.timers,function(bu){return e===bu.elem}).length}}function z(bw){if(!S[bw]){var e=at.body,bu=b("<"+bw+">").appendTo(e),bv=bu.css("display");bu.remove();if(bv==="none"||bv===""){if(!a8){a8=at.createElement("iframe");a8.frameBorder=a8.width=a8.height=0}e.appendChild(a8);if(!o||!a8.createElement){o=(a8.contentWindow||a8.contentDocument).document;o.write((at.compatMode==="CSS1Compat"?"<!doctype html>":"")+"<html><body>");o.close()}bu=o.createElement(bw);o.body.appendChild(bu);bv=b.css(bu,"display");e.removeChild(a8)}S[bw]=bv}return S[bw]}var W=/^t(?:able|d|h)$/i,ac=/^(?:body|html)$/i;if("getBoundingClientRect" in at.documentElement){b.fn.offset=function(bH){var bx=this[0],bA;if(bH){return this.each(function(e){b.offset.setOffset(this,bH,e)})}if(!bx||!bx.ownerDocument){return null}if(bx===bx.ownerDocument.body){return b.offset.bodyOffset(bx)}try{bA=bx.getBoundingClientRect()}catch(bE){}var bG=bx.ownerDocument,bv=bG.documentElement;if(!bA||!b.contains(bv,bx)){return bA?{top:bA.top,left:bA.left}:{top:0,left:0}}var bB=bG.body,bC=aI(bG),bz=bv.clientTop||bB.clientTop||0,bD=bv.clientLeft||bB.clientLeft||0,bu=bC.pageYOffset||b.support.boxModel&&bv.scrollTop||bB.scrollTop,by=bC.pageXOffset||b.support.boxModel&&bv.scrollLeft||bB.scrollLeft,bF=bA.top+bu-bz,bw=bA.left+by-bD;return{top:bF,left:bw}}}else{b.fn.offset=function(bE){var by=this[0];if(bE){return this.each(function(bF){b.offset.setOffset(this,bE,bF)})}if(!by||!by.ownerDocument){return null}if(by===by.ownerDocument.body){return b.offset.bodyOffset(by)}b.offset.initialize();var bB,bv=by.offsetParent,bu=by,bD=by.ownerDocument,bw=bD.documentElement,bz=bD.body,bA=bD.defaultView,e=bA?bA.getComputedStyle(by,null):by.currentStyle,bC=by.offsetTop,bx=by.offsetLeft;while((by=by.parentNode)&&by!==bz&&by!==bw){if(b.offset.supportsFixedPosition&&e.position==="fixed"){break}bB=bA?bA.getComputedStyle(by,null):by.currentStyle;bC-=by.scrollTop;bx-=by.scrollLeft;if(by===bv){bC+=by.offsetTop;bx+=by.offsetLeft;if(b.offset.doesNotAddBorder&&!(b.offset.doesAddBorderForTableAndCells&&W.test(by.nodeName))){bC+=parseFloat(bB.borderTopWidth)||0;bx+=parseFloat(bB.borderLeftWidth)||0}bu=bv;bv=by.offsetParent}if(b.offset.subtractsBorderForOverflowNotVisible&&bB.overflow!=="visible"){bC+=parseFloat(bB.borderTopWidth)||0;bx+=parseFloat(bB.borderLeftWidth)||0}e=bB}if(e.position==="relative"||e.position==="static"){bC+=bz.offsetTop;bx+=bz.offsetLeft}if(b.offset.supportsFixedPosition&&e.position==="fixed"){bC+=Math.max(bw.scrollTop,bz.scrollTop);bx+=Math.max(bw.scrollLeft,bz.scrollLeft)}return{top:bC,left:bx}}}b.offset={initialize:function(){var e=at.body,bu=at.createElement("div"),bx,bz,by,bA,bv=parseFloat(b.css(e,"marginTop"))||0,bw="<div style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;'><div></div></div><table style='position:absolute;top:0;left:0;margin:0;border:5px solid #000;padding:0;width:1px;height:1px;' cellpadding='0' cellspacing='0'><tr><td></td></tr></table>";b.extend(bu.style,{position:"absolute",top:0,left:0,margin:0,border:0,width:"1px",height:"1px",visibility:"hidden"});bu.innerHTML=bw;e.insertBefore(bu,e.firstChild);bx=bu.firstChild;bz=bx.firstChild;bA=bx.nextSibling.firstChild.firstChild;this.doesNotAddBorder=(bz.offsetTop!==5);this.doesAddBorderForTableAndCells=(bA.offsetTop===5);bz.style.position="fixed";bz.style.top="20px";this.supportsFixedPosition=(bz.offsetTop===20||bz.offsetTop===15);bz.style.position=bz.style.top="";bx.style.overflow="hidden";bx.style.position="relative";this.subtractsBorderForOverflowNotVisible=(bz.offsetTop===-5);this.doesNotIncludeMarginInBodyOffset=(e.offsetTop!==bv);e.removeChild(bu);b.offset.initialize=b.noop},bodyOffset:function(e){var bv=e.offsetTop,bu=e.offsetLeft;b.offset.initialize();if(b.offset.doesNotIncludeMarginInBodyOffset){bv+=parseFloat(b.css(e,"marginTop"))||0;bu+=parseFloat(b.css(e,"marginLeft"))||0}return{top:bv,left:bu}},setOffset:function(bw,bF,bz){var bA=b.css(bw,"position");if(bA==="static"){bw.style.position="relative"}var by=b(bw),bu=by.offset(),e=b.css(bw,"top"),bD=b.css(bw,"left"),bE=(bA==="absolute"||bA==="fixed")&&b.inArray("auto",[e,bD])>-1,bC={},bB={},bv,bx;if(bE){bB=by.position();bv=bB.top;bx=bB.left}else{bv=parseFloat(e)||0;bx=parseFloat(bD)||0}if(b.isFunction(bF)){bF=bF.call(bw,bz,bu)}if(bF.top!=null){bC.top=(bF.top-bu.top)+bv}if(bF.left!=null){bC.left=(bF.left-bu.left)+bx}if("using" in bF){bF.using.call(bw,bC)}else{by.css(bC)}}};b.fn.extend({position:function(){if(!this[0]){return null}var bv=this[0],bu=this.offsetParent(),bw=this.offset(),e=ac.test(bu[0].nodeName)?{top:0,left:0}:bu.offset();bw.top-=parseFloat(b.css(bv,"marginTop"))||0;bw.left-=parseFloat(b.css(bv,"marginLeft"))||0;e.top+=parseFloat(b.css(bu[0],"borderTopWidth"))||0;e.left+=parseFloat(b.css(bu[0],"borderLeftWidth"))||0;return{top:bw.top-e.top,left:bw.left-e.left}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||at.body;while(e&&(!ac.test(e.nodeName)&&b.css(e,"position")==="static")){e=e.offsetParent}return e})}});b.each(["Left","Top"],function(bu,e){var bv="scroll"+e;b.fn[bv]=function(by){var bw,bx;if(by===M){bw=this[0];if(!bw){return null}bx=aI(bw);return bx?("pageXOffset" in bx)?bx[bu?"pageYOffset":"pageXOffset"]:b.support.boxModel&&bx.document.documentElement[bv]||bx.document.body[bv]:bw[bv]}return this.each(function(){bx=aI(this);if(bx){bx.scrollTo(!bu?by:b(bx).scrollLeft(),bu?by:b(bx).scrollTop())}else{this[bv]=by}})}});function aI(e){return b.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:false}b.each(["Height","Width"],function(bu,e){var bv=e.toLowerCase();b.fn["inner"+e]=function(){var bw=this[0];return bw&&bw.style?parseFloat(b.css(bw,bv,"padding")):null};b.fn["outer"+e]=function(bx){var bw=this[0];return bw&&bw.style?parseFloat(b.css(bw,bv,bx?"margin":"border")):null};b.fn[bv]=function(bx){var by=this[0];if(!by){return bx==null?null:this}if(b.isFunction(bx)){return this.each(function(bC){var bB=b(this);bB[bv](bx.call(this,bC,bB[bv]()))})}if(b.isWindow(by)){var bz=by.document.documentElement["client"+e];return by.document.compatMode==="CSS1Compat"&&bz||by.document.body["client"+e]||bz}else{if(by.nodeType===9){return Math.max(by.documentElement["client"+e],by.body["scroll"+e],by.documentElement["scroll"+e],by.body["offset"+e],by.documentElement["offset"+e])}else{if(bx===M){var bA=b.css(by,bv),bw=parseFloat(bA);return b.isNaN(bw)?bA:bw}else{return this.css(bv,typeof bx==="string"?bx:bx+"px")}}}}});bb.jQuery=bb.$=b})(window);jQuery.Buffer=function(){var b=function(c){if(c){this.assign(c)}this._bufferedCommandList=[];this._bufferedCommands={}};b._buffers=[];b._pool=[];b.bufferForElement=function(c){if(c._jquery_buffer){return c._jquery_buffer}return this.bufferFromPool().assign(c)};b.bufferFromPool=function(){var c=null;if(this._pool.length===0){c=new b()}else{c=this._pool.pop()}b._buffers.push(c);if(!this.flushingScheduled){this.scheduleFlushing()}return c};b.returnToPool=function(c){c.unassign();this._pool.push(c)};b.scheduleFlushing=function(){this.flushingScheduled=true};b.flush=function(){var e=this._buffers,d,c=e.length;for(d=0;d<c;d++){e[d].flush();this.returnToPool(e[d])}this._buffers=[];this.flushingScheduled=false};b.prototype.assign=function(c){if(this._el){this.unassign()}this._el=c;this._el._jquery_buffer=this;return this};b.prototype.unassign=function(){if(!this._el){return}this._el._jquery_buffer=undefined;this._el=undefined;return this};b.prototype.flush=function(){var f=this._bufferedCommandList,e=f.length,d,g;for(d=0;d<e;d++){g=f[d];this[g](this._bufferedCommands[g]);delete this._bufferedCommands[g]}this._bufferedCommandList.length=0;this.unassign()};b.prototype.$=function(c,d){if(!d){d=this._el}if(c===""||c===undefined){c=d;d=undefined}return jQuery(c,d)};b.prototype.bufferedCommand=function(c){if(!this._bufferedCommands[c]){this._bufferedCommands[c]={};this._bufferedCommandList.push(c)}return this._bufferedCommands[c]};b.prototype.hasBufferedCommand=function(c){return !!this._bufferedCommands[c]};b.prototype.html=function(d){var c=this.bufferedCommand("flushContent");if(d===undefined){return c.text||c.html||this.$().html()}c.text=undefined;c.html=d};b.prototype.text=function(d){var c=this.bufferedCommand("flushContent");if(d===undefined){return c.text||c.html||this.$().text()}c.text=d;c.html=undefined};b.prototype.flushContent=function(c){if(c.text!==undefined){this.$().text(c.text)}else{if(c.html!==undefined){this.$().html(c.html)}}};b.prototype.attr=function(f,g){if(typeof f==="object"){for(var d in f){this.attr(d,f[d])}return}if(f==="class"){if(g===undefined){return this.setClass().join(" ")}else{if(typeof g==="string"||jQuery.isArray(g)){var c=this.bufferedCommand("flushClassNames");c.classNames=this._hashFromClassNames(g);return}else{return this.setClass(g)}}}else{if(f==="html"){return this.html(g)}else{if(f==="text"){return this.text(g)}else{if(f==="style"){return this.resetStyles(g)}}}}var e=this.bufferedCommand("flushAttributes");if(!e.attr){e.attr={}}e.attr[f]=g};b.prototype.flushAttributes=function(f){var c=f.attr,g=this.$(),d;for(var e in c){if(!c.hasOwnProperty(e)){continue}d=c[e];if(d!==null){g.attr(e,d)}else{g.removeAttr(e)}}};b.prototype._STYLE_REGEX=/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g;b.prototype._camelizeStyleName=function(c){var d=c.match(/^-(webkit|moz|o)-/),e=c.camelize();if(d){return e.substr(0,1).toUpperCase()+e.substr(1)}else{return e}};b.prototype._dasherizeStyleName=function(c){var d=SC.String.dasherize(c);if(d.match(/^(webkit|moz|ms|o)-/)){d="-"+d}return d};b.prototype._loadStyles=function(c){if(!c){c=this.$().attr("style")}if(c&&(c=c.toString()).length>0){if(SC.browser.msie){c=c.toLowerCase()}var f={};var e=this._STYLE_REGEX,d;e.lastIndex=0;while(d=e.exec(c)){f[this._camelizeStyleName(d[1])]=d[2]}return f}else{return{}}};b.prototype.resetStyles=function(d){var c=this.bufferedCommand("flushStyles");c._styles=this._loadStyles(d||" ")};b.prototype.styles=function(){var c=this.bufferedCommand("flushStyles");if(!c._styles){c._styles=this._loadStyles()}return c._styles};b.prototype.css=function(e,f){if(typeof e==="object"){for(var c in e){this.css(c,e[c])}return}var d=this.bufferedCommand("flushStyles");if(!d._styles){d._styles=this._loadStyles()}d._styles[e]=f};b.prototype.flushStyles=function(e){var g=e._styles;var j="";var d,h,f=[],c=0;for(d in g){if(!g.hasOwnProperty(d)){continue}h=g[d];if(h===null){continue}if(typeof h==="number"&&d!=="zIndex"&&d!=="fontWeight"&&d!=="opacity"){h+="px"}f[c++]=this._dasherizeStyleName(d)+": "+h}this.$().attr("style",f.join("; "))};b.prototype._hashFromClassNames=function(f){if(typeof f==="string"){f=f.split(" ")}var d,c=f.length,e={};for(d=0;d<c;d++){e[f[d]]=true}return e};b.prototype.setClass=function(g,c){var f=this.bufferedCommand("flushClassNames"),e;if(g===undefined){if(!f.classNames){f.classNames=this._hashFromClassNames(this._el.className)}var h=f.classNames,d=[];for(e in h){if(e&&h[e]){d.push(e)}}return d}if(typeof g==="object"){if(!f.classNames){f.classNames=this._hashFromClassNames(this._el.className)}for(e in g){f.classNames[e]=g[e]}return}if(!f.classNames){f.classNames=this._hashFromClassNames(this._el.className)}f.classNames[g]=c||false};b.prototype.hasClass=function(d){var c=this.bufferedCommand("flushClassNames");if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}return !!c.classNames[d]};b.prototype.addClass=function(f){if(!f){return}var e=this.bufferedCommand("flushClassNames");if(!e.classNames){e.classNames=this._hashFromClassNames(this._el.className)}if(typeof f==="string"){f=f.split(" ")}var d,c=f.length;for(d=0;d<c;d++){e.classNames[jQuery.trim(f[d])]=true}};b.prototype.removeClass=function(d){var c=this.bufferedCommand("flushClassNames");if(!c.classNames){c.classNames=this._hashFromClassNames(this._el.className)}c.classNames[d]=false};b.prototype.resetClassNames=function(d){var c=this.bufferedCommand("flushClassNames");c.classNames={}};b.prototype.flushClassNames=function(e){var f=[];var g=e.classNames,d;for(d in g){if(g[d]){f.push(d)}}this.$().attr("class",f.join(" "))};function a(d){for(var c in d){if(typeof d[c]==="function"){d[c].displayName=c}}}a(b);a(b.prototype);return b}();(function(){jQuery.buffer=jQuery.bufferedJQuery=jQuery.sub();jQuery.bufferedJQuery.fn.extend({html:function(d){if(d===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[0]).html()}var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.html(d)}return this},text:function(d){if(d===undefined){if(this.length<1){return undefined}return jQuery.Buffer.bufferForElement(this[0]).text()}var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.text(d)}return this},attr:function(d,e){var b;if(typeof e==="undefined"&&typeof d==="string"){if(this.length<1){return false}b=jQuery.Buffer.bufferForElement(this[0]);return b.attr(d)}var a=this.length,c;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.attr(d,e)}return this},hasClass:function(a){if(this.length<1){return false}return jQuery.Buffer.bufferForElement(this[0]).hasClass(a)},setClass:function(e,c){var a=this.length,d,b;for(d=0;d<a;d++){b=jQuery.Buffer.bufferForElement(this[d]);b.setClass(e,c)}return this},addClass:function(d){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.addClass(d)}return this},removeClass:function(d){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.removeClass(d)}return this},resetClassNames:function(){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.resetClassNames()}return this},css:function(d,e){var a=this.length,c,b;for(c=0;c<a;c++){b=jQuery.Buffer.bufferForElement(this[c]);b.css(d,e)}return this},styles:function(){if(this.length<1){return null}return jQuery.Buffer.bufferForElement(this[0]).styles()},resetStyles:function(){if(this.length<1){return null}jQuery.Buffer.bufferForElement(this[0]).resetStyles();return this}})})();jQuery.Buffer._flush=function(){jQuery.Buffer.flush()};jQuery.Buffer.scheduleFlushing=function(){SC.RunLoop.currentRunLoop.invokeOnce(jQuery.Buffer._flush);this.flushingScheduled=true};if(!window.require){window.require=function require(){}}if(!window.sc_require){window.sc_require=require}if(!window.sc_resource){window.sc_resource=function sc_resource(){}}sc_require("license");window.YES=true;window.NO=false;if(typeof console==="undefined"){window.console={};console.log=console.info=console.warn=console.error=function(){}}window.SC=window.SC||{};window.SproutCore=window.SproutCore||SC;SC=window.SC;SC.VERSION="1.6.0";SC._baseMixin=function(c){var f=Array.prototype.slice.call(arguments,1),a,e=f[0]||{},g=1,d=f.length,j,b,h;if(d===1){e=this||{};g=0}for(;g<d;g++){if(!(j=f[g])){continue}for(h in j){if(!j.hasOwnProperty(h)){continue}b=j[h];if(e===b){continue}if(b!==undefined&&(c||(e[h]===undefined))){e[h]=b}}if(j.hasOwnProperty("toString")){e.toString=j.toString}}return e};SC.mixin=function(){var a=Array.prototype.slice.call(arguments);a.unshift(true);return SC._baseMixin.apply(this,a)};SC.supplement=function(){var a=Array.prototype.slice.call(arguments);a.unshift(false);return SC._baseMixin.apply(this,a)};SC.extend=SC.mixin;SC.mixin({T_ERROR:"error",T_OBJECT:"object",T_NULL:"null",T_CLASS:"class",T_HASH:"hash",T_FUNCTION:"function",T_UNDEFINED:"undefined",T_NUMBER:"number",T_BOOL:"boolean",T_ARRAY:"array",T_STRING:"string",T_DATE:"date",T_REGEXP:"regexp",typeOf:function(a){if(a===undefined){return SC.T_UNDEFINED}if(a===null){return SC.T_NULL}var b=jQuery.type(a);if(b==="function"){return a.isClass?SC.T_CLASS:SC.T_FUNCTION}else{if(b==="object"){if(SC.Error&&(a instanceof SC.Error)){return SC.T_ERROR}else{if(a instanceof SC.Object){return SC.T_OBJECT}else{return SC.T_HASH}}}}return b},none:function(a){return a==null},empty:function(a){return a===null||a===undefined||a===""},isArray:function(a){if(!a||a.setInterval){return false}if(Array.isArray&&Array.isArray(a)){return true}if(a.objectAt){return true}if(a.length!==undefined&&jQuery.type(a)==="object"){return true}return false},makeArray:function(a){return SC.isArray(a)?a:SC.A(a)},A:function(c){if(c===null||c===undefined){return[]}if(c.slice instanceof Function){if(typeof(c)==="string"){return[c]}else{return c.slice()}}if(c.toArray){return c.toArray()}if(!SC.isArray(c)){return[c]}var b=[],a=c.length;while(--a>=0){b[a]=c[a]}return b},guidKey:"SproutCore"+(SC.VERSION+Math.random()).replace(/\D/g,""),_guidPrefixes:{number:"nu",string:"st"},_guidCaches:{number:{},string:{}},_numberGuids:[],_stringGuids:{},_keyCache:{},guidFor:function(e){var b,c,d=typeof e;if(e===undefined){return"(undefined)"}if(e===null){return"(null)"}if(d===SC.T_NUMBER||d===SC.T_STRING){b=this._guidCaches[d];c=b[e];if(!c){c="st"+(jQuery.uuid++);b[e]=c}return c}else{if(d===SC.T_BOOL){return(e)?"(true)":"(false)"}}var a=this.guidKey;if(e[a]){return e[a]}if(e===Object){return"(Object)"}if(e===Array){return"(Array)"}return SC.generateGuid(e,"sc")},keyFor:function(d,c){var b,a=this._keyCache[d];if(!a){a=this._keyCache[d]={}}b=a[c];if(!b){b=a[c]=d+"_"+c}return b},generateGuid:function(c,b){var a=(b+(jQuery.uuid++));if(c){c[this.guidKey]=a}return a},hashFor:function(){var a=arguments.length,c="",e,d,b;for(b=0;b<a;++b){e=arguments[b];c+=(e&&(d=e.hash)&&(typeof d===SC.T_FUNCTION))?d.call(e):this.guidFor(e)}return c===""?null:c},isEqual:function(d,c){return this.hashFor(d)===this.hashFor(c)},compare:function(s,p){if(s===p){return 0}var j=SC.typeOf(s);var g=SC.typeOf(p);var b=SC.ORDER_DEFINITION_MAPPING;if(!b){var d=SC.ORDER_DEFINITION;b=SC.ORDER_DEFINITION_MAPPING={};var q,n;for(q=0,n=d.length;q<n;++q){b[d[q]]=q}delete SC.ORDER_DEFINITION}var t=b[j];var c=b[g];if(t<c){return -1}if(t>c){return 1}switch(j){case SC.T_BOOL:case SC.T_NUMBER:if(s<p){return -1}if(s>p){return 1}return 0;case SC.T_STRING:var k=s.localeCompare(p);if(k<0){return -1}if(k>0){return 1}return 0;case SC.T_ARRAY:var o=s.length;var m=p.length;var e=Math.min(o,m);var a=0;var h=0;var f=arguments.callee;while(a===0&&h<e){a=f(s[h],p[h]);h++}if(a!==0){return a}if(o<m){return -1}if(o>m){return 1}return 0;case SC.T_OBJECT:if(s.constructor.isComparable===YES){return s.constructor.compare(s,p)}return 0;default:return 0}},K:function(){return this},EMPTY_ARRAY:[],EMPTY_HASH:{},EMPTY_RANGE:{start:0,length:0},beget:function(c){if(c===null||c===undefined){return null}var a=SC.K;a.prototype=c;var b=new a();a.prototype=null;if(typeof c.didBeget==="function"){b=c.didBeget(b)}return b},copy:function(d,b){var c=d,a;if(d){if(d.isCopyable){return d.copy(b)}if(d.clone){return d.clone()}}switch(jQuery.type(d)){case"array":c=d.slice();if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}break;case"object":c={};for(var e in d){c[e]=b?SC.copy(d[e],true):d[e]}}return c},merge:function(){var c={},b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(c,arguments[a])}return c},keys:function(c){var a=[];for(var b in c){a.push(b)}return a},inspect:function(d){var a,b=[];for(var c in d){a=d[c];if(a==="toString"){continue}if(SC.typeOf(a)===SC.T_FUNCTION){a="function() { ... }"}b.push(c+": "+a)}return"{"+b.join(" , ")+"}"},tupleForPropertyPath:function(e,a){if(typeof e==="object"&&(e instanceof Array)){return e}var c;var b=e.indexOf("*");if(b<0){b=e.lastIndexOf(".")}c=(b>=0)?e.slice(b+1):e;var d=this.objectForPropertyPath(e,a,b);return(d&&c)?[d,c]:null},objectForPropertyPath:function(f,c,d){var g,b,e,a;if(!c){c=window}if(SC.typeOf(f)===SC.T_STRING){if(d===undefined){d=f.length}g=0;while((c)&&(g<d)){b=f.indexOf(".",g);if((b<0)||(b>d)){b=d}e=f.slice(g,b);c=c.get?c.get(e):c[e];g=b+1}if(g<d){c=undefined}}else{g=0;a=f.length;e=null;while((g<a)&&c){e=f[g++];if(e){c=(c.get)?c.get(e):c[e]}}if(g<a){c=undefined}}return c},requiredObjectForPropertyPath:function(c,a,b){var d=SC.objectForPropertyPath(c,a,b);if(!d){throw c+" could not be found"}return d}});SC.clone=SC.copy;SC.$A=SC.A;SC.didLoad=SC.K;SC.ORDER_DEFINITION=[SC.T_ERROR,SC.T_UNDEFINED,SC.T_NULL,SC.T_BOOL,SC.T_NUMBER,SC.T_STRING,SC.T_ARRAY,SC.T_HASH,SC.T_OBJECT,SC.T_FUNCTION,SC.T_CLASS];SC.Function={property:function(b,c){b.dependentKeys=SC.$A(c);var a=SC.guidFor(b);b.cacheKey="__cache__"+a;b.lastSetValueKey="__lastValue__"+a;b.isProperty=true;return b},cacheable:function(a,b){a.isProperty=true;if(!a.dependentKeys){a.dependentKeys=[]}a.isCacheable=(b===undefined)?true:b;return a},idempotent:function(a,b){a.isProperty=true;if(!a.dependentKeys){this.dependentKeys=[]}a.isVolatile=(b===undefined)?true:b;return a},enhance:function(a){a.isEnhancement=true;return a},observes:function(c,a){var f=a.length,b=null,e=null;while(--f>=0){var d=a[f];if((d.indexOf(".")<0)&&(d.indexOf("*")<0)){if(!b){b=c.localPropertyPaths=[]}b.push(d)}else{if(!e){e=c.propertyPaths=[]}e.push(d)}}return c}};sc_require("system/function");SC.mixin(Function.prototype,{property:function(){return SC.Function.property(this,arguments)},cacheable:function(a){return SC.Function.cacheable(this,a)},idempotent:function(a){return SC.Function.idempotent(this,a)},enhance:function(){return SC.Function.enhance(this)},observes:function(a){return SC.Function.observes(this,arguments)}});SC.ObserverSet={add:function(k,a,c){var b=SC.guidFor(k),f=SC.guidFor(a),j=this._members,d=this.members,g=j[b],h,e;if(!g){g=j[b]={}}h=g[f];if(h===undefined){g[f]=d.length;e=[k,a,c];d.push(e)}else{}},remove:function(g,h){var e=SC.guidFor(g),b=SC.guidFor(h);var d=this._members[e],a=this.members;if(!d){return false}var c=d[b];if(c===undefined){return false}if(c!==a.length-1){var f=(a[c]=a[a.length-1]);this._members[SC.guidFor(f[0])][SC.guidFor(f[1])]=c}a.pop();delete this._members[e][b];return true},invokeMethods:function(){var b=this.members,d;for(var c=0,a=b.length;c<a;c++){d=b[c];d[1].call(d[0])}},clone:function(){var c=SC.ObserverSet.create(),d=this.members;c._members=SC.clone(this._members);var e=c.members;for(var b=0,a=d.length;b<a;b++){e[b]=SC.clone(d[b]);e[b].length=3}return c},create:function(){return new SC.ObserverSet.constructor()},getMembers:function(){return this.members.slice(0)},constructor:function(){this._members={};this.members=[]}};SC.ObserverSet.constructor.prototype=SC.ObserverSet;SC.ObserverSet.slice=SC.ObserverSet.clone;SC.ObserverSet.copy=SC.ObserverSet.clone;SC._ChainObserver=function(b,a){this.property=b;this.root=a||this};SC._ChainObserver.createChain=function(f,m,g,a,b){var d=m.split("."),j=new SC._ChainObserver(d[0]),h=j;for(var e=1,c=d.length;e<c;e++){h=h.next=new SC._ChainObserver(d[e],j)}var k=j.tails=[h];j.objectDidChange(f);k.forEach(function(n){n.target=g;n.method=a;n.context=b});j.tails=null;return j};SC._ChainObserver.prototype={isChainObserver:true,object:null,property:null,next:null,root:null,target:null,method:null,tail:function(){if(this._tail){return this._tail}var a=this;while(a.next){a=a.next}this._tail=a;return a},objectDidChange:function(a){if(a===this.object){return}if(this.object){if(this.property==="@each"&&this.object._removeContentObserver){this.object._removeContentObserver(this)}else{if(this.object.removeObserver){this.object.removeObserver(this.property,this,this.propertyDidChange)}}}this.object=a;if(this.property==="@each"&&this.next){if(this.object&&this.object._addContentObserver){this.object._addContentObserver(this)}}else{if(this.object&&this.object.addObserver){this.object.addObserver(this.property,this,this.propertyDidChange)}this.propertyDidChange()}},propertyDidChange:function(){var b=this.object;var e=this.property;var d=(b&&b.get)?b.get(e):null;if(this.next){this.next.objectDidChange(d)}var f=this.target,g=this.method,c=this.context;if(f&&g){var a=b?b.propertyRevision:null;if(c){g.call(f,b,e,d,c,a)}else{g.call(f,b,e,d,a)}}},destroyChain:function(){var a=this.object;if(a&&a.removeObserver){a.removeObserver(this.property,this,this.propertyDidChange)}if(this.next){this.next.destroyChain()}this.next=this.target=this.method=this.object=this.context=null;return null}};sc_require("ext/function");sc_require("private/observer_set");sc_require("private/chain_observer");SC.LOG_OBSERVERS=NO;SC.OBSERVES_HANDLER_ADD=0;SC.OBSERVES_HANDLER_REMOVE=1;SC.Observable={isObservable:YES,automaticallyNotifiesObserversFor:function(a){return YES},get:function(c){var b=this[c],a;if(b===undefined){return this.unknownProperty(c)}else{if(b&&b.isProperty){if(b.isCacheable){a=this._kvo_cache;if(!a){a=this._kvo_cache={}}return(a[b.cacheKey]!==undefined)?a[b.cacheKey]:(a[b.cacheKey]=b.call(this,c))}else{return b.call(this,c)}}else{return b}}},set:function(j,g){var b=this[j],k=this.automaticallyNotifiesObserversFor(j),f=g,d,a,h,e;if(g===undefined&&SC.typeOf(j)===SC.T_HASH){var c=j;for(j in c){if(!c.hasOwnProperty(j)){continue}this.set(j,c[j])}return this}if(!k&&this._kvo_cacheable&&(a=this._kvo_cache)){d=this._kvo_cachedep;if(!d||(d=d[j])===undefined){d=this._kvo_computeCachedDependentsFor(j)}if(d){h=d.length;while(--h>=0){e=d[h];a[e.cacheKey]=a[e.lastSetValueKey]=undefined}}}if(b&&b.isProperty){a=this._kvo_cache;if(b.isVolatile||!a||(a[b.lastSetValueKey]!==g)){if(!a){a=this._kvo_cache={}}a[b.lastSetValueKey]=g;if(k){this.propertyWillChange(j)}f=b.call(this,j,g);if(b.isCacheable){a[b.cacheKey]=f}if(k){this.propertyDidChange(j,f,YES)}}}else{if(b===undefined){if(k){this.propertyWillChange(j)}this.unknownProperty(j,g);if(k){this.propertyDidChange(j,f)}}else{if(this[j]!==g){if(k){this.propertyWillChange(j)}f=this[j]=g;if(k){this.propertyDidChange(j,f)}}}}return this},unknownProperty:function(a,b){if(!(b===undefined)){this[a]=b}return b},beginPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;return this},endPropertyChanges:function(){this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;var b=this._kvo_changeLevel,a=this._kvo_changes;if((b<=0)&&a&&(a.length>0)&&!SC.Observers.isObservingSuspended){this._notifyPropertyObservers()}return this},propertyWillChange:function(a){return this},propertyDidChange:function(p,n,c){this._kvo_revision=(this._kvo_revision||0)+1;var b=this._kvo_changeLevel||0,h,o,j,d,f=SC.LOG_OBSERVERS&&(this.LOG_OBSERVING!==NO);var k=this._kvo_property_chains;if(k){var g=k[p];if(g){this.beginPropertyChanges();g=SC.clone(g);g.forEach(function(q){q.notifyPropertyDidChange()});this.endPropertyChanges()}}var a=this._kvo_cache;if(a){if(!c){d=this[p];if(d&&d.isProperty){a[d.cacheKey]=a[d.lastSetValueKey]=undefined}}if(this._kvo_cacheable){h=this._kvo_cachedep;if(!h||(h=h[p])===undefined){h=this._kvo_computeCachedDependentsFor(p)}if(h){o=h.length;while(--o>=0){j=h[o];a[j.cacheKey]=a[j.lastSetValueKey]=undefined}}}}var e=SC.Observers.isObservingSuspended;if((b>0)||e){var m=this._kvo_changes;if(!m){m=this._kvo_changes=SC.CoreSet.create()}m.add(p);if(e){if(f){SC.Logger.log("%@%@: will not notify observers because observing is suspended".fmt(SC.KVO_SPACES,this))}SC.Observers.objectHasPendingChanges(this)}}else{this._notifyPropertyObservers(p)}return this},registerDependentKey:function(h,c){var e=this._kvo_dependents,j=this._kvo_chain_dependents,b=this[h],k,g,a,f,d;if(typeof c==="object"&&(c instanceof Array)){k=c;a=0}else{k=arguments;a=1}g=k.length;if(!e){this._kvo_dependents=e={}}while(--g>=a){f=k[g];if(f.indexOf(".")>=0){SC._PropertyChain.createChain(f,this,h).activate()}else{d=e[f];if(!d){d=e[f]=[]}d.push(h)}}},registerDependentKeyWithChain:function(c,a){var d=this._chainsFor(c),b;d.add(a)},removeDependentKeyWithChain:function(c,a){var d=this._chainsFor(c),b;d.remove(a);if(d.get("length")===0){delete this._kvo_property_chains[c]}},_chainsFor:function(a){this._kvo_property_chains=this._kvo_property_chains||{};var b=this._kvo_property_chains[a]||SC.CoreSet.create();this._kvo_property_chains[a]=b;return b},_kvo_addCachedDependents:function(b,f,h,c){var a=f.length,e,d,g;while(--a>=0){d=f[a];c.add(d);e=this[d];if(e&&(e instanceof Function)&&e.isProperty){if(e.isCacheable){b.push(e)}if((g=h[d])&&g.length>0){this._kvo_addCachedDependents(b,g,h,c)}}}},_kvo_computeCachedDependentsFor:function(c){var d=this._kvo_cachedep,f=this._kvo_dependents,e=f?f[c]:null,a,b;if(!d){d=this._kvo_cachedep={}}if(!e||e.length===0){return d[c]=null}a=d[c]=[];b=SC._TMP_SEEN_SET=(SC._TMP_SEEN_SET||SC.CoreSet.create());b.add(c);this._kvo_addCachedDependents(a,e,f,b);b.clear();if(a.length===0){a=d[c]=null}return a},_kvo_for:function(c,b){var a=this[c];if(!this._kvo_cloned){this._kvo_cloned={}}if(!a){a=this[c]=(b===undefined)?[]:b.create();this._kvo_cloned[c]=YES}else{if(!this._kvo_cloned[c]){a=this[c]=a.copy();this._kvo_cloned[c]=YES}}return a},addObserver:function(c,f,h,b){var d,a,e,g;if(h===undefined){h=f;f=this}if(!f){f=this}if(typeof h==="string"){h=f[h]}if(!h){throw"You must pass a method to addObserver()"}c=c.toString();if(c.indexOf(".")>=0){a=SC._ChainObserver.createChain(this,c,f,h,b);a.masterTarget=f;a.masterMethod=h;this._kvo_for(SC.keyFor("_kvo_chains",c)).push(a)}else{if((this[c]===undefined)&&(c.indexOf("@")===0)){this.get(c)}if(f===this){f=null}d=SC.keyFor("_kvo_observers",c);this._kvo_for(d,SC.ObserverSet).add(f,h,b);this._kvo_for("_kvo_observed_keys",SC.CoreSet).add(c)}if(this.didAddObserver){this.didAddObserver(c,f,h)}return this},removeObserver:function(c,f,h){var d,e,b,g,a;if(h===undefined){h=f;f=this}if(!f){f=this}if(typeof h==="string"){h=f[h]}if(!h){throw"You must pass a method to removeObserver()"}c=c.toString();if(c.indexOf(".")>=0){d=SC.keyFor("_kvo_chains",c);if(e=this[d]){e=this._kvo_for(d);a=e.length;while(--a>=0){b=e[a];if(b&&(b.masterTarget===f)&&(b.masterMethod===h)){e[a]=b.destroyChain()}}}}else{if(f===this){f=null}d=SC.keyFor("_kvo_observers",c);if(g=this[d]){g=this._kvo_for(d);g.remove(f,h);if(g.getMembers().length===0){this._kvo_for("_kvo_observed_keys",SC.CoreSet).remove(c)}}}if(this.didRemoveObserver){this.didRemoveObserver(c,f,h)}return this},hasObserverFor:function(b){SC.Observers.flush(this);var d=this[SC.keyFor("_kvo_observers",b)],c=this[SC.keyFor("_kvo_local",b)],a;if(c&&c.length>0){return YES}if(d&&d.getMembers().length>0){return YES}return NO},initObservable:function(){if(this._observableInited){return}this._observableInited=YES;var f,o,m,k,h,e,n,g,c,p,b,j,d,a;if(o=this._observers){g=o.length;for(f=0;f<g;f++){m=o[f];h=this[m];e=h.propertyPaths;n=(e)?e.length:0;for(c=0;c<n;c++){p=e[c];this.addObservesHandler(h,p)}}}this.bindings=[];if(o=this._bindings){for(f=0,a=o.length;f<a;f++){m=o[f];k=this[m];d=m.slice(0,-7);this[m]=this.bind(d,k)}}if(o=this._properties){for(f=0,a=o.length;f<a;f++){m=o[f];if(k=this[m]){if(k.isCacheable){this._kvo_cacheable=YES}if(k.dependentKeys&&(k.dependentKeys.length>0)){this.registerDependentKey(m,k.dependentKeys)}}}}},addObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_ADD,a,b);return this},removeObservesHandler:function(a,b){this._configureObservesHandler(SC.OBSERVES_HANDLER_REMOVE,a,b);return this},_configureObservesHandler:function(d,b,e){var c,a;switch(d){case SC.OBSERVES_HANDLER_ADD:d="addObserver";break;case SC.OBSERVES_HANDLER_REMOVE:d="removeObserver";break;default:throw"invalid action provided: "+d}c=e.indexOf(".");if(c<0){this[d](e,this,b)}else{if(e.indexOf("*")===0){this[d](e.slice(1),this,b)}else{a=null;if(c===0){a=this;e=e.slice(1)}else{if(c===4&&e.slice(0,5)==="this."){a=this;e=e.slice(5)}else{if(c<0&&e.length===4&&e==="this"){a=this;e=""}else{if(c>0&&e[0]===e.charAt(0).toLowerCase()){a=this}}}}SC.Observers[d](e,this,b,a)}}},observersForKey:function(a){SC.Observers.flush(this);var b=this[SC.keyFor("_kvo_observers",a)];return b?b.getMembers():[]},_notifyPropertyObservers:function(v){if(!this._observableInited){this.initObservable()}SC.Observers.flush(this);var g=SC.LOG_OBSERVERS&&!(this.LOG_OBSERVING===NO),q,t,o,d,p,n,s,r,k,a,f,u,c,j,e,b,h,m;if(g){h=SC.KVO_SPACES=(SC.KVO_SPACES||"")+"  ";SC.Logger.log('%@%@: notifying observers after change to key "%@"'.fmt(h,this,v))}d=this["_kvo_observers_*"];this._kvo_changeLevel=(this._kvo_changeLevel||0)+1;while(((t=this._kvo_changes)&&(t.length>0))||v){s=++this.propertyRevision;if(!t){t=SC.CoreSet.create()}this._kvo_changes=null;if(v==="*"){t.add("*");t.addEach(this._kvo_for("_kvo_observed_keys",SC.CoreSet))}else{if(v){t.add(v)}}if(o=this._kvo_dependents){for(p=0;p<t.length;p++){v=t[p];n=o[v];if(n&&(j=n.length)){if(g){SC.Logger.log("%@...including dependent keys for %@: %@".fmt(h,v,n))}m=this._kvo_cache;if(!m){m=this._kvo_cache={}}while(--j>=0){t.add(v=n[j]);if(e=this[v]){this[e.cacheKey]=undefined;m[e.cacheKey]=m[e.lastSetValueKey]=undefined}}}}}while(t.length>0){v=t.pop();q=this[SC.keyFor("_kvo_observers",v)];if(q){r=SC.clone(q.getMembers());k=r.length;for(f=0;f<k;f++){a=r[f];if(a[3]===s){continue}if(!a[1]){SC.Logger.log(a)}u=a[0]||this;c=a[1];b=a[2];a[3]=s;if(g){SC.Logger.log('%@...firing observer on %@ for key "%@"'.fmt(h,u,v))}if(b!==undefined){c.call(u,this,v,null,b,s)}else{c.call(u,this,v,null,s)}}}r=this[SC.keyFor("_kvo_local",v)];if(r){k=r.length;for(f=0;f<k;f++){a=r[f];c=this[a];if(c){if(g){SC.Logger.log('%@...firing local observer %@.%@ for key "%@"'.fmt(h,this,a,v))}c.call(this,this,v,null,s)}}}if(d&&v!=="*"){r=SC.clone(d.getMembers());k=r.length;for(f=0;f<k;f++){a=r[f];u=a[0]||this;c=a[1];b=a[2];if(g){SC.Logger.log('%@...firing * observer on %@ for key "%@"'.fmt(h,u,v))}if(b!==undefined){c.call(u,this,v,null,b,s)}else{c.call(u,this,v,null,s)}}}if(this.propertyObserver){if(g){SC.Logger.log('%@...firing %@.propertyObserver for key "%@"'.fmt(h,this,v))}this.propertyObserver(this,v,null,s)}}if(t){t.destroy()}v=null}this._kvo_changeLevel=(this._kvo_changeLevel||1)-1;if(g){SC.KVO_SPACES=h.slice(0,-2)}return YES},bind:function(a,c,e){var d,b;if(e!==undefined){c=[c,e]}b=typeof c;if(b==="string"||(b==="object"&&(c instanceof Array))){d=this[a+"BindingDefault"]||SC.Binding;d=d.beget().from(c)}else{d=c.beget()}d=d.to(a,this).connect();this.bindings.push(d);return d},didChangeFor:function(a){var b,f,e,k,d,c,h,j,g;a=SC.hashFor(a);b=this._kvo_didChange_valueCache;if(!b){b=this._kvo_didChange_valueCache={}}f=this._kvo_didChange_revisionCache;if(!f){f=this._kvo_didChange_revisionCache={}}e=b[a]||{};k=f[a]||{};d=false;c=this._kvo_revision||0;h=arguments.length;while(--h>=1){j=arguments[h];if(k[j]!=c){g=this.get(j);if(e[j]!==g){d=true;e[j]=g}}k[j]=c}b[a]=e;f[a]=k;return d},setIfChanged:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){var c=a;for(a in c){if(!c.hasOwnProperty(a)){continue}this.setIfChanged(a,c[a])}return this}return(this.get(a)!==b)?this.set(a,b):this},getPath:function(b){var a=SC.tupleForPropertyPath(b,this);if(a===null||a[0]===null){return undefined}return SC.get(a[0],a[1])},setPath:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}a[0].set(a[1],b)}else{this.set(c,b)}return this},setPathIfChanged:function(c,b){if(c.indexOf(".")>=0){var a=SC.tupleForPropertyPath(c,this);if(!a||!a[0]){return null}if(a[0].get(a[1])!==b){a[0].set(a[1],b)}}else{this.setIfChanged(c,b)}return this},getEach:function(){var d=SC.A(arguments),c=[],a,b;for(a=0,b=d.length;a<b;a++){c[c.length]=this.getPath(d[a])}return c},incrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)+a);return this.get(b)},decrementProperty:function(b,a){if(!a){a=1}this.set(b,(this.get(b)||0)-a);return this.get(b)},toggleProperty:function(a,b,c){if(b===undefined){b=true}if(c===undefined){c=false}b=(this.get(a)==b)?c:b;this.set(a,b);return this.get(a)},notifyPropertyChange:function(a,b){this.propertyWillChange(a);this.propertyDidChange(a,b);return this},allPropertiesDidChange:function(){this._kvo_cache=null;this._notifyPropertyObservers("*");return this},addProbe:function(a){this.addObserver(a,SC.logChange)},removeProbe:function(a){this.removeObserver(a,SC.logChange)},logProperty:function(){var b=SC.$A(arguments),d,c,a;for(a=0,c=b.length;a<c;a++){d=b[a];SC.Logger.log("%@:%@: ".fmt(SC.guidFor(this),d),this.get(d))}},propertyRevision:1};SC.logChange=function logChange(c,a,b){SC.Logger.log("CHANGE: %@[%@] => %@".fmt(c,a,c.get(a)))};SC.mixin(SC,{get:function(a,b){if(!a){return undefined}if(b===undefined){return this[a]}if(a.get){return a.get(b)}return a[b]},getPath:function(a,b){if(b===undefined){b=a;a=window}return SC.objectForPropertyPath(b,a)}});SC.mixin(Array.prototype,SC.Observable);SC.Enumerator=function(a){this.enumerable=a;this.reset();return this};SC.Enumerator.prototype={nextObject:function(){var c=this._index;var a=this._length;if(c>=a){return undefined}var b=this.enumerable.nextObject(c,this._previousObject,this._context);this._previousObject=b;this._index=c+1;if(c>=a){this._context=SC.Enumerator._pushContext(this._context)}return b},reset:function(){var b=this.enumerable;if(!b){throw SC.$error("Enumerator has been destroyed")}this._length=b.get?b.get("length"):b.length;var a=this._length;this._index=0;this._previousObject=null;this._context=(a>0)?SC.Enumerator._popContext():null},destroy:function(){this.enumerable=this._length=this._index=this._previousObject=this._context=null}};SC.Enumerator.create=function(a){return new SC.Enumerator(a)};SC.Enumerator._popContext=function(){var a=this._contextCache?this._contextCache.pop():null;return a||{}};SC.Enumerator._pushContext=function(b){this._contextCache=this._contextCache||[];var a=this._contextCache;a.push(b);return null};sc_require("core");sc_require("ext/function");sc_require("system/enumerator");SC.Enumerable={isEnumerable:YES,nextObject:function(a,c,b){return this.objectAt?this.objectAt(a):this[a]},firstObject:function(){if(this.get("length")===0){return undefined}if(this.objectAt){return this.objectAt(0)}var b=SC.Enumerator._popContext(),a;a=this.nextObject(0,null,b);b=SC.Enumerator._pushContext(b);return a}.property(),lastObject:function(){var a=this.get("length");if(a===0){return undefined}if(this.objectAt){return this.objectAt(a-1)}}.property(),enumerator:function(){return SC.Enumerator.create(this)},forEach:function(g,f){if(typeof g!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(f===undefined){f=null}var e=null;var c=SC.Enumerator._popContext();for(var a=0;a<b;a++){var d=this.nextObject(a,e,c);g.call(f,d,a,this);e=d}e=null;c=SC.Enumerator._pushContext(c);return this},getEach:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null},this)},setEach:function(a,b){this.forEach(function(c){if(c){if(c.set){c.set(a,b)}else{c[a]=b}}},this);return this},map:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=[];var f=null;var d=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,d);c[a]=h.call(g,e,a,this);f=e}f=null;d=SC.Enumerator._pushContext(d);return c},mapProperty:function(a){return this.map(function(b){return b?(b.get?b.get(a):b[a]):null})},filter:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=[];var f=null;var d=SC.Enumerator._popContext();for(var a=0;a<b;a++){var e=this.nextObject(a,f,d);if(h.call(g,e,a,this)){c.push(e)}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},sortProperty:function(b){var c=(typeof b===SC.T_STRING)?arguments:b,a=c.length,d;if(this instanceof Array){d=this}else{d=[];this.forEach(function(e){d.push(e)})}if(!d){return[]}return d.sort(function(g,f){var e,j,m,k,h=0;for(e=0;h===0&&e<a;e++){j=c[e];m=g?(g.get?g.get(j):g[j]):null;k=f?(f.get?f.get(j):f[j]):null;h=SC.compare(m,k)}return h})},filterProperty:function(k,f){var d=this.get?this.get("length"):this.length;var e=[];var j=null;var b=SC.Enumerator._popContext();for(var g=0;g<d;g++){var c=this.nextObject(g,j,b);var h=c?(c.get?c.get(k):c[k]):null;var a=(f===undefined)?!!h:SC.isEqual(h,f);if(a){e.push(c)}j=c}j=null;b=SC.Enumerator._pushContext(b);return e},find:function(h,d){var c=this.get?this.get("length"):this.length;if(d===undefined){d=null}var g=null,b,j=NO,e=null;var a=SC.Enumerator._popContext();for(var f=0;f<c&&!j;f++){b=this.nextObject(f,g,a);if(j=h.call(d,b,f,this)){e=b}g=b}b=g=null;a=SC.Enumerator._pushContext(a);return e},findProperty:function(j,f){var c=this.get?this.get("length"):this.length;var k=NO,d=null,h=null,b,g;var a=SC.Enumerator._popContext();for(var e=0;e<c&&!k;e++){b=this.nextObject(e,h,a);g=b?(b.get?b.get(j):b[j]):null;k=(f===undefined)?!!g:SC.isEqual(g,f);if(k){d=b}h=b}h=b=null;a=SC.Enumerator._pushContext(a);return d},every:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=YES;var f=null;var d=SC.Enumerator._popContext();for(var a=0;c&&(a<b);a++){var e=this.nextObject(a,f,d);if(!h.call(g,e,a,this)){c=NO}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},everyProperty:function(j,e){var c=this.get?this.get("length"):this.length;var d=YES;var h=null;var a=SC.Enumerator._popContext();for(var f=0;d&&(f<c);f++){var b=this.nextObject(f,h,a);var g=b?(b.get?b.get(j):b[j]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;a=SC.Enumerator._pushContext(a);return d},some:function(h,g){if(typeof h!=="function"){throw new TypeError()}var b=this.get?this.get("length"):this.length;if(g===undefined){g=null}var c=NO;var f=null;var d=SC.Enumerator._popContext();for(var a=0;(!c)&&(a<b);a++){var e=this.nextObject(a,f,d);if(h.call(g,e,a,this)){c=YES}f=e}f=null;d=SC.Enumerator._pushContext(d);return c},someProperty:function(j,e){var c=this.get?this.get("length"):this.length;var d=NO;var h=null;var a=SC.Enumerator._popContext();for(var f=0;!d&&(f<c);f++){var b=this.nextObject(f,h,a);var g=b?(b.get?b.get(j):b[j]):null;d=(e===undefined)?!!g:SC.isEqual(g,e);h=b}h=null;a=SC.Enumerator._pushContext(a);return d},reduce:function(g,h,j){if(typeof g!=="function"){throw new TypeError()}var c=this.get?this.get("length"):this.length;if(c===0&&h===undefined){throw new TypeError()}var d=h;var f=null;var a=SC.Enumerator._popContext();for(var e=0;e<c;e++){var b=this.nextObject(e,f,a);if(b!==null){if(d===undefined){d=b}else{d=g.call(null,d,b,e,this,j)}}f=b}f=null;a=SC.Enumerator._pushContext(a);if(d===undefined){throw new TypeError()}return d},invoke:function(h){var e=this.get?this.get("length"):this.length;if(e<=0){return[]}var j;var g=[];var c=arguments.length;if(c>1){for(j=1;j<c;j++){g.push(arguments[j])}}var f=[];var k=null;var b=SC.Enumerator._popContext();for(j=0;j<e;j++){var d=this.nextObject(j,k,b);var a=d?d[h]:null;if(a){f[j]=a.apply(d,g)}k=d}k=null;b=SC.Enumerator._pushContext(b);return f},invokeWhile:function(d,j){var f=this.get?this.get("length"):this.length;if(f<=0){return null}var k;var h=[];var c=arguments.length;if(c>2){for(k=2;k<c;k++){h.push(arguments[k])}}var g=d;var m=null;var b=SC.Enumerator._popContext();for(k=0;(g===d)&&(k<f);k++){var e=this.nextObject(k,m,b);var a=e?e[j]:null;if(a){g=a.apply(e,h)}m=e}m=null;b=SC.Enumerator._pushContext(b);return g},toArray:function(){var a=[];this.forEach(function(b){a.push(b)},this);return a},groupBy:function(j){var c=this.get?this.get("length"):this.length,d=[],h=null,a=SC.Enumerator._popContext(),e=[],k=[],f,b,g;for(f=0;f<c;f++){b=this.nextObject(f,h,a);g=b?(b.get?b.get(j):b[j]):null;if(SC.none(e[g])){e[g]=[];k.push(g)}e[g].push(b);h=b}h=null;a=SC.Enumerator._pushContext(a);for(f=0,c=k.length;f<c;f++){d.push(e[k[f]])}return d}};SC._buildReducerFor=function(a,b){return function(d,e){var f=this[a];if(SC.typeOf(f)!==SC.T_FUNCTION){return this.unknownProperty?this.unknownProperty(d,e):null}else{var c=SC.Enumerable.reduce.call(this,f,null,b);return c}}.property("[]")};SC.Reducers={"[]":function(a,b){return this}.property(),enumerableContentDidChange:function(c,a,b){this.notifyPropertyChange("[]")},reducedProperty:function(j,g,f){if(!j||typeof j!==SC.T_STRING||j.charAt(0)!=="@"){return undefined}var d=j.match(/^@([^(]*)(\(([^)]*)\))?$/);if(!d||d.length<2){return undefined}var h=d[1];var k=d[3];h="reduce"+h.slice(0,1).toUpperCase()+h.slice(1);var a=this[h];if(SC.typeOf(a)!==SC.T_FUNCTION){return undefined}if(f===NO){return SC.Enumerable.reduce.call(this,a,null,k)}var c=SC._buildReducerFor(h,k);var b=this.constructor.prototype;if(b){b[j]=c;var e=b._properties||[];e.push(j);b._properties=e;this.registerDependentKey(j,"[]")}return SC.Enumerable.reduce.call(this,a,null,k)},reduceMax:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}if(a===null){return d}return(d>a)?d:a},reduceMaxObject:function(b,f,c,g,d){var a=b,h=f;if(d){if(f){h=f.get?f.get(d):f[d]}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f}return(h>a)?f:b},reduceMin:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}if(a===null){return d}return(d<a)?d:a},reduceMinObject:function(b,f,c,g,d){var a=b,h=f;if(d){if(f){h=f.get?f.get(d):f[d]}if(b){a=b.get?b.get(d):b[d]}}if(a===null){return f}return(h<a)?f:b},reduceAverage:function(b,g,d,h,f){if(f&&g){g=g.get?g.get(f):g[f]}var c=(b||0)+g;var a=h.get?h.get("length"):h.length;if(d>=a-1){c=c/a}return c},reduceSum:function(a,d,b,f,c){if(c&&d){d=d.get?d.get(c):d[c]}return(a===null)?d:a+d}};SC.mixin(SC.Enumerable,SC.Reducers);SC.mixin(Array.prototype,SC.Reducers);Array.prototype.isEnumerable=YES;(function(){var a={nextObject:SC.Enumerable.nextObject,enumerator:SC.Enumerable.enumerator,firstObject:SC.Enumerable.firstObject,lastObject:SC.Enumerable.lastObject,sortProperty:SC.Enumerable.sortProperty,mapProperty:function(g){var e=this.length;var f=[];for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f},filterProperty:function(h,k){var f=this.length;var g=[];for(var e=0;e<f;e++){var j=this[e];var m=j?(j.get?j.get(h):j[h]):null;var d=(k===undefined)?!!m:SC.isEqual(m,k);if(d){g.push(j)}}return g},groupBy:function(h){var e=this.length,g=[],k=[],f=[],d,j,m;for(d=0;d<e;d++){j=this[d];m=j?(j.get?j.get(h):j[h]):null;if(SC.none(k[m])){k[m]=[];f.push(m)}k[m].push(j)}for(d=0,e=f.length;d<e;d++){g.push(k[f[d]])}return g},find:function(k,j){if(typeof k!=="function"){throw new TypeError()}var e=this.length;if(j===undefined){j=null}var g,f=null,h=NO;for(var d=0;d<e&&!h;d++){g=this[d];if(h=k.call(j,g,d,this)){f=g}}g=null;return f},findProperty:function(g,k){var e=this.length;var h,m,j=NO,f=null;for(var d=0;d<e&&!j;d++){m=(h=this[d])?(h.get?h.get(g):h[g]):null;j=(k===undefined)?!!m:SC.isEqual(m,k);if(j){f=h}}h=null;return f},everyProperty:function(g,j){var e=this.length;var f=YES;for(var d=0;f&&(d<e);d++){var h=this[d];var k=h?(h.get?h.get(g):h[g]):null;f=(j===undefined)?!!k:SC.isEqual(k,j)}return f},someProperty:function(g,j){var e=this.length;var f=NO;for(var d=0;!f&&(d<e);d++){var h=this[d];var k=h?(h.get?h.get(g):h[g]):null;f=(j===undefined)?!!k:SC.isEqual(k,j)}return f},invoke:function(f){var e=this.length;if(e<=0){return[]}var d;var h=[];var k=arguments.length;if(k>1){for(d=1;d<k;d++){h.push(arguments[d])}}var g=[];for(d=0;d<e;d++){var j=this[d];var m=j?j[f]:null;if(m){g[d]=m.apply(j,h)}}return g},invokeWhile:function(f,m){var h=this.length;if(h<=0){return null}var n;var k=[];var e=arguments.length;if(e>2){for(n=2;n<e;n++){k.push(arguments[n])}}var j=f;for(n=0;(j===f)&&(n<h);n++){var g=this[n];var d=g?g[m]:null;if(d){j=d.apply(g,k)}}return j},toArray:function(){var e=this.length;if(e<=0){return[]}var f=[];for(var d=0;d<e;d++){var g=this[d];f.push(g)}return f},getEach:function(g){var f=[];var e=this.length;for(var d=0;d<e;d++){var h=this[d];f[d]=h?(h.get?h.get(g):h[g]):null}return f},setEach:function(f,g){var e=this.length;for(var d=0;d<e;d++){var h=this[d];if(h){if(h.set){h.set(f,g)}else{h[f]=g}}}return this}};var c={forEach:function(h,g){if(typeof h!=="function"){throw new TypeError()}if(g===undefined){g=null}for(var e=0,d=this.length;e<d;e++){var f=this[e];h.call(g,f,e,this)}return this},map:function(j,h){if(typeof j!=="function"){throw new TypeError()}if(h===undefined){h=null}var e=[];for(var f=0,d=this.length;f<d;f++){var g=this[f];e[f]=j.call(h,g,f,this)}return e},filter:function(j,h){if(typeof j!=="function"){throw new TypeError()}if(h===undefined){h=null}var e=[];for(var f=0,d=this.length;f<d;f++){var g=this[f];if(j.call(h,g,f,this)){e.push(g)}}return e},every:function(j,h){if(typeof j!=="function"){throw new TypeError()}var e=this.length;if(h===undefined){h=null}var f=YES;for(var d=0;f&&(d<e);d++){var g=this[d];if(!j.call(h,g,d,this)){f=NO}}return f},some:function(j,h){if(typeof j!=="function"){throw new TypeError()}var e=this.length;if(h===undefined){h=null}var f=NO;for(var d=0;(!f)&&(d<e);d++){var g=this[d];if(j.call(h,g,d,this)){f=YES}}return f},reduce:function(k,f,j){if(typeof k!=="function"){throw new TypeError()}var e=this.length;if(e===0&&f===undefined){throw new TypeError()}var g=f;for(var d=0;d<e;d++){var h=this[d];if(h!==null){if(g===undefined){g=h}else{g=k.call(null,g,h,d,this,j)}}}if(g===undefined){throw new TypeError()}return g}};for(var b in c){if(!c.hasOwnProperty(b)){continue}if(!Array.prototype[b]||((typeof Prototype==="object")&&Prototype.Version.match(/^1\.6/))){Array.prototype[b]=c[b]}}SC.mixin(Array.prototype,a)})();SC.RangeObserver={isRangeObserver:YES,toString:function(){var a=this.indexes?this.indexes.toString():"SC.IndexSet<..>";return a.replace("IndexSet","RangeObserver(%@)".fmt(SC.guidFor(this)))},create:function(d,f,e,g,c,a){var b=SC.beget(this);b.source=d;b.indexes=f?f.frozenCopy():null;b.target=e;b.method=(typeof g==="string")?e[g]:g;b.context=c;b.isDeep=a||false;b.beginObserving();return b},extend:function(d){var c=SC.beget(this),b=arguments;for(var e=0,a=b.length;e<a;e++){SC.mixin(c,b[e])}return c},destroy:function(a){this.endObserving();return this},update:function(a,b){if(this.indexes&&this.indexes.isEqual(b)){return this}this.indexes=b?b.frozenCopy():null;this.endObserving().beginObserving();return this},beginObserving:function(){if(!this.isDeep){return this}var c=this.observing=this.observing||SC.CoreSet.create();var a=this._beginObservingForEach,b=this.source;if(!a){a=this._beginObservingForEach=function(d){var e=b.objectAt(d);if(e&&e.addObserver){c.push(e);e._kvo_needsRangeObserver=true}}}this.indexes.forEach(a);this.isObserving=false;SC.Observers.addPendingRangeObserver(this);return this},setupPending:function(b){var e=this.observing;if(this.isObserving||!e||(e.get("length")===0)){return true}if(e.contains(b)){this.isObserving=true;var c=this._setupPendingForEach;if(!c){var d=this.source,f=this.objectPropertyDidChange,a=this;c=this._setupPendingForEach=function(g){var k=d.objectAt(g),h=SC.guidFor(k),j;if(k&&k.addObserver){e.push(k);k.addObserver("*",a,f);j=a[h];if(j==null){a[h]=g}else{if(j.isIndexSet){j.add(g)}else{a[h]=SC.IndexSet.create(j).add(g)}}}}}this.indexes.forEach(c);return true}else{return false}},endObserving:function(){if(!this.isDeep){return this}var e=this.observing;if(this.isObserving){var b=this.objectPropertyDidChange,c=this.source,a,f,d;if(e){f=e.length;for(a=0;a<f;a++){d=e[a];d.removeObserver("*",this,b);this[SC.guidFor(d)]=null}e.length=0}this.isObserving=false}if(e){e.clear()}return this},rangeDidChange:function(b){var a=this.indexes;if(!b||!a||a.intersects(b)){this.endObserving();this.method.call(this.target,this.source,null,"[]",b,this.context);this.beginObserving()}return this},objectPropertyDidChange:function(d,f,g,a){var e=this.context,h=this.method,c=SC.guidFor(d),b=this[c];if(b&&!b.isIndexSet){b=this[c]=SC.IndexSet.create(b).freeze()}h.call(this.target,this.source,d,f,b,e||a,a)}};sc_require("ext/function");sc_require("mixins/observable");sc_require("mixins/enumerable");sc_require("system/range_observer");SC.OUT_OF_RANGE_EXCEPTION="Index out of range";SC.CoreArray={isSCArray:YES,replace:function(a,c,b){throw"replace() must be implemented to support SC.Array"},indexOf:function(d,c){var b,a=this.get("length");if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this.objectAt(b,YES)===d){return b}}return -1},lastIndexOf:function(d,c){var b,a=this.get("length");if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this.objectAt(b)===d){return b}}return -1},objectAt:function(a){if(a<0){return undefined}if(a>=this.get("length")){return undefined}return this.get(a)},"[]":function(a,b){if(b!==undefined){this.replace(0,this.get("length"),b)}return this}.property(),insertAt:function(a,b){if(a>this.get("length")){throw SC.OUT_OF_RANGE_EXCEPTION}this.replace(a,0,[b]);return this},removeAt:function(d,a){var c=0,b=[];if(typeof d===SC.T_NUMBER){if((d<0)||(d>=this.get("length"))){throw SC.OUT_OF_RANGE_EXCEPTION}if(a===undefined){this.replace(d,1,b);return this}else{d=SC.IndexSet.create(d,a)}}this.beginPropertyChanges();d.forEachRange(function(f,e){f-=c;c+=e;this.replace(f,e,b)},this);this.endPropertyChanges();return this},removeObject:function(b){var c=this.get("length")||0;while(--c>=0){var a=this.objectAt(c);if(a==b){this.removeAt(c)}}return this},removeObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.removeObject(b)},this);this.endPropertyChanges();return this},slice:function(b,d){var a=[];var c=this.get("length");if(SC.none(b)){b=0}if(SC.none(d)||(d>c)){d=c}while(b<d){a[a.length]=this.objectAt(b++)}return a},pushObject:function(a){this.insertAt(this.get("length"),a);return a},pushObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.pushObject(b)},this);this.endPropertyChanges();return this},popObject:function(){var a=this.get("length");if(a===0){return null}var b=this.objectAt(a-1);this.removeAt(a-1);return b},shiftObject:function(){if(this.get("length")===0){return null}var a=this.objectAt(0);this.removeAt(0);return a},unshiftObject:function(a){this.insertAt(0,a);return a},unshiftObjects:function(a){this.beginPropertyChanges();a.forEach(function(b){this.unshiftObject(b)},this);this.endPropertyChanges();return this},isEqual:function(a){if(!a){return false}if(a==this){return true}var b=a.get("length");if(b!=this.get("length")){return false}while(--b>=0){if(!SC.isEqual(a.objectAt(b),this.objectAt(b))){return false}}return true},compact:function(){return this.without(null)},without:function(b){if(this.indexOf(b)<0){return this}var a=[];this.forEach(function(c){if(c!==b){a[a.length]=c}});return a},uniq:function(){var a=[];this.forEach(function(b){if(a.indexOf(b)<0){a[a.length]=b}});return a},flatten:function(){var a=[];this.forEach(function(b){if(b&&b.isEnumerable){a=a.pushObjects(b.flatten())}else{a.pushObject(b)}});return a},max:function(){return Math.max.apply(Math,this)},min:function(){return Math.min.apply(Math,this)},rangeObserverClass:SC.RangeObserver,contains:function(a){return this.indexOf(a)>=0},addRangeObserver:function(d,f,h,e){var a=this._array_rangeObservers;if(!a){a=this._array_rangeObservers=SC.CoreSet.create()}if(this._array_oldLength===undefined){this._array_oldLength=this.get("length")}var g=this.rangeObserverClass;var b=NO;var c=g.create(this,d,f,h,e,b);a.add(c);if(!this._array_isNotifyingRangeObservers){this._array_isNotifyingRangeObservers=YES;this.addObserver("[]",this,this._array_notifyRangeObservers)}return c},updateRangeObserver:function(b,a){return b.update(this,a)},removeRangeObserver:function(c){var b=c.destroy(this);var a=this._array_rangeObservers;if(a){a.remove(c)}return b},addArrayObservers:function(a){this._modifyObserverSet("add",a)},removeArrayObservers:function(a){this._modifyObserverSet("remove",a)},_modifyObserverSet:function(h,c){var e,b;var g=c.target||this;var a=c.willChange||"arrayWillChange";var f=c.didChange||"arrayDidChange";var d=c.context;if(typeof a==="string"){a=g[a]}if(typeof f==="string"){f=g[f]}e=this._kvo_for("_kvo_array_will_change",SC.ObserverSet);b=this._kvo_for("_kvo_array_did_change",SC.ObserverSet);e[h](g,a,d);b[h](g,f,d)},arrayContentWillChange:function(b,j,a){this._teardownContentObservers(b,j);var f,d,h,k;var g,c;var e=this._kvo_array_will_change;if(e){d=e.members;h=d.length;for(k=0;k<h;k++){f=d[k];g=f[0];c=f[1];c.call(g,b,j,a,this)}}},arrayContentDidChange:function(b,p,a){var d=this._array_rangeObservers,h,c,n;this.beginPropertyChanges();this.notifyPropertyChange("length");if(d&&d.length>0){n=this._array_rangeChanges;if(!n){n=this._array_rangeChanges=SC.IndexSet.create()}if(p===a){c=p}else{c=this.get("length")-b;if(p>a){c+=(p-a)}}n.add(b,c)}this._setupContentObservers(b,a);var g,f,m,o;var j,e;var k=this._kvo_array_did_change;if(k){if(b===undefined){b=0;p=this.get("length");a=0}f=k.members;m=f.length;for(o=0;o<m;o++){g=f[o];j=g[0];e=g[1];e.call(j,b,p,a,this)}}this.notifyPropertyChange("[]");this.endPropertyChanges();return this},_setupContentObservers:function(f,e){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var d;var b;if(c.get("length")>0){d=this.slice(f,f+e);var a=this;c.forEach(function(g){b=SC.keyFor("_kvo_content_observers",g);a._kvo_for(b).forEach(function(h){d.forEach(function(j){a._resumeChainObservingForItemWithChainObserver(j,h)})})})}},_teardownContentObservers:function(e,a){var c=this._kvo_for("_kvo_content_observed_keys",SC.CoreSet);var d;var b;if(c.get("length")>0){d=this.slice(e,e+a);c.forEach(function(f){b=SC.keyFor("_kvo_content_observers",f);d.forEach(function(g){g._kvo_for(b).forEach(function(h){h.destroyChain()})})})}},teardownEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(g){var d,c=b.get("length"),j=SC.guidFor(g),f,h,e="_kvo_enumerable_property_clones";g.notifyPropertyDidChange();for(d=0;d<c;d++){h=b.objectAt(d);f=h[e][j];f.deactivate();delete h[e][j]}},this)}return this},setupEnumerablePropertyChains:function(b){var a=this._kvo_enumerable_property_chains;if(a){a.forEach(function(e){var d,c=b.get("length");e.notifyPropertyDidChange();c=b.get("length");for(d=0;d<c;d++){this._clonePropertyChainToItem(e,b.objectAt(d))}},this)}return this},registerDependentKeyWithChain:function(e,c){var b="_kvo_enumerable_property_chains",f,d,g,a;f=this._kvo_for(b,SC.CoreSet);f.add(c);this.forEach(function(h){this._clonePropertyChainToItem(c,h)},this)},_clonePropertyChainToItem:function(c,d){var e=SC.clone(c),b="_kvo_enumerable_property_clones",a;e.object=d;a=d[b]=d[b]||{};a[SC.guidFor(c)]=e;e.activate(d)},removeDependentKeyWithChain:function(f,d){var b="_kvo_enumerable_property_chains",c="_kvo_enumerable_property_clones",g,e,h,a;this.forEach(function(j){j.removeDependentKeyWithChain(f,d);a=j[c];h=a[SC.guidFor(d)];h.deactivate(j)},this)},_resumeChainObservingForItemWithChainObserver:function(d,a){var b=SC.clone(a.next);var c=b.property;b.object=d;d.addObserver(c,b,b.propertyDidChange);if(a.root.tails){a.root.tails.pushObject(b.tail())}b.propertyDidChange();d._kvo_for(SC.keyFor("_kvo_content_observers",c)).push(b)},_addContentObserver:function(a){var b=a.next.property;this._kvo_for("_kvo_content_observed_keys",SC.CoreSet).push(b);var c=SC.keyFor("_kvo_content_observers",b);this._kvo_for(c).push(a);this._setupContentObservers(0,a.object.get("length"))},_removeContentObserver:function(a){var e,c;var d=this._kvo_content_observed_keys;var b=a.next.property;if(d.contains(b)){c=SC.keyFor("_kvo_content_observers",b);e=this._kvo_for(c);e.removeObject(a);this._teardownContentObservers(0,a.object.get("length"));if(e.length===0){this._kvo_for("_kvo_content_observed_keys").remove(b)}}},_array_notifyRangeObservers:function(){var c=this._array_rangeObservers,d=this._array_rangeChanges,b=c?c.length:0,a,e;if(b>0&&d&&d.length>0){for(a=0;a<b;a++){c[a].rangeDidChange(d)}d.clear()}}};SC.Array=SC.mixin({},SC.Enumerable,SC.CoreArray);sc_require("mixins/array");SC.supplement(Array.prototype,SC.CoreArray);SC.mixin(Array.prototype,{replace:function(b,e,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var c;var a=d?(d.get?d.get("length"):d.length):0;this.arrayContentWillChange(b,e,a);if(a===0){this.splice(b,e)}else{c=[b,e].concat(d);this.splice.apply(this,c)}this.arrayContentDidChange(b,e,a);this.enumerableContentDidChange(b,e,a-e);return this},unknownProperty:function(b,c){var a=this.reducedProperty(b,c);if((c!==undefined)&&a===undefined){a=this[b]=c}return a}});if(Array.prototype.indexOf===SC.CoreArray.indexOf){Array.prototype.indexOf=function(d,c){var b,a=this.length;if(c===undefined){c=0}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b<a;b++){if(this[b]===d){return b}}return -1}}if(Array.prototype.lastIndexOf===SC.CoreArray.lastIndexOf){Array.prototype.lastIndexOf=function(d,c){var b,a=this.length;if(c===undefined){c=a-1}else{c=(c<0)?Math.ceil(c):Math.floor(c)}if(c<0){c+=a}for(b=c;b>=0;b--){if(this[b]===d){return b}}return -1}}if(!Date.now){Date.now=function(){return new Date().getTime()}}SC.String={_scs_valueForKey:function(e,g,c){var a,f,d,b=e.indexOf(":");if(b>-1){a=e.substr(b+1);e=e.substr(0,b)}f=g[e];d=g[e+"Formatter"];if(d){f=d(f,a)}else{if(a){throw"String.fmt was given a formatting string, but key `"+e+"` has no formatter! String: "+c}}return f},fmt:function(b,a){var c=0,d=undefined,e;if(a){d=a[0]}return b.replace(/%\{(.*?)\}/g,function(f,g){e=YES;if(!d){throw"Cannot use named parameters with `fmt` without a data hash. String: '"+b+"'"}return SC.String._scs_valueForKey(g,d,b)}).replace(/%@([0-9]+)?/g,function(g,f){if(e){throw"Invalid attempt to use both named parameters and indexed parameters. String: '"+b+"'"}f=f?parseInt(f,10)-1:c++;return a[f]})},w:function(f){var d=[],e=f.split(" "),b=e.length,c,a=0;for(a=0;a<b;++a){c=e[a];if(c.length!==0){d.push(c)}}return d}};sc_require("system/string");SC.mixin(String.prototype,{fmt:function(){return SC.String.fmt(this,arguments)},w:function(){return SC.String.w(this)}});SC.Comparable={isComparable:YES,compare:function(d,c){throw"%@.compare() is not implemented".fmt(this.toString())}};SC.Copyable={isCopyable:YES,copy:function(a){var b=SC._object_className(this.constructor);throw"%@.copy() is not implemented".fmt(b)},frozenCopy:function(){var a=this.get?this.get("isFrozen"):this.isFrozen;if(a===YES){return this}else{if(a===undefined){throw"%@ does not support freezing".fmt(this)}else{return this.copy().freeze()}}}};SC.mixin(Array.prototype,SC.Copyable);Array.prototype.copy=function(b){var c=this.slice(),a;if(b){a=c.length;while(a--){c[a]=SC.copy(c[a],true)}}return c};SC.FROZEN_ERROR=new Error("Cannot modify a frozen object");SC.Freezable={isFreezable:YES,isFrozen:NO,freeze:function(){if(this.set){this.set("isFrozen",YES)}else{this.isFrozen=YES}return this}};SC.mixin(Array.prototype,SC.Freezable);sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.Set=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,{create:function(c){var d,b,e=SC.Set._pool,f=this.isObservable,a;if(!f&&c===undefined&&e.length>0){return e.pop()}else{d=SC.beget(this);if(f){d.initObservable()}if(c&&c.isEnumerable&&c.get("length")>0){d.isObservable=NO;if(c.isSCArray){a=c.get("length");for(b=0;b<a;b++){d.add(c.objectAt(b))}}else{if(c.isSet){a=c.length;for(b=0;b<a;b++){d.add(c[b])}}else{c.forEach(function(g){d.add(g)},this)}}d.isObservable=f}}return d},isSet:YES,length:0,firstObject:function(){return(this.length>0)?this[0]:undefined}.property(),clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}this.length=0;return this},contains:function(b){if(b===null){return NO}var a=this[SC.hashFor(b)];return(!SC.none(a)&&(a<this.length)&&(this[a]===b))},isEqual:function(a){if(!a||!a.isSet||(a.get("length")!==this.get("length"))){return NO}var b=this.get("length");while(--b>=0){if(!a.contains(this[b])){return NO}}return YES},addSetObserver:function(a){if(!this.setObservers){this.setObservers=SC.CoreSet.create()}this.setObservers.add(a)},removeSetObserver:function(a){if(!this.setObservers){return}this.setObservers.remove(a)},add:function(e){if(this.isFrozen){throw SC.FROZEN_ERROR}if(SC.none(e)){return this}var c,d=((c=e.hash)&&(typeof c==="function"))?c.call(e):SC.guidFor(e),b=this[d],a=this.length;if((b>=a)||(this[b]!==e)){this[a]=e;this[d]=a;this.length=a+1;if(this.setObservers){this.didAddItem(e)}}if(this.isObservable){this.enumerableContentDidChange()}return this},addEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.add(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.add(c[a])}}else{c.forEach(function(d){this.add(d)},this)}}if(b){this.endPropertyChanges()}return this},remove:function(f){if(this.isFrozen){throw SC.FROZEN_ERROR}if(f===null||f===undefined){return this}var c,d=(f&&(c=f.hash)&&(typeof c===SC.T_FUNCTION))?c.call(f):SC.guidFor(f),b=this[d],a=this.length,e;if((b===null||b===undefined)||(b>=a)||(this[b]!==f)){return this}delete this[d];if(b<(a-1)){e=this[b]=this[a-1];d=(e&&(c=e.hash)&&(typeof c===SC.T_FUNCTION))?c.call(e):SC.guidFor(e);this[d]=b}this.length=a-1;if(this.isObservable){this.enumerableContentDidChange()}if(this.setObservers){this.didRemoveItem(f)}return this},pop:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=(this.length>0)?this[this.length-1]:null;this.remove(a);return a},removeEach:function(c){if(this.isFrozen){throw SC.FROZEN_ERROR}if(!c||!c.isEnumerable){throw"%@.addEach must pass enumerable".fmt(this)}var a,b=this.isObservable;if(b){this.beginPropertyChanges()}if(c.isSCArray){a=c.get("length");while(--a>=0){this.remove(c.objectAt(a))}}else{if(c.isSet){a=c.length;while(--a>=0){this.remove(c[a])}}else{c.forEach(function(d){this.remove(d)},this)}}if(b){this.endPropertyChanges()}return this},copy:function(){return this.constructor.create(this)},destroy:function(){this.isFrozen=NO;if(!this.isObservable){SC.Set._pool.push(this.clear())}return this},forEach:function(c,d){var b=this.length;if(!d){d=this}for(var a=0;a<b;a++){c.call(d,this[a],a,this)}return this},toString:function(){var b=this.length,a,c=[];for(a=0;a<b;a++){c[a]=this[a]}return"SC.Set<%@>".fmt(c.join(","))},didAddItem:function(c){var d=this.setObservers;if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didAddItem(this,c)}},didRemoveItem:function(c){var d=this.setObservers;if(!d){return}var b=d.length,a;for(a=0;a<b;a++){d[a].didRemoveItem(this,c)}},_pool:[],isObservable:YES});SC.Set.constructor=SC.Set;SC.Set.clone=SC.Set.copy;SC.Set.push=SC.Set.unshift=SC.Set.add;SC.Set.shift=SC.Set.pop;SC.Set.addObject=SC.Set.add;SC.Set.removeObject=SC.Set.remove;SC.Set._pool=[];SC.CoreSet=SC.beget(SC.Set);SC.CoreSet.isObservable=NO;SC.CoreSet.constructor=SC.CoreSet;sc_require("mixins/observable");sc_require("system/set");SC.Observers={queue:[],addObserver:function(c,d,e,b){var a;if(typeof c==="string"){a=SC.tupleForPropertyPath(c,b)}else{a=c}if(a&&a[0].addObserver){a[0].addObserver(a[1],d,e)}else{this.queue.push([c,d,e,b])}},removeObserver:function(f,g,h,d){var c,b,a,e;a=SC.tupleForPropertyPath(f,d);if(a){a[0].removeObserver(a[1],g,h)}c=this.queue.length;b=this.queue,newQueue=undefined;while(--c>=0){e=b[c];if(e[0]!==f||e[1]!==g||e[2]!==h||e[3]!==d){if(!newQueue){newQueue=[]}newQueue.push(e)}}this.queue=newQueue||this.queue},addPendingRangeObserver:function(a){var b=this.rangeObservers;if(!b){b=this.rangeObservers=SC.CoreSet.create()}b.add(a);return this},_TMP_OUT:[],flush:function(b){var g=this.queue,d,a=g.length;if(g&&a>0){var k=(this.queue=[]);for(d=0;d<a;d++){var m=g[d];if(!m){continue}var h=SC.tupleForPropertyPath(m[0],m[3]);if(h&&h[0].addObserver){h[0].addObserver(h[1],m[1],m[2])}else{k.push(m)}}}if(b._kvo_needsRangeObserver){var j=this.rangeObservers,f=j?j.get("length"):0,c=this._TMP_OUT,e;for(d=0;d<f;d++){e=j[d];if(e.setupPending(b)){c.push(e)}}if(c.length>0){j.removeEach(c)}c.length=0;b._kvo_needsRangeObserver=false}},isObservingSuspended:0,_pending:SC.CoreSet.create(),objectHasPendingChanges:function(a){this._pending.add(a)},suspendPropertyObserving:function(){this.isObservingSuspended++},resumePropertyObserving:function(){var c;if(--this.isObservingSuspended<=0){c=this._pending;this._pending=SC.CoreSet.create();var b,a=c.length;for(b=0;b<a;b++){c[b]._notifyPropertyObservers()}c.clear();c=null}}};sc_require("core");sc_require("mixins/observable");sc_require("private/observer_queue");sc_require("mixins/array");sc_require("system/set");SC.BENCHMARK_OBJECTS=NO;SC._detect_base=function _detect_base(c,b,a){return function d(){var f=b[a],e;if(!f){throw new Error("No '"+a+"' method was found on the superclass")}if(c.isEnhancement){e=Array.prototype.slice.call(arguments,1)}else{e=arguments}return f.apply(this,e)}};SC._object_extend=function _object_extend(g,f,p){if(!f){throw"SC.Object.extend expects a non-null value.  Did you forget to 'sc_require' something?  Or were you passing a Protocol to extend() as if it were a mixin?"}g._kvo_cloned=null;var z,o,v,e,h=g.concatenatedProperties,m=SC.K,c,b;o=(h)?h.length:0;var a=(o>0)?{}:null;while(--o>=0){z=h[o];c=g[z];b=f[z];if(c){if(!(c instanceof Array)){c=SC.$A(c)}a[z]=(b)?c.concat(b):b}else{if(!(b instanceof Array)){b=SC.$A(b)}a[z]=b}}var y=g._bindings,n=NO,w=g._observers,x=NO,j=g._properties,d=NO,s,k,q,r;var u=g.outlets,t=NO;if(f.outlets){u=(u||SC.EMPTY_ARRAY).concat(f.outlets);t=YES}for(z in f){if(z==="_kvo_cloned"){continue}if(!f.hasOwnProperty(z)){continue}r=(a.hasOwnProperty(z)?a[z]:null)||f[z];if(z.length>7&&z.slice(-7)==="Binding"){if(!n){y=(y||SC.EMPTY_ARRAY).slice();n=YES}if(y===null){y=(g._bindings||SC.EMPTY_ARRAY).slice()}y[y.length]=z}else{if(r&&(r instanceof Function)){if(!r.superclass&&(r!==(e=g[z]))){r.superclass=e||m;r.base=p?SC._detect_base(r,p,z):e||m}if(r.propertyPaths){if(!x){w=(w||SC.EMPTY_ARRAY).slice();x=YES}w[w.length]=z}if(s=r.localPropertyPaths){k=s.length;while(--k>=0){q=g._kvo_for(SC.keyFor("_kvo_local",s[k]),SC.CoreSet);q.add(z);g._kvo_for("_kvo_observed_keys",SC.CoreSet).add(s[k])}}if(r.dependentKeys){if(!d){j=(j||SC.EMPTY_ARRAY).slice();d=YES}j[j.length]=z}if(r.autoconfiguredOutlet){if(!t){u=(u||SC.EMPTY_ARRAY).slice();t=YES}u[u.length]=z}if(r.isEnhancement){r=SC._enhance(g[z]||m,r)}}}g[z]=r}if(f.hasOwnProperty("toString")){z="toString";r=(a.hasOwnProperty(z)?a[z]:null)||f[z];if(!r.superclass&&(r!==(e=g[z]))){r.superclass=r.base=e||m}g[z]=r}g._bindings=y||[];g._observers=w||[];g._properties=j||[];g.outlets=u||[];return g};SC._enhance=function(b,a){return function(){var d=Array.prototype.slice.call(arguments,0),c=this;d.unshift(function(){return b.apply(c,arguments)});return a.apply(this,d)}};SC.Object=function(a){this.__sc_super__=SC.Object.prototype;return this._object_init(a)};SC.mixin(SC.Object,{mixin:function(b){var a=arguments.length,c;for(c=0;c<a;c++){SC.mixin(this,arguments[c])}return this},superclass:null,extend:function(e){var d=SC.BENCHMARK_OBJECTS;if(d){SC.Benchmark.start("SC.Object.extend")}var g,c=function(h){this.__sc_super__=c.prototype;return this._object_init(h)};for(g in this){if(!this.hasOwnProperty(g)){continue}c[g]=this[g]}if(this.hasOwnProperty("toString")){c.toString=this.toString}c.superclass=this;c.__sc_super__=this.prototype;SC.generateGuid(c,"sc");c.subclasses=SC.Set.create();this.subclasses.add(c);var f=(c.prototype=SC.beget(this.prototype)),b,a=arguments.length;for(b=0;b<a;b++){SC._object_extend(f,arguments[b],c.__sc_super__)}f.constructor=c;if(d){SC.Benchmark.end("SC.Object.extend")}return c},reopen:function(a){return SC._object_extend(this.prototype,a,this.__sc_super__)},create:function(){var b=this,a=new b(arguments);if(SC.ObjectDesigner){SC.ObjectDesigner.didCreateObject(a,SC.$A(arguments))}return a},isClass:YES,subclasses:SC.Set.create(),toString:function(){return SC._object_className(this)},subclassOf:function(b){if(this===b){return NO}var a=this;while(a=a.superclass){if(a===b){return YES}}return NO},hasSubclass:function(a){return(a&&a.subclassOf)?a.subclassOf(this):NO},kindOf:function(a){return(this===a)||this.subclassOf(a)},design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ObjectDesigner){SC.ObjectDesigner.didLoadDesign(a,this,SC.A(arguments))}return a}});SC.Object.prototype={_kvo_enabled:YES,_object_init:function(c){var b,a=(c)?c.length:0;for(b=0;b<a;b++){SC._object_extend(this,c[b],this.__sc_super__)}SC.generateGuid(this,"sc");this.init();var d=this.initMixin;a=(d)?d.length:0;for(b=0;b<a;b++){d[b].call(this)}return this},mixin:function(){var b,a=arguments.length,c;for(b=0;b<a;b++){SC.mixin(this,arguments[b])}for(b=0;b<a;b++){c=arguments[b].initMixin;if(c){c.call(this)}}return this},init:function(){this.initObservable();return this},isDestroyed:NO,destroy:function(){if(this.get("isDestroyed")){return this}this.set("isDestroyed",YES);var b,c=this.destroyMixin,a=(c)?c.length:0;for(b=0;b<a;b++){c[b].call(this)}this.bindings.invoke("disconnect");this.bindings=null;return this},isObject:true,respondsTo:function(a){return !!(this[a] instanceof Function)},tryToPerform:function(b,c,a){return this.respondsTo(b)&&(this[b](c,a)!==NO)},superclass:function(b){var a=arguments.callee.caller;if(!a){throw"superclass cannot determine the caller method"}return a.superclass?a.superclass.apply(this,arguments):null},instanceOf:function(a){return this.constructor===a},kindOf:function(a){return this.constructor.kindOf(a)},toString:function(){if(!this._object_toString){var a=SC._object_className(this.constructor),b=a+":"+SC.guidFor(this);if(a){this._object_toString=b}else{return b}}return this._object_toString},awake:function(){var d=this.outlets,b,a,c;for(b=0,a=d.length;b<a;++b){c=d[b];this.get(c)}this.bindings.invoke("sync")},invokeOnce:function(a){SC.RunLoop.currentRunLoop.invokeOnce(this,a);return this},invokeLast:function(a){SC.RunLoop.currentRunLoop.invokeLast(this,a);return this},concatenatedProperties:["concatenatedProperties","initMixin","destroyMixin"]};SC.Object.prototype.constructor=SC.Object;SC.mixin(SC.Object.prototype,SC.Observable);function findClassNames(){if(SC._object_foundObjectClassNames){return}SC._object_foundObjectClassNames=true;var b=[],c=false;var a=function(d,f,k){var n,j,h;k--;if(b.indexOf(f)>=0){return}b.push(f);for(var g in f){if(g=="__scope__"){continue}if(g=="superclass"){continue}if(g=="__SC__"){g="SC"}if(!g.match(/^[A-Z0-9]/)){continue}if(g=="SC"){if(c){continue}c=true}n=(d)?[d,g].join("."):g;j=f[g];try{h=SC.typeOf(j)}catch(m){break}switch(h){case SC.T_CLASS:if(!j._object_className){j._object_className=n}if(k>=0){a(n,j,k)}break;case SC.T_OBJECT:if(k>=0){a(n,j,k)}break;case SC.T_HASH:if(((d)||(n==="SC"))&&(k>=0)){a(n,j,k)}break;default:break}}};window.__SC__=SC;a(null,window,2)}SC.instanceOf=function(a,b){return !!(a&&a.constructor===b)};SC.kindOf=function(a,b){if(a&&!a.isClass){a=a.constructor}return !!(a&&a.kindOf&&a.kindOf(b))};SC._object_className=function(b){if(SC.isReady===NO){return""}if(!b._object_className){findClassNames()}if(b._object_className){return b._object_className}var a=b;while(a&&!a._object_className){a=a.superclass}return(a&&a._object_className)?a._object_className:"Anonymous"};sc_require("system/object");SC._PropertyChain=SC.Object.extend({object:null,property:null,target:null,toInvalidate:null,nextProperty:null,activate:function(b){var a=this.get("object"),c=this.get("property"),d;if(!b){b=this.get("target")}if(a&&a!==b){this.deactivate()}this.set("object",b);if(b&&c!=="@each"){b.registerDependentKeyWithChain(c,this)}if(this.next){d=b?b.get(c):undefined;this.next.activate(d)}return this},deactivate:function(){var a=this.get("object"),b=this.get("property");if(a){a.removeDependentKeyWithChain(b,this)}if(this.next){this.next.deactivate()}return this},notifyPropertyDidChange:function(){var d=this.get("target"),c=this.get("toInvalidate"),b,a;d.propertyDidChange(c);if(this.next){b=this.get("object");a=b.get(this.get("property"));this.next.activate(a)}}});SC._PropertyChain.createChain=function(h,g,e){var f=h.split(".");var a=f.length,d=1;var b=SC._PropertyChain.create({property:f[0],target:g,toInvalidate:e,nextProperty:f[1]});b.set("length",a);var c=b;while(--a>=1){c=c.next=SC._PropertyChain.create({property:f[d],target:g,toInvalidate:e,nextProperty:f[++d]});c.set("length",a)}return b};sc_require("ext/function");sc_require("system/object");SC.LOG_BINDINGS=NO;SC.BENCHMARK_BINDING_NOTIFICATIONS=NO;SC.BENCHMARK_BINDING_SETUP=NO;SC.MULTIPLE_PLACEHOLDER="@@MULT@@";SC.NULL_PLACEHOLDER="@@NULL@@";SC.EMPTY_PLACEHOLDER="@@EMPTY@@";SC.Binding={beget:function(b){var a=SC.beget(this);a.parentBinding=this;if(b!==undefined){a=a.from(b)}return a},builder:function(){var b=this,a=function(c){return b.beget().from(c)};a.beget=function(){return b.beget()};return a},from:function(b,a){if(!b){return this}var c=(this===SC.Binding)?this.beget():this;c._fromPropertyPath=b;c._fromRoot=a;c._fromTuple=null;return c},to:function(b,a){var c=(this===SC.Binding)?this.beget():this;c._toPropertyPath=b;c._toRoot=a;c._toTuple=null;return c},connect:function(){if(this.isConnected){return this}this.isConnected=YES;this._connectionPending=YES;this._syncOnConnect=YES;SC.Binding._connectQueue.add(this);if(!SC.RunLoop.isRunLoopInProgress()){this._scheduleSync()}return this},_connect:function(){if(!this._connectionPending){return}this._connectionPending=NO;var c,a,b=SC.BENCHMARK_BINDING_SETUP;if(b){SC.Benchmark.start("SC.Binding.connect()")}c=this._fromPropertyPath;a=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!a){a=this._toRoot}}else{if(c.indexOf("*")===0){c=[this._fromRoot||this._toRoot,c.slice(1)];a=null}}}this._fromObserverData=[c,this,this.fromPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){c=this._toPropertyPath;a=this._toRoot;this._toObserverData=[c,this,this.toPropertyDidChange,a];SC.Observers.addObserver.apply(SC.Observers,this._toObserverData)}if(b){SC.Benchmark.end("SC.Binding.connect()")}if(this._syncOnConnect){this._syncOnConnect=NO;if(b){SC.Benchmark.start("SC.Binding.connect().sync")}this.sync();if(b){SC.Benchmark.end("SC.Binding.connect().sync")}}},disconnect:function(){if(!this.isConnected){return this}if(this._connectionPending){this._connectionPending=NO}else{SC.Observers.removeObserver.apply(SC.Observers,this._fromObserverData);if(!this._oneWay){SC.Observers.removeObserver.apply(SC.Observers,this._toObserverData)}}this.isConnected=NO;return this},fromPropertyDidChange:function(c,b){var a=c?c.get(b):null;if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},toPropertyDidChange:function(c,b){if(this._oneWay){return}var a=c.get(b);if(a!==this._transformedBindingValue){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this);this._scheduleSync()}},_scheduleSync:function(){if(SC.RunLoop.isRunLoopInProgress()||SC.Binding._syncScheduled){return}SC.Binding._syncScheduled=YES;setTimeout(function(){SC.run();SC.Binding._syncScheduled=NO},1)},_setBindingValue:function(b,a){this._bindingSource=b;this._bindingKey=a},_computeBindingValue:function(){var g=this._bindingSource,e=this._bindingKey,c,b;this._bindingValue=c=(g?g.getPath(e):null);var f=this._transforms;if(f){var a=f.length,d;for(b=0;b<a;b++){d=f[b];c=d(c,this)}}if(this._noError&&SC.typeOf(c)===SC.T_ERROR){c=null}this._transformedBindingValue=c},_connectQueue:SC.CoreSet.create(),_alternateConnectQueue:SC.CoreSet.create(),_changeQueue:SC.CoreSet.create(),_alternateChangeQueue:SC.CoreSet.create(),_changePending:NO,flushPendingChanges:function(){if(this._isFlushing){return NO}this._isFlushing=YES;SC.Observers.suspendPropertyObserving();var b=NO,c=SC.LOG_BINDINGS,a,d;while((a=this._connectQueue).length>0){this._connectQueue=this._alternateConnectQueue;this._alternateConnectQueue=a;while(d=a.pop()){d._connect()}}while((a=this._changeQueue).length>0){if(c){SC.Logger.log("Begin: Trigger changed bindings")}b=YES;this._changeQueue=this._alternateChangeQueue;this._alternateChangeQueue=a;while(d=a.pop()){d.applyBindingValue()}if(c){SC.Logger.log("End: Trigger changed bindings")}}this._isFlushing=NO;SC.Observers.resumePropertyObserving();return b},applyBindingValue:function(){this._changePending=NO;this._computeBindingTargets();this._computeBindingValue();var a=this._bindingValue,b=this._transformedBindingValue,c=SC.BENCHMARK_BINDING_NOTIFICATIONS,d=SC.LOG_BINDINGS;if(!this._oneWay&&this._fromTarget){if(d){SC.Logger.log("%@: %@ -> %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"->")}this._fromTarget.setPathIfChanged(this._fromPropertyKey,a);if(c){SC.Benchmark.end(this.toString()+"->")}}if(this._toTarget){if(d){SC.Logger.log("%@: %@ <- %@".fmt(this,a,b))}if(c){SC.Benchmark.start(this.toString()+"<-")}this._toTarget.setPathIfChanged(this._toPropertyKey,b);if(c){SC.Benchmark.start(this.toString()+"<-")}}},sync:function(){if(!this.isConnected){return this}if(this._connectionPending){this._syncOnConnect=YES}else{this._computeBindingTargets();var c=this._fromTarget,b=this._fromPropertyKey;if(!c||!b){return this}var a=c.getPath(b);if(a!==this._bindingValue||b==="[]"){this._setBindingValue(c,b);this._changePending=YES;SC.Binding._changeQueue.add(this)}}return this},_syncOnConnect:NO,_computeBindingTargets:function(){if(!this._fromTarget){var c,b,a;c=this._fromPropertyPath;b=this._fromRoot;if(typeof c==="string"){if(c.indexOf(".")===0){c=c.slice(1);if(!b){b=this._toRoot}}else{if(c.indexOf("*")===0){c=[b||this._toRoot,c.slice(1)];b=null}}}a=SC.tupleForPropertyPath(c,b);if(a){this._fromTarget=a[0];this._fromPropertyKey=a[1]}}if(!this._toTarget){c=this._toPropertyPath;b=this._toRoot;a=SC.tupleForPropertyPath(c,b);if(a){this._toTarget=a[0];this._toPropertyKey=a[1]}}},oneWay:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._oneWay=(a===undefined)?YES:a;return b},transform:function(b){var c=(this===SC.Binding)?this.beget():this;var a=c._transforms;if(a&&(a===c.parentBinding._transform)){a=c._transforms=a.slice()}if(!a){a=c._transforms=[]}a.push(b);return c},resetTransforms:function(){var a=(this===SC.Binding)?this.beget():this;a._transforms=null;return a},noError:function(c,a){if((a===undefined)&&(SC.typeOf(c)===SC.T_BOOL)){a=c;c=null}var b=this.from(c);if(b===SC.Binding){b=b.beget()}b._noError=(a===undefined)?YES:a;return b},single:function(b,a){if(a===undefined){a=SC.MULTIPLE_PLACEHOLDER}return this.from(b).transform(function(e,d){if(e&&e.isEnumerable){var c=e.get("length");e=(c>1)?a:(c<=0)?null:e.firstObject()}return e})},notEmpty:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(d,c){if(SC.none(d)||(d==="")||(SC.isArray(d)&&d.length===0)){d=a}return d})},notNull:function(b,a){if(a===undefined){a=SC.EMPTY_PLACEHOLDER}return this.from(b).transform(function(d,c){if(SC.none(d)){d=a}return d})},multiple:function(a){return this.from(a).transform(function(b){if(!SC.isArray(b)){b=(b==null)?[]:[b]}return b})},bool:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return(c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b})},and:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,and:function(){return(this.get("valueA")&&this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("and",c).oneWay()},or:function(b,a){var c=SC.Object.create({valueABinding:b,valueBBinding:a,or:function(){return(this.get("valueA")||this.get("valueB"))}.property("valueA","valueB").cacheable()});return this.from("or",c).oneWay()},not:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);if(c===SC.T_ERROR){return b}return !((c==SC.T_ARRAY)?(b.length>0):(b==="")?NO:!!b)})},isNull:function(a){return this.from(a).transform(function(b){var c=SC.typeOf(b);return(c===SC.T_ERROR)?b:SC.none(b)})},toString:function(){var c=this._fromRoot?"<%@>:%@".fmt(this._fromRoot,this._fromPropertyPath):this._fromPropertyPath;var b=this._toRoot?"<%@>:%@".fmt(this._toRoot,this._toPropertyPath):this._toPropertyPath;var a=this._oneWay?"[oneWay]":"";return"SC.Binding%@(%@ -> %@)%@".fmt(SC.guidFor(this),c,b,a)}};SC.binding=function(b,a){return SC.Binding.from(b,a)};sc_require("ext/function");SC.Error=SC.Object.extend({code:-1,message:"",errorValue:null,errorObject:function(){return this}.property().cacheable(),label:null,toString:function(){return"SC.Error:%@:%@ (%@)".fmt(SC.guidFor(this),this.get("message"),this.get("code"))},isError:YES});SC.Error.desc=function(d,a,e,c){var b={message:d};if(a!==undefined){b.label=a}if(c!==undefined){b.code=c}if(e!==undefined){b.errorValue=e}return this.create(b)};SC.$error=function(b,a,d,e){return SC.Error.desc(b,a,d,e)};SC.ok=function(a){return(a!==false)&&!(a&&a.isError)};SC.$ok=SC.ok;SC.val=function(a){if(a&&a.isError){return a.get?a.get("errorValue"):null}else{return a}};SC.$val=SC.val;SC.Error.HAS_MULTIPLE_VALUES=-100;sc_require("mixins/enumerable");sc_require("mixins/observable");sc_require("mixins/freezable");sc_require("mixins/copyable");SC.IndexSet=SC.mixin({},SC.Enumerable,SC.Observable,SC.Freezable,SC.Copyable,{_sc_sliceContent:function(e){if(e.length<1000){return e.slice()}var d=0,a=[],b=e[0];while(b!==0){a[d]=b;d=(b<0)?(0-b):b;b=e[d]}a[d]=0;this._hint(0,d,a);return a},create:function(c,b){var a=SC.beget(this);a.initObservable();a.registerDependentKey("min","[]");if(c&&c.isIndexSet){a._content=this._sc_sliceContent(c._content);a.max=c.max;a.length=c.length;a.source=c.source}else{a._content=[0];if(c!==undefined){a.add(c,b)}}return a},isIndexSet:YES,HINT_SIZE:256,length:0,max:0,min:function(){var a=this._content,b=a[0];return(b===0)?-1:(b>0)?0:Math.abs(b)}.property("[]").cacheable(),firstObject:function(){return(this.get("length")>0)?this.get("min"):undefined}.property(),rangeStartForIndex:function(c){var f=this._content,a=this.get("max"),b,e,d;if(c>=a){return a}if(Math.abs(f[c])>c){return c}d=c-(c%SC.IndexSet.HINT_SIZE);b=f[d];if(b<0||b>c){b=d}e=Math.abs(f[b]);while(e<c){b=e;e=Math.abs(f[b])}return b},isEqual:function(c){if(c===this){return YES}if(!c||!c.isIndexSet||(c.max!==this.max)||(c.length!==this.length)){return NO}var e=this._content,b=c._content,d=0,a=e[d];do{if(b[d]!==a){return NO}d=Math.abs(a);a=e[d]}while(d!==0);return YES},indexBefore:function(b){if(b===0){return -1}b--;var c=this._content,a=this.get("max"),d=this.rangeStartForIndex(b);if(!c){return null}while((d===a)||(c[d]<0)){if(d===0){return -1}b=d-1;d=this.rangeStartForIndex(b)}return b},indexAfter:function(b){var d=this._content,a=this.get("max"),e,c;if(!d||(b>=a)){return -1}b++;e=this.rangeStartForIndex(b);c=d[e];while(c<0){if(c===0){return -1}b=e=Math.abs(c);c=d[e]}return b},contains:function(g,c){var b,f,a,e,d;if(c===undefined){if(g===null||g===undefined){return NO}if(typeof g===SC.T_NUMBER){c=1}else{if(g&&g.isIndexSet){if(g===this){return YES}b=g._content;f=0;a=b[f];while(a!==0){if((a>0)&&!this.contains(f,a-f)){return NO}f=Math.abs(a);a=b[f]}return YES}else{c=g.length;g=g.start}}}e=this.rangeStartForIndex(g);d=this._content[e];return(d>0)&&(e<=g)&&(d>=(g+c))},intersects:function(f,c){var b,e,a,d;if(c===undefined){if(typeof f===SC.T_NUMBER){c=1}else{if(f&&f.isIndexSet){if(f===this){return YES}b=f._content;e=0;a=b[e];while(a!==0){if((a>0)&&this.intersects(e,a-e)){return YES}e=Math.abs(a);a=b[e]}return NO}else{c=f.length;f=f.start}}}e=this.rangeStartForIndex(f);b=this._content;a=b[e];d=f+c;while(e<d){if(a===0){return NO}if((a>0)&&(a>f)){return YES}e=Math.abs(a);a=b[e]}return NO},without:function(b,a){if(b===this){return SC.IndexSet.create()}return this.clone().remove(b,a)},replace:function(c,a){if(a===undefined){if(typeof c===SC.T_NUMBER){a=1}else{if(c&&c.isIndexSet){this._content=this._sc_sliceContent(c._content);this.beginPropertyChanges().set("max",c.max).set("length",c.length).set("source",c.source).enumerableContentDidChange();this.endPropertyChanges();return this}else{a=c.length;c=c.start}}}var b=this.length;this._content.length=1;this._content[0]=0;this.length=this.max=0;return this.add(c,a)},add:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}var e,j,d;if(a&&a.isIndexSet){e=a._content;if(!e){return this}j=0;d=e[0];while(d!==0){if(d>0){this.add(j,d-j)}j=d<0?0-d:d;d=e[j]}return this}else{if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{b=a.length;a=a.start}}}else{if(b===null){b=1}}}if(b<=0){return this}var f=this.get("max"),c=f,h,g;e=this._content;if(a===f){if(a>0){j=this.rangeStartForIndex(a-1);d=e[j];if(d>0){delete e[f];e[j]=f=a+b;a=j}else{e[f]=f=a+b}}else{e[a]=f=b}e[f]=0;this.set("max",f);this.set("length",this.length+b);b=f-a}else{if(a>f){e[f]=0-a;e[a]=a+b;e[a+b]=0;this.set("max",a+b);this.set("length",this.length+b);b=a+b-f;a=f}else{j=this.rangeStartForIndex(a);d=e[j];f=a+b;h=0;if((a>0)&&(j===a)&&(d<=0)){j=this.rangeStartForIndex(a-1);d=e[j]}if(d<0){e[j]=0-a;if(Math.abs(d)>f){e[a]=0-f;e[f]=d}else{e[a]=d}}else{a=j;if(d>f){f=d}}j=a;while(j<f){g=e[j];if(g===0){e[f]=0;d=f;h+=f-j}else{d=Math.abs(g);if(d>f){e[f]=g;d=f}if(g<0){h+=d-j}}delete e[j];j=d}if((j=e[f])>0){delete e[f];f=j}e[a]=f;if(f>c){this.set("max",f)}this.set("length",this.get("length")+h);b=f-a}}this._hint(a,b);if(h!==0){this.enumerableContentDidChange()}return this},remove:function(a,b){if(this.isFrozen){throw SC.FROZEN_ERROR}if(b===undefined){if(a===null||a===undefined){return this}else{if(typeof a===SC.T_NUMBER){b=1}else{if(a.isIndexSet){a.forEachRange(this.remove,this);return this}else{b=a.length;a=a.start}}}}if(b<=0){return this}var f=this.get("max"),c=f,e=this._content,k,d,j,g,h;if(a>=f){return this}k=this.rangeStartForIndex(a);d=e[k];h=a+b;j=0;if((a>0)&&(k===a)&&(d>0)){k=this.rangeStartForIndex(a-1);d=e[k]}if(d>0){e[k]=a;if(d>h){e[a]=h;e[h]=d}else{e[a]=d}}else{a=k;d=Math.abs(d);if(d>h){h=d}}k=a;while(k<h){g=e[k];if(g===0){e[h]=0;d=h}else{d=Math.abs(g);if(d>h){e[h]=g;d=h}if(g>0){j+=d-k}}delete e[k];k=d}if((k=e[h])<0){delete e[h];h=Math.abs(k)}if(e[h]===0){delete e[h];e[a]=0;this.set("max",a)}else{e[a]=0-h}this.set("length",this.get("length")-j);b=h-a;this._hint(a,b);if(j!==0){this.enumerableContentDidChange()}return this},_hint:function(g,d,c){if(c===undefined){c=this._content}var b=SC.IndexSet.HINT_SIZE,a=Math.abs(c[g]),f=g-(g%b)+b,e=g+d;while(f<e){while((a!==0)&&(a<=f)){g=a;a=Math.abs(c[g])}if(a===0){delete c[f]}else{if(f!==g){c[f]=g}}f+=b}},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}var a=this.length;this._content.length=1;this._content[0]=0;this.set("length",0).set("max",0);if(a>0){this.enumerableContentDidChange()}},addEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.add(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.add(c)},this)}}this.endPropertyChanges();return this},removeEach:function(b){if(this.isFrozen){throw SC.FROZEN_ERROR}this.beginPropertyChanges();var a=b.get("length");if(b.isSCArray){while(--a>=0){this.remove(b.objectAt(a))}}else{if(b.isEnumerable){b.forEach(function(c){this.remove(c)},this)}}this.endPropertyChanges();return this},clone:function(){return SC.IndexSet.create(this)},inspect:function(){var e=this._content,b=e.length,a=0,c=[],d;for(a=0;a<b;a++){d=e[a];if(d!==undefined){c.push("%@:%@".fmt(a,d))}}return"SC.IndexSet<%@>".fmt(c.join(" , "))},forEachRange:function(f,d){var b=this._content,e=0,a=b[e],c=this.source;if(d===undefined){d=null}while(a!==0){if(a>0){f.call(d,e,a-e,this,c)}e=Math.abs(a);a=b[e]}return this},forEachIn:function(b,c,k,f){var g=this._content,j=0,h=0,d=b+c,a=this.source,e=g[j];if(f===undefined){f=null}while(e!==0){if(j<b){j=b}while((j<e)&&(j<d)){k.call(f,j++,h++,this,a)}if(j>=d){j=e=0}else{j=Math.abs(e);e=g[j]}}return this},lengthIn:function(g,d){var a=0;if(d===undefined){if(g===null||g===undefined){return 0}else{if(typeof g===SC.T_NUMBER){d=1}else{if(g.isIndexSet){g.forEachRange(function(j,h){a+=this.lengthIn(j,h)},this);return a}else{d=g.length;g=g.start}}}}if(this.get("length")===0){return 0}var c=this._content,f=0,b=c[f],e=g+d;while(f<e&&b!==0){if(b>0){a+=(b>e)?e-f:b-f}f=Math.abs(b);b=c[f]}return a},source:null,indexOf:function(d,c){var f=this.source;if(!f){throw"%@.indexOf() requires source".fmt(this)}var b=f.get("length"),e=this._content,g=e[0]<0?Math.abs(e[0]):0,a;while(g>=0&&g<b){a=f.indexOf(d,g);if(a<0){return -1}if(this.contains(a)){return a}g=a+1}return -1},lastIndexOf:function(d,c){var e=this.source;if(!e){throw"%@.lastIndexOf() requires source".fmt(this)}var b=e.get("length"),f=this.max-1,a;if(f>=b){f=b-1}while(f>=0){a=e.lastIndexOf(d,f);if(a<0){return -1}if(this.contains(a)){return a}f=a+1}return -1},forEachObject:function(g,e){var d=this.source;if(!d){throw"%@.forEachObject() requires source".fmt(this)}var c=this._content,f=0,a=0,b=c[f];if(e===undefined){e=null}while(b!==0){while(f<b){g.call(e,d.objectAt(f),f,d,this);f++}f=Math.abs(b);b=c[f]}return this},addObject:function(c,d){var e=this.source;if(!e){throw"%@.addObject() requires source".fmt(this)}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.add(a);if(d){return this}f=a++}else{return this}}return this},addObjects:function(b,a){b.forEach(function(c){this.addObject(c,a)},this);return this},removeObject:function(c,d){var e=this.source;if(!e){throw"%@.removeObject() requires source".fmt(this)}var b=e.get("length"),f=0,a;while(f>=0&&f<b){a=e.indexOf(c,f);if(a>=0){this.remove(a);if(d){return this}f=a+1}else{return this}}return this},removeObjects:function(b,a){b.forEach(function(c){this.removeObject(c,a)},this);return this},LOG_OBSERVING:NO,forEach:function(g,e){var c=this._content,f=0,a=0,d=this.source,b=c[f];if(e===undefined){e=null}while(b!==0){while(f<b){g.call(e,f++,a++,this,d)}f=Math.abs(b);b=c[f]}return this},nextObject:function(f,b,c){var e=this._content,d=c.next,a=this.get("max");if(b===null){b=d=0}else{if(b>=a){delete c.next;return null}else{b++}}if(b===d){do{b=Math.abs(d);d=e[b]}while(d<0);c.next=d}return b},toString:function(){var a=[];this.forEachRange(function(c,b){a.push(b===1?c:"%@..%@".fmt(c,c+b-1))},this);return"SC.IndexSet<%@>".fmt(a.join(","))},max:0});SC.IndexSet.slice=SC.IndexSet.copy=SC.IndexSet.clone;SC.IndexSet.EMPTY=SC.IndexSet.create().freeze();SC.json={encode:function(a){return JSON.stringify(a)},decode:function(a){return JSON.parse(a)}};if(!this.JSON){this.JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==="string"){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());sc_require("ext/function");SC.LOGGER_LOG_DELIMITER=", ";SC.LOGGER_LOG_ERROR="ERROR: ";SC.LOGGER_LOG_INFO="INFO:  ";SC.LOGGER_LOG_WARN="WARN:  ";SC.LOGGER_LOG_DEBUG="DEBUG: ";SC.LOGGER_LOG_GROUP_HEADER="** %@";SC.LOGGER_LOG_GROUP_INDENTATION="    ";SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX="%@:  ";SC.LOGGER_LEVEL_DEBUG="debug";SC.LOGGER_LEVEL_INFO="info";SC.LOGGER_LEVEL_WARN="warn";SC.LOGGER_LEVEL_ERROR="error";SC.LOGGER_LEVEL_NONE="none";SC.Logger=SC.Object.create({messagePrefix:null,outputMessagePrefix:null,recordedMessagePrefix:null,logOutputLevel:null,logRecordingLevel:SC.LOGGER_LEVEL_NONE,recordedLogMessages:null,recordedLogMessagesMaximumLength:500,recordedLogMessagesPruningMinimumLength:100,debugEnabled:NO,exists:function(){return !SC.none(this.get("reporter"))}.property("reporter").cacheable(),fallBackOnAlert:NO,reporter:console,debug:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_DEBUG,YES,a,arguments)},debugWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_DEBUG,NO,null,arguments)},debugGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_DEBUG,a,arguments)},debugGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_DEBUG)},info:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_INFO,YES,a,arguments)},infoWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_INFO,NO,null,arguments)},infoGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_INFO,a,arguments)},infoGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_INFO)},warn:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_WARN,YES,a,arguments)},warnWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_WARN,NO,null,arguments)},warnGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_WARN,a,arguments)},warnGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_WARN)},error:function(a,b){SC.Logger._handleMessage(SC.LOGGER_LEVEL_ERROR,YES,a,arguments)},errorWithoutFmt:function(){this._handleMessage(SC.LOGGER_LEVEL_ERROR,NO,null,arguments)},errorGroup:function(a,b){SC.Logger._handleGroup(SC.LOGGER_LEVEL_ERROR,a,arguments)},errorGroupEnd:function(){SC.Logger._handleGroupEnd(SC.LOGGER_LEVEL_ERROR)},outputRecordedLogMessages:function(o){if(!this.get("exists")){return}var s=this.get("reporter"),k=this.get("recordedLogMessages"),a=0,d=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,r,p,b,c,g,h,e,f,u,n,m,q,t;if(k){for(r=0,p=k.length;r<p;++r){b=k[r];c=b.type;if(o){g=d.fmt(b.timestamp.toUTCString())}h=b.message;if(h){e=b.originalArguments;this._outputMessage(c,g,a,h,e)}else{n=b.indentation;u=b.title;m=n-a;if(s.group){if(Math.abs(m)>1){for(q=0,t=(m-1);q<t;++q){if(m>0){s.group()}else{s.groupEnd()}}}if(m>0){f=g?g:"";f+=u;s.group(f)}else{s.groupEnd()}}else{if(m>0){this._outputGroup(c,g,n-1,u)}}a=n}}}},stringifyRecordedLogMessages:function(){var j="",f=this.get("recordedLogMessages"),n=0,h=SC.LOGGER_RECORDED_LOG_TIMESTAMP_PREFIX,d=this._LOG_FALLBACK_PREFIX_MAPPING,c=SC.LOGGER_LOG_GROUP_HEADER,e,a,p,m,s,r,g,q,o,k,b;if(f){for(e=0,a=f.length;e<a;++e){p=f[e];m=p.type;g=h.fmt(p.timestamp.toUTCString());g+=d[m]||"";s=p.message;if(s){r=p.originalArguments;q=g+this._indentation(n);q+=r?this._argumentsToString(r):s}else{k=p.indentation;o=p.title;b=k-n;if(b>0){q=g+this._indentation(n)+c.fmt(o)}n=k}j+=q+"\n"}}return j},log:function(){var a=this.get("reporter"),c=arguments[0],d=this.get("messagePrefix"),e=this.get("outputMessagePrefix"),b=NO;if(c&&SC.typeOf(c)===SC.T_STRING){if(d||e){if(d){c=d+c}if(e){c=e+c}arguments[0]=c}}if(this.get("exists")){if(typeof a.log==="function"){a.log.apply(a,arguments);b=YES}else{if(a.log){a.log(this._argumentsToArray(arguments));b=YES}}}if(!b&&this.get("fallBackOnAlert")){if(this.get("exists")&&(typeof a.alert==="function")){a.alert(arguments);b=YES}else{alert(arguments);b=YES}}return b},group:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.group==="function")){a.group(b)}},groupEnd:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.groupEnd==="function")){a.groupEnd()}},dir:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dir==="function")){a.dir.apply(a,arguments)}else{this.log.apply(this,arguments)}},dirxml:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.dirxml==="function")){a.dirxml.apply(a,arguments)}else{this.log.apply(this,arguments)}},profile:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profile==="function")){a.profile(b);return YES}return NO},profileEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.profileEnd==="function")){a.profileEnd(b);return YES}return NO},time:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.time==="function")){a.time(b);return YES}return NO},timeEnd:function(b){var a=this.get("reporter");if(this.get("exists")&&(typeof a.timeEnd==="function")){a.timeEnd(b);return YES}return NO},trace:function(){var a=this.get("reporter");if(this.get("exists")&&(typeof a.trace==="function")){a.trace();return YES}return NO},init:function(){arguments.callee.base.apply(this,arguments);if(!this.get("logOutputLevel")){if(SC.buildMode==="debug"){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}else{this.set("logOutputLevel",SC.LOGGER_LEVEL_INFO)}}this.debugEnabledDidChange()},debugEnabledDidChange:function(){if(this.get("debugEnabled")){this.set("logOutputLevel",SC.LOGGER_LEVEL_DEBUG)}}.observes("debugEnabled"),_handleMessage:function(m,o,q,p){var a=this._shouldOutputType(m),d=this._shouldRecordType(m),e,f,j,k,b,n,h,c,g;if(!(a||d)){return}e=(p&&p.length>1);if(o&&(SC.none(q)||(typeof q!=="string"))){o=NO}if(o){if(e){k=[];for(f=1,j=p.length;f<j;++f){k.push(p[f])}q=q.fmt.apply(q,k)}}h=this.get("messagePrefix");if(h){q=h+q}if(a){c=this.get("outputMessagePrefix");k=o?null:p;this._outputMessage(m,null,this._outputIndentationLevel,(c?c+q:q),k)}if(d){g=this.get("recordedMessagePrefix");n={type:m,message:q?(g?g+q:q):YES,timestamp:new Date()};if(!o&&e){n.originalArguments=p}this._addRecordedMessageEntry(n)}},_handleGroup:function(m,o,r){var a=this._shouldOutputType(m),e=this._shouldRecordType(m),f,g,j,k,q,d,c,h,b,n,p;if(!(a||e)){return}f=(r&&r.length>1);if(o&&f){k=[];for(g=1,j=r.length;g<j;++g){k.push(r[g])}o=o.fmt.apply(o,k)}if(a){this._outputGroup(m,null,this._outputIndentationLevel,o);this._outputIndentationLevel++}if(e){n=++this._recordingIndentationLevel;p={type:m,indentation:n,beginGroup:YES,title:o,timestamp:new Date()};this._addRecordedMessageEntry(p)}},_handleGroupEnd:function(d){var g=this._shouldOutputType(d),c=this._shouldRecordType(d),a,f,b,e;if(!(g||c)){return}if(g){this._outputIndentationLevel--;if(this.get("exists")){a=this.get("reporter");f=a.groupEnd;if(f){f.call(a)}}}if(c){b=--this._recordingIndentationLevel;e={type:d,indentation:b,timestamp:new Date()};this._addRecordedMessageEntry(e)}},_shouldOutputType:function(a){var c=this._LOG_LEVEL_MAPPING,d=c[a]||0,b=c[this.get("logOutputLevel")]||0;return(d<=b)},_shouldRecordType:function(a){var c=this._LOG_LEVEL_MAPPING,d=c[a]||0,b=c[this.get("logRecordingLevel")]||0;return(d<=b)},_outputMessage:function(h,g,j,n,m){if(!this.get("exists")){return}var d=this.get("reporter"),b,a,c,e,f,k;a=!d.group;c=d[h];if(c){if(!m){b=g?g:"";if(a){b+=this._indentation(j)}b+=n;d[h](b)}else{f=this._argumentsToArray(m);e="";if(g){e=g}if(a){e+=this._indentation(j)}if(e){f.splice(0,0,e)}if(c.apply){c.apply(d,f)}else{d[h](f)}}}else{if(d.log){e="";if(g){e=g}e+=this._LOG_FALLBACK_PREFIX_MAPPING[h]||"";if(a){e+=this._indentation(j)}if(!m){d.log(e+n)}else{f=this._argumentsToArray(m);if(e){f.splice(0,0,e)}d.log(f)}}}},_outputGroup:function(d,f,c,g){if(!this.get("exists")){return}var b=this.get("reporter"),e=b.group,a;if(e){a=f?f:"";a+=g;e.call(b,a)}else{if(b.log){a="";if(f){a=f}a+=this._LOG_FALLBACK_PREFIX_MAPPING[d]||"";a+=this._indentation(c);a+=SC.LOGGER_LOG_GROUP_HEADER.fmt(g);b.log(a)}}},_addRecordedMessageEntry:function(c){var b=this.get("recordedLogMessages"),a;if(!b){b=[];this.set("recordedLogMessages",b)}b.push(c);a=b.length;if(a>this.get("recordedLogMessagesMaximumLength")){b.splice(0,(a-this.get("recordedLogMessagesPruningMinimumLength")))}b.enumerableContentDidChange()},_argumentsToArray:function(c){var b=[],d,a;if(c){for(d=0,a=c.length;d<a;++d){b[d]=c[d]}}return b},_argumentsToString:function(){var c="",b=SC.LOGGER_LOG_DELIMITER,d,a;for(d=0,a=(arguments.length-1);d<a;++d){c+=arguments[d]+b}c+=arguments[a];return c},_indentation:function(d){if(!d||d<0){d=0}var b="",a=SC.LOGGER_LOG_GROUP_INDENTATION,c;for(c=0;c<d;++c){b+=a}return b},_outputIndentationLevel:0,_recordingIndentationLevel:0,_LOG_LEVEL_MAPPING:{debug:4,info:3,warn:2,error:1,none:0},_LOG_FALLBACK_PREFIX_MAPPING:{debug:SC.LOGGER_LOG_DEBUG,info:SC.LOGGER_LOG_INFO,warn:SC.LOGGER_LOG_WARN,error:SC.LOGGER_LOG_ERROR}});SC.debug=SC.Logger.debug;SC.info=SC.Logger.info;SC.warn=SC.Logger.warn;SC.error=SC.Logger.error;sc_require("ext/function");sc_require("private/observer_set");SC.RunLoop=SC.Object.extend({beginRunLoop:function(){this._start=new Date().getTime();if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.beginRunLoop at %@".fmt(this._start))}this._runLoopInProgress=YES;return this},isRunLoopInProgress:function(){return this._runLoopInProgress}.property(),endRunLoop:function(){if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ flushing application queues")}this.flushAllPending();this._start=null;if(SC.LOG_BINDINGS||SC.LOG_OBSERVERS){SC.Logger.log("-- SC.RunLoop.endRunLoop ~ End")}SC.RunLoop.lastRunLoopEnd=Date.now();this._runLoopInProgress=NO;return this},flushAllPending:function(){var a;do{a=this.flushApplicationQueues();if(!a){a=this._flushinvokeLastQueue()}}while(a)},invokeOnce:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeQueue){this._invokeQueue=SC.ObserverSet.create()}if(c){this._invokeQueue.add(b,c,undefined,a)}return this},invokeLast:function(b,c){if(c===undefined){c=b;b=this}var a;if(typeof c==="string"){c=b[c]}if(!this._invokeLastQueue){this._invokeLastQueue=SC.ObserverSet.create()}this._invokeLastQueue.add(b,c,undefined,a);return this},flushApplicationQueues:function(){var b=NO,a=this._invokeQueue;if(a&&a.getMembers().length){this._invokeQueue=null;b=YES;a.invokeMethods()}return SC.Binding.flushPendingChanges()||b},_flushinvokeLastQueue:function(){var a=this._invokeLastQueue,b=NO;if(a&&a.getMembers().length){this._invokeLastQueue=null;b=YES;if(b){a.invokeMethods()}}return b}});SC.RunLoop.currentRunLoop=null;SC.RunLoop.runLoopClass=SC.RunLoop;SC.RunLoop.begin=function(){var a=this.currentRunLoop;if(!a){a=this.currentRunLoop=this.runLoopClass.create()}a.beginRunLoop();return this};SC.RunLoop.end=function(){var a=this.currentRunLoop;if(!a){throw"SC.RunLoop.end() called outside of a runloop!"}a.endRunLoop();return this};SC.RunLoop.kill=function(){this.currentRunLoop=this.runLoopClass.create();return this};SC.RunLoop.isRunLoopInProgress=function(){if(this.currentRunLoop){return this.currentRunLoop.get("isRunLoopInProgress")}return NO};SC.run=function(g,f,b){var a=SC.RunLoop.isRunLoopInProgress();if(SC.ExceptionHandler&&SC.ExceptionHandler.enabled){try{if(b||!a){SC.RunLoop.begin()}if(g){g.call(f)}if(b||!a){SC.RunLoop.end()}}catch(d){var c=SC.ExceptionHandler.handleException(d);if(!c&&!SC.browser.msie){throw d}}}else{if(b||!a){SC.RunLoop.begin()}if(g){g.call(f)}if(b||!a){SC.RunLoop.end()}}};SC.RunLoop.wrapFunction=function(b){var a=function(){var c=SC.RunLoop.isRunLoopInProgress();if(!c){SC.RunLoop.begin()}var d=arguments.callee.wrapped.apply(this,arguments);if(!c){SC.RunLoop.end()}return d};a.wrapped=b;return a};var handlebars=(function(){var f={trace:function c(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,statements:6,simpleInverse:7,statement:8,openInverse:9,closeBlock:10,openBlock:11,mustache:12,partial:13,CONTENT:14,COMMENT:15,OPEN_BLOCK:16,inMustache:17,CLOSE:18,OPEN_INVERSE:19,OPEN_ENDBLOCK:20,path:21,OPEN:22,OPEN_UNESCAPED:23,OPEN_PARTIAL:24,params:25,hash:26,param:27,STRING:28,hashSegments:29,hashSegment:30,ID:31,EQUALS:32,pathSegments:33,SEP:34,"$accept":0,"$end":1},terminals_:{2:"error",5:"EOF",14:"CONTENT",15:"COMMENT",16:"OPEN_BLOCK",18:"CLOSE",19:"OPEN_INVERSE",20:"OPEN_ENDBLOCK",22:"OPEN",23:"OPEN_UNESCAPED",24:"OPEN_PARTIAL",28:"STRING",31:"ID",32:"EQUALS",34:"SEP"},productions_:[0,[3,2],[4,3],[4,1],[4,0],[6,1],[6,2],[8,3],[8,3],[8,1],[8,1],[8,1],[8,1],[11,3],[9,3],[10,3],[12,3],[12,3],[13,3],[13,4],[7,2],[17,3],[17,2],[17,2],[17,1],[25,2],[25,1],[27,1],[27,1],[26,1],[29,2],[29,1],[30,3],[30,3],[21,1],[33,3],[33,1]],performAction:function b(g,k,m,p,o,j,n){var h=j.length-1;switch(o){case 1:return j[h-1];break;case 2:this.$=new p.ProgramNode(j[h-2],j[h]);break;case 3:this.$=new p.ProgramNode(j[h]);break;case 4:this.$=new p.ProgramNode([]);break;case 5:this.$=[j[h]];break;case 6:j[h-1].push(j[h]);this.$=j[h-1];break;case 7:this.$=new p.InverseNode(j[h-2],j[h-1],j[h]);break;case 8:this.$=new p.BlockNode(j[h-2],j[h-1],j[h]);break;case 9:this.$=j[h];break;case 10:this.$=j[h];break;case 11:this.$=new p.ContentNode(j[h]);break;case 12:this.$=new p.CommentNode(j[h]);break;case 13:this.$=new p.MustacheNode(j[h-1][0],j[h-1][1]);break;case 14:this.$=new p.MustacheNode(j[h-1][0],j[h-1][1]);break;case 15:this.$=j[h-1];break;case 16:this.$=new p.MustacheNode(j[h-1][0],j[h-1][1]);break;case 17:this.$=new p.MustacheNode(j[h-1][0],j[h-1][1],true);break;case 18:this.$=new p.PartialNode(j[h-1]);break;case 19:this.$=new p.PartialNode(j[h-2],j[h-1]);break;case 20:break;case 21:this.$=[[j[h-2]].concat(j[h-1]),j[h]];break;case 22:this.$=[[j[h-1]].concat(j[h]),null];break;case 23:this.$=[[j[h-1]],j[h]];break;case 24:this.$=[[j[h]],null];break;case 25:j[h-1].push(j[h]);this.$=j[h-1];break;case 26:this.$=[j[h]];break;case 27:this.$=j[h];break;case 28:this.$=new p.StringNode(j[h]);break;case 29:this.$=new p.HashNode(j[h]);break;case 30:j[h-1].push(j[h]);this.$=j[h-1];break;case 31:this.$=[j[h]];break;case 32:this.$=[j[h-2],j[h]];break;case 33:this.$=[j[h-2],new p.StringNode(j[h])];break;case 34:this.$=new p.IdNode(j[h]);break;case 35:j[h-2].push(j[h]);this.$=j[h-2];break;case 36:this.$=[j[h]];break}},table:[{3:1,4:2,5:[2,4],6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{1:[3]},{5:[1,16]},{5:[2,3],7:17,8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,19],20:[2,3],22:[1,13],23:[1,14],24:[1,15]},{5:[2,5],14:[2,5],15:[2,5],16:[2,5],19:[2,5],20:[2,5],22:[2,5],23:[2,5],24:[2,5]},{4:20,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{4:21,6:3,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,4],22:[1,13],23:[1,14],24:[1,15]},{5:[2,9],14:[2,9],15:[2,9],16:[2,9],19:[2,9],20:[2,9],22:[2,9],23:[2,9],24:[2,9]},{5:[2,10],14:[2,10],15:[2,10],16:[2,10],19:[2,10],20:[2,10],22:[2,10],23:[2,10],24:[2,10]},{5:[2,11],14:[2,11],15:[2,11],16:[2,11],19:[2,11],20:[2,11],22:[2,11],23:[2,11],24:[2,11]},{5:[2,12],14:[2,12],15:[2,12],16:[2,12],19:[2,12],20:[2,12],22:[2,12],23:[2,12],24:[2,12]},{17:22,21:23,31:[1,25],33:24},{17:26,21:23,31:[1,25],33:24},{17:27,21:23,31:[1,25],33:24},{17:28,21:23,31:[1,25],33:24},{21:29,31:[1,25],33:24},{1:[2,1]},{6:30,8:4,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],22:[1,13],23:[1,14],24:[1,15]},{5:[2,6],14:[2,6],15:[2,6],16:[2,6],19:[2,6],20:[2,6],22:[2,6],23:[2,6],24:[2,6]},{17:22,18:[1,31],21:23,31:[1,25],33:24},{10:32,20:[1,33]},{10:34,20:[1,33]},{18:[1,35]},{18:[2,24],21:40,25:36,26:37,27:38,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,34],28:[2,34],31:[2,34],34:[1,44]},{18:[2,36],28:[2,36],31:[2,36],34:[2,36]},{18:[1,45]},{18:[1,46]},{18:[1,47]},{18:[1,48],21:49,31:[1,25],33:24},{5:[2,2],8:18,9:5,11:6,12:7,13:8,14:[1,9],15:[1,10],16:[1,12],19:[1,11],20:[2,2],22:[1,13],23:[1,14],24:[1,15]},{14:[2,20],15:[2,20],16:[2,20],19:[2,20],22:[2,20],23:[2,20],24:[2,20]},{5:[2,7],14:[2,7],15:[2,7],16:[2,7],19:[2,7],20:[2,7],22:[2,7],23:[2,7],24:[2,7]},{21:50,31:[1,25],33:24},{5:[2,8],14:[2,8],15:[2,8],16:[2,8],19:[2,8],20:[2,8],22:[2,8],23:[2,8],24:[2,8]},{14:[2,14],15:[2,14],16:[2,14],19:[2,14],20:[2,14],22:[2,14],23:[2,14],24:[2,14]},{18:[2,22],21:40,26:51,27:52,28:[1,41],29:39,30:42,31:[1,43],33:24},{18:[2,23]},{18:[2,26],28:[2,26],31:[2,26]},{18:[2,29],30:53,31:[1,54]},{18:[2,27],28:[2,27],31:[2,27]},{18:[2,28],28:[2,28],31:[2,28]},{18:[2,31],31:[2,31]},{18:[2,36],28:[2,36],31:[2,36],32:[1,55],34:[2,36]},{31:[1,56]},{14:[2,13],15:[2,13],16:[2,13],19:[2,13],20:[2,13],22:[2,13],23:[2,13],24:[2,13]},{5:[2,16],14:[2,16],15:[2,16],16:[2,16],19:[2,16],20:[2,16],22:[2,16],23:[2,16],24:[2,16]},{5:[2,17],14:[2,17],15:[2,17],16:[2,17],19:[2,17],20:[2,17],22:[2,17],23:[2,17],24:[2,17]},{5:[2,18],14:[2,18],15:[2,18],16:[2,18],19:[2,18],20:[2,18],22:[2,18],23:[2,18],24:[2,18]},{18:[1,57]},{18:[1,58]},{18:[2,21]},{18:[2,25],28:[2,25],31:[2,25]},{18:[2,30],31:[2,30]},{32:[1,55]},{21:59,28:[1,60],31:[1,25],33:24},{18:[2,35],28:[2,35],31:[2,35],34:[2,35]},{5:[2,19],14:[2,19],15:[2,19],16:[2,19],19:[2,19],20:[2,19],22:[2,19],23:[2,19],24:[2,19]},{5:[2,15],14:[2,15],15:[2,15],16:[2,15],19:[2,15],20:[2,15],22:[2,15],23:[2,15],24:[2,15]},{18:[2,32],31:[2,32]},{18:[2,33],31:[2,33]}],defaultActions:{16:[2,1],37:[2,23],51:[2,21]},parseError:function d(h,g){throw new Error(h)},parse:function e(s){var z=this,n=[0],I=[null],u=[],J=this.table,h="",t=0,G=0,k=0,q=2,w=1;this.lexer.setInput(s);this.lexer.yy=this.yy;this.yy.lexer=this.lexer;var j=this.lexer.yylloc;u.push(j);if(typeof this.yy.parseError==="function"){this.parseError=this.yy.parseError}function y(p){n.length=n.length-2*p;I.length=I.length-p;u.length=u.length-p}function x(){var p;p=z.lexer.lex()||1;if(typeof p!=="number"){p=z.symbols_[p]||p}return p}var F,B,m,E,K,v,D={},A,H,g,o;while(true){m=n[n.length-1];if(this.defaultActions[m]){E=this.defaultActions[m]}else{if(F==null){F=x()}E=J[m]&&J[m][F]}if(typeof E==="undefined"||!E.length||!E[0]){if(!k){o=[];for(A in J[m]){if(this.terminals_[A]&&A>2){o.push("'"+this.terminals_[A]+"'")}}var C="";if(this.lexer.showPosition){C="Parse error on line "+(t+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+o.join(", ")}else{C="Parse error on line "+(t+1)+": Unexpected "+(F==1?"end of input":("'"+(this.terminals_[F]||F)+"'"))}this.parseError(C,{text:this.lexer.match,token:this.terminals_[F]||F,line:this.lexer.yylineno,loc:j,expected:o})}if(k==3){if(F==w){throw new Error(C||"Parsing halted.")}G=this.lexer.yyleng;h=this.lexer.yytext;t=this.lexer.yylineno;j=this.lexer.yylloc;F=x()}while(1){if((q.toString()) in J[m]){break}if(m==0){throw new Error(C||"Parsing halted.")}y(1);m=n[n.length-1]}B=F;F=q;m=n[n.length-1];E=J[m]&&J[m][q];k=3}if(E[0] instanceof Array&&E.length>1){throw new Error("Parse Error: multiple actions possible at state: "+m+", token: "+F)}switch(E[0]){case 1:n.push(F);I.push(this.lexer.yytext);u.push(this.lexer.yylloc);n.push(E[1]);F=null;if(!B){G=this.lexer.yyleng;h=this.lexer.yytext;t=this.lexer.yylineno;j=this.lexer.yylloc;if(k>0){k--}}else{F=B;B=null}break;case 2:H=this.productions_[E[1]][1];D.$=I[I.length-H];D._$={first_line:u[u.length-(H||1)].first_line,last_line:u[u.length-1].last_line,first_column:u[u.length-(H||1)].first_column,last_column:u[u.length-1].last_column};v=this.performAction.call(D,h,G,t,this.yy,E[1],I,u);if(typeof v!=="undefined"){return v}if(H){n=n.slice(0,-1*H*2);I=I.slice(0,-1*H);u=u.slice(0,-1*H)}n.push(this.productions_[E[1]][0]);I.push(D.$);u.push(D._$);g=J[n[n.length-2]][n[n.length-1]];n.push(g);break;case 3:return true}}return true}};var a=(function(){var k=({EOF:1,parseError:function n(q,p){if(this.yy.parseError){this.yy.parseError(q,p)}else{throw new Error(q)}},setInput:function(p){this._input=p;this._more=this._less=this.done=false;this.yylineno=this.yyleng=0;this.yytext=this.matched=this.match="";this.conditionStack=["INITIAL"];this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0};return this},input:function(){var q=this._input[0];this.yytext+=q;this.yyleng++;this.match+=q;this.matched+=q;var p=q.match(/\n/);if(p){this.yylineno++}this._input=this._input.slice(1);return q},unput:function(p){this._input=p+this._input;return this},more:function(){this._more=true;return this},pastInput:function(){var p=this.matched.substr(0,this.matched.length-this.match.length);return(p.length>20?"...":"")+p.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var p=this.match;if(p.length<20){p+=this._input.substr(0,20-p.length)}return(p.substr(0,20)+(p.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var p=this.pastInput();var q=new Array(p.length+1).join("-");return p+this.upcomingInput()+"\n"+q+"^"},next:function(){if(this.done){return this.EOF}if(!this._input){this.done=true}var t,r,q,p;if(!this._more){this.yytext="";this.match=""}var u=this._currentRules();for(var s=0;s<u.length;s++){r=this._input.match(this.rules[u[s]]);if(r){p=r[0].match(/\n.*/g);if(p){this.yylineno+=p.length}this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:p?p[p.length-1].length-1:this.yylloc.last_column+r.length};this.yytext+=r[0];this.match+=r[0];this.matches=r;this.yyleng=this.yytext.length;this._more=false;this._input=this._input.slice(r[0].length);this.matched+=r[0];t=this.performAction.call(this,this.yy,this,u[s],this.conditionStack[this.conditionStack.length-1]);if(t){return t}else{return}}}if(this._input===""){return this.EOF}else{this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})}},lex:function g(){var p=this.next();if(typeof p!=="undefined"){return p}else{return this.lex()}},begin:function h(p){this.conditionStack.push(p)},popState:function o(){return this.conditionStack.pop()},_currentRules:function m(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules}});k.performAction=function j(t,q,s,p){var r=p;switch(s){case 0:this.begin("mu");if(q.yytext){return 14}break;case 1:return 14;break;case 2:return 24;break;case 3:return 16;break;case 4:return 20;break;case 5:return 19;break;case 6:return 19;break;case 7:return 23;break;case 8:return 23;break;case 9:q.yytext=q.yytext.substr(3,q.yyleng-5);this.begin("INITIAL");return 15;break;case 10:return 22;break;case 11:return 32;break;case 12:return 31;break;case 13:return 31;break;case 14:return 34;break;case 15:break;case 16:this.begin("INITIAL");return 18;break;case 17:this.begin("INITIAL");return 18;break;case 18:q.yytext=q.yytext.substr(1,q.yyleng-2).replace(/\\"/g,'"');return 28;break;case 19:return 31;break;case 20:return"INVALID";break;case 21:return 5;break}};k.rules=[/^[^\x00]*?(?=(\{\{))/,/^[^\x00]+/,/^\{\{>/,/^\{\{#/,/^\{\{\//,/^\{\{\^/,/^\{\{\s*else\b/,/^\{\{\{/,/^\{\{&/,/^\{\{!.*?\}\}/,/^\{\{/,/^=/,/^\.(?=[} ])/,/^\.\./,/^[/.]/,/^\s+/,/^\}\}\}/,/^\}\}/,/^"(\\["]|[^"])*"/,/^[a-zA-Z0-9_]+(?=[=} /.])/,/^./,/^$/];k.conditions={mu:{rules:[2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21],inclusive:false},INITIAL:{rules:[0,1,21],inclusive:true}};return k})();f.lexer=a;return f})();var Handlebars={};Handlebars.Parser=handlebars;Handlebars.parse=function(a){Handlebars.Parser.yy=Handlebars.AST;return Handlebars.Parser.parse(a)};Handlebars.print=function(a){return new Handlebars.PrintVisitor().accept(a)};Handlebars.Runtime={};Handlebars.Runtime.compile=function(b){var a=Handlebars.parse(b);return function(d,f,c){f=f||Handlebars.helpers;c=c||Handlebars.partials;var g=new Handlebars.Context(d,f,c);var e=new Handlebars.Runtime(g);e.accept(a);return e.buffer}};Handlebars.helpers={};Handlebars.partials={};Handlebars.registerHelper=function(b,c,a){if(a){c.not=a}this.helpers[b]=c};Handlebars.registerPartial=function(a,b){this.partials[a]=b};Handlebars.registerHelper("helperMissing",function(a){if(arguments.length===2){return undefined}else{throw new Error("Could not find property '"+a+"'")}});Handlebars.registerHelper("blockHelperMissing",function(e,g,a){a=a||function(){};var c="";var f=Object.prototype.toString.call(e);if(f==="[object Function]"){e=e()}if(e===true){return g(this)}else{if(e===false||e==null){return a(this)}else{if(f==="[object Array]"){if(e.length>0){for(var d=0,b=e.length;d<b;d++){c=c+g(e[d])}}else{c=a(this)}return c}else{return g(e)}}}},function(a,b){return b(a)});Handlebars.registerHelper("each",function(e,f,a){var c="";if(e&&e.length>0){for(var d=0,b=e.length;d<b;d++){c=c+f(e[d])}}else{c=a(this)}return c});Handlebars.registerHelper("if",function(b,c,a){if(!b||b==[]){return a(this)}else{return c(this)}});Handlebars.registerHelper("unless",function(b,c,a){return Handlebars.helpers["if"].call(this,b,a,c)});Handlebars.registerHelper("with",function(a,b){return b(a)});Handlebars.logger={DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(b,a){}};Handlebars.log=function(b,a){Handlebars.logger.log(b,a)};(function(){Handlebars.AST={};Handlebars.AST.ProgramNode=function(c,b){this.type="program";this.statements=c;if(b){this.inverse=new Handlebars.AST.ProgramNode(b)}};Handlebars.AST.MustacheNode=function(d,c,b){this.type="mustache";this.id=d[0];this.params=d.slice(1);this.hash=c;this.escaped=!b};Handlebars.AST.PartialNode=function(c,b){this.type="partial";this.id=c;this.context=b};var a=function(b,c){if(b.original!==c.original){throw new Handlebars.Exception(b.original+" doesn't match "+c.original)}};Handlebars.AST.BlockNode=function(c,b,d){a(c.id,d);this.type="block";this.mustache=c;this.program=b};Handlebars.AST.InverseNode=function(c,b,d){a(c.id,d);this.type="inverse";this.mustache=c;this.program=b};Handlebars.AST.ContentNode=function(b){this.type="content";this.string=b};Handlebars.AST.HashNode=function(b){this.type="hash";this.pairs=b};Handlebars.AST.IdNode=function(f){this.type="ID";this.original=f.join(".");var d=[],g=0;for(var e=0,b=f.length;e<b;e++){var c=f[e];if(c===".."){g++}else{if(c==="."||c==="this"){continue}else{d.push(c)}}}this.parts=d;this.string=d.join(".");this.depth=g;this.isSimple=(d.length===1)&&(g===0)};Handlebars.AST.StringNode=function(b){this.type="STRING";this.string=b};Handlebars.AST.CommentNode=function(b){this.type="comment";this.comment=b}})();Handlebars.Visitor=function(){};Handlebars.Visitor.prototype={accept:function(a){return this[a.type](a)}};Handlebars.Exception=function(a){this.message=a};Handlebars.SafeString=function(a){this.string=a};Handlebars.SafeString.prototype.toString=function(){return this.string.toString()};(function(){var c={"<":"&lt;",">":"&gt;"};var d=/&(?!\w+;)|[<>]/g;var b=/[&<>]/;var a=function(e){return c[e]||"&amp;"};Handlebars.Utils={escapeExpression:function(e){if(e instanceof Handlebars.SafeString){return e.toString()}else{if(e==null||e===false){return""}}if(!b.test(e)){return e}return e.replace(d,a)},isEmpty:function(e){if(typeof e==="undefined"){return true}else{if(e===null){return true}else{if(e===false){return true}else{if(Object.prototype.toString.call(e)==="[object Array]"&&e.length===0){return true}else{return false}}}}}}})();Handlebars.Compiler=function(){};Handlebars.JavaScriptCompiler=function(){};(function(e,d){e.OPCODE_MAP={appendContent:1,getContext:2,lookupWithHelpers:3,lookup:4,append:5,invokeMustache:6,appendEscaped:7,pushString:8,truthyOrFallback:9,functionOrFallback:10,invokeProgram:11,invokePartial:12,push:13,invokeInverse:14,assignToHash:15,pushStringParam:16};e.MULTI_PARAM_OPCODES={appendContent:1,getContext:1,lookupWithHelpers:1,lookup:1,invokeMustache:2,pushString:1,truthyOrFallback:1,functionOrFallback:1,invokeProgram:2,invokePartial:1,push:1,invokeInverse:1,assignToHash:1,pushStringParam:1};e.DISASSEMBLE_MAP={};for(var g in e.OPCODE_MAP){var f=e.OPCODE_MAP[g];e.DISASSEMBLE_MAP[f]=g}e.multiParamSize=function(h){return e.MULTI_PARAM_OPCODES[e.DISASSEMBLE_MAP[h]]};e.prototype={compiler:e,disassemble:function(){var s=this.opcodes,q,m;var p=[],u,k,v;for(var r=0,n=s.length;r<n;r++){q=s[r];if(q==="DECLARE"){k=s[++r];v=s[++r];p.push("DECLARE "+k+" = "+v)}else{u=e.DISASSEMBLE_MAP[q];var t=e.multiParamSize(q);var h=[];for(var o=0;o<t;o++){m=s[++r];if(typeof m==="string"){m='"'+m.replace("\n","\\n")+'"'}h.push(m)}u=u+" "+h.join(" ");p.push(u)}}return p.join("\n")},guid:0,compile:function(h,j){this.children=[];this.depths={list:[]};this.options=j||{};return this.program(h)},accept:function(h){return this[h.type](h)},program:function(k){var j=k.statements,n;this.opcodes=[];for(var m=0,h=j.length;m<h;m++){n=j[m];this[n.type](n)}this.depths.list=this.depths.list.sort(function(p,o){return p-o});return this},compileProgram:function(k){var h=new this.compiler().compile(k,this.options);var m=this.guid++;this.usePartial=this.usePartial||h.usePartial;this.children[m]=h;for(var n=0,j=h.depths.list.length;n<j;n++){depth=h.depths.list[n];if(depth<2){continue}else{this.addDepth(depth-1)}}return m},block:function(p){var m=p.mustache;var o,q,j,k;var n=this.setupStackForMustache(m);var h=this.compileProgram(p.program);if(p.program.inverse){k=this.compileProgram(p.program.inverse);this.declare("inverse",k)}this.opcode("invokeProgram",h,n.length);this.declare("inverse",null);this.opcode("append")},inverse:function(j){this.ID(j.mustache.id);var h=this.compileProgram(j.program);this.opcode("invokeInverse",h);this.opcode("append")},hash:function(m){var k=m.pairs,o,n;this.opcode("push","{}");for(var j=0,h=k.length;j<h;j++){o=k[j];n=o[1];this.accept(n);this.opcode("assignToHash",o[0])}},partial:function(h){var j=h.id;this.usePartial=true;if(h.context){this.ID(h.context)}else{this.opcode("push","context")}this.opcode("invokePartial",j.original);this.opcode("append")},content:function(h){this.opcode("appendContent",h.string)},mustache:function(h){var j=this.setupStackForMustache(h);this.opcode("invokeMustache",j.length,h.id.original);if(h.escaped){this.opcode("appendEscaped")}else{this.opcode("append")}},ID:function(k){this.addDepth(k.depth);this.opcode("getContext",k.depth);this.opcode("lookupWithHelpers",k.parts[0]||null);for(var j=1,h=k.parts.length;j<h;j++){this.opcode("lookup",k.parts[j])}},STRING:function(h){this.opcode("pushString",h.string)},comment:function(){},pushParams:function(k){var h=k.length,j;while(h--){j=k[h];if(this.options.stringParams){if(j.depth){this.addDepth(j.depth)}this.opcode("getContext",j.depth||0);this.opcode("pushStringParam",j.string)}else{this[j.type](j)}}},opcode:function(h,k,j){this.opcodes.push(e.OPCODE_MAP[h]);if(k!==undefined){this.opcodes.push(k)}if(j!==undefined){this.opcodes.push(j)}},declare:function(h,j){this.opcodes.push("DECLARE");this.opcodes.push(h);this.opcodes.push(j)},addDepth:function(h){if(h===0){return}if(!this.depths[h]){this.depths[h]=true;this.depths.list.push(h)}},setupStackForMustache:function(h){var j=h.params;this.pushParams(j);if(h.hash){this.hash(h.hash)}else{this.opcode("push","{}")}this.ID(h.id);return j}};d.prototype={nameLookup:function(k,h,j){if(d.RESERVED_WORDS[h]){return k+"['"+h+"']"}else{return k+"."+h}},appendToBuffer:function(h){return"buffer = buffer + "+h+";"},initializeBuffer:function(){return this.quotedString("")},compile:function(j,m){this.environment=j;this.options=m||{};this.preamble();this.stackSlot=0;this.stackVars=[];this.registers={list:[]};this.compileChildren(j,m);Handlebars.log(Handlebars.logger.DEBUG,j.disassemble()+"\n\n");var o=j.opcodes,n,k,p,h;this.i=0;for(b=o.length;this.i<b;this.i++){n=this.nextOpcode(0);if(n[0]==="DECLARE"){this.i=this.i+2;this[n[1]]=n[2]}else{this.i=this.i+n[1].length;this[n[0]].apply(this,n[1])}}return this.createFunction()},nextOpcode:function(s){var p=this.environment.opcodes,o=p[this.i+s],m,q;var r,h;if(o==="DECLARE"){m=p[this.i+1];q=p[this.i+2];return["DECLARE",m,q]}else{m=e.DISASSEMBLE_MAP[o];r=e.multiParamSize(o);h=[];for(var k=0;k<r;k++){h.push(p[this.i+k+1+s])}return[m,h]}},eat:function(h){this.i=this.i+h.length},preamble:function(){var h=[];h.push("var buffer = "+this.initializeBuffer()+", currentContext = context");var j="helpers = helpers || Handlebars.helpers;";if(this.environment.usePartial){j=j+" partials = partials || Handlebars.partials;"}h.push(j);this.lastContext=0;this.source=h},createFunction:function(){var j={escapeExpression:Handlebars.Utils.escapeExpression,invokePartial:Handlebars.VM.invokePartial,programs:[],program:function(r,s,q,t){var p=this.programs[r];if(t){return Handlebars.VM.program(this.children[r],s,q,t)}else{if(p){return p}else{p=this.programs[r]=Handlebars.VM.program(this.children[r],s,q);return p}}},programWithDepth:Handlebars.VM.programWithDepth,noop:Handlebars.VM.noop};var n=this.stackVars.concat(this.registers.list);if(n.length>0){this.source[0]=this.source[0]+", "+n.join(", ")}this.source[0]=this.source[0]+";";this.source.push("return buffer;");var o=["Handlebars","context","helpers","partials"];if(this.options.data){o.push("data")}for(var k=0,h=this.environment.depths.list.length;k<h;k++){o.push("depth"+this.environment.depths.list[k])}if(o.length===4&&!this.environment.usePartial){o.pop()}o.push(this.source.join("\n"));var m=Function.apply(this,o);m.displayName="Handlebars.js";Handlebars.log(Handlebars.logger.DEBUG,m.toString()+"\n\n");j.render=m;j.children=this.environment.children;return function(r,t,q,u,s){try{var p=Array.prototype.slice.call(arguments);p.unshift(Handlebars);return j.render.apply(j,p)}catch(v){throw v}}},appendContent:function(h){this.source.push(this.appendToBuffer(this.quotedString(h)))},append:function(){var h=this.popStack();this.source.push("if("+h+" || "+h+" === 0) { "+this.appendToBuffer(h)+" }")},appendEscaped:function(){var j=this.nextOpcode(1),h="";if(j[0]==="appendContent"){h=" + "+this.quotedString(j[1][0]);this.eat(j)}this.source.push(this.appendToBuffer("this.escapeExpression("+this.popStack()+")"+h))},getContext:function(h){if(this.lastContext!==h){this.lastContext=h;if(h===0){this.source.push("currentContext = context;")}else{this.source.push("currentContext = depth"+h+";")}}},lookupWithHelpers:function(k){if(k){var h=this.nextStack();var j="if('"+k+"' in helpers) { "+h+" = "+this.nameLookup("helpers",k,"helper")+"; } else { "+h+" = "+this.nameLookup("currentContext",k,"context")+"; }";this.source.push(j)}else{this.pushStack("currentContext")}},lookup:function(j){var h=this.topStack();this.source.push(h+" = "+this.nameLookup(h,j,"context")+";")},pushStringParam:function(h){this.pushStack("currentContext");this.pushString(h)},pushString:function(h){this.pushStack(this.quotedString(h))},push:function(h){this.pushStack(h)},invokeMustache:function(j,h){this.populateParams(j,this.quotedString(h),"{}",null,function(k,n,m){this.source.push("else if("+m+"=== undefined) { "+k+" = helpers.helperMissing.call("+n+"); }");this.source.push("else { "+k+" = "+m+"; }")})},invokeProgram:function(j,k){var h=this.programExpression(this.inverse);var m=this.programExpression(j);this.populateParams(k,null,m,h,function(n,p,o){this.source.push("else { "+n+" = helpers.blockHelperMissing.call("+p+"); }")})},populateParams:function(o,j,s,p,u){var h=this.popStack(),t;var m=[],k,n;var r=this.popStack();this.register("tmp1",s);this.source.push("tmp1.hash = "+r+";");if(this.options.stringParams){this.source.push("tmp1.contexts = [];")}for(var q=0;q<o;q++){k=this.popStack();m.push(k);if(this.options.stringParams){this.source.push("tmp1.contexts.push("+this.popStack()+");")}}if(p){this.source.push("tmp1.fn = tmp1;");this.source.push("tmp1.inverse = "+p+";")}if(this.options.data){this.source.push("tmp1.data = data;")}m.push("tmp1");if(p){m.push(p)}this.populateCall(m,h,j||h,u)},populateCall:function(k,o,n,h){var j=["context"].concat(k).join(", ");var m=["context"].concat(n).concat(k).join(", ");nextStack=this.nextStack();this.source.push("if(typeof "+o+" === 'function') { "+nextStack+" = "+o+".call("+j+"); }");h.call(this,nextStack,m,o)},invokeInverse:function(k){var h=this.programExpression(k);var j=["context",this.topStack(),"this.noop",h];this.pushStack("helpers.blockHelperMissing.call("+j.join(", ")+")")},invokePartial:function(h){this.pushStack("this.invokePartial("+this.nameLookup("partials",h,"partial")+", '"+h+"', "+this.popStack()+", helpers, partials);")},assignToHash:function(h){var j=this.popStack();var k=this.topStack();this.source.push(k+"['"+h+"'] = "+j+";")},compiler:d,compileChildren:function(h,k){var n=h.children,q,o;var p=[];for(var m=0,j=n.length;m<j;m++){q=n[m];o=new this.compiler();p[m]=o.compile(q,k)}h.rawChildren=n;h.children=p},programExpression:function(j){if(j==null){return"this.noop"}var m=[j,"helpers","partials"];var n=this.environment.rawChildren[j].depths.list;if(this.options.data){m.push("data")}for(var k=0,h=n.length;k<h;k++){depth=n[k];if(depth===1){m.push("context")}else{m.push("depth"+(depth-1))}}if(!this.environment.usePartial){if(m[3]){m[2]="null"}else{m.pop()}}if(n.length===0){return"this.program("+m.join(", ")+")"}else{m[0]="this.children["+j+"]";return"this.programWithDepth("+m.join(", ")+")"}},register:function(h,j){this.useRegister(h);this.source.push(h+" = "+j+";")},useRegister:function(h){if(!this.registers[h]){this.registers[h]=true;this.registers.list.push(h)}},pushStack:function(h){this.source.push(this.nextStack()+" = "+h+";");return"stack"+this.stackSlot},nextStack:function(){this.stackSlot++;if(this.stackSlot>this.stackVars.length){this.stackVars.push("stack"+this.stackSlot)}return"stack"+this.stackSlot},popStack:function(){return"stack"+this.stackSlot--},topStack:function(){return"stack"+this.stackSlot},quotedString:function(h){return'"'+h.replace(/\\/,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r")+'"'}};var a=("break case catch continue default delete do else finally for function if in instanceof new return switch this throw try typeof var void while with null true false extends").split(" ");compilerWords=d.RESERVED_WORDS={};for(var c=0,b=a.length;c<b;c++){compilerWords[a[c]]=true}})(Handlebars.Compiler,Handlebars.JavaScriptCompiler);Handlebars.VM={programWithDepth:function(b){var a=Array.prototype.slice.call(arguments,1);return function(d,e,c,f){a[0]=e||a[0];a[1]=c||a[1];a[2]=f||a[2];return b.apply(this,[d].concat(a))}},program:function(b,c,a,d){return function(f,e,h,g){return b(f,e||c,h||a,g||d)}},noop:function(){return""},compile:function(d,c){var b=Handlebars.parse(d);var a=new Handlebars.Compiler().compile(b,c);return new Handlebars.JavaScriptCompiler().compile(a,c)},invokePartial:function(a,b,d,e,c){if(a===undefined){throw new Handlebars.Exception("The partial "+b+" could not be found")}else{if(a instanceof Function){return a(d,e,c)}else{c[b]=Handlebars.VM.compile(a);return c[b](d,e,c)}}}};Handlebars.compile=Handlebars.VM.compile;SC.DROP_ON=1;SC.DROP_BEFORE=2;SC.DROP_AFTER=4;SC.DROP_ANY=7;SC.ALIGN_LEFT="left";SC.ALIGN_RIGHT="right";SC.ALIGN_CENTER="center";SC.ALIGN_TOP="top";SC.ALIGN_MIDDLE="middle";SC.ALIGN_BOTTOM="bottom";SC.ALIGN_TOP_LEFT="top-left";SC.ALIGN_TOP_RIGHT="top-right";SC.ALIGN_BOTTOM_LEFT="bottom-left";SC.ALIGN_BOTTOM_RIGHT="bottom-right";SC.mixin({data:$.data,removeData:$.removeData,STRINGS:{},stringsFor:function(b,a){SC.mixin(SC.STRINGS,a);return this}});SC.Controller=SC.Object.extend({isEditable:YES,destroyContentOnReplace:NO,contentObjectDidChanged:function(){var b,a;if(!this.get("destroyContentOnReplace")){return}b=this._oldContent;a=this.get("content");if(b&&a!==b&&b.destroy){b.destroy()}this._oldContent=a}.observes("content")});SC.SelectionSupport={hasSelectionSupport:YES,allowsSelection:YES,allowsMultipleSelection:YES,allowsEmptySelection:YES,firstSelectableObject:function(){return this.get("firstObject")}.property(),selection:function(d,f){var c=this._scsel_selection,g=c?c.get("length"):0,e,b=this.get("arrangedObjects"),a;if((f===undefined)||!this.get("allowsSelection")){f=c}a=(f&&f.isEnumerable)?f.get("length"):0;if((a>1)&&!this.get("allowsMultipleSelection")){if(g>1){f=SC.SelectionSet.create().addObject(c.get("firstObject")).freeze();a=1}else{f=c;a=g}}if((a===0)&&!this.get("allowsEmptySelection")&&b&&b.get("length")!==0){if(g===0){f=this.get("firstSelectableObject");if(f){f=SC.SelectionSet.create().addObject(f).freeze()}else{f=SC.SelectionSet.EMPTY}a=f.get("length")}else{f=c;a=g}}if(a===0){f=SC.SelectionSet.EMPTY}if(f!==c){f=f.frozenCopy()}this._scsel_selection=f;return f}.property("arrangedObjects","allowsEmptySelection","allowsMultipleSelection","allowsSelection").cacheable(),hasSelection:function(){var a=this.get("selection");return !!a&&(a.get("length")>0)}.property("selection").cacheable(),selectObjects:function(b,c){if(!b||b.get("length")===0){if(!c){this.set("selection",SC.SelectionSet.EMPTY)}return this}var a=this.get("selection");if(c&&a){a=a.copy()}else{a=SC.SelectionSet.create()}a.addObjects(b).freeze();this.set("selection",a);return this},selectObject:function(a,b){if(a===null){if(!b){this.set("selection",null)}return this}else{return this.selectObjects([a],b)}},deselectObjects:function(b){if(!b||b.get("length")===0){return this}var a=this.get("selection");if(!a||a.get("length")===0){return this}a=a.copy().removeObjects(b).freeze();this.set("selection",a.freeze());return this},deselectObject:function(a){if(!a){return this}else{return this.deselectObjects([a])}},updateSelectionAfterContentChange:function(){var a=this.get("arrangedObjects");var b=this.get("selection");var d=this.get("allowsEmptySelection");var c;if(!b){return this}c=b.indexSetForSource(a);if((c&&(c.get("length")!==b.get("length")))||(!c&&(b.get("length")>0))){b=b.copy().constrain(a).freeze();this.set("selection",b)}if((b.get("length")===0)&&a&&(a.get("length")>0)&&!d){this.selectObject(this.get("firstSelectableObject"),NO)}return this}};sc_require("controllers/controller");sc_require("mixins/selection_support");SC.ArrayController=SC.Controller.extend(SC.Array,SC.SelectionSupport,{content:null,isEditable:YES,orderBy:null,allowsSingleContent:YES,destroyOnRemoval:NO,arrangedObjects:function(){return this}.property().cacheable(),canRemoveContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&this.get("hasContent");if(a){return !b.isEnumerable||(SC.typeOf(b.removeObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable","hasContent"),canReorderContent:function(){var b=this.get("content"),a;a=!!b&&this.get("isEditable")&&!this.get("orderBy");return a&&!!b.isSCArray}.property("content","isEditable","orderBy"),canAddContent:function(){var b=this.get("content"),a;a=b&&this.get("isEditable")&&b.isEnumerable;if(a){return(SC.typeOf(b.addObject)===SC.T_FUNCTION)||(SC.typeOf(b.pushObject)===SC.T_FUNCTION)}else{return NO}}.property("content","isEditable"),hasContent:function(){var a=this.get("content");return !!a&&(!!a.isEnumerable||!!this.get("allowsSingleContent"))}.property("content","allowSingleContent"),status:function(){var b=this.get("content"),a=b?b.get("status"):null;return a?a:SC.Record.READY}.property().cacheable(),addObject:function(a){if(!this.get("canAddContent")){throw"%@ cannot add content".fmt(this)}var b=this.get("content");if(b.isSCArray){b.pushObject(a)}else{if(b.addObject){b.addObject(a)}else{throw"%@.content does not support addObject".fmt(this)}}return this},removeObject:function(a){if(!this.get("canRemoveContent")){throw"%@ cannot remove content".fmt(this)}var b=this.get("content");if(b.isEnumerable){b.removeObject(a)}else{this.set("content",null)}if(this.get("destroyOnRemoval")&&a.destroy){a.destroy()}return this},length:function(){var a=this._scac_observableContent();return a?a.get("length"):0}.property().cacheable(),objectAt:function(a){var b=this._scac_observableContent();return b?b.objectAt(a):undefined},replace:function(g,f,d){if(!d||d.get("length")===0){if(!this.get("canRemoveContent")){throw"%@ cannot remove objects from the current content".fmt(this)}}else{if(!this.get("canReorderContent")){throw"%@ cannot add or reorder the current content".fmt(this)}}var c=this.get("content");var b=[],a,e;if(this.get("destroyOnRemoval")){for(a=0;a<f;a++){b.push(c.objectAt(a+g))}}if(c){c.replace(g,f,d)}for(a=0,e=b.length;a<e;a++){b[a].destroy()}b=null;return this},indexOf:function(b,a){var c=this._scac_observableContent();return c?c.indexOf(b,a):-1},init:function(){arguments.callee.base.apply(this,arguments);this._scac_contentDidChange()},_scac_cached:NO,_scac_observableContent:function(){var c=this._scac_cached;if(c){return c}var f=this.get("content"),e,b,a;if(SC.none(f)){return(this._scac_cached=[])}if(!f.isEnumerable){c=this.get("allowsSingleContent")?[f]:[];return(this._scac_cached=c)}var g=this.get("orderBy");if(!g){if(f.isSCArray){return(this._scac_cached=f)}else{throw"%@.orderBy is required for unordered content".fmt(this)}}var d=SC.typeOf(g);if(d===SC.T_STRING){g=[g]}else{if(d===SC.T_FUNCTION){e=g}else{if(d!==SC.T_ARRAY){throw"%@.orderBy must be Array, String, or Function".fmt(this)}}}e=e||function(m,h){var k,p,n,q;for(var o=0,j=g.get("length");o<j&&!k;o++){p=g.objectAt(o);n=p.match(/^(ASC )?(DESC )?(.*)$/);p=n[3];a=n[2]?-1:1;if(m){m=m.isObservable?m.get(p):m[p]}if(h){h=h.isObservable?h.get(p):h[p]}k=SC.compare(m,h)*a}return k};return(this._scac_cached=f.toArray().sort(e))},propertyWillChange:function(a){if(a==="content"){this.arrayContentWillChange(0,this.get("length"),0)}else{return arguments.callee.base.apply(this,arguments)}},_scac_arrayContentWillChange:function(d,c,a){this.arrayContentWillChange(d,c,a);if(this._kvo_enumerable_property_chains){var b=this.slice(d,d+c);this.teardownEnumerablePropertyChains(b)}},_scac_arrayContentDidChange:function(d,c,a){this.arrayContentDidChange(d,c,a);if(this._kvo_enumerable_property_chains){var b=this.slice(d,d+a);this.setupEnumerablePropertyChains(b)}this._scac_cached=NO;this.updateSelectionAfterContentChange()},_scac_contentDidChange:function(){this._scac_cached=NO;var h=this.get("content"),d=!!this.get("orderBy"),j=this._scac_content,a=this._scac_length||0,g=this._scac_arrayContentDidChange,c=this._scac_arrayContentWillChange,b=this._scac_contentStatusDidChange,f=this._scac_enumerableDidChange,e;if(h===j){return this}if(j){if(j.isSCArray){j.removeArrayObservers({target:this,didChange:g,willChange:c})}else{if(j.isEnumerable){j.removeObserver("[]",this,f)}}j.removeObserver("status",this,b);this.teardownEnumerablePropertyChains(j)}this._scac_cached=NO;this._scac_content=h;if(h){if(h.isSCArray){h.addArrayObservers({target:this,didChange:g,willChange:c});e=h.get("length")}else{if(h.isEnumerable){h.addObserver("[]",this,f);e=h.get("length")}else{e=1}}h.addObserver("status",this,b);this.setupEnumerablePropertyChains(h)}else{e=SC.none(h)?0:1}this._scac_length=e;this._scac_contentStatusDidChange();this.arrayContentDidChange(0,0,e);this.updateSelectionAfterContentChange()}.observes("content"),_scac_enumerableDidChange:function(){var a=this.get("content"),c=a?a.get("length"):0,b=this._scac_length;this._scac_length=c;this.beginPropertyChanges();this._scac_cached=NO;this.arrayContentDidChange(0,b,c);this.endPropertyChanges();this.updateSelectionAfterContentChange()}.observes("orderBy"),_scac_contentStatusDidChange:function(){this.notifyPropertyChange("status")}});sc_require("controllers/controller");SC.ObjectController=SC.Controller.extend({content:null,allowsMultipleContent:NO,hasContent:function(){return !SC.none(this.get("observableContent"))}.property("observableContent"),isEditable:YES,observableContent:function(){var b=this.get("content"),a,c;if(b&&b.isEnumerable){a=b.get("length");c=this.get("allowsMultipleContent");if(a===1){b=b.firstObject()}else{if(a===0||!c){b=null}}if(b&&!c&&b.isEnumerable){b=null}}return b}.property("content","allowsMultipleContent").cacheable(),destroy:function(){var a=this.get("observableContent");if(a&&SC.typeOf(a.destroy)===SC.T_FUNCTION){a.destroy()}this.set("content",null);return this},contentPropertyDidChange:function(b,a){if(a==="*"){this.allPropertiesDidChange()}else{this.notifyPropertyChange(a)}},unknownProperty:function(b,d){if(b==="content"){if(d!==undefined){this.content=d}return this.content}var c=this.get("observableContent"),f,e,a;if(c===null||c===undefined){return undefined}if(d===undefined){if(c.isEnumerable){d=c.getEach(b);f=d.get("length");if(f>0){a=YES;e=d.objectAt(0);while((--f>0)&&a){if(e!==d.objectAt(f)){a=NO}}if(a){d=e}}else{d=undefined}}else{d=(c.isObservable)?c.get(b):c[b]}}else{if(!this.get("isEditable")){throw"%@.%@ is not editable".fmt(this,b)}if(c.isEnumerable){c.setEach(b,d)}else{if(c.isObservable){c.set(b,d)}else{c[b]=d}}}return d},init:function(){arguments.callee.base.apply(this,arguments);if(this.get("content")){this._scoc_contentDidChange()}if(this.get("observableContent")){this._scoc_observableContentDidChange()}},_scoc_contentDidChange:function(){var b=this._scoc_content,c=this.get("content");if(b!==c){this._scoc_content=c;var a=this._scoc_enumerableContentDidChange;if(b&&b.isEnumerable){b.removeObserver("[]",this,a)}if(c&&c.isEnumerable){c.addObserver("[]",this,a)}}}.observes("content"),_scoc_observableContentDidChange:function(){var b=this._scoc_observableContent,d=this.get("observableContent"),a=this.contentPropertyDidChange,c=this._scoc_enumerableContentDidChange;if(b===d){return this}this._scoc_observableContent=d;if(b){if(b.isEnumerable){b.removeObserver("[]",this,c)}else{if(b.isObservable){b.removeObserver("*",this,a)}}}if(d){if(d.isEnumerable){d.addObserver("[]",this,c)}else{if(d.isObservable){d.addObserver("*",this,a)}}}if((b&&b.isEnumerable)||(d&&d.isEnumerable)){this._scoc_enumerableContentDidChange()}else{this.contentPropertyDidChange(d,"*")}}.observes("observableContent"),_scoc_enumerableContentDidChange:function(){var b=this.get("observableContent"),c=this._scoc_observableContentItems,a=this.contentPropertyDidChange;if(c){c.forEach(function(d){if(d.isObservable){d.removeObserver("*",this,a)}},this);c.clear()}if(b&&b.isEnumerable){if(!c){c=SC.Set.create()}b.forEach(function(d){if(c.contains(d)){return}c.add(d);if(d.isObservable){d.addObserver("*",this,a)}},this)}else{c=null}this._scoc_observableContentItems=c;this.contentPropertyDidChange(b,"*");return this}});SC.ActionSupport={target:null,action:null,actionContext:null,fireAction:function(b){var c=this.get("target")||null,a=this.getPath("pane.rootResponder");if(b===undefined){b=this.get("action")}if(b&&a){return a.sendAction(b,c,this,this.get("pane"),this.get("actionContext"),this)}return false}};SC.Handlebars={};SC.Handlebars.Compiler=function(){};SC.Handlebars.Compiler.prototype=SC.beget(Handlebars.Compiler.prototype);SC.Handlebars.Compiler.prototype.compiler=SC.Handlebars.Compiler;SC.Handlebars.JavaScriptCompiler=function(){};SC.Handlebars.JavaScriptCompiler.prototype=SC.beget(Handlebars.JavaScriptCompiler.prototype);SC.Handlebars.JavaScriptCompiler.prototype.compiler=SC.Handlebars.JavaScriptCompiler;SC.Handlebars.JavaScriptCompiler.prototype.nameLookup=function(c,a,b){if(b==="context"){return"SC.get("+c+", "+this.quotedString(a)+");"}else{return Handlebars.JavaScriptCompiler.prototype.nameLookup.call(this,c,a,b)}};SC.Handlebars.Compiler.prototype.mustache=function(a){if(a.params.length||a.hash){return Handlebars.Compiler.prototype.mustache.call(this,a)}else{var b=new Handlebars.AST.IdNode(["bind"]);a=new Handlebars.AST.MustacheNode([b].concat([a.id]),a.hash,!a.escaped);return Handlebars.Compiler.prototype.mustache.call(this,a)}};SC.Handlebars.compile=function(d){var b=Handlebars.parse(d);var a=new SC.Handlebars.Compiler().compile(b,{data:true,stringParams:true});var c=new SC.Handlebars.JavaScriptCompiler().compile(a,{data:true,stringParams:true});c.rawTemplate=d;return c};Handlebars.registerHelper("helperMissing",function(c,b){var a;a="%@ Handlebars error: Could not find property '%@' on object %@.";throw a.fmt(b.data.view,c,this)});sc_require("ext/handlebars");(function(){var a=function(n,o,j,b){var e=o.data,k=o.fn,d=o.inverse,m=e.view;if(this.isObservable){var f=m.createChildView(SC._BindableSpan,{preserveContext:j,shouldDisplayFunc:b,displayTemplate:k,inverseTemplate:d,property:n,previousContext:this,tagName:(o.hash.tagName||"span")});var h,g;m.get("childViews").push(f);h=function(){if(f.get("layer")){f.rerender()}else{this.removeObserver(n,g)}};g=function(){this.invokeOnce(h)};this.addObserver(n,g);var c=f.renderContext(f.get("tagName"));f.renderToContext(c);return new Handlebars.SafeString(c.join())}else{return SC.getPath(this,n)}};Handlebars.registerHelper("bind",function(c,b){return a.call(this,c,b,false,function(d){return !SC.none(d)})});Handlebars.registerHelper("boundIf",function(c,b){if(b){return a.call(this,c,b,true,function(d){if(SC.typeOf(d)===SC.T_ARRAY){if(d.length!==0){return true}return false}else{return !!d}})}else{throw"Cannot use boundIf helper without a block."}})})();Handlebars.registerHelper("with",function(b,a){return Handlebars.helpers.bind.call(a.contexts[0],b,a)});Handlebars.registerHelper("if",function(b,a){return Handlebars.helpers.boundIf.call(a.contexts[0],b,a)});Handlebars.registerHelper("unless",function(c,b){var d=b.fn,a=b.inverse;b.fn=a;b.inverse=d;return Handlebars.helpers.boundIf.call(b.contexts[0],c,b)});Handlebars.registerHelper("bindAttr",function(f){var e=f.hash;var b=f.data.view;var d=[];var c=jQuery.uuid++;var h=e["class"];if(h!=null){var a=SC.Handlebars.bindClasses(this,h,b,c);d.push('class="'+a.join(" ")+'"');delete e["class"]}var g=SC.keys(e);g.forEach(function(j){var o=e[j];var n=this.getPath(o);var m,k;m=function m(){var p=this.getPath(o);var r=b.$("[data-handlebars-id='"+c+"']");if(r.length===0){this.removeObserver(o,k);return}var q=r.attr(j);if(p===NO&&q){r.removeAttr(j)}else{if(p===YES&&q!==j){r.attr(j,j)}else{if(q!==p){r.attr(j,p)}}}};k=function(){this.invokeOnce(m)};this.addObserver(o,k);if(n===YES){n=j}if(n!==NO){d.push(j+'="'+n+'"')}},this);d.push('data-handlebars-id="'+c+'"');return d.join(" ")});SC.Handlebars.bindClasses=function(b,h,g,a){var f=[],e,j,c;var d=function(k){var m=b.getPath(k);if(m===YES){return SC.String.dasherize(k.split(".").get("lastObject"))}else{if(m!==NO&&m!==undefined&&m!==null){return m}else{return null}}};h.split(" ").forEach(function(o){var n;var m,k;m=function(){e=d(o);c=a?g.$("[data-handlebars-id='"+a+"']"):g.$();if(c.length===0){b.removeObserver(o,k)}else{if(n){c.removeClass(n)}if(e){c.addClass(e);n=e}else{n=null}}};k=function(){this.invokeOnce(m)};b.addObserver(o,k);j=d(o);if(j){f.push(j);n=j}});return f};sc_require("ext/handlebars");Handlebars.registerHelper("collection",function(m,n){var k=n.fn;var f=n.data;var d=n.inverse;var e=n.hash;var g,a;g=m?SC.getPath(this,m)||SC.getPath(m):SC.TemplateCollectionView;var j={};if(e){var c={},h;for(var b in e){if(e.hasOwnProperty(b)){h=b.match(/^item(.)(.*)$/);if(h){c[h[1].toLowerCase()+h[2]]=e[b];delete e[b]}}}j=SC.clone(e);j.itemViewOptions=c}if(k){j.itemViewTemplate=k}if(d){j.inverseTemplate=d}if(g.isClass){a=g.extend(j)}else{a=SC.mixin(g,j)}n.fn=function(){return""};return Handlebars.helpers.view.call(this,a,n)});Handlebars.registerHelper("each",function(b,a){a.hash.contentBinding=SC.Binding.from("*"+b,this).oneWay();a.hash.itemContextProperty="content";return Handlebars.helpers.collection.call(this,null,a)});sc_require("ext/handlebars");Handlebars.registerHelper("loc",function(a){return SC.String.loc(a)});sc_require("ext/handlebars");SC.Handlebars.ViewHelper=SC.Object.create({helper:function(n,o,p){var c=p.inverse;var e=p.data;var k=e.view;var j=p.fn;var d=p.hash;var b;if(o.isClass||o.isObject){b=o;if(!b){throw"Null or undefined object was passed to the #view helper. Did you mean to pass a property path string?"}}else{if(o.charAt(0)==="."){b=SC.objectForPropertyPath(o.slice(1),k)}else{b=SC.getPath(n,o);if(!b){b=SC.getPath(o)}}if(!b){throw"Unable to find view at path '"+o+"'"}}if(d.id){d.layerId=d.id}var m={id:d.id,"class":d["class"],classBinding:d.classBinding};delete d.id;delete d["class"];delete d.classBinding;if(b.isClass){b=b.extend(d)}else{SC.mixin(b,d)}var g=e.view;var h=g.get("childViews");var f=g.createChildView(b);if(j){f.template=j}h.pushObject(f);var a=SC.RenderContext(f.get("tagName"));this.applyAttributes(m,f,a);f.applyAttributesToContext(a);f.render(a,YES);return new Handlebars.SafeString(a.join())},applyAttributes:function(a,f,b){var e=a.id;var d=a["class"];if(d){b.addClass(d.split(" "))}if(e){f.set("layerId",e);b.id(e)}var c=a.classBinding;if(c){SC.Handlebars.bindClasses(f,c,f).forEach(function(g){b.setClass(g,YES)})}}});Handlebars.registerHelper("view",function(b,a){return SC.Handlebars.ViewHelper.helper(this,b,a)});SC.mixin(SC.browser,{compareVersion:function(){if(this._versionSplit===undefined){var d=function(e){return Number(e.match(/^[0-9]+/))};this._versionSplit=SC.A(this.version.split(".")).map(d)}var c=SC.A(arguments).map(Number);for(var b=0;b<c.length;b++){var a=this._versionSplit[b]-c[b];if(isNaN(a)){return 0}if(a!==0){return a}}return 0}});SC.Builder=function(a){return SC.Builder.create(a)};SC.Builder.create=function create(c){var b=SC.mixin(SC.beget(this.fn),c||{});if(c.hasOwnProperty("toString")){b.toString=c.toString}var a=function(){var d=SC.beget(b);d.defaultClass=this;d.constructor=a;return d.init.apply(d,arguments)};a.fn=a.prototype=b;a.extend=SC.Builder.create;a.mixin=SC.Builder.mixin;return a};SC.Builder.mixin=function(){var b=arguments.length,a;for(a=0;a<b;a++){SC.mixin(this,arguments[a])}return this};SC.Builder.fn={init:function(a){if(a!==undefined){if(SC.typeOf(a)===SC.T_ARRAY){var b=a.length;while(--b>=0){this[b]=a.objectAt?a.objectAt(b):a[b]}this.length=a.length}else{this[0]=a;this.length=1}}return this},size:function(){return this.length},pushStack:function(){var a=this.constructor.apply(this,arguments);a.prevObject=this;return a},end:function(){return this.prevObject||this.constructor()},toString:function(){return"%@$(%@)".fmt(this.defaultClass.toString(),SC.A(this).invoke("toString").join(","))},mixin:SC.Builder.mixin};(function(){var a=SC.Enumerable,c=SC.Builder.fn,b,d;for(b in a){if(!a.hasOwnProperty(b)){continue}d=Array.prototype[b]||a[b];c[b]=d}})();sc_require("system/builder");SC.$=SC.CoreQuery=jQuery;SC.mixin(SC.$.fn,{isCoreQuery:YES,toString:function(){var c=[],b=this.length,a=0;for(a=0;a<b;a++){c[a]="%@: %@".fmt(a,this[a]?this[a].toString():"(null)")}return"<$:%@>(%@)".fmt(SC.guidFor(this),c.join(" , "))},isVisible:function(){return Array.prototype.every.call(this,function(a){return SC.$.isVisible(a)})},view:function(){return this.map(function(){var b=null,a=SC.viewKey,d=this,c;while(!b&&d&&(d!==document)){if(d.nodeType===1&&(c=d.getAttribute("id"))){b=SC.View.views[c]}d=d.parentNode}d=null;return b})},within:function(a){if(this.filter(a).length){return true}return !!this.has(a).length}});(function(){var c={},f={find:function(h,g){return(g!==undefined)?SC.Enumerable.find.call(this,h,g):c.find.call(this,h)},filter:function(h,g){return(g!==undefined)?this.pushStack(SC.Enumerable.filter.call(this,h,g)):c.filter.call(this,h)},filterProperty:function(g,h){return this.pushStack(SC.Enumerable.filterProperty.call(this,g,h))},indexOf:SC.$.index,map:function(h,g){return(g!==undefined)?SC.Enumerable.map.call(this,h,g):c.map.call(this,h)}};var d=SC.$.fn,a=SC.Enumerable,e;for(var b in a){if(a.hasOwnProperty(b)){e=a[b];if(b in f){c[b]=d[b];e=f[b]}d[b]=e}}})();SC.mixin(SC.$,{isVisible:function(a){var b=SC.$;return("hidden"!=a.type)&&(b.css(a,"display")!="none")&&(b.css(a,"visibility")!="hidden")}});sc_require("system/core_query");SC.Event=function(d){var c,b;if(d){this.originalEvent=d;var g=SC.Event._props,f;b=g.length;c=b;while(--c>=0){f=g[c];this[f]=d[f]}}this.timeStamp=this.timeStamp||Date.now();if(!this.target){this.target=this.srcElement||document}if(this.target.nodeType===3){this.target=this.target.parentNode}if(!this.relatedTarget&&this.fromElement){this.relatedTarget=(this.fromElement===this.target)?this.toElement:this.fromElement}if(SC.none(this.pageX)&&!SC.none(this.clientX)){var h=document.documentElement,a=document.body;this.pageX=this.clientX+(h&&h.scrollLeft||a&&a.scrollLeft||0)-(h.clientLeft||0);this.pageY=this.clientY+(h&&h.scrollTop||a&&a.scrollTop||0)-(h.clientTop||0)}if(!this.which&&((this.charCode||d.charCode===0)?this.charCode:this.keyCode)){this.which=this.charCode||this.keyCode}if(!this.metaKey&&this.ctrlKey){this.metaKey=this.ctrlKey}if(!this.which&&this.button){this.which=((this.button&1)?1:((this.button&2)?3:((this.button&4)?2:0)))}if(this.type==="mousewheel"||this.type==="DOMMouseScroll"||this.type==="MozMousePixelScroll"){var e=SC.Event.MOUSE_WHEEL_MULTIPLIER;if(SC.browser.webkit&&d.wheelDelta!==undefined){this.wheelDelta=0-(d.wheelDeltaY||d.wheelDeltaX);this.wheelDeltaY=0-(d.wheelDeltaY||0);this.wheelDeltaX=0-(d.wheelDeltaX||0)}else{if(!SC.none(d.detail)&&SC.browser.mozilla){if(d.axis&&(d.axis===d.HORIZONTAL_AXIS)){this.wheelDeltaX=d.detail;this.wheelDeltaY=this.wheelDelta=0}else{this.wheelDeltaY=this.wheelDelta=d.detail;this.wheelDeltaX=0}}else{this.wheelDelta=this.wheelDeltaY=SC.browser.msie||SC.browser.opera?0-d.wheelDelta:d.wheelDelta;this.wheelDeltaX=0}}this.wheelDelta*=e;this.wheelDeltaX*=e;this.wheelDeltaY*=e}return this};SC.mixin(SC.Event,{MOUSE_WHEEL_MULTIPLIER:function(){var b=1,a=parseFloat(SC.browser.version);if(SC.browser.safari){b=0.4;if(a>=533.17&&a<534){b=0.004}else{if(a<533){b=40}}}else{if(SC.browser.msie){b=0.3}else{if(SC.browser.chrome){b=0.4}}}return b}(),MOUSE_WHEEL_DELTA_LIMIT:1000,_MOUSE_WHEEL_LIMIT_INVALIDATED:NO,create:function(a){return new SC.Event(a)},add:function(f,e,g,h,d,a){if(f&&f.isCoreQuery){if(f.length>0){f.forEach(function(j){this.add(j,e,g,h,d)},this);return this}else{f=f[0]}}if(!f){return this}if(!a){a=NO}if(f.nodeType===3||f.nodeType===8){return SC.Event}if(SC.browser.msie&&f.setInterval){f=window}if(SC.typeOf(g)===SC.T_FUNCTION){d=h;h=g;g=null}else{if(g&&SC.typeOf(h)===SC.T_STRING){h=g[h]}}var c=SC.data(f,"sc_events")||SC.data(f,"sc_events",{}),b=c[e];if(!b){b=c[e]={};this._addEventListener(f,e,a)}b[SC.hashFor(g,h)]=[g,h,d];SC.Event._global[e]=YES;f=c=b=null;return this},remove:function(f,e,g,h){if(f&&f.isCoreQuery){if(f.length>0){f.forEach(function(j){this.remove(j,e,g,h)},this);return this}else{f=f[0]}}if(!f){return this}if(f.nodeType===3||f.nodeType===8){return SC.Event}var a,d,c=SC.data(f,"sc_events");if(!c){return this}if(e===undefined){for(e in c){this.remove(f,e)}}else{if(a=c[e]){var b=NO;if(g||h){if(SC.typeOf(g)===SC.T_FUNCTION){h=g;g=null}else{if(SC.typeOf(h)===SC.T_STRING){h=g[h]}}delete a[SC.hashFor(g,h)];d=null;for(d in a){break}if(d===null){b=YES}}else{b=YES}if(b){delete c[e];this._removeEventListener(f,e)}d=null;for(d in c){break}if(!d){SC.removeData(f,"sc_events");delete this._elements[SC.guidFor(f)]}}}f=c=a=null;return this},NO_BUBBLE:["blur","focus","change"],simulateEvent:function(d,c,b){var a=SC.Event.create({type:c,target:d,preventDefault:function(){this.cancelled=YES},stopPropagation:function(){this.bubbles=NO},allowDefault:function(){this.hasCustomEventHandling=YES},timeStamp:Date.now(),bubbles:(this.NO_BUBBLE.indexOf(c)<0),cancelled:NO,normalized:YES});if(b){SC.mixin(a,b)}return a},trigger:function(c,b,j,k){if(c&&c.isCoreQuery){if(c.length>0){c.forEach(function(o){this.trigger(o,b,j,k)},this);return this}else{c=c[0]}}if(!c){return this}if(c.nodeType===3||c.nodeType===8){return undefined}j=SC.A(j);var h,m=SC.typeOf(c[b]||null)===SC.T_FUNCTION,a,g,d,n;a=j[0];if(!a||!a.preventDefault){a=this.simulateEvent(c,b);j.unshift(a)}a.type=b;g=c;do{h=SC.Event.handle.apply(g,j);g=(g===document)?null:(g.parentNode||document)}while(!h&&a.bubbles&&g);g=null;d=c["on"+b];n=SC.$.nodeName(c,"a")&&b==="click";if((!m||n)&&d&&d.apply(c,j)===NO){h=NO}if(m&&k!==NO&&h!==NO&&!n){this.triggered=YES;try{c[b]()}catch(f){}}this.triggered=NO;return h},handle:function(b){if((typeof SC==="undefined")||SC.Event.triggered){return YES}var c,g,e,j,d,h,k,m,a,f;h=SC.A(arguments);h[0]=b=SC.Event.normalizeEvent(b||window.event);d=(SC.data(this,"sc_events")||{})[b.type];if(!d){return NO}for(k in d){m=d[k];a=m[1];b.handler=a;b.data=b.context=m[2];f=m[0]||this;g=a.apply(f,h);if(c!==NO){c=g}if(g===NO){b.preventDefault();b.stopPropagation()}}return c},unload:function(){var a,b=this._elements;for(a in b){this.remove(b[a])}for(a in b){delete b[a]}delete this._elements},special:{ready:{setup:function(){SC._bindReady();return},teardown:function(){return}},mouseenter:{setup:function(){if(SC.browser.msie){return NO}SC.Event.add(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},teardown:function(){if(SC.browser.msie){return NO}SC.Event.remove(this,"mouseover",SC.Event.special.mouseenter.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseenter";return SC.Event.handle.apply(this,arguments)}},mouseleave:{setup:function(){if(SC.browser.msie){return NO}SC.Event.add(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},teardown:function(){if(SC.browser.msie){return NO}SC.Event.remove(this,"mouseout",SC.Event.special.mouseleave.handler);return YES},handler:function(a){if(SC.Event._withinElement(a,this)){return YES}a.type="mouseleave";return SC.Event.handle.apply(this,arguments)}}},KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,KEY_HOME:36,KEY_END:35,KEY_PAGEUP:33,KEY_PAGEDOWN:34,KEY_INSERT:45,_withinElement:function(d,c){var b=d.relatedTarget;while(b&&b!==c){try{b=b.parentNode}catch(a){b=c}}return b===c},_addEventListener:function(e,d,a){var f,c=this.special[d];if(!a){a=NO}if(!c||c.setup.call(e)===NO){var b=SC.guidFor(e);this._elements[b]=e;f=SC.data(e,"listener")||SC.data(e,"listener",function(){return SC.Event.handle.apply(SC.Event._elements[b],arguments)});if(e.addEventListener){e.addEventListener(d,f,a)}else{if(e.attachEvent){e.attachEvent("on"+d,f)}}}e=c=f=null},_removeEventListener:function(c,b){var d,a=SC.Event.special[b];if(!a||(a.teardown.call(c)===NO)){d=SC.data(c,"listener");if(d){if(c.removeEventListener){c.removeEventListener(b,d,NO)}else{if(c.detachEvent){c.detachEvent("on"+b,d)}}}}c=a=d=null},_elements:{},normalizeEvent:function(a){if(a===window.event){return SC.Event.create(a)}else{return a.normalized?a:SC.Event.create(a)}},_global:{},_props:"altKey attrChange attrName bubbles button cancelable charCode clientX clientY ctrlKey currentTarget data detail eventPhase fromElement handler keyCode metaKey newValue originalTarget pageX pageY prevValue relatedNode relatedTarget screenX screenY shiftKey srcElement target timeStamp toElement type view which touches targetTouches changedTouches animationName elapsedTime dataTransfer".split(" ")});SC.Event.prototype={hasCustomEventHandling:NO,touchesForView:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},touchesForResponder:function(a){if(this.touchContext){return this.touchContext.touchesForView(a)}},averagedTouchesForView:function(a){if(this.touchContext){return this.touchContext.averagedTouchesForView(a)}return null},allowDefault:function(){this.hasCustomEventHandling=YES;return this},preventDefault:function(){var a=this.originalEvent;if(a){if(a.preventDefault){a.preventDefault()}a.returnValue=NO}this.hasCustomEventHandling=YES;return this},stopPropagation:function(){var a=this.originalEvent;if(a){if(a.stopPropagation){a.stopPropagation()}a.cancelBubble=YES}this.hasCustomEventHandling=YES;return this},stop:function(){return this.preventDefault().stopPropagation()},normalized:YES,getCharString:function(){if(SC.browser.msie){if(this.keyCode==8||this.keyCode==9||(this.keyCode>=37&&this.keyCode<=40)){return String.fromCharCode(0)}else{return(this.keyCode>0)?String.fromCharCode(this.keyCode):null}}else{return(this.charCode>0)?String.fromCharCode(this.charCode):null}},commandCodes:function(){var e=this.keyCode,b=null,c=null,a="",d;if(e){b=SC.FUNCTION_KEYS[e];if(!b&&(this.altKey||this.ctrlKey||this.metaKey)){b=SC.PRINTABLE_KEYS[e]}if(b){if(this.altKey){a+="alt_"}if(this.ctrlKey||this.metaKey){a+="ctrl_"}if(this.shiftKey){a+="shift_"}}}if(!b){e=this.which;c=b=String.fromCharCode(e);d=b.toLowerCase();if(this.metaKey){a="meta_";b=d}else{b=null}}if(b){b=a+b}return[b,c]}};SC.Event.observe=SC.Event.add;SC.Event.stopObserving=SC.Event.remove;SC.Event.fire=SC.Event.trigger;if(SC.browser.msie){SC.Event.add(window,"unload",SC.Event.prototype,SC.Event.unload)}SC.MODIFIER_KEYS={16:"shift",17:"ctrl",18:"alt"};SC.FUNCTION_KEYS={8:"backspace",9:"tab",13:"return",19:"pause",27:"escape",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",44:"printscreen",45:"insert",46:"delete",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock"};SC.PRINTABLE_KEYS={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",188:",",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:'"'};SC.SYSTEM_CURSOR="default";SC.AUTO_CURSOR=SC.DEFAULT_CURSOR="auto";SC.CROSSHAIR_CURSOR="crosshair";SC.HAND_CURSOR=SC.POINTER_CURSOR="pointer";SC.MOVE_CURSOR="move";SC.E_RESIZE_CURSOR="e-resize";SC.NE_RESIZE_CURSOR="ne-resize";SC.NW_RESIZE_CURSOR="nw-resize";SC.N_RESIZE_CURSOR="n-resize";SC.SE_RESIZE_CURSOR="se-resize";SC.SW_RESIZE_CURSOR="sw-resize";SC.S_RESIZE_CURSOR="s-resize";SC.W_RESIZE_CURSOR="w-resize";SC.IBEAM_CURSOR=SC.TEXT_CURSOR="text";SC.WAIT_CURSOR="wait";SC.HELP_CURSOR="help";SC.Cursor=SC.Object.extend({init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("cursorStyle")||SC.DEFAULT_CURSOR,c=this.constructor.sharedStyleSheet(),b=SC.guidFor(this);if(c.insertRule){c.insertRule("."+b+" {cursor: "+a+";}",c.cssRules?c.cssRules.length:0)}else{if(c.addRule){c.addRule("."+b,"cursor: "+a)}}this.cursorStyle=a;this.className=b;return this},className:null,cursorStyle:SC.DEFAULT_CURSOR,cursorStyleDidChange:function(){var d,f,c,e,g,b,a;d=this.get("cursorStyle")||SC.DEFAULT_CURSOR;f=this._rule;if(f){f.style.cursor=d;return}c="."+this.get("className");e=this.constructor.sharedStyleSheet();g=(e.cssRules?e.cssRules:e.rules)||[];for(b=0,a=g.length;b<a;++b){f=g[b];if(f.selectorText===c){this._rule=f;f.style.cursor=d;break}}}.observes("cursorStyle")});SC.Cursor.sharedStyleSheet=function(){var b,a=this._styleSheet;if(!a){a=document.createElement("style");a.type="text/css";b=document.getElementsByTagName("head")[0];if(!b){b=document.documentElement}b.appendChild(a);a=document.styleSheets[document.styleSheets.length-1];this._styleSheet=a}return a};SC.Responder=SC.Object.extend({isResponder:YES,pane:null,responderContext:null,nextResponder:null,isFirstResponder:NO,hasFirstResponder:NO,acceptsFirstResponder:YES,becomingFirstResponder:NO,becomeFirstResponder:function(){var a=this.get("pane")||this.get("responderContext")||this.pane();if(a&&this.get("acceptsFirstResponder")){if(a.get("firstResponder")!==this){a.makeFirstResponder(this)}}return this},resignFirstResponder:function(a){var b=this.get("pane")||this.get("responderContext");if(b&&(b.get("firstResponder")===this)){b.makeFirstResponder(null,a)}return YES},willLoseFirstResponder:function(a){},didBecomeFirstResponder:function(a){}});SC.Theme={isTheme:YES,classNames:SC.CoreSet.create(),_extend_class_names:function(b){if(b){if(SC.typeOf(b)===SC.T_HASH&&!b.isSet){for(var a in b){if(b[a]){this.classNames.add(a)}else{this.classNames.remove(a)}}}else{if(typeof b==="string"){this.classNames.addEach(b.split(" "))}else{this.classNames.addEach(b)}}}},_extend_self:function(b){if(b.classNames){this._extend_class_names(b.classNames)}var a,c,d;for(a in b){if(a==="classNames"){continue}if(!b.hasOwnProperty(a)){continue}c=b[a];if(c instanceof Function&&!c.base&&(c!==(d=this[a]))){c.base=d}this[a]=c}},create:function(){var c=SC.beget(this);c.baseTheme=this;if(this.themes===SC.Theme.themes){c.themes={}}else{c.themes=SC.beget(this.themes)}c._privateThemes={};c._specializedThemes={};c.classNames=SC.clone(this.classNames);var e=arguments,b=e.length,a,d;for(a=0;a<b;a++){c._extend_self(e[a])}if(c.name){c.classNames.add(c.name)}return c},subtheme:function(a){var b=this.create({name:a});this.addTheme(b);return b},invisibleSubtheme:function(a){var b=this.create({name:a});this._privateThemes[a]=b;return b},themes:{},find:function(a){if(this===SC.Theme){return this.themes[a]}var b;b=this._privateThemes[a];if(b){return b}b=this._specializedThemes[a];if(b){return b}b=this.themes[a];if(b&&!this._specializedThemes[a]){return(this._specializedThemes[a]=b.create({classNames:this.classNames}))}b=SC.Theme.themes[a];if(b){return b}return null},addTheme:function(a){this.themes[a.name]=a}};SC.BaseTheme=SC.Theme.create({name:""});SC.Theme.themes["sc-base"]=SC.BaseTheme;SC.defaultTheme="sc-base";SC.Locale=SC.Object.extend({init:function(){if(!this.language){SC.Locale._assignLocales()}if(!this.hasStrings){var c=this._deprecatedLanguageCodes||[];c.push(this.language);var b=c.length;var a=null;while(!a&&--b>=0){a=String[c[b]]}if(a){this.hasStrings=YES;this.strings=a}}},hasStrings:NO,strings:{},metrics:{},toString:function(){if(!this.language){SC.Locale._assignLocales()}return"SC.Locale["+this.language+"]"+SC.guidFor(this)},locWithDefault:function(b,c){var a=this.strings[b];if(SC.typeOf(a)===SC.T_STRING){return a}else{if(SC.typeOf(c)===SC.T_STRING){return c}}return b},locMetric:function(b){var a=this.metrics[b];if(SC.typeOf(a)===SC.T_NUMBER){return a}else{if(a===undefined){SC.warn('No localized metric found for key "'+b+'"');return undefined}else{SC.warn('Unexpected metric type for key "'+b+'"');return undefined}}},locLayout:function(c,b){var e,g,f,n,m,a=SC.Locale.layoutKeys,k=this.metrics,j=SC.typeOf,d=SC.T_NUMBER,h={};if(b){SC.mixin(h,b)}for(e=0,g=a.length;e<g;++e){f=a[e];n=c+"."+f;m=k[n];if(j(m)===d){if(b&&b[f]){throw"locLayout():  There is a localized value for the key '"+n+"' but a value for '"+f+"' was also specified in the non-localized hash"}h[f]=m}}return h}});SC.Locale.mixin({useAutodetectedLanguage:NO,preferredLanguage:null,layoutKeys:["left","top","right","bottom","width","height","minWidth","minHeight","centerX","centerY"],createCurrentLocale:function(){var c=(String.useAutodetectedLanguage!==undefined)?String.useAutodetectedLanguage:this.useAutodetectedLanguage;var b=(String.preferredLanguage!==undefined)?String.preferredLanguage:this.preferredLanguage;var d=((c)?SC.browser.language:null)||b||SC.browser.language||"en";d=SC.Locale.normalizeLanguage(d);var a=this.localeClassFor(d);if(d!=this.currentLanguage){this.currentLanguage=d;this.currentLocale=a.create()}return this.currentLocale},localeClassFor:function(c){c=SC.Locale.normalizeLanguage(c);var b,a=this.locales[c];if(!a&&((b=c.split("-")[0])!==c)&&(a=this.locales[b])){a=this.locales[c]=a.extend()}if(!a){a=this.locales[c]=this.locales.en.extend()}return a},define:function(b,c){var a;if(c===undefined&&(SC.typeOf(b)!==SC.T_STRING)){a=this;c=b}else{a=SC.Locale.localeClassFor(b)}SC.mixin(a.prototype,c);return a},options:function(){return this.prototype},addStrings:function(b){var a=this.prototype.strings;if(a){if(!this.prototype.hasOwnProperty("strings")){this.prototype.strings=SC.clone(a)}}else{a=this.prototype.strings={}}if(b){this.prototype.strings=SC.mixin(a,b)}this.prototype.hasStrings=YES;return this},addMetrics:function(b){var a=this.prototype.metrics;if(a){if(!this.prototype.hasOwnProperty(a)){this.prototype.metrics=SC.clone(a)}}else{a=this.prototype.metrics={}}if(b){this.prototype.metrics=SC.mixin(a,b)}return this},_map:{english:"en",french:"fr",german:"de",japanese:"ja",jp:"ja",spanish:"es"},normalizeLanguage:function(a){if(!a){return"en"}return SC.Locale._map[a.toLowerCase()]||a},_assignLocales:function(){for(var a in this.locales){this.locales[a].prototype.language=a}},toString:function(){if(!this.prototype.language){SC.Locale._assignLocales()}return"SC.Locale["+this.prototype.language+"]"},extend:function(){var a=SC.Object.extend.apply(this,arguments);a.addStrings=SC.Locale.addStrings;a.define=SC.Locale.define;a.options=SC.Locale.options;a.toString=SC.Locale.toString;return a}});SC.Locale.locales={en:SC.Locale.extend({_deprecatedLanguageCodes:["English"]}),fr:SC.Locale.extend({_deprecatedLanguageCodes:["French"]}),de:SC.Locale.extend({_deprecatedLanguageCodes:["German"]}),ja:SC.Locale.extend({_deprecatedLanguageCodes:["Japanese","jp"]}),es:SC.Locale.extend({_deprecatedLanguageCodes:["Spanish"]})};SC.stringsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addStrings(b);return this};SC.metricsFor=function(c,b){var a=SC.Locale.localeClassFor(c);a.addMetrics(b);return this};sc_require("system/locale");SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_DECAMELIZE_REGEXP=(/([a-z])([A-Z])/g);SC.STRING_DASHERIZE_REGEXP=(/[ _]/g);SC.STRING_DASHERIZE_CACHE={};SC.STRING_TRIM_LEFT_REGEXP=(/^\s+/g);SC.STRING_TRIM_RIGHT_REGEXP=(/\s+$/g);SC.mixin(SC.String,{capitalize:function(a){return a.charAt(0).toUpperCase()+a.slice(1)},camelize:function(d){var b=d.replace(SC.STRING_TITLEIZE_REGEXP,function(f,g,e){return e?e.toUpperCase():""});var c=b.charAt(0),a=c.toLowerCase();return c!==a?a+b.slice(1):b},decamelize:function(a){return a.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2").toLowerCase()},dasherize:function(c){var a=SC.STRING_DASHERIZE_CACHE,b=a[c];if(b){return b}else{b=SC.String.decamelize(c).replace(SC.STRING_DASHERIZE_REGEXP,"-");a[c]=b}return b},loc:function(d){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(d);if(SC.typeOf(b)!==SC.T_STRING){b=d}var a=SC.$A(arguments);a.shift();if(a.length>0&&a[0].isSCArray){a=a[0]}try{return SC.String.fmt(b,a)}catch(c){SC.error("Error processing string with key: "+d);SC.error("Localized String: "+b);SC.error("Error: "+c)}},locMetric:function(b){var a=SC.Locale,c=a.currentLocale;if(!c){a.createCurrentLocale();c=a.currentLocale}return c.locMetric(b)},locLayout:function(b,c){var a=SC.Locale,d=a.currentLocale;if(!d){a.createCurrentLocale();d=a.currentLocale}return d.locLayout(b,c)},locWithDefault:function(d,c){if(!SC.Locale.currentLocale){SC.Locale.createCurrentLocale()}var b=SC.Locale.currentLocale.locWithDefault(d,c);if(SC.typeOf(b)!==SC.T_STRING){b=d}var a=SC.$A(arguments);a.shift();a.shift();return SC.String.fmt(b,a)},trim:jQuery.trim,trimLeft:function(a){return a.replace(SC.STRING_TRIM_LEFT_REGEXP,"")},trimRight:function(a){return a.replace(SC.STRING_TRIM_RIGHT_REGEXP,"")}});if(String.prototype.trim){SC.supplement(String.prototype,{trim:function(){return SC.String.trim(this,arguments)},trimLeft:function(){return SC.String.trimLeft(this,arguments)},trimRight:function(){return SC.String.trimRight(this,arguments)}})}SC.mixin(String.prototype,{loc:function(){return SC.String.loc(this.toString(),SC.$A(arguments))},locMetric:function(){return SC.String.locMetric(this.toString())},locLayout:function(a){return SC.String.locLayout(this.toString(),a)}});SC.DelegateSupport={delegateFor:function(c){var b=1,a=arguments.length,d;while(b<a){d=arguments[b];if(d&&d[c]!==undefined){return d}b++}return(this[c]!==undefined)?this:null},invokeDelegateMethod:function(c,a,b){b=SC.A(arguments);b=b.slice(2,b.length);if(!c||!c[a]){c=this}var d=c[a];return d?d.apply(c,b):null},getDelegateProperty:function(d,e){var b=1,a=arguments.length,c;while(b<a){c=arguments[b++];if(c&&c[d]!==undefined){return c.get?c.get(d):c[d]}}return(this[d]!==undefined)?this.get(d):undefined}};sc_require("mixins/delegate_support");SC.CoreView=SC.Responder.extend(SC.DelegateSupport);sc_require("system/browser");sc_require("system/event");sc_require("system/cursor");sc_require("system/responder");sc_require("system/theme");sc_require("system/string");sc_require("views/view/base");SC.CONTEXT_MENU_ENABLED=YES;SC.TABBING_ONLY_INSIDE_DOCUMENT=NO;SC.FROM_THEME="__FROM_THEME__";SC.EMPTY_CHILD_VIEWS_ARRAY=[];SC.EMPTY_CHILD_VIEWS_ARRAY.needsClone=YES;SC.CoreView.reopen({concatenatedProperties:["outlets","displayProperties","classNames","renderMixin","didCreateLayerMixin","willDestroyLayerMixin","classNameBindings","attributeBindings"],ariaRole:null,ariaHidden:null,pane:function(){var a=this;while(a&&!a.isPane){a=a.get("parentView")}return a}.property("parentView").cacheable(),page:null,parentView:null,isVisible:YES,isVisibleBindingDefault:SC.Binding.bool(),isVisibleInWindow:YES,childViews:SC.EMPTY_CHILD_VIEWS_ARRAY,layer:function(a,c){if(c!==undefined){this._view_layer=c}else{c=this._view_layer;if(!c){var b=this.get("parentView");if(b){b=b.get("layer")}if(b){this._view_layer=c=this.findLayerInParentLayer(b)}}}return c}.property("isVisibleInWindow").cacheable(),$:function(b){var a=this.get("layer");if(!a){return SC.$()}else{if(b===undefined){return SC.$(a)}else{return SC.$(b,a)}}},containerLayer:function(){return this.get("layer")}.property("layer").cacheable(),layerId:function(a,b){if(b){this._layerId=b}if(this._layerId){return this._layerId}return SC.guidFor(this)}.property().cacheable(),findLayerInParentLayer:function(a){var b="#"+this.get("layerId");return jQuery(b)[0]||jQuery(b,a)[0]},isDescendantOf:function(a){var b=this.get("parentView");if(this===a){return YES}else{if(b){return b.isDescendantOf(a)}else{return NO}}},displayDidChange:function(){this.set("layerNeedsUpdate",YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange()}.observes("isVisible"),layerNeedsUpdate:NO,_view_layerNeedsUpdateDidChange:function(){if(this.get("layerNeedsUpdate")){this.invokeOnce(this.updateLayerIfNeeded)}}.observes("layerNeedsUpdate"),updateLayerIfNeeded:function(b){var c=this.get("layerNeedsUpdate"),a=c&&(b||this.get("isVisibleInWindow"));if(a){if(this.get("layer")){this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);this.updateLayer();this.endPropertyChanges()}}return this},updateLayer:function(f){var c,b,a,d;var e=f||this.renderContext(this.get("layer"));this._renderLayerSettings(e,NO);d=!this.update;if(d){this.render(e,NO)}else{this.update(e.$())}if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,e,NO)}}e.update();if(e._innerHTMLReplaced){var g=this.get("pane");if(g&&g.get("isPaneAttached")){this._notifyDidAppendToDocument()}}if(this.useStaticLayout){this.viewDidResize()}if(this.didUpdateLayer){this.didUpdateLayer()}if(this.designer&&this.designer.viewDidUpdateLayer){this.designer.viewDidUpdateLayer()}return this},parentViewDidResize:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}this.viewDidResize()},viewDidResize:function(){},renderContext:function(a){return SC.RenderContext(a)},createLayer:function(){if(this.get("layer")){return this}var a=this.renderContext(this.get("tagName"));this.renderToContext(a);this.set("layer",a.element());this._notifyDidCreateLayer();return this},_notifyDidCreateLayer:function(){this.notifyPropertyChange("layer");if(this.didCreateLayer){this.didCreateLayer()}var c=this.didCreateLayerMixin,b,a,d=this.get("childViews"),e;if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=d.length;for(a=0;a<b;++a){e=d[a];if(!e){continue}e.notifyPropertyChange("layer");if(this.get("useStaticLayout")){if(!e.get("isFixedLayout")){e.viewDidResize()}}e._notifyDidCreateLayer()}},destroyLayer:function(){var a=this.get("layer");if(a){this._notifyWillDestroyLayer();if(a.parentNode){a.parentNode.removeChild(a)}a=null}return this},replaceLayer:function(){this.destroyLayer();this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded)},parentViewDidChange:function(){this.parentViewDidResize();this.updateLayerLocation()},layerLocationNeedsUpdate:NO,updateLayerLocationIfNeeded:function(a){if(this.get("layerLocationNeedsUpdate")){this.updateLayerLocation()}return this},updateLayerLocation:function(){var e=this.get("layer"),d=this.get("parentView"),b=d?d.get("containerLayer"):null;if(e&&e.parentNode&&e.parentNode!==b){e.parentNode.removeChild(e)}if(!d){if(e&&e.parentNode){e.parentNode.removeChild(e)}}else{if(!b){if(e){if(e.parentNode){e.parentNode.removeChild(e)}this.destroyLayer()}}else{if(!e){this.createLayer();e=this.get("layer");if(!e){return}}var f=d.get("childViews"),c=f.objectAt(f.indexOf(this)+1),a=(c)?c.get("layer"):null;if(c&&(!a||a.parentNode!==b)){c.updateLayerLocationIfNeeded();a=c.get("layer")||null}if((e.parentNode!==b)||(e.nextSibling!==a)){b.insertBefore(e,a)}}}b=d=e=a=null;this.set("layerLocationNeedsUpdate",NO);return this},_notifyWillDestroyLayer:function(){if(this.willDestroyLayer){this.willDestroyLayer()}var c=this.willDestroyLayerMixin,b,a,d=this.get("childViews");if(c){b=c.length;for(a=0;a<b;++a){c[a].call(this)}}b=d.length;for(a=0;a<b;++a){d[a]._notifyWillDestroyLayer()}this.set("layer",null)},renderToContext:function(e,f){var d,c,b,a;this.beginPropertyChanges();this.set("layerNeedsUpdate",NO);if(SC.none(f)){f=YES}this._renderLayerSettings(e,f);d=!this.update;if(d){this.render(e,f)}else{if(f){this.render(e)}else{this.update(e.$())}}if(f&&!this._didRenderChildViews){this.renderChildViews(e,f)}this._didRenderChildViews=NO;if(c=this.renderMixin){a=c.length;for(b=0;b<a;++b){c[b].call(this,e,f)}}this.endPropertyChanges()},_renderLayerSettings:function(a,b){a.resetClassNames();a.resetStyles();this.applyAttributesToContext(a)},applyAttributesToContext:function(a){this._applyClassNameBindings();this._applyAttributeBindings(a);a.addClass(this.get("classNames"));if(this.get("isTextSelectable")){a.addClass("allow-select")}if(!this.get("isVisible")){a.addClass("sc-hidden")}if(this.get("isFirstResponder")){a.addClass("focus")}a.id(this.get("layerId"));a.attr("role",this.get("ariaRole"));var b=this.get("ariaHidden");if(b!==null){a.attr("aria-hidden",b)}},_applyClassNameBindings:function(){var b=this.get("classNameBindings"),d=this.get("classNames"),a,c,e;if(!b){return}b.forEach(function(h){var g;var f=function(){c=this._classStringForProperty(h);a=this.$();if(g){a.removeClass(g)}if(c){a.addClass(c);g=c}else{g=null}};this.addObserver(h,this,f);e=this._classStringForProperty(h);if(e){d.push(e);g=e}},this)},_applyAttributeBindings:function(a){var e=this.get("attributeBindings"),c,d,b;if(!e){return}e.forEach(function(g){var f=function(){d=this.$();var h=d.attr(g);c=this.get(g);b=typeof c;if((b==="string"||b==="number")&&c!==h){d.attr(g,c)}else{if(c&&b==="boolean"){d.attr(g,g)}else{if(c===NO){d.removeAttr(g)}}}};this.addObserver(g,this,f);c=this.get(g);b=typeof c;if(b==="string"||b==="number"){a.attr(g,c)}else{if(c&&b==="boolean"){a.attr(g,g)}}},this)},_classStringForProperty:function(c){var a=c.split(":"),b=a[1];c=a[0];var d=SC.getPath(this,c);if(d===YES){if(b){return b}return SC.String.dasherize(c.split(".").get("lastObject"))}else{if(d!==NO&&d!==undefined&&d!==null){return d}else{return null}}},prepareContext:function(a,b){if(b!==false){b=YES}if(b){this.renderToContext(a)}else{this.updateLayer(a)}},renderChildViews:function(e,f){var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];if(!c){continue}e=e.begin(c.get("tagName"));c.renderToContext(e,f);e=e.end()}this._didRenderChildViews=YES;return e},render:function(){},_notifyDidAppendToDocument:function(){if(!this.get("hasLayout")){this.notifyPropertyChange("frame")}if(this.didAppendToDocument){this.didAppendToDocument()}var c=0,d,a,b=this.get("childViews");for(c=0,a=b.length;c<a;c++){d=b[c];if(d._notifyDidAppendToDocument){d._notifyDidAppendToDocument()}}},childViewsObserver:function(){var c=this.get("childViews"),b,a,d;for(b=0,a=c.length;b<a;b++){d=c[b];if(d._notifyDidAppendToDocument){d._notifyDidAppendToDocument()}}}.observes("childViews"),tagName:"div",classNames:[],toolTip:null,displayToolTip:function(){var a=this.get("toolTip");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("toolTip","localize").cacheable(),isTextSelectable:NO,displayProperties:["ariaHidden"],nextResponder:function(){return this.get("parentView")}.property("parentView").cacheable(),acceptsFirstResponder:NO,init:function(){var e=this.get("parentView"),g,b,d,f;arguments.callee.base.apply(this,arguments);SC.View.views[this.get("layerId")]=this;this.classNames=this.get("classNames").slice();this.childViews=this.get("childViews").slice();this.createChildViews();f=this.get("displayProperties");for(var c=0,a=f.length;c<a;c++){this.addObserver(f[c],this,this.displayDidChange)}},awake:function(){arguments.callee.base.apply(this,arguments);var c=this.get("childViews"),b=c.length,a;for(a=0;a<b;++a){if(!c[a]){continue}c[a].awake()}},frame:function(){return this.computeFrameWithParentFrame(null)}.property("useStaticLayout").cacheable(),computeFrameWithParentFrame:function(){var a,b=this.get("parentView"),c;if(a=this.get("layer")){c=SC.offset(a);if(b){c=b.convertFrameFromView(c,null)}c.width=a.offsetWidth;c.height=a.offsetHeight;return c}if(this.get("hasLayout")){return null}else{return{x:0,y:0,width:0,height:0}}},clippingFrame:function(){var d=this.get("frame"),a=d,b,c;if(!d){return null}b=this.get("parentView");if(b){c=b.get("clippingFrame");if(!c){return{x:0,y:0,width:d.width,height:d.height}}a=SC.intersectRects(c,d)}a.x-=d.x;a.y-=d.y;return a}.property("parentView","frame").cacheable(),_sc_view_clippingFrameDidChange:function(){var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];c.notifyPropertyChange("clippingFrame");c._sc_view_clippingFrameDidChange()}},removeChild:function(b){b.set("parentView",null);var c=this.get("childViews"),a=c.indexOf(b);if(a>=0){c.removeAt(a)}return this},removeAllChildren:function(){var b=this.get("childViews"),a;while(a=b.objectAt(b.get("length")-1)){this.removeChild(a)}return this},removeFromParent:function(){var a=this.get("parentView");if(a){a.removeChild(this)}return this},destroy:function(){if(this.get("isDestroyed")){return this}this._destroy();if(this.get("parentView")){this.removeFromParent()}arguments.callee.base.apply(this,arguments);return this},_destroy:function(){if(this.get("isDestroyed")){return this}this.destroyLayer();var c=this.get("childViews"),b=c.length,a;if(b){c=c.slice();for(a=0;a<b;++a){c[a].destroy()}}delete SC.View.views[this.get("layerId")];delete this._CQ;delete this.page;return this},createChildViews:function(){var f=this.get("childViews"),b=f.length,a,e,d,c;this.beginPropertyChanges();for(a=0;a<b;++a){if(e=(c=f[a])){if(typeof e===SC.T_STRING){c=this[e]}else{e=null}if(!c){SC.Logger.error("No view with name "+e+" has been found in "+this.toString());continue}c=this.createChildView(c);if(e){this[e]=c}}f[a]=c}this.endPropertyChanges();return this},createChildView:function(a,b){if(!a.isClass){b=a}else{if(!b){b={}}else{b=SC.clone(b)}}b.owner=b.parentView=this;if(a.isClass&&a.prototype.hasVisibility){b.isVisibleInWindow=this.get("isVisibleInWindow")}if(!b.page){b.page=this.page}if(a.isClass){a=a.create(b)}return a},isView:YES,selectStart:function(a){return this.get("isTextSelectable")},contextMenu:function(a){if(this.get("isContextMenuEnabled")){return YES}}});SC.CoreView.mixin({isViewClass:YES,design:function(){if(this.isDesign){return this}var a=this.extend.apply(this,arguments);a.isDesign=YES;if(SC.ViewDesigner){SC.ViewDesigner.didLoadDesign(a,this,SC.A(arguments))}return a},extend:function(){var a=arguments[arguments.length-1];if(a&&!SC.none(a.theme)){a.themeName=a.theme;delete a.theme}return SC.Object.extend.apply(this,arguments)},layout:function(a){this.prototype.layout=a;return this},classNames:function(a){a=(this.prototype.classNames||[]).concat(a);this.prototype.classNames=a;return this},tagName:function(a){this.prototype.tagName=a;return this},childView:function(a){var b=this.prototype.childViews||[];if(b===this.superclass.prototype.childViews){b=b.slice()}b.push(a);this.prototype.childViews=b;return this},bind:function(b,d){var c=this.prototype,a=this.superclass.prototype;var e=c._bindings;if(!e||e===a._bindings){e=c._bindings=(e||[]).slice()}b=b+"Binding";c[b]=d;e.push(b);return this},prop:function(a,b){this.prototype[a]=b;return this},localization:function(b,a){if(a){b.rootElement=SC.$(a)[0]}return b},viewFor:function(d,c){var b=SC.$A(arguments);if(SC.none(d)){b.shift()}else{b[0]={rootElement:SC.$(d)[0]}}var a=this.create.apply(this,arguments);b=b[0]=null;return a},create:function(){var b=arguments[arguments.length-1];if(b&&b.theme){b.themeName=b.theme;delete b.theme}var c=this,a=new c(arguments);if(SC.ViewDesigner){SC.ViewDesigner.didCreateView(a,SC.$A(arguments))}return a},loc:function(e){var b=e.childViews;delete e.childViews;this.applyLocalizedAttributes(e);if(SC.ViewDesigner){SC.ViewDesigner.didLoadLocalization(this,SC.$A(arguments))}var d=this.prototype.childViews,a=d.length,c;while(--a>=0){c=d[a];e=b[a];if(e&&c&&typeof c===SC.T_STRING){SC.String.loc(c,e)}}return this},applyLocalizedAttributes:function(a){SC.mixin(this.prototype,a)},views:{}});SC.outlet=function(b,a){return function(c){return(this[c]=SC.objectForPropertyPath(b,(a!==undefined)?a:this))}.property()};SC.CoreView.unload=function(){var a=SC.View.views;if(a){for(var b in a){if(!a.hasOwnProperty(b)){continue}delete a[b]}}};SC.View=SC.CoreView.extend({classNames:["sc-view"],displayProperties:["isFirstResponder"]});if(SC.browser.msie){SC.Event.add(window,"unload",SC.View,SC.View.unload)}sc_require("ext/handlebars");sc_require("ext/handlebars/bind");sc_require("ext/handlebars/collection");sc_require("ext/handlebars/localization");sc_require("ext/handlebars/view");sc_require("views/view");SC.TEMPLATES=SC.Object.create();SC.TemplateView=SC.CoreView.extend({acceptsFirstResponder:YES,templateName:null,templates:SC.TEMPLATES,template:function(b,d){if(d!==undefined){return d}var a=this.get("templateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("templateName").cacheable(),context:function(a,b){if(b!==undefined){return b}return this}.property().cacheable(),render:function(a){var b=this.get("template");this._didRenderChildViews=YES;a.push(b(this.get("context"),null,null,{view:this,isRenderData:true}))},update:function(){},mouseDown:function(){if(this.mouseUp){return YES}return NO}});sc_require("mixins/action_support");sc_require("views/template");SC.Button=SC.TemplateView.extend(SC.ActionSupport,{classNames:["sc-button"],mouseDown:function(){this.set("isActive",true);this._isMouseDown=YES},mouseExited:function(){this.set("isActive",false)},mouseEntered:function(){if(this._isMouseDown){this.set("isActive",true)}},rootResponder:function(){var a=this.get("pane");return a.get("rootResponder")}.property("pane").cacheable(),mouseUp:function(a){if(this.get("isActive")){this.fireAction();this.set("isActive",false)}this._isMouseDown=NO},touchStart:function(a){this.mouseDown(a)},touchEnd:function(a){this.mouseUp(a)}});SC.mixin(Function.prototype,{invokeLater:function(e,a){if(a===undefined){a=1}var d=this;if(arguments.length>2){var b=SC.$A(arguments).slice(2,arguments.length);b.unshift(e);var c=d;d=function(){return c.apply(this,b.slice(1))}}return SC.Timer.schedule({target:e,action:d,interval:a})}});SC.mixin(SC.Object.prototype,{invokeLater:function(b,a){if(a===undefined){a=1}var e=b,c,d;if(arguments.length>2){c=SC.$A(arguments).slice(2);if(SC.typeOf(e)===SC.T_STRING){e=this[b]}d=e;e=function(){return d.apply(this,c)}}return SC.Timer.schedule({target:this,action:e,interval:a})},invokeWith:function(b,c,d){if(d===undefined){d=c;c=this}if(!c){c=this}if(SC.typeOf(d)===SC.T_STRING){d=c[d]}var a=this.getPath(b);d.call(c,a,this);return this}});SC.RunLoop=SC.RunLoop.extend({startTime:function(){if(!this._start){this._start=Date.now()}return this._start}.property(),endRunLoop:function(){this.fireExpiredTimers();var a=arguments.callee.base.apply(this,arguments);this.scheduleNextTimeout();return a},scheduleTimer:function(b,a){this._timerQueue=b.removeFromTimerQueue(this._timerQueue);this._timerQueue=b.scheduleInTimerQueue(this._timerQueue,a);return this},cancelTimer:function(a){this._timerQueue=a.removeFromTimerQueue(this._timerQueue);return this},TIMER_ARRAY:[],fireExpiredTimers:function(){if(!this._timerQueue||this._firing){return NO}var d=this.get("startTime"),e=this.TIMER_ARRAY,c,b,a;this._firing=YES;this._timerQueue=this._timerQueue.collectExpiredTimers(e,d);b=e.length;for(c=0;c<b;c++){e[c].fire()}a=e.length>0;e.length=0;this._firing=NO;return a},scheduleNextTimeout:function(){var d=this._timerQueue;var b=NO;if(!d){if(this._timeout){clearTimeout(this._timeout)}}else{var c=d._timerQueueRunTime;if(this._timeoutAt!==c){if(this._timeout){clearTimeout(this._timeout)}var a=Math.max(0,c-Date.now());this._timeout=setTimeout(this._timeoutDidFire,a);this._timeoutAt=c}b=YES}return b},_timeoutDidFire:function(){var a=SC.RunLoop.currentRunLoop;a._timeout=a._timeoutAt=null;SC.run()}});SC.RunLoop.currentRunLoop=SC.RunLoop.create();SC.RunLoop.runLoopClass=SC.RunLoop;sc_require("system/string");SC.supplement(String.prototype,{capitalize:function(){return SC.String.capitalize(this,arguments)},camelize:function(){return SC.String.camelize(this,arguments)},decamelize:function(){return SC.String.decamelize(this,arguments)},dasherize:function(){return SC.String.dasherize(this,arguments)},loc:function(){var a=SC.$A(arguments);a.unshift(this);return SC.String.loc.apply(SC.String,a)},locWithDefault:function(b){var a=SC.$A(arguments);a.unshift(this);return SC.String.locWithDefault.apply(SC.String,a)}});sc_require("system/responder");SC.ResponderContext={isResponderContext:YES,trace:NO,defaultResponder:null,nextResponder:function(){return this.get("defaultResponder")}.property("defaultResponder").cacheable(),firstResponder:null,nextResponderFor:function(a){var b=a.get("nextResponder");if(typeof b===SC.T_STRING){b=SC.objectForPropertyPath(b,this)}else{if(!b&&(a!==this)){b=this}}return b},responderNameFor:function(a){if(!a){return"(No Responder)"}else{if(a._scrc_name){return a._scrc_name}}var b=this.NAMESPACE;this._findResponderNamesFor(this,3,b?[this.NAMESPACE]:[]);return a._scrc_name||a.toString()},_findResponderNamesFor:function(a,e,d){var b,c;for(b in a){if(b==="nextResponder"){continue}c=a[b];if(c&&c.isResponder){if(c._scrc_name){continue}d.push(b);c._scrc_name=d.join(".");if(e>0){this._findResponderNamesFor(c,e-1,d)}d.pop()}}},makeFirstResponder:function(b,a){var f=this.get("firstResponder"),d=this.get("nextResponder"),e=this.get("trace"),c;if(this._locked){if(e){SC.Logger.log("%@: AFTER ACTION: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}this._pendingResponder=b;return}if(e){SC.Logger.log("%@: makeFirstResponder => %@".fmt(this,this.responderNameFor(b)))}if(b){b.set("becomingFirstResponder",YES)}this._locked=YES;this._pendingResponder=null;c=b?b:null;while(c){if(c.get("hasFirstResponder")){break}c=(c===d)?null:this.nextResponderFor(c)}if(!c){c=d}this._notifyWillLoseFirstResponder(f,f,c,a);if(f){f.set("isFirstResponder",NO)}this.beginPropertyChanges();this.set("firstResponder",b);if(b){b.set("isFirstResponder",YES)}this._notifyDidBecomeFirstResponder(b,b,c);this.endPropertyChanges();this._locked=NO;if(this._pendingResponder){this.makeFirstResponder(this._pendingResponder);this._pendingResponder=null}if(b){b.set("becomingFirstResponder",NO)}return this},_notifyWillLoseFirstResponder:function(c,e,b,a){if(!e||e===b){return}e.willLoseFirstResponder(c,a);e.set("hasFirstResponder",NO);var d=this.nextResponderFor(e);if(d){this._notifyWillLoseFirstResponder(c,d,b)}},_notifyDidBecomeFirstResponder:function(b,d,a){if(!d||d===a){return}var c=this.nextResponderFor(d);if(c){this._notifyDidBecomeFirstResponder(b,c,a)}d.set("hasFirstResponder",YES);d.didBecomeFirstResponder(b)},resetFirstResponder:function(){var a=this.get("firstResponder");if(!a){return}a.willLoseFirstResponder();a.didBecomeFirstResponder()},sendAction:function(g,d,c){var a=this.get("firstResponder"),e=this.get("nextResponder"),f=this.get("trace"),h=NO,b;this._locked=YES;if(f){SC.Logger.log("%@: begin action '%@' (%@, %@)".fmt(this,g,d,c))}if(!h&&!a&&this.tryToPerform){h=this.tryToPerform(g,d,c)}while(!h&&a){if(a.tryToPerform){h=a.tryToPerform(g,d,c)}if(!h){a=(a===e)?null:this.nextResponderFor(a)}}if(f){if(!h){SC.Logger.log("%@:  action '%@' NOT HANDLED".fmt(this,g))}else{SC.Logger.log("%@: action '%@' handled by %@".fmt(this,g,this.responderNameFor(a)))}}this._locked=NO;if(b=this._pendingResponder){this._pendingResponder=null;this.makeFirstResponder(b)}return a}};sc_require("views/template");SC.Checkbox=SC.TemplateView.extend({title:null,value:null,displayTitle:function(){var a=this.get("title");return a?SC.String.loc(a):null}.property("title").cacheable(),classNames:["sc-checkbox"],template:SC.Handlebars.compile('<label><input type="checkbox">{{displayTitle}}</label>'),didCreateLayer:function(){var a=this;this.$("input").bind("change",function(){a.domValueDidChange(this)})},domValueDidChange:function(a){this.set("value",$(a).prop("checked"))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property()});SC.CheckboxSupport={didCreateLayer:function(){this.$("input").change(jQuery.proxy(function(){SC.RunLoop.begin();this.notifyPropertyChange("value");SC.RunLoop.end()},this))},value:function(a,b){if(b!==undefined){this.$("input").prop("checked",b)}else{b=this.$("input").prop("checked")}return b}.property().idempotent()};sc_require("views/template");SC.TextFieldSupport={$input:function(){return this.$("input")},_value:null,value:function(b,c){var a=this.$input();if(c!==undefined){if(this._value!==c||a.val()!==c){this._value=c;a.val(c)}}else{if(a.length>0){c=this._value=a.val()}else{c=this._value}}return c}.property().idempotent(),didCreateLayer:function(){var b=this.$input(),a=this;b.val(this._value);if(SC.browser.msie){SC.Event.add(b,"focusin",this,this.focusIn);SC.Event.add(b,"focusout",this,this.focusOut)}else{SC.Event.add(b,"focus",this,this.focusIn);SC.Event.add(b,"blur",this,this.focusOut)}b.bind("change",function(){a.domValueDidChange(SC.$(this))})},willDestroyLayerMixin:function(){var a=this.$input();if(SC.browser.msie){SC.Event.remove(a,"focusin",this,this.focusIn);SC.Event.remove(a,"focusout",this,this.focusOut)}else{SC.Event.remove(a,"focus",this,this.focusIn);SC.Event.remove(a,"blur",this,this.focusOut)}a.unbind("change")},focusIn:function(a){this.becomeFirstResponder();this.tryToPerform("focus",a)},focusOut:function(a){this.resignFirstResponder();this.tryToPerform("blur",a)},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES},willLoseFirstResponder:function(){this.notifyPropertyChange("value")},domValueDidChange:function(a){this.set("value",a.val())},keyUp:function(a){this.domValueDidChange(this.$input());if(a.keyCode===SC.Event.KEY_RETURN){return this.tryToPerform("insertNewline",a)}else{if(a.keyCode===SC.Event.KEY_ESC){return this.tryToPerform("cancel",a)}}}};SC.TextField=SC.TemplateView.extend(SC.TextFieldSupport,{classNames:["sc-text-field"],isMultiline:NO,template:function(){return SC.Handlebars.compile(this.get("isMultiline")?"<textarea></textarea>":'<input type="text">')}.property("isMultiline").cacheable(),$input:function(){var a=this.get("isMultiline")?"textarea":"input";return this.$(a)}});SC.bodyOverflowArbitrator=SC.Object.create({requestHidden:function(b,a){this._makeRequest(b,-1-9*!!a)},requestVisible:function(b,a){this._makeRequest(b,1+9*!!a)},withdrawRequest:function(b){if(!b){return}var a=SC.guidFor(b);if(this._requests[a]){delete this._requests[a]}this.setOverflow()},setOverflow:function(){var a=this._decideOverflow();if(a!==undefined){document.body.style.overflow=a?"auto":"hidden"}},_makeRequest:function(c,b){if(!c){return}var a=SC.guidFor(c);this._requests[a]=b;this.setOverflow()},_requests:{},_decideOverflow:function(){var a,e,c,f,b=this._requests,g;for(var d in b){if((g=b[d])<0){a=YES}if(g<-1){c=YES}if(g>0){e=YES}if(g>1){f=YES}}if(f){return YES}if(e&&c){return NO}if(e){return YES}if(a){return NO}return undefined}});sc_require("views/view");sc_require("views/view/layout_style");SC.ANIMATABLE_PROPERTIES={top:YES,left:YES,bottom:YES,right:YES,width:YES,height:YES,centerX:YES,centerY:YES,opacity:YES,scale:YES,rotate:YES,rotateX:YES,rotateY:YES,rotateZ:YES};SC.View.reopen({didCreateLayerMixin:function(){if(SC.platform.supportsCSSTransitions){this.resetAnimation()}},animate:function(p,k,d,o){var f,q;if(typeof p===SC.T_STRING){f={};f[p]=k;q=d}else{f=p;q=k;o=d}var c=SC.typeOf(q);if(c===SC.T_NUMBER){q={duration:q}}else{if(c!==SC.T_HASH){throw"Must provide options hash or duration!"}}if(o){q.callback=o}var a=q.timing;if(a){if(typeof a!==SC.T_STRING){q.timing="cubic-bezier("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"}}else{q.timing="linear"}var g=SC.clone(this.get("layout")),h=NO,j,n,b,e,m;if(!g.animate){g.animate={}}for(m in f){if(!f.hasOwnProperty(m)||!SC.ANIMATABLE_PROPERTIES[m]){continue}j=f[m];n=g[m];e=g.animate[m];if(j==null){throw"Can only animate to an actual value!"}if(n!==j||(e&&e.duration!==q.duration)){h=YES;g.animate[m]=q;g[m]=j}}if(h){this.set("layout",g)}return this},resetAnimation:function(){var c=this.get("layout"),e=c.animate,d=NO,b;if(!e){return}var a;for(b in e){d=YES;delete e[b]}if(d){this.set("layout",c);this.notifyPropertyChange("layout")}return this},transitionDidEnd:function(a){this.get("layoutStyleCalculator").transitionDidEnd(a)}});sc_require("ext/string");sc_require("views/view");sc_require("views/view/animation");SC.CSS_TRANSFORM_MAP={rotate:function(a){return null},rotateX:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateX("+a+")"},rotateY:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateY("+a+")"},rotateZ:function(a){if(SC.typeOf(a)===SC.T_NUMBER){a+="deg"}return"rotateZ("+a+")"},scale:function(a){if(SC.typeOf(a)===SC.T_ARRAY){a=a.join(", ")}return"scale("+a+")"}};SC.View.reopen({layoutStyleCalculator:null,layoutStyle:function(){var a={layout:this.get("layout"),turbo:this.get("hasAcceleratedLayer"),staticLayout:this.get("useStaticLayout")};var b=this.get("layoutStyleCalculator");b.set(a);return b.calculate()}.property().cacheable()});SC.View.LayoutStyleCalculator=SC.Object.extend({_layoutDidUpdate:function(){var g=this.get("layout");if(!g){return}this.dims=SC._VIEW_DEFAULT_DIMS;this.loc=this.dims.length;var p=(this.right=g.right);this.hasRight=(p!=null);var c=(this.left=g.left);this.hasLeft=(c!=null);var k=(this.top=g.top);this.hasTop=(k!=null);var a=(this.bottom=g.bottom);this.hasBottom=(a!=null);var b=(this.width=g.width);this.hasWidth=(b!=null);var q=(this.height=g.height);this.hasHeight=(q!=null);this.minWidth=((g.minWidth===undefined)?null:g.minWidth);var o=(this.maxWidth=(g.maxWidth===undefined)?null:g.maxWidth);this.hasMaxWidth=(o!=null);this.minHeight=(g.minHeight===undefined)?null:g.minHeight;var n=(this.maxHeight=(g.maxHeight===undefined)?null:g.maxHeight);this.hasMaxHeight=(n!=null);var f=(this.centerX=g.centerX);this.hasCenterX=(f!=null);var e=(this.centerY=g.centerY);this.hasCenterY=(e!=null);var d=(this.borderTop=((g.borderTop!==undefined)?g.borderTop:g.border)||0);var m=(this.borderRight=((g.borderRight!==undefined)?g.borderRight:g.border)||0);var j=(this.borderBottom=((g.borderBottom!==undefined)?g.borderBottom:g.border)||0);var h=(this.borderLeft=((g.borderLeft!==undefined)?g.borderLeft:g.border)||0);this.zIndex=(g.zIndex!=null)?g.zIndex.toString():null;this.opacity=(g.opacity!=null)?g.opacity.toString():null;this.backgroundPosition=(g.backgroundPosition!=null)?g.backgroundPosition:null;this.ret={marginTop:null,marginLeft:null}}.observes("layout"),_invalidAutoValue:function(b){var a=SC.Error.desc("%@.layout() you cannot use %@:auto if staticLayout is disabled".fmt(this.get("view"),b),"%@".fmt(this.get("view")),-1);SC.Logger.error(a.toString());throw a},_handleMistakes:function(){var c=this.get("layout");if(!this.staticLayout){if(this.width===SC.LAYOUT_AUTO){this._invalidAutoValue("width")}if(this.height===SC.LAYOUT_AUTO){this._invalidAutoValue("height")}}if(SC.platform.supportsCSSTransforms){var d=c.animate,a,b;if(d){for(b in d){if(SC.CSS_TRANSFORM_MAP[b]){if(this._pendingAnimations&&this._pendingAnimations["-"+SC.platform.cssPrefix+"-transform"]){throw"Animations of transforms must be executed simultaneously!"}if(a&&d[b].duration!==a){SC.Logger.warn("Can't animate transforms with different durations! Using first duration specified.");d[b].duration=a}a=d[b].duration}}}}},_calculatePosition:function(p){var g=null,a=this.get("turbo"),t=this.ret;var d,m,k,c,j,o,b,f,e,n,s,h,q,r;if(p==="x"){d="left";m="right";k="width";c="maxWidth";j="marginLeft";n="borderLeft";h="borderRight";o=this.hasLeft;b=this.hasRight;f=this.hasWidth;e=this.hasMaxWidth}else{d="top";m="bottom";k="height";c="maxHeight";j="marginTop";n="borderTop";h="borderBottom";o=this.hasTop;b=this.hasBottom;f=this.hasHeight;e=this.hasMaxHeight}t[d]=this._cssNumber(this[d]);t[m]=this._cssNumber(this[m]);s=this._cssNumber(this[n]);q=this._cssNumber(this[h]);t[n+"Width"]=s||null;t[h+"Width"]=q||null;r=this[k];if(r>=1){r-=(s+q)}t[k]=this._cssNumber(r);if(o){if(a){g=t[d];t[d]=0}if(b&&f){t[m]=null}}else{if(!b||(b&&!f&&!e)){t[d]=0}}if(!f&&!b){t[m]=0}return g},_calculateCenter:function(p){var j=this.ret,s,a,c,q,f,g,n,o,e;if(p==="x"){s="width";a="centerX";c="left";q="right";f="marginLeft";g="borderLeft";o="borderRight"}else{s="height";a="centerY";c="top";q="bottom";f="marginTop";g="borderTop";o="borderBottom"}j[c]="50%";n=this._cssNumber(this[g]);e=this._cssNumber(this[o]);j[g+"Width"]=n||null;j[o+"Width"]=e||null;var m=this[s],k=this[a],b=this[c];var h=SC.isPercentage(m),d=SC.isPercentage(k,YES);if(m>1){m-=(n+e)}if((h&&d)||(!h&&!d)){var r=k-m/2;j[f]=(h)?Math.floor(r*100)+"%":Math.floor(r)}else{SC.Logger.warn("You have to set "+s+" and "+a+" using both percentages or pixels");j[f]="50%"}j[s]=this._cssNumber(m)||0;j[q]=null},_calculateTransforms:function(e,h){if(SC.platform.supportsCSSTransforms){var g=this.get("layout");var b=SC.platform.domCSSPrefix+"Transform";var d=[];if(this.turbo){d.push("translateX("+(e||0)+"px)","translateY("+(h||0)+"px)");if(SC.platform.supportsCSS3DTransforms){d.push("translateZ(0px)")}}var f=SC.CSS_TRANSFORM_MAP;for(var a in f){var c=g[a];if(c!=null){d.push(f[a](c))}}this.ret[b]=d.length>0?d.join(" "):null}},_calculateAnimations:function(e,c){var d=this.layout,h=d.animate,g;if(!h){return}if(this.getPath("view.isAnimatable")){return}var f=[],b;this._animatedTransforms=[];if(!this._pendingAnimations){this._pendingAnimations={}}var j="-"+SC.platform.cssPrefix+"-transform";if(SC.platform.supportsCSSTransitions){for(g in h){b=h[g];var k=SC.CSS_TRANSFORM_MAP[g];var a=(g==="top"&&c!=null)||(g==="left"&&e!=null);if(SC.platform.supportsCSSTransforms&&(a||k)){this._animatedTransforms.push(g);g=j}b.css=g+" "+b.duration+"s "+b.timing;if(!this._pendingAnimations[g]){this._pendingAnimations[g]=b;f.push(b.css)}}this.ret[SC.platform.domCSSPrefix+"Transition"]=f.join(", ")}else{for(g in h){this._pendingAnimations[g]=h[g]}}delete d.animate},_cssNumber:function(a){if(a==null){return null}else{if(a===SC.LAYOUT_AUTO){return SC.LAYOUT_AUTO}else{if(SC.isPercentage(a)){return(a*100)+"%"}else{return Math.floor(a)}}}},calculate:function(){var d=this.get("layout"),b=null,n=this.get("staticLayout"),c=null,e=null,a=this.get("turbo"),g=this.ret,k=this.dims,f=this.loc,h=this.get("view"),m,j;this._handleMistakes(d);if(n&&d===SC.View.prototype.layout){return{}}if(this.hasLeft||this.hasRight||!this.hasCenterX){e=this._calculatePosition("x")}else{this._calculateCenter("x")}if(this.hasTop||this.hasBottom||!this.hasCenterY){c=this._calculatePosition("y")}else{this._calculateCenter("y")}g.minWidth=this.minWidth;g.maxWidth=this.maxWidth;g.minHeight=this.minHeight;g.maxHeight=this.maxHeight;g.zIndex=this.zIndex;g.opacity=this.opacity;g.backgroundPosition=this.backgroundPosition;this._calculateTransforms(e,c);this._calculateAnimations(e,c);for(m in g){j=g[m];if(typeof j===SC.T_NUMBER){g[m]=(j+"px")}}return g},willRenderAnimations:function(){if(SC.platform.supportsCSSTransitions){var k=this.get("view"),h=k.get("layer"),a=h?h.style:null,c=k.get("layoutStyle"),p=this._activeAnimations,d,f=this._pendingAnimations,e,r=this._animatedTransforms,j=r?r.length:0,b=c[SC.platform.domCSSPrefix+"Transition"],g=k.get("layout"),o,q,n,m;if(f){if(!p){p={}}for(o in f){if(!f.hasOwnProperty(o)){continue}e=f[o];d=p[o];m=NO;if(c[o]!==(a?a[o]:null)){m=YES}if(d&&(d.duration!==e.duration||d.timing!==e.timing)){m=YES}if(m&&d){if(q=d.callback){if(j>0){for(n=0;n<j;n++){this.runAnimationCallback(q,null,r[n],YES)}this._animatedTransforms=null}else{this.runAnimationCallback(q,null,o,YES)}}this.removeAnimationFromLayout(o,YES)}p[o]=e}}this._activeAnimations=p;this._pendingAnimations=null}},didRenderAnimations:function(){if(!SC.platform.supportsCSSTransitions){var a,b;for(a in this._pendingAnimations){b=this._pendingAnimations[a].callback;if(b){this.runAnimationCallback(b,null,a,NO)}this.removeAnimationFromLayout(a,NO,YES)}this._activeAnimations=this._pendingAnimations=null}},runAnimationCallback:function(e,b,c,d){var a=this.get("view");if(e){if(SC.typeOf(e)!==SC.T_HASH){e={action:e}}e.source=a;if(!e.target){e.target=this}}SC.View.runCallback(e,{event:b,propertyName:c,view:a,isCancelled:d})},transitionDidEnd:function(b){var c=b.originalEvent.propertyName,d,a;d=this._activeAnimations?this._activeAnimations[c]:null;if(d){if(d.callback){SC.RunLoop.begin();if(this._animatedTransforms&&this._animatedTransforms.length>0){for(a=0;a<this._animatedTransforms.length;a++){this.invokeLater("runAnimationCallback",1,d.callback,b,this._animatedTransforms[a],NO)}}else{this.invokeLater("runAnimationCallback",1,d.callback,b,c,NO)}SC.RunLoop.end()}this.removeAnimationFromLayout(c,YES)}},removeAnimationFromLayout:function(c,h,b){if(h){var e=this.getPath("view.layer"),g=[],d;for(d in this._activeAnimations){if(d!==c){g.push(this._activeAnimations[d].css)}}if(e){e.style[SC.platform.domCSSPrefix+"Transition"]=g.join(", ")}}var f=this.getPath("view.layout"),a;if(c==="-"+SC.platform.cssPrefix+"-transform"&&this._animatedTransforms&&this._animatedTransforms.length>0){for(a=0;a<this._animatedTransforms.length;a++){delete f["animate"+SC.String.capitalize(this._animatedTransforms[a])]}this._animatedTransforms=null}delete f["animate"+SC.String.capitalize(c)];if(!b){delete this._activeAnimations[c]}}});SC.CoreView.runCallback=function(g){var b=SC.$A(arguments).slice(1),a=SC.typeOf(g.action);if(a==SC.T_FUNCTION){g.action.apply(g.target,b)}else{if(a===SC.T_STRING){if(g.action.indexOf(".")>=0){var f=g.action.split(".");var d=f.pop();var e=SC.objectForPropertyPath(f,window);var c=e.get?e.get(d):e[d];if(c&&SC.typeOf(c)==SC.T_FUNCTION){c.apply(e,b)}else{throw"SC.runCallback could not find a function at %@".fmt(g.action)}}}}};SC.View.runCallback=SC.CoreView.runCallback;sc_require("views/view");sc_require("views/view/layout_style");SC.View.reopen({wantsAcceleratedLayer:NO,hasAcceleratedLayer:function(){if(this.get("wantsAcceleratedLayer")&&SC.platform.supportsAcceleratedLayers){var c=this.get("layout"),d=c.animate,b=SC.LAYOUT_AUTO,a;if(d&&(d.top||d.left)){for(a in d){if(SC.CSS_TRANSFORM_MAP[a]&&((d.top&&d.top.duration!==d[a].duration)||(d.left&&d.left.duration!==d[a].duration))){return NO}}}if(c.left!=null&&!SC.isPercentage(c.left)&&c.left!==b&&c.top!=null&&!SC.isPercentage(c.top)&&c.top!==b&&c.width!=null&&!SC.isPercentage(c.width)&&c.width!==b&&c.height!=null&&!SC.isPercentage(c.height)&&c.height!==b){return YES}}return NO}.property("wantsAcceleratedLayer").cacheable()});sc_require("views/view");SC.View.reopen({cursor:function(a,c){var b;if(c){this._setCursor=c}if(this._setCursor!==undefined){return this._setCursor}b=this.get("parentView");if(this.get("shouldInheritCursor")&&b){return b.get("cursor")}return null}.property("parentView","shouldInheritCursor").cacheable(),applyAttributesToContext:function(b,a){var c=this.get("cursor");if(c){a.addClass(c.get("className"))}b(a)}.enhance(),shouldInheritCursor:YES});sc_require("views/view");SC.View.reopen({isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay().bool(),isEnabledInPane:function(){var a=this.get("isEnabled"),b;if(a&&(b=this.get("parentView"))){a=b.get("isEnabledInPane")}return a}.property("parentView","isEnabled"),_sc_view_isEnabledDidChange:function(){if(!this.get("isEnabled")&&this.get("isFirstResponder")){this.resignFirstResponder()}}.observes("isEnabled"),applyAttributesToContext:function(b,a){var c=this.get("isEnabled");b(a);a.setClass("disabled",!c);a.attr("aria-disabled",!c?"true":null)}.enhance()});sc_require("views/view");SC.View.reopen({isKeyResponder:NO,willLoseKeyResponderTo:function(a){},willBecomeKeyResponderFrom:function(a){},didLoseKeyResponderTo:function(a){},didBecomeKeyResponderFrom:function(a){},interpretKeyEvents:function(b){var a=b.commandCodes(),d=a[0],e=a[1],g;if(!d&&!e){return null}if(d){var h=SC.MODIFIED_KEY_BINDINGS[d]||SC.BASE_KEY_BINDINGS[d.match(/[^_]+$/)[0]];if(h){var f=this,c=this.get("pane"),j=null;while(f&&!(j=f.tryToPerform(h,b))){f=(f===c)?null:f.get("nextResponder")}return j}}if(e&&this.respondsTo("insertText")){g=this.insertText(e,b);return g?(g===YES?this:g):null}return null},insertText:function(a){return NO},performKeyEquivalent:function(f,d){var e=NO,g=this.get("childViews"),b=g.length,a=-1,c;while(!e&&(++a<b)){c=g[a];e=c.tryToPerform("performKeyEquivalent",f,d)}return e},firstKeyView:null,_getFirstKeyView:function(){var a=this.get("firstKeyView");if(a){return a}var b=this.get("childViews");if(b){return b[0]}},lastKeyView:null,_getLastKeyView:function(){var d=this.get("lastKeyView");if(d){return d}var a,b=this.get("firstKeyView");if(b){while(a=b._getNextKeyView()){b=a}return b}else{var c=this.get("childViews");if(c){return c[c.length-1]}}},nextKeyView:undefined,_getNextKeyView:function(){var b=this.get("parentView"),a=this.get("nextKeyView");if(b&&b.get("lastKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)+1]}},nextValidKeyView:function(){var b=this,a;while(a!==this){a=null;if(b.get("isVisibleInWindow")){a=b._getFirstKeyView()}if(!a){a=b._getNextKeyView()}if(!a){while(b=b.get("parentView")){if(a=b._getNextKeyView()){break}}}if(!a){if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=this.get("pane")}}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("nextKeyView"),previousKeyView:undefined,_getPreviousKeyView:function(){var b=this.get("parentView"),a=this.get("previousKeyView");if(b&&b.get("firstKeyView")===this){return null}if(a!==undefined){return a}if(b){var c=b.get("childViews");return c[c.indexOf(this)-1]}},previousValidKeyView:function(){var b=this,a;while(a!==this){if(b.get("parentView")){a=b._getPreviousKeyView()}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){break}else{a=b}}if(a){do{b=a;a=a._getLastKeyView()}while(a&&a.get("isVisibleInWindow"));if(!a){a=b}}else{a=b.get("parentView")}if(a.get("isVisibleInWindow")&&a.get("acceptsFirstResponder")){return a}b=a}return null}.property("previousKeyView")});sc_require("views/view");sc_require("views/view/layout_style");SC.LAYOUT_HORIZONTAL="sc-layout-horizontal";SC.LAYOUT_VERTICAL="sc-layout-vertical";SC._VIEW_DEFAULT_DIMS=["marginTop","marginLeft"];SC.FULL_WIDTH={left:0,right:0};SC.FULL_HEIGHT={top:0,bottom:0};SC.ANCHOR_CENTER={centerX:0,centerY:0};SC.LAYOUT_AUTO="auto";SC.View.reopen({hasLayout:YES,concatenatedProperties:["layoutProperties"],backgroundColor:null,displayProperties:["backgroundColor"],useStaticLayout:NO,init:function(a){a();this.layoutStyleCalculator=SC.View.LayoutStyleCalculator.create({view:this});this._previousLayout=this.get("layout")}.enhance(),propertyDidChange:function(b,d,c){var a=false;if(typeof this.layout==="function"&&this._kvo_dependents){var e=this._kvo_dependents[b];if(e&&e.indexOf("layout")!=-1){a=true}}if(b==="layout"||a){this.layoutDidChange()}arguments.callee.base.apply(this,arguments)},adjust:function(a,d){var b=this.get("layout"),c=NO,f,e;if(a===undefined){return this}if(SC.typeOf(a)===SC.T_STRING){f=b[a];if(d===undefined||f==d){return this}b=SC.clone(b);if(d===null){delete b[a]}else{b[a]=d}c=YES}else{e=a;for(a in e){if(!e.hasOwnProperty(a)){continue}d=e[a];f=b[a];if(d===undefined||f==d){continue}if(!c){b=SC.clone(b)}if(d===null){delete b[a]}else{b[a]=d}c=YES}}if(c){this.set("layout",b)}return this},layout:{top:0,left:0,bottom:0,right:0},isFixedLayout:function(){var b=this.get("layout"),a;a=(((b.width!==undefined)&&(b.height!==undefined))&&((b.width!==SC.LAYOUT_AUTO)&&(b.height!==SC.LAYOUT_AUTO))&&((b.left!==undefined)&&(b.top!==undefined)));if(a){a=(!SC.isPercentage(b.top)&&!SC.isPercentage(b.left)&&!SC.isPercentage(b.width)&&!SC.isPercentage(b.height))}return a}.property("layout").cacheable(),convertFrameToView:function(j,d){var c=0,b=0,g=0,e=0,a=this,h;while(a){h=a.get("frame");c+=h.x;b+=h.y;a=a.get("layoutView")}if(d){a=d;while(a){h=a.get("frame");g+=h.x;e+=h.y;a=a.get("layoutView")}}c=j.x+c-g;b=j.y+b-e;return{x:c,y:b,width:j.width,height:j.height}},convertFrameFromView:function(j,d){var c=0,b=0,g=0,e=0,a=this,h;while(a&&(h=a.get("frame"))){c+=h.x;b+=h.y;a=a.get("parentView")}if(d){a=d;while(a){h=a.get("frame");g+=h.x;e+=h.y;a=a.get("parentView")}}c=j.x-c+g;b=j.y-b+e;return{x:c,y:b,width:j.width,height:j.height}},scrollToVisible:function(){var a=this.get("parentView");while(a&&!a.get("isScrollable")){a=a.get("parentView")}if(a){a.scrollToVisible();return a.scrollToVisible(this)}else{return NO}},_adjustForBorder:function(e,c){var f=((c.borderTop!==undefined)?c.borderTop:c.border)||0,d=((c.borderLeft!==undefined)?c.borderLeft:c.border)||0,b=((c.borderBottom!==undefined)?c.borderBottom:c.border)||0,a=((c.borderRight!==undefined)?c.borderRight:c.border)||0;e.x+=d;e.y+=f;e.width-=(d+a);e.height-=(f+b);return e},computeFrameWithParentFrame:function(o,g){var q,r=this.get("layout");if(this.get("useStaticLayout")){q=o();return q?this._adjustForBorder(q,r):null}else{q={}}var p,u,n=SC.LAYOUT_AUTO,m=this.get("parentView"),h,c,a=r.right,b=r.left,t=r.top,e=r.bottom,s=r.width,d=r.height,k=r.centerX,j=r.centerY;if(s===n){p=SC.Error.desc(("%@.layout() cannot use width:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(p.toString());throw p}if(d===n){p=SC.Error.desc(("%@.layout() cannot use height:auto if staticLayout is disabled").fmt(this),"%@".fmt(this),-1);SC.Logger.error(p.toString());throw p}if(!g){g=this.computeParentDimensions(r)}h=g.height;c=g.width;if(!SC.none(b)){if(SC.isPercentage(b)){q.x=c*b}else{q.x=b}if(s!==undefined){if(s===n){q.width=n}else{if(SC.isPercentage(s)){q.width=c*s}else{q.width=s}}}else{q.width=c-q.x;if(a&&SC.isPercentage(a)){q.width=q.width-(a*c)}else{q.width=q.width-(a||0)}}}else{if(!SC.none(a)){if(SC.none(s)){if(SC.isPercentage(a)){q.width=c-(c*a)}else{q.width=c-a}q.x=0}else{if(s===n){q.width=n}else{if(SC.isPercentage(s)){q.width=c*s}else{q.width=(s||0)}}if(SC.isPercentage(s)){q.x=c-(a*c)-q.width}else{q.x=c-a-q.width}}}else{if(!SC.none(k)){if(s===n){q.width=n}else{if(SC.isPercentage(s)){q.width=s*c}else{q.width=(s||0)}}if(SC.isPercentage(k)){q.x=(c-q.width)/2+(k*c)}else{q.x=(c-q.width)/2+k}}else{q.x=0;if(SC.none(s)){q.width=c}else{if(s===n){q.width=n}if(SC.isPercentage(s)){q.width=s*c}else{q.width=(s||0)}}}}}if(!SC.none(t)){if(SC.isPercentage(t)){q.y=t*h}else{q.y=t}if(d!==undefined){if(d===n){q.height=n}else{if(SC.isPercentage(d)){q.height=d*h}else{q.height=d}}}else{if(e&&SC.isPercentage(e)){q.height=h-q.y-(e*h)}else{q.height=h-q.y-(e||0)}}}else{if(!SC.none(e)){if(SC.none(d)){if(SC.isPercentage(e)){q.height=h-(e*h)}else{q.height=h-e}q.y=0}else{if(d===n){q.height=n}if(d&&SC.isPercentage(d)){q.height=d*h}else{q.height=(d||0)}if(SC.isPercentage(e)){q.y=h-(e*h)-q.height}else{q.y=h-e-q.height}}}else{if(!SC.none(j)){if(d===n){q.height=n}if(d&&SC.isPercentage(d)){q.height=d*h}else{q.height=(d||0)}if(SC.isPercentage(j)){q.y=(h-q.height)/2+(j*h)}else{q.y=(h-q.height)/2+j}}else{q.y=0;if(SC.none(d)){q.height=h}else{if(d===n){q.height=n}if(SC.isPercentage(d)){q.height=d*h}else{q.height=d||0}}}}}q.x=Math.floor(q.x);q.y=Math.floor(q.y);if(q.height!==n){q.height=Math.floor(q.height)}if(q.width!==n){q.width=Math.floor(q.width)}if(q.height===n||q.width===n){u=this.get("layer");if(q.height===n){q.height=u?u.clientHeight:0}if(q.width===n){q.width=u?u.clientWidth:0}}q=this._adjustForBorder(q,r);if(m&&m.isScrollContainer){m=m.get("parentView");q.x-=m.get("horizontalScrollOffset");q.y-=m.get("verticalScrollOffset")}if(!SC.none(r.maxHeight)&&(q.height>r.maxHeight)){q.height=r.maxHeight}if(!SC.none(r.minHeight)&&(q.height<r.minHeight)){q.height=r.minHeight}if(!SC.none(r.maxWidth)&&(q.width>r.maxWidth)){q.width=r.maxWidth}if(!SC.none(r.minWidth)&&(q.width<r.minWidth)){q.width=r.minWidth}if(q.height<0){q.height=0}if(q.width<0){q.width=0}return q}.enhance(),computeParentDimensions:function(e){var b,c=this.get("parentView"),a=(c)?c.get("frame"):null;if(a){b={width:a.width,height:a.height}}else{var d=e||{};b={width:(d.left||0)+(d.width||0)+(d.right||0),height:(d.top||0)+(d.height||0)+(d.bottom||0)}}return b},borderFrame:function(){var d=this.get("layout"),f=this.get("frame"),a=d.border,e=((d.topBorder!==undefined)?d.topBorder:d.border)||0,c=((d.rightBorder!==undefined)?d.rightBorder:d.border)||0,g=((d.bottomBorder!==undefined)?d.bottomBorder:d.border)||0,b=((d.leftBorder!==undefined)?d.leftBorder:d.border)||0;return{x:f.x-b,y:f.y-e,width:f.width+b+c,height:f.height+e+g}}.property("frame").cacheable(),parentViewDidResize:function(){var a;a=this.useStaticLayout||!this.get("isFixedLayout");if(a){this.viewDidResize()}},viewDidResize:function(){this._viewFrameDidChange();var d=this.childViews,b,a,c;for(a=0;a<(b=d.length);++a){c=d[a];c.tryToPerform("parentViewDidResize")}},_viewFrameDidChange:function(){this.notifyPropertyChange("frame");this._sc_view_clippingFrameDidChange()},beginLiveResize:function(){if(this.willBeginLiveResize){this.willBeginLiveResize()}var d=this.get("childViews"),b=d.length,a,c;for(a=0;a<b;++a){c=d[a];if(c.beginLiveResize){c.beginLiveResize()}}return this},endLiveResize:function(){var d=this.get("childViews"),b=d.length,a,c;for(a=b-1;a>=0;--a){c=d[a];if(c.endLiveResize){c.endLiveResize()}}if(this.didEndLiveResize){this.didEndLiveResize()}return this},layoutView:function(){return this.get("parentView")}.property("parentView").cacheable(),layoutDidChange:function(){var g=this._previousLayout,f=this.get("layout"),j=YES,d,c,a,b;if(!SC.none(f.rotate)){if(SC.none(f.rotateX)){f.rotateX=f.rotate;SC.Logger.warn("Please set rotateX instead of rotate")}}if(!SC.none(f.rotateX)){f.rotate=f.rotateX}else{delete f.rotate}var h=f.animations;if(h){if(!SC.none(h.rotate)){if(SC.none(h.rotateX)){h.rotateX=h.rotate;SC.Logger.warn("Please animate rotateX instead of rotate")}}if(!SC.none(h.rotateX)){h.rotate=h.rotateX}else{delete h.rotate}}if(g&&g!==f){d=g.width;if(d!==undefined){a=f.width;if(d===a){c=g.height;if(g!==undefined){b=f.height;if(c===b){j=NO}}}}}this.beginPropertyChanges();this.notifyPropertyChange("hasAcceleratedLayer");this.notifyPropertyChange("layoutStyle");if(j){this.viewDidResize()}else{this._viewFrameDidChange()}this.endPropertyChanges();var e=this.get("layoutView");if(e){e.set("childViewsNeedLayout",YES);e.layoutDidChangeFor(this);if(e.get("childViewsNeedLayout")){e.invokeOnce(e.layoutChildViewsIfNeeded)}}this._previousLayout=f;return this},childViewsNeedLayout:NO,layoutDidChangeFor:function(b){var a=this._needLayoutViews;if(!a){a=this._needLayoutViews=SC.CoreSet.create()}a.add(b)},layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){this.set("childViewsNeedLayout",NO);this.layoutChildViews()}return this},layoutChildViews:function(){var c=this._needLayoutViews,a=c?c.length:0,b;for(b=0;b<a;++b){c[b].updateLayout()}c.clear()},updateLayout:function(){var b=this.get("layer"),a;if(b){a=this.renderContext(b);this.renderLayout(a,NO);a.update();if(this.useStaticLayout){this.viewDidResize()}}b=null;return this},renderLayout:function(a,b){this.get("layoutStyleCalculator").willRenderAnimations();a.addStyle(this.get("layoutStyle"));this.get("layoutStyleCalculator").didRenderAnimations()},_renderLayerSettings:function(b,a,c){b(a,c);this.renderLayout(a,c)}.enhance(),applyAttributesToContext:function(b,a){b(a);if(this.get("useStaticLayout")){a.addClass("sc-static-layout")}if(this.get("backgroundColor")){a.css("backgroundColor",this.get("backgroundColor"))}}.enhance()});SC.View.mixin({convertLayoutToAnchoredLayout:function(f,o){var h={top:0,left:0,width:o.width,height:o.height},d=o.width,m=o.height,n=f.right,a=f.left,k=f.top,g=f.bottom,j=f.width,e=f.height,c=f.centerX,b=f.centerY;if(!SC.none(a)){if(SC.isPercentage(a)){h.left=a*d}else{h.left=a}if(j!==undefined){if(j===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(j)){h.width=j*d}else{h.width=j}}}else{if(n&&SC.isPercentage(n)){h.width=d-h.left-(n*d)}else{h.width=d-h.left-(n||0)}}}else{if(!SC.none(n)){if(SC.none(j)){h.left=0;if(n&&SC.isPercentage(n)){h.width=d-(n*d)}else{h.width=d-(n||0)}}else{if(j===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(j)){h.width=j*d}else{h.width=j}if(SC.isPercentage(n)){h.left=d-(h.width+n)}else{h.left=d-(h.width+n)}}}}else{if(!SC.none(c)){if(j&&SC.isPercentage(j)){h.width=(j*d)}else{h.width=(j||0)}h.left=((d-h.width)/2);if(SC.isPercentage(c)){h.left=h.left+c*d}else{h.left=h.left+c}}else{if(!SC.none(j)){h.left=0;if(j===SC.LAYOUT_AUTO){h.width=SC.LAYOUT_AUTO}else{if(SC.isPercentage(j)){h.width=j*d}else{h.width=j}}}else{h.left=0;h.width=0}}}}if(f.minWidth!==undefined){h.minWidth=f.minWidth}if(f.maxWidth!==undefined){h.maxWidth=f.maxWidth}if(!SC.none(k)){if(SC.isPercentage(k)){h.top=k*m}else{h.top=k}if(e!==undefined){if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*m}else{h.height=e}}}else{h.height=m-h.top;if(g&&SC.isPercentage(g)){h.height=h.height-(g*m)}else{h.height=h.height-(g||0)}}}else{if(!SC.none(g)){if(SC.none(e)){h.top=0;if(g&&SC.isPercentage(g)){h.height=m-(g*m)}else{h.height=m-(g||0)}}else{if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*m}else{h.height=e}h.top=m-h.height;if(SC.isPercentage(g)){h.top=h.top-(g*m)}else{h.top=h.top-g}}}}else{if(!SC.none(b)){if(e&&SC.isPercentage(e)){h.height=(e*m)}else{h.height=(e||0)}h.top=((m-h.height)/2);if(SC.isPercentage(b)){h.top=h.top+b*m}else{h.top=h.top+b}}else{if(!SC.none(e)){h.top=0;if(e===SC.LAYOUT_AUTO){h.height=SC.LAYOUT_AUTO}else{if(SC.isPercentage(e)){h.height=e*m}else{h.height=e}}}else{h.top=0;h.height=0}}}}if(h.top){h.top=Math.floor(h.top)}if(h.bottom){h.bottom=Math.floor(h.bottom)}if(h.left){h.left=Math.floor(h.left)}if(h.right){h.right=Math.floor(h.right)}if(h.width!==SC.LAYOUT_AUTO){h.width=Math.floor(h.width)}if(h.height!==SC.LAYOUT_AUTO){h.height=Math.floor(h.height)}if(f.minHeight!==undefined){h.minHeight=f.minHeight}if(f.maxHeight!==undefined){h.maxHeight=f.maxHeight}return h},convertLayoutToCustomLayout:function(b,a,c){}});sc_require("views/view");SC.View.reopen({_lastLayerId:null,layerIdDidChange:function(){var a=this.get("layer"),b=this.get("layerId"),c=this._lastLayerId;if(b!==c){if(c&&SC.View.views[c]===this){delete SC.View.views[c]}this._lastLayerId=b;SC.View.views[b]=this;if(a){a.id=b}}}.observes("layerId"),parentViewDidChange:function(){this.recomputeIsVisibleInWindow();this.resetBuildState();this.set("layerLocationNeedsUpdate",YES);this.invokeOnce(this.updateLayerLocationIfNeeded);this._invalidatePaneCacheForSelfAndAllChildViews();return this},_invalidatePaneCacheForSelfAndAllChildViews:function(){var d,c=this.get("childViews"),b=c.length,a;this.notifyPropertyChange("pane");for(a=0;a<b;++a){d=c[a];if(d._invalidatePaneCacheForSelfAndAllChildViews){d._invalidatePaneCacheForSelfAndAllChildViews()}}},insertBefore:function(b,d){b.beginPropertyChanges();if(b.get("parentView")){b.removeFromParent()}if(this.willAddChild){this.willAddChild(b,d)}if(b.willAddToParent){b.willAddToParent(this,d)}b.set("parentView",this);var a,c=this.get("childViews");if(c.needsClone){this.set(c=[])}a=(d)?c.indexOf(d):c.length;if(a<0){a=c.length}c.insertAt(a,b);if(b.parentViewDidChange){b.parentViewDidChange()}if(b.layoutDidChange){b.layoutDidChange()}b.endPropertyChanges();this.invokeLast(function(){var e=b.get("pane");if(e&&e.get("isPaneAttached")){b._notifyDidAppendToDocument()}});if(this.didAddChild){this.didAddChild(b,d)}if(b.didAddToParent){b.didAddToParent(this,d)}return this},removeChild:function(b,a){if(!a){return this}if(a.parentView!==this){throw"%@.removeChild(%@) must belong to parent".fmt(this,a)}if(a.willRemoveFromParent){a.willRemoveFromParent()}if(this.willRemoveChild){this.willRemoveChild(a)}b(a);if(a.parentViewDidChange){a.parentViewDidChange()}if(this.didRemoveChild){this.didRemoveChild(a)}if(a.didRemoveFromParent){a.didRemoveFromParent(this)}return this}.enhance(),replaceChild:function(a,b){a.beginPropertyChanges();b.beginPropertyChanges();this.beginPropertyChanges();this.insertBefore(a,b).removeChild(b);this.endPropertyChanges();b.endPropertyChanges();a.endPropertyChanges();return this},replaceAllChildren:function(c){var b=c.get("length"),a;this.beginPropertyChanges();this.destroyLayer().removeAllChildren();for(a=0;a<b;a++){this.appendChild(c.objectAt(a))}this.replaceLayer();this.endPropertyChanges();return this},appendChild:function(a){return this.insertBefore(a,null)},buildInChild:function(a){a.willBuildInToView(this);this.appendChild(a);a.buildInToView(this)},buildOutChild:function(a){a.buildOutFromView(this)},buildInDidFinishFor:function(a){},buildOutDidFinishFor:function(a){this.removeChild(a)},isBuildingIn:NO,isBuildingOut:NO,buildIn:function(){this.buildInDidFinish()},buildOut:function(){this.buildOutDidFinish()},resetBuild:function(){},buildOutDidCancel:function(){},buildInDidCancel:function(){},buildInDidFinish:function(){this.isBuildingIn=NO;this._buildingInTo.buildInDidFinishFor(this);this._buildingInTo=null},buildOutDidFinish:function(){this.isBuildingOut=NO;this._buildingOutFrom.buildOutDidFinishFor(this);this._buildingOutFrom=null},resetBuildState:function(){if(this.isBuildingIn){this.buildInDidCancel();this.isBuildingIn=NO}if(this.isBuildingOut){this.buildOutDidCancel();this.isBuildingOut=NO}this.buildingInTo=null;this.buildingOutFrom=null;this.resetBuild()},willBuildInToView:function(a){if(this.isBuildingOut){this.buildOutDidCancel()}},buildInToView:function(a){if(this.isBuildingIn){return}this._buildingInTo=a;this.isBuildingOut=NO;this.isBuildingIn=YES;this.buildIn()},buildOutFromView:function(a){if(this.isBuildingOut){return}if(this.isBuildingIn){this.buildInDidCancel()}this.isBuildingOut=YES;this.isBuildingIn=NO;this._buildingOutFrom=a;this.buildOut()}});sc_require("views/view");SC.View.reopen({init:function(a){a();this._lastTheme=this.get("theme")}.enhance(),themeName:null,baseThemeName:null,theme:function(){var b=this.get("baseTheme"),a=this.get("themeName");if(a){var c;if(b){c=b.find(a);if(c){return c}}c=SC.Theme.find(a);if(c){return c}return b.invisibleSubtheme(a)}return b}.property("baseTheme","themeName").cacheable(),_sc_view_themeDidChange:function(){if(this._lastTheme===this.get("theme")){return}this._lastTheme=this.get("theme");var c=this.childViews,b=c.length,a;for(a=0;a<b;a++){c[a].notifyPropertyChange("baseTheme")}if(this.get("layer")){this.replaceLayer()}}.observes("theme"),baseTheme:function(){var b;var a=this.get("baseThemeName");if(a){return SC.Theme.find(a)}else{b=this.get("parentView");var c=b&&b.get("theme");return c||SC.Theme.find(SC.defaultTheme)}}.property("baseThemeName","parentView").cacheable(),renderDelegate:function(c,d){if(d){this._setRenderDelegate=d}if(this._setRenderDelegate){return this._setRenderDelegate}var a=this.get("renderDelegateName"),b;if(a){b=this.get("theme")[a];if(!b){throw'%@: Unable to locate render delegate "%@" in theme.'.fmt(this,a)}return b}return null}.property("renderDelegateName","theme"),renderDelegateName:null,renderDelegateProxy:function(){return SC.View._RenderDelegateProxy.createForView(this)}.property("renderDelegate").cacheable(),render:function(b,c){var a=this.get("renderDelegate");if(a){if(c){a.render(this.get("renderDelegateProxy"),b)}else{a.update(this.get("renderDelegateProxy"),b.$())}}},applyAttributesToContext:function(f,e){var g=this.get("theme");var c=g.classNames,b,a=c.length;for(b=0;b<a;b++){e.addClass(c[b])}f(e);var d=this.get("renderDelegate");if(d&&d.className){e.addClass(d.className)}}.enhance(),invokeRenderDelegateMethod:function(c,b){var a=this.get("renderDelegate");if(!a){return undefined}if(SC.typeOf(a[c])!==SC.T_FUNCTION){return undefined}b=SC.$A(arguments);b.shift();b.unshift(this.get("renderDelegateProxy"));return a[c].apply(a,b)}});SC.View._RenderDelegateProxy={isViewRenderDelegateProxy:YES,createForView:function(c){var d=SC.beget(this);var f=c.get("displayProperties"),e={};for(var b=0,a=f.length;b<a;b++){e[f[b]]=YES}e.theme=YES;d._displayPropertiesLookup=e;d.renderState={};d._view=c;return d},get:function(b){if(this[b]!==undefined){return this[b]}var a="display"+b.capitalize();if(this._displayPropertiesLookup[a]){return this._view.get(a)}else{if(this._displayPropertiesLookup[b]){return this._view.get(b)}}return undefined},didChangeFor:function(d){var b=arguments.length,a;for(a=1;a<b;a++){var e=arguments[a],c="display"+e.capitalize();if(this._displayPropertiesLookup[c]){if(this._view.didChangeFor(d,c)){return YES}}else{if(this._displayPropertiesLookup[e]){if(this._view.didChangeFor(d,e)){return YES}}}}return NO}};SC.propertyFromRenderDelegate=function(a,b){return function(f,g){if(g!==undefined){this["_set_rd_"+f]=g}var d=this["_set_rd_"+f];if(d!==undefined){return d}var c=this.get("renderDelegate");if(c&&c.get){var e=this.get("renderDelegateProxy");d=c.getPropertyFor(e,a)}if(d!==undefined){return d}return b}.property("renderDelegate").cacheable()};sc_require("views/view");SC.View.reopen({acceptsMultitouch:NO,hasTouch:NO,touchBoundary:{left:50,right:50,top:50,bottom:50},_touchBoundaryFrame:function(){return this.get("parentView").convertFrameToView(this.get("frame"),null)}.property("frame","parentView").cacheable(),touchIsInBoundary:function(h){var c=this.get("_touchBoundaryFrame"),d=0,b=0,g=this.get("touchBoundary");var a=h.pageX,e=h.pageY;if(a<c.x){a=c.x-a;d=g.left}else{if(a>c.x+c.width){a=a-(c.x+c.width);d=g.right}else{a=0;d=1}}if(e<c.y){e=c.y-e;b=g.top}else{if(e>c.y+c.height){e=e-(c.y+c.height);b=g.bottom}else{e=0;b=1}}if(a>100||e>100){return NO}return YES}});sc_require("views/view");SC.View.reopen({hasVisibility:YES,isVisibleInWindow:NO,isContextMenuEnabled:function(){return SC.CONTEXT_MENU_ENABLED}.property(),recomputeIsVisibleInWindow:function(d){var f=this.get("isVisibleInWindow"),h=this.get("isVisible"),e;if(h){if(d===undefined){e=this.get("parentView");d=e?e.get("isVisibleInWindow"):NO}h=h&&d}if(f!==h){this.set("isVisibleInWindow",h);var g=this.get("childViews"),b=g.length,a,c;for(a=0;a<b;a++){c=g[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(h)}}if(h){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isFirstResponder")){this.resignFirstResponder()}}}this.updateLayerIfNeeded(YES);return this},_sc_isVisibleDidChange:function(){this.displayDidChange();this.recomputeIsVisibleInWindow()}.observes("isVisible")});sc_require("views/view");sc_require("views/view/acceleration");sc_require("views/view/cursor");sc_require("views/view/enabled");sc_require("views/view/keyboard");sc_require("views/view/layout");sc_require("views/view/manipulation");sc_require("views/view/theming");sc_require("views/view/touch");sc_require("views/view/visibility");sc_require("mixins/responder_context");SC.MIXED_STATE="__MIXED__";SC.Pane=SC.View.extend(SC.ResponderContext,{isPane:YES,page:null,rootResponder:null,sendEvent:function(c,a,d){var b;if(!d){d=this.get("firstResponder")}while(d){if(c==="touchStart"){if(a.touchResponder===d){d=null;break}if(!d.get("hasTouch")||d.get("acceptsMultitouch")){if(d.tryToPerform("touchStart",a)){break}}}else{if(c==="touchEnd"&&!d.get("acceptsMultitouch")){if(!d.get("hasTouch")){if(d.tryToPerform("touchEnd",a)){break}}}else{if(d.tryToPerform(c,a)){break}}}d=(d===this)?null:d.get("nextResponder")}if(!d&&(d=this.get("defaultResponder"))){if(typeof d===SC.T_STRING){d=SC.objectForPropertyPath(d)}if(!d){d=null}else{d=d.tryToPerform(c,a)?d:null}}else{if(!d&&!(d=this.get("defaultResponder"))){d=this.tryToPerform(c,a)?this:null}}return a.mouseHandler||d},nextResponder:function(){return null}.property().cacheable(),firstResponder:null,acceptsKeyPane:YES,isKeyPane:NO,becomeKeyPane:function(){if(this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(this)}return this},resignKeyPane:function(){if(!this.get("isKeyPane")){return this}if(this.rootResponder){this.rootResponder.makeKeyPane(null)}return this},makeFirstResponder:function(c,b,a){if(!b){b=this}var e=this.get("firstResponder"),d=this.get("isKeyPane");if(e===b){return this}if(SC.platform.touch&&b&&b.kindOf(SC.TextFieldView)&&!b.get("focused")){return this}if(d){if(e){e.tryToPerform("willLoseKeyResponderTo",b)}if(b){b.tryToPerform("willBecomeKeyResponderFrom",e)}}if(e){e.beginPropertyChanges();e.set("isKeyResponder",NO)}if(b){b.beginPropertyChanges();b.set("isKeyResponder",d)}c(b,a);if(e){e.endPropertyChanges()}if(b){b.endPropertyChanges()}if(d){if(b){b.tryToPerform("didBecomeKeyResponderFrom",e)}if(e){e.tryToPerform("didLoseKeyResponderTo",b)}}return this}.enhance(),willLoseKeyPaneTo:function(a){this._forwardKeyChange(this.get("isKeyPane"),"willLoseKeyResponderTo",a,NO);return this},willBecomeKeyPaneFrom:function(a){this._forwardKeyChange(!this.get("isKeyPane"),"willBecomeKeyResponderFrom",a,YES);return this},didBecomeKeyResponderFrom:function(a){},didLoseKeyPaneTo:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",NO);this._forwardKeyChange(a,"didLoseKeyResponderTo",b);return this},didBecomeKeyPaneFrom:function(b){var a=this.get("isKeyPane");this.set("isKeyPane",YES);this._forwardKeyChange(!a,"didBecomeKeyResponderFrom",b,YES);return this},isMainPane:NO,focusFrom:function(a){},blurTo:function(a){},blurMainTo:function(a){this.set("isMainPane",NO)},focusMainFrom:function(a){this.set("isMainPane",YES)},append:function(){return this.appendTo(document.body)},remove:function(){if(!this.get("isVisibleInWindow")){return this}if(!this.get("isPaneAttached")){return this}var b=this.get("layer");if(b&&b.parentNode){b.parentNode.removeChild(b)}b=null;this._removeIntercept();this.resignKeyPane();var a=this.rootResponder;if(this.get("isMainPane")){a.makeMainPane(null)}a.panes.remove(this);this.rootResponder=null;this.set("isPaneAttached",NO);this.parentViewDidChange();return this},insert:function(b){var a=this.get("layer");if(!a){a=this.createLayer().get("layer")}b(a);if(!this.get("isPaneAttached")){this.paneDidAttach()}return this},appendTo:function(a){return this.insert(function(b){jQuery(a).append(b)})},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("isPaneAttached",YES);this.recomputeDependentProperties();this._notifyDidAppendToDocument();this._addIntercept();return this},recomputeDependentProperties:function(){},isPaneAttached:NO,wantsTouchIntercept:NO,hasTouchIntercept:function(){return this.get("wantsTouchIntercept")&&SC.platform.touch}.property("wantsTouchIntercept").cacheable(),zIndex:0,touchZ:99,_addIntercept:function(){if(this.get("hasTouchIntercept")){var b=document.createElement("div");var a=b.style;a.position="absolute";a.left="0px";a.top="0px";a.right="0px";a.bottom="0px";a.webkitTransform="translateZ(0px)";a.zIndex=this.get("zIndex")+this.get("touchZ");b.className="touch-intercept";b.id="touch-intercept-"+SC.guidFor(this);this._touchIntercept=b;document.body.appendChild(b)}},_removeIntercept:function(){if(this._touchIntercept){document.body.removeChild(this._touchIntercept);this._touchIntercept=null}},hideTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="none"}},showTouchIntercept:function(){if(this._touchIntercept){this._touchIntercept.style.display="block"}},recomputeIsVisibleInWindow:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var d=this.get("isVisibleInWindow"),f=this.get("isVisible")&&this.get("isPaneAttached");if(d!==f){this.set("isVisibleInWindow",f);var e=this.get("childViews"),b=e.length,a,c;for(a=0;a<b;a++){c=e[a];if(c.recomputeIsVisibleInWindow){c.recomputeIsVisibleInWindow(f)}}if(f){if(this.get("childViewsNeedLayout")){this.invokeOnce(this.layoutChildViewsIfNeeded)}}else{if(this.get("isKeyPane")){this.resignKeyPane()}}}this.updateLayerIfNeeded(YES);return this},updateLayerLocation:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this},init:function(){if(this.hasTouchIntercept===YES){SC.Logger.warn("Do not set hasTouchIntercept directly. Use wantsTouchIntercept instead.");this.hasTouchIntercept=SC.platform.touch}var a=!!this.get("layer");arguments.callee.base.apply(this,arguments);if(a){this.paneDidAttach()}},classNames:["sc-pane"]});sc_require("panes/pane");SC.Pane.reopen({performKeyEquivalent:function(c,a){var b=arguments.callee.base.apply(this,arguments);if(!b){var d=this.get("defaultResponder");if(d){if(d.performKeyEquivalent){b=d.performKeyEquivalent(c,a)}if(!b&&d.tryToPerform){b=d.tryToPerform(c,a)}}}return b},keyDown:function(a){var b;if((a.which===9||(SC.browser.mozilla&&a.keyCode===9))&&!this.get("firstResponder")){if(a.shiftKey){b=this.get("previousValidKeyView")}else{b=this.get("nextValidKeyView")}if(b){this.makeFirstResponder(b);return YES}else{if(!SC.TABBING_ONLY_INSIDE_DOCUMENT){a.allowDefault()}}}return NO},_forwardKeyChange:function(d,b,g,f){var c,a,e;if(d&&(a=this.get("firstResponder"))){e=(g)?g.get("firstResponder"):null;c=this.get("firstResponder");if(c&&c[b]){c[b](e)}if((f!==undefined)&&a){a.set("isKeyResponder",f)}}}});sc_require("panes/pane");SC.Pane.reopen({currentWindowSize:null,computeParentDimensions:function(c){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}var d={x:0,y:0,width:1000,height:1000},b=this.get("layout");if(document&&document.body){d.width=document.body.clientWidth;d.height=document.body.clientHeight;if(SC.browser.isIE&&SC.browser.compareVersion("7.0")===0){var a=SC.platform.get("scrollbarSize");if(document.body.scrollWidth>d.width){d.width-=a}if(document.body.scrollHeight>d.height){d.height-=a}}}if(b.minHeight||b.minWidth){if(b.minHeight){d.height=Math.max(d.height,b.minHeight)}if(b.minWidth){d.width=Math.max(d.width,b.minWidth)}}return d},frame:function(){if(this.get("designer")&&SC.suppressMain){return arguments.callee.base.apply(this,arguments)}return this.computeFrameWithParentFrame(null)}.property(),windowSizeDidChange:function(b,a){this.set("currentWindowSize",a);this.setBodyOverflowIfNeeded();this.parentViewDidResize();return this},setBodyOverflowIfNeeded:function(e){var d=this.get("layout"),b=this.get("currentWindowSize");if(!d||!b||!b.width||!b.height){return}var a=d.minWidth,c=d.minHeight;if(e===true||a||c){if((c&&b.height<c)||(a&&b.width<a)){SC.bodyOverflowArbitrator.requestVisible(this)}else{SC.bodyOverflowArbitrator.requestHidden(this)}}},paneLayoutDidChange:function(){this.invokeOnce(this.updateLayout);this.setBodyOverflowIfNeeded()}.observes("layout"),recomputeDependentProperties:function(a){this.set("currentWindowSize",this.rootResponder.computeWindowSize());a()}.enhance()});sc_require("panes/pane");SC.Pane.reopen({prependTo:function(a){return this.insert(function(b){jQuery(a).prepend(b)})},removeFromParent:function(){throw SC.Error.desc("SC.Pane cannot be removed from its parent, since it's the root. Did you mean remove()?")}});SC.TemplatePane=SC.Object.extend({});SC.TemplatePane.mixin({append:function(a){var b=SC.MainPane.extend({childViews:["contentView"],contentView:SC.TemplateView.design(a),touchStart:function(c){c.allowDefault()},touchesDragged:function(c,d){c.allowDefault()},touchEnd:function(c){c.allowDefault()}});b=b.create().append();b.awake();return b}});sc_require("panes/pane");SC.Pane.reopen({recomputeDependentProperties:function(a){this.recomputeIsVisibleInWindow();a()}.enhance()});SC.Application=SC.Responder.extend(SC.ResponderContext,{});SC.BENCHMARK_LOG_READY=YES;sc_require("system/event");SC.mixin({isReady:NO,suppressOnReady:SC.suppressOnReady?YES:NO,suppressMain:SC.suppressMain?YES:NO,ready:function(b,c){var a=SC._readyQueue;if(c===undefined){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(SC.isReady){jQuery(document).ready(function(){c.call(b)})}else{if(!a){SC._readyQueue=[]}SC._readyQueue.push(function(){c.call(b)})}return this},onReady:{done:function(){if(SC.isReady){return}var d=SC.Locale.currentLanguage.toLowerCase();SC.isReady=true;SC.RunLoop.begin();SC.Locale.createCurrentLocale();jQuery("body").addClass(d);jQuery("html").attr("lang",d);jQuery("#loading").remove();var c=SC._readyQueue,b,a;if(c){for(b=0,a=c.length;b<a;b++){c[b].call()}SC._readyQueue=null}if(window.main&&!SC.suppressMain&&(SC.mode===SC.APP_MODE)){window.main()}SC.RunLoop.end()}}});if(!SC.suppressOnReady){jQuery.event.special.ready._default=SC.onReady.done}SC.APP_MODE="APP_MODE";SC.TEST_MODE="TEST_MODE";SC.mode=SC.APP_MODE;SC.platform=SC.Object.create({scrollbarSize:function(){var a=document.createElement("DIV"),d;a.innerHTML="<div style='height:1px;'></div>";a.style.cssText="position:absolute;width:100px;height:100px;overflow-y:visible;";d=a.childNodes[0];document.body.appendChild(a);var b=d.innerWidth||d.clientWidth;a.style.overflowY="scroll";var c=d.innerWidth||d.clientWidth;document.body.removeChild(a);return b-c}.property().cacheable(),touch:(("createTouch" in document)&&SC.browser.chrome<9)||SC.browser.android,bounceOnScroll:SC.browser.iOS,pinchToZoom:SC.browser.iOS,input:{placeholder:("placeholder" in document.createElement("input"))},input:function(d){var e={},c=d.length,f=document.createElement("input"),b,a;for(a=0;a<c;a++){b=d[a];e[b]=!!(b in f)}return e}(["autocomplete","readonly","list","size","required","multiple","maxlength","pattern","min","max","step","placeholder"]),standalone:!!navigator.standalone,cssPrefix:null,domCSSPrefix:null,simulateTouchEvents:function(){if(this.touch){return}SC.Logger.log("Simulating touch events");SC.platform.touch=YES;SC.platform.bounceOnScroll=YES;document.body.className=document.body.className+" touch";this._simtouch_counter=1;this.removeEvents(["click","dblclick","mouseout","mouseover","mousewheel"]);this.replaceEvent("mousemove",this._simtouch_mousemove);this.replaceEvent("mousedown",this._simtouch_mousedown);this.replaceEvent("mouseup",this._simtouch_mouseup);SC.platform.windowSizeDeterminesOrientation=YES;SC.device.orientationHandlingShouldChange()},removeEvents:function(d){var b,a=d.length,c;for(b=0;b<a;b++){c=d[b];SC.Event.remove(document,c,SC.RootResponder.responder,SC.RootResponder.responder[c])}},replaceEvent:function(a,b){SC.Event.remove(document,a,SC.RootResponder.responder,SC.RootResponder.responder[a]);SC.Event.add(document,a,this,b)},_simtouch_mousemove:function(a){if(!this._mousedown){if(a.altKey&&this._pinchCenter===null){this._pinchCenter={pageX:a.pageX,pageY:a.pageY,screenX:a.screenX,screenY:a.screenY,clientX:a.clientX,clientY:a.clientY}}else{if(!a.altKey&&this._pinchCenter!==null){this._pinchCenter=null}}return NO}var b=this.manufactureTouchEvent(a,"touchmove");return SC.RootResponder.responder.touchmove(b)},_simtouch_mousedown:function(a){this._mousedown=YES;var b=this.manufactureTouchEvent(a,"touchstart");return SC.RootResponder.responder.touchstart(b)},_simtouch_mouseup:function(a){var c=this.manufactureTouchEvent(a,"touchend"),b=SC.RootResponder.responder.touchend(c);this._mousedown=NO;this._simtouch_counter++;return b},manufactureTouchEvent:function(m,k){var c,n,f=this._simtouch_counter;c={type:k,target:m.target,identifier:f,pageX:m.pageX,pageY:m.pageY,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY};m.touches=[c];if(m.altKey&&this._pinchCenter!==null){var h=this._pinchCenter.pageX+this._pinchCenter.pageX-m.pageX,g=this._pinchCenter.pageY+this._pinchCenter.pageY-m.pageY,e=this._pinchCenter.screenX+this._pinchCenter.screenX-m.screenX,d=this._pinchCenter.screenY+this._pinchCenter.screenY-m.screenY,b=this._pinchCenter.clientX+this._pinchCenter.clientX-m.clientX,a=this._pinchCenter.clientY+this._pinchCenter.clientY-m.clientY,j=this._simtouch_counter+1;n={type:k,target:m.target,identifier:j,pageX:h,pageY:g,screenX:e,screenY:d,clientX:b,clientY:a};m.touches=[c,n]}m.changedTouches=m.touches;return m},supportsCSSTransitions:NO,supportsCSSTransforms:NO,understandsCSS3DTransforms:NO,supportsCSS3DTransforms:NO,supportsAcceleratedLayers:NO,supportsHashChange:function(){return("onhashchange" in window)&&(document.documentMode===undefined||document.documentMode>7)}(),supportsHistory:function(){return !!(window.history&&window.history.pushState)}(),supportsCanvas:function(){return !!document.createElement("canvas").getContext}(),supportsOrientationChange:("onorientationchange" in window),windowSizeDeterminesOrientation:SC.browser.iOS||!("onorientationchange" in window)});(function(){var a=navigator.userAgent.toLowerCase();if((/webkit/).test(a)){SC.platform.cssPrefix="webkit";SC.platform.domCSSPrefix="Webkit"}else{if((/opera/).test(a)){SC.platform.cssPrefix="opera";SC.platform.domCSSPrefix="O"}else{if((/msie/).test(a)&&!(/opera/).test(a)){SC.platform.cssPrefix="ms";SC.platform.domCSSPrefix="ms"}else{if((/mozilla/).test(a)&&!(/(compatible|webkit)/).test(a)){SC.platform.cssPrefix="moz";SC.platform.domCSSPrefix="Moz"}}}}})();(function(){var b=document.createElement("div");var a=["-moz-","-moz-","-o-","-ms-","-webkit-"],h=["moz","Moz","o","ms","webkit"];var f="",d=null,j,c;for(d=0,c=a.length;d<c;d++){j=a[d];f+=j+"transition:all 1s linear;";f+=j+"transform: translate(1px, 1px);";f+=j+"perspective: 500px;"}b.style.cssText=f;var k;for(d=0,c=h.length;d<c;d++){k=h[d];if(b.style[k+"TransitionProperty"]!==undefined){SC.platform.supportsCSSTransitions=YES}if(b.style[k+"Transform"]!==undefined){SC.platform.supportsCSSTransforms=YES}if(b.style[k+"Perspective"]!==undefined||b.style[k+"PerspectiveProperty"]!==undefined){SC.platform.understandsCSS3DTransforms=YES;SC.platform.supportsCSS3DTransforms=YES}}try{if(window.media&&window.media.matchMedium){if(!window.media.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}else{if(window.styleMedia&&window.styleMedia.matchMedium){if(!window.styleMedia.matchMedium("(-webkit-transform-3d)")){SC.platform.supportsCSS3DTransforms=NO}}}}catch(g){SC.platform.supportsCSS3DTransforms=NO}if(SC.platform.supportsCSSTransforms&&SC.platform.cssPrefix==="webkit"){SC.platform.supportsAcceleratedLayers=YES}})();sc_require("system/ready");sc_require("system/platform");SC.CAPTURE_BACKSPACE_KEY=NO;SC.RootResponder=SC.Object.extend({panes:null,init:function(){arguments.callee.base.apply(this,arguments);this.panes=SC.Set.create();if(SC.platform.supportsCSSTransitions){this[SC.platform.cssPrefix+"TransitionEnd"]=this.transitionEnd;this["transitionend"]=this.transitionEnd}},mainPane:null,makeMainPane:function(b){var a=this.get("mainPane");if(a===b){return this}this.beginPropertyChanges();if(this.get("keyPane")===a){this.makeKeyPane(b)}this.set("mainPane",b);if(a){a.blurMainTo(b)}if(b){b.focusMainFrom(a)}this.endPropertyChanges();return this},menuPane:null,makeMenuPane:function(b){if(b&&!b.get("acceptsMenuPane")){return this}else{var a=this.get("menuPane");if(a===b){return this}this.set("menuPane",b)}return this},keyPane:null,previousKeyPanes:[],makeKeyPane:function(f){var e,a,d;if(f){if(!f.get("acceptsKeyPane")){return this}else{a=this.get("keyPane");if(a===f){return this}else{if(a){d=this.get("previousKeyPanes");d.push(a)}e=f}}}else{a=this.get("keyPane");d=this.get("previousKeyPanes");e=null;var c;while(d.length>0){c=d.pop();if(c.get("isPaneAttached")&&c.get("acceptsKeyPane")){e=c;break}}}if(!e){var b=this.get("mainPane");if(b&&b.get("acceptsKeyPane")){e=b}}if(a){a.willLoseKeyPaneTo(e)}if(e){e.willBecomeKeyPaneFrom(a)}this.set("keyPane",e);if(e){e.didBecomeKeyPaneFrom(a)}if(a){a.didLoseKeyPaneTo(e)}return this},currentWindowSize:null,computeWindowSize:function(){var c,b,a;if(!this._bod||!this._docElement){b=document.body;a=document.documentElement;this._bod=b;this._docElement=a}else{b=this._bod;a=this._docElement}if(window.innerHeight){c={width:window.innerWidth,height:window.innerHeight}}else{if(a&&a.clientHeight){c={width:a.clientWidth,height:a.clientHeight}}else{if(b){c={width:b.clientWidth,height:b.clientHeight}}}}return c},resize:function(){this._resize();return YES},_resize:function(){var a=this.computeWindowSize(),b=this.get("currentWindowSize");this.set("currentWindowSize",a);if(!SC.rectsEqual(a,b)){SC.device.windowSizeDidChange(a);if(this.panes){SC.run(function(){this.panes.invoke("windowSizeDidChange",b,a)},this)}}},hasFocus:NO,focus:function(b){if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");if(!SC.TABBING_ONLY_INSIDE_DOCUMENT&&!SC.browser.isIE8OrLower){var a=SC.RootResponder.responder.get("keyPane");if(a){var c=a.get("nextValidKeyView");if(c){a.makeFirstResponder(c)}}}SC.run(function(){this.set("hasFocus",YES)},this)}return YES},focusin:function(a){this.focus(a)},focusout:function(a){this.blur(a)},blur:function(a){if(this.get("hasFocus")){SC.$("body").addClass("sc-blur").removeClass("sc-focus");SC.run(function(){this.set("hasFocus",NO)},this)}return YES},dragDidStart:function(a){this._mouseDownView=a;this._drag=a},defaultResponder:null,sendAction:function(d,e,c,f,b,a){e=this.targetForAction(d,e,c,f,a);if(e&&e.isResponderContext){return !!e.sendAction(d,c,b,a)}else{return e&&e.tryToPerform(d,c)}},_responderFor:function(d,b,a){var c=d?d.get("defaultResponder"):null;if(d){d=a||d.get("firstResponder")||d;do{if(d.respondsTo(b)){return d}}while((d=d.get("nextResponder")))}if(typeof c===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!c){return null}else{if(c.isResponderContext){return c}else{if(c.respondsTo(b)){return c}else{return null}}}},targetForAction:function(c,f,e,g,a){if(!c||(SC.typeOf(c)!==SC.T_STRING)){return null}if(f){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f)||SC.objectForPropertyPath(f,e)}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(c)){f=null}else{if(SC.typeOf(f[c])!==SC.T_FUNCTION){f=null}}}return f}if(g){f=this._responderFor(g,c,a);if(f){return f}}var b=this.get("keyPane"),d=this.get("mainPane");if(b&&(b!==g)){f=this._responderFor(b,c)}if(!f&&d&&(d!==b)){f=this._responderFor(d,c)}if(!f&&(f=this.get("defaultResponder"))){if(SC.typeOf(f)===SC.T_STRING){f=SC.objectForPropertyPath(f);if(f){this.set("defaultResponder",f)}}if(f&&!f.isResponderContext){if(f.respondsTo&&!f.respondsTo(c)){f=null}else{if(SC.typeOf(f[c])!==SC.T_FUNCTION){f=null}}}}return f},targetViewForEvent:function(a){return a.target?SC.$(a.target).view()[0]:null},sendEvent:function(c,a,d){var e,b;SC.run(function(){if(d){e=d.get("pane")}else{e=this.get("menuPane")||this.get("keyPane")||this.get("mainPane")}b=(e)?e.sendEvent(c,a,d):null},this);return b},listenFor:function(d,c,b,a){b=b?b:this;d.forEach(function(e){var f=b[e];if(f){SC.Event.add(c,e,b,f,null,a)}},this);c=null;return b},setup:function(){this.listenFor(["touchstart","touchmove","touchend","touchcancel"],document);this.listenFor(["keydown","keyup","beforedeactivate","mousedown","mouseup","click","dblclick","mousemove","selectstart","contextmenu"],document).listenFor(["resize"],window);if(SC.browser.isIE8OrLower){this.listenFor(["focusin","focusout"],document)}else{this.listenFor(["focus","blur"],window)}this.listenFor(["webkitAnimationStart","webkitAnimationIteration","webkitAnimationEnd"],document);if(SC.platform.supportsCSSTransitions){this.listenFor(["transitionend",SC.platform.cssPrefix+"TransitionEnd"],document)}if(this.keypress){if(SC.CAPTURE_BACKSPACE_KEY&&SC.browser.mozilla){var b=this;document.onkeypress=function(f){f=SC.Event.normalizeEvent(f);return b.keypress.call(b,f)}}else{SC.Event.add(document,"keypress",this,this.keypress)}}["drag","selectstart"].forEach(function(f){var g=this[f];if(g){if(SC.browser.msie){var e=this;document.body["on"+f]=function(h){return g.call(e,SC.Event.normalizeEvent(event||window.event))};SC.Event.add(window,"unload",this,function(){document.body["on"+f]=null})}else{SC.Event.add(document,f,this,g)}}},this);var a="mousewheel";if(SC.browser.mozilla){if(SC.browser.compareVersion(1,9,1)<0){a="DOMMouseScroll"}else{a="MozMousePixelScroll"}}SC.Event.add(document,a,this,this.mousewheel);this.set("currentWindowSize",this.computeWindowSize());if(SC.browser.mobileSafari){if(SC.platform&&!SC.platform.touch){SC.platform.simulateTouchEvents()}var c=SC.RunLoop.prototype.endRunLoop,d;d=function(){if(c){c.apply(this,arguments)}var j=SC.RootResponder.responder._touches,h,e,k,f,n,o=NO;if(j){for(h in j){if(j[h]._rescuedElement){continue}k=e=j[h].target;while(e&&(e=e.parentNode)&&!o){o=(e===document.body)}if(!o&&k){if(k.parentNode&&k.cloneNode){var m=k.cloneNode(true);k.parentNode.replaceChild(m,k);k.swapNode=m}var g=SC.touchHoldingPen;if(!g){g=SC.touchHoldingPen=document.createElement("div");g.style.display="none";document.body.appendChild(g)}g.appendChild(k);j[h]._rescuedElement=k}}}};SC.RunLoop.prototype.endRunLoop=d}},_touchedViews:{},_touches:{},touchesForView:function(a){if(this._touchedViews[SC.guidFor(a)]){return this._touchedViews[SC.guidFor(a)].touches}},averagedTouchesForView:function(h,g){var n=this.touchesForView(h),b=h._scrr_averagedTouches||(h._scrr_averagedTouches={});if((!n||n.length===0)&&!g){b.x=0;b.y=0;b.d=0;b.touchCount=0}else{var e=this._averagedTouches_touches||(this._averagedTouches_touches=[]);e.length=0;if(n){var d,f=n.length;for(d=0;d<f;d++){e.push(n[d])}}if(g){e.push(g)}var j,c,a=0,p=0,o,m,k=0;f=e.length;for(j=0;j<f;j++){c=e[j];a+=c.pageX;p+=c.pageY}a/=f;p/=f;for(j=0;j<f;j++){c=e[j];o=Math.abs(c.pageX-a);m=Math.abs(c.pageY-p);k+=Math.pow(o*o+m*m,0.5)}k/=f;b.x=a;b.y=p;b.d=k;b.touchCount=f}return b},assignTouch:function(b,a){if(b.hasEnded){throw"Attemt to assign a touch that is already finished."}if(b.view===a){return}if(b.view){this.unassignTouch(b)}if(!this._touchedViews[SC.guidFor(a)]){this._touchedViews[SC.guidFor(a)]={view:a,touches:SC.CoreSet.create([]),touchCount:0};a.set("hasTouch",YES)}b.view=a;this._touchedViews[SC.guidFor(a)].touches.add(b);this._touchedViews[SC.guidFor(a)].touchCount++},unassignTouch:function(c){var a,b;if(!c.view){return}a=c.view;b=this._touchedViews[SC.guidFor(a)];b.touches.remove(c);b.touchCount--;if(b.touchCount<1){a.set("hasTouch",NO);b.view=null;delete this._touchedViews[SC.guidFor(a)]}c.view=undefined},_flushQueuedTouchResponder:function(){if(this._queuedTouchResponder){var a=this._queuedTouchResponder;this._queuedTouchResponder=null;this.makeTouchResponder.apply(this,a)}},makeTouchResponder:function(f,d,c,m){if(this._isMakingTouchResponder){this._queuedTouchResponder=[f,d,c,m];return}this._isMakingTouchResponder=YES;var h=f.touchResponders,b;if(f.touchResponder===d){this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder();return}var a;if(d){a=d.get("pane")}else{a=this.get("keyPane")||this.get("mainPane")}if(h.indexOf(d)<0){if(m){try{d=(a)?a.sendEvent("touchStart",f,d):null}catch(g){SC.Logger.error("Error in touchStart: "+g);d=null}}else{if(d&&((d.get?d.get("acceptsMultitouch"):d.acceptsMultitouch)||!d.hasTouch)){if(!d.touchStart(f)){d=null}}else{}}}if(!c||(h.indexOf(d)>-1&&h[h.length-1]!==d)){this.unassignTouch(f);var j=h.length-1,k=h[j];while(k&&k!==d){b=this.touchesForView(k);if((k.get?k.get("acceptsMultitouch"):k.acceptsMultitouch)||!b){if(k.touchCancelled){k.touchCancelled(f)}}j--;k=h[j];h.pop();f.touchResponder=h[j];f.nextTouchResponder=h[j-1]}}if(d){this.assignTouch(f,d);if(d!==f.touchResponder){h.push(d);f.touchResponder=d;f.nextTouchResponder=h[h.length-2]}}this._isMakingTouchResponder=NO;this._flushQueuedTouchResponder()},captureTouch:function(h,e,g){if(!e){e=this}var f=h.targetView,c=f,d=[],b,a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Received one touch on %@".fmt(f.toString()))}while(c&&(c!==e)){d.unshift(c);c=c.get("nextResponder")}for(a=d.length,b=0;b<a;b++){c=d[b];if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("  -- Checking %@ for captureTouch response".fmt(c.toString()))}if(c.tryToPerform("captureTouch",h)){if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Making %@ touch responder because it returns YES to captureTouch".fmt(c.toString()))}this.makeTouchResponder(h,c,g,YES);return}}if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("   -- Didn't find a view that returned YES to captureTouch, so we're calling touchStart")}this.makeTouchResponder(h,f,g,YES)},endMissingTouches:function(e){var b,a=e.length,d={},c=[];for(b=0;b<a;b++){d[e[b].identifier]=YES}for(b in this._touches){var f=this._touches[b].identifier;if(!d[f]){c.push(this._touches[b])}}for(b=0,a=c.length;b<a;b++){this.endTouch(c[b]);this.finishTouch(c[b])}},_touchCount:0,endTouch:function(b,g,c){if(!g){g="touchEnd"}var a,f,d,e;this.unassignTouch(b);if(b.touchResponder){e=b.touchResponder;f=b.touchResponders;a=f.length-1;d=f[a];while(d){if(d[g]){d[g](b,c)}if(b.touchResponder!==e){break}a--;d=f[a];g="touchCancelled"}}},finishTouch:function(b){var a;this.unassignTouch(b);if(a=b._rescuedElement){if(a.swapNode&&a.swapNode.parentNode){a.swapNode.parentNode.replaceChild(a,a.swapNode)}else{if(a.parentNode===SC.touchHoldingPen){SC.touchHoldingPen.removeChild(a)}}delete b._rescuedElement;a.swapNode=null;a=null}b.touchResponders=null;b.touchResponder=null;b.nextTouchResponder=null;b.hasEnded=YES;if(this._touches[b.identifier]){delete this._touches[b.identifier]}},touchstart:function(a){if(this.ignoreTouchHandle(a)){return YES}var b=NO;SC.run(function(){this.endMissingTouches(a.touches);var e,h=a.changedTouches,d=h.length,g,f,j,c;a.touchContext=this;for(e=0;e<d;e++){j=h[e];c=SC.Touch.create(j,this);if(!c.targetView){continue}if(c.hidesTouchIntercept){b=YES}c.timeStamp=a.timeStamp;this._touches[j.identifier]=c;c.event=a;this.captureTouch(c,this);c.event=null}},this);if(b){return YES}return a.hasCustomEventHandling},touchmove:function(a){if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var c=a.changedTouches,b,p,n,f=c.length,m,k,j,o,g={},e,h,d=NO;if(this._drag){b=SC.Touch.create(a.changedTouches[0],this);this._drag.tryToPerform("mouseDragged",b)}for(n=0;n<f;n++){b=c[n];p=this._touches[b.identifier];if(!p){continue}if(p.hidesTouchIntercept){d=YES}p.pageX=b.pageX;p.pageY=b.pageY;p.clientX=b.clientX;p.clientY=b.clientY;p.screenX=b.screenX;p.screenY=b.screenY;p.timeStamp=a.timeStamp;p.event=a;if(p.touchResponder){m=p.touchResponder;h=SC.guidFor(m);if(!g[h]){g[h]={view:m,touches:[]}}g[h].touches.push(p)}}if(d){a.allowDefault();return YES}for(n in g){m=g[n].view;k=g[n].touches;a.viewChangedTouches=k;j=this.touchesForView(m);o=j.firstObject();a.pageX=o.pageX;a.pageY=o.pageY;a.clientX=o.clientX;a.clientY=o.clientY;a.screenX=o.screenX;a.screenY=o.screenY;a.touchContext=this;m.tryToPerform("touchesDragged",a,j)}c=a.changedTouches;f=c.length;for(n=0;n<f;n++){b=c[n];p=this._touches[b.identifier];if(p){p.event=null}}},this);return a.hasCustomEventHandling},touchend:function(a){var b=NO;if(this.ignoreTouchHandle(a)){return YES}SC.run(function(){var h=a.changedTouches,g,p,n,j=h.length,k,c,f=a.isCancel?"touchCancelled":"touchEnd",m,o,d,e;for(n=0;n<j;n++){g=h[n];g.type="touchend";p=this._touches[g.identifier];if(!p){continue}p.timeStamp=a.timeStamp;p.pageX=g.pageX;p.pageY=g.pageY;p.clientX=g.clientX;p.clientY=g.clientY;p.screenX=g.screenX;p.screenY=g.screenY;p.type="touchend";p.event=a;if(SC.LOG_TOUCH_EVENTS){SC.Logger.info("-- Received touch end")}if(p.hidesTouchIntercept){p.unhideTouchIntercept();b=YES}if(this._drag){this._drag.tryToPerform("mouseUp",g);this._drag=null}this.endTouch(p,f,a);this.finishTouch(p)}},this);if(b){return YES}return a.hasCustomEventHandling},touchcancel:function(a){a.isCancel=YES;this.touchend(a)},ignoreTouchHandle:function(b){if(SC.browser.isMobileSafari){var a=b.target.tagName;if(a==="INPUT"||a==="A"){b.allowDefault();return YES}}return NO},attemptKeyEquivalent:function(b){var d=null;var c=b.commandCodes()[0];if(!c){return NO}var f=this.get("menuPane"),a=this.get("keyPane"),e=this.get("mainPane");if(f){d=f.performKeyEquivalent(c,b);if(d){return d}}if(a){d=a.performKeyEquivalent(c,b);if(d||a.get("isModal")){return d}}if(!d&&e&&(e!==a)){d=e.performKeyEquivalent(c,b);if(d||e.get("isModal")){return d}}return d},_lastModifiers:null,_handleModifierChanges:function(b){var a;a=this._lastModifiers=(this._lastModifiers||{alt:false,ctrl:false,shift:false});var c=false;if(b.altKey!==a.alt){a.alt=b.altKey;c=true}if(b.ctrlKey!==a.ctrl){a.ctrl=b.ctrlKey;c=true}if(b.shiftKey!==a.shift){a.shift=b.shiftKey;c=true}b.modifiers=a;return(c)?(this.sendEvent("flagsChanged",b)?b.hasCustomEventHandling:YES):YES},_isFunctionOrNonPrintableKey:function(a){return !!(a.altKey||a.ctrlKey||a.metaKey||((a.charCode!==a.which)&&SC.FUNCTION_KEYS[a.which]))},_isModifierKey:function(a){return !!SC.MODIFIER_KEYS[a.charCode]},keydown:function(a){if(SC.none(a)){return YES}var e=a.keyCode;if(SC.browser.mozilla&&a.keyCode===9){this.keydownCounter=1}if(e===229){this._IMEInputON=YES;return this.sendEvent("keyDown",a)}if(e===27&&this._drag){this._drag.cancelDrag();this._drag=null;this._mouseDownView=null;return YES}if(SC.browser.mozilla&&(a.which===8)){return true}var b=this._handleModifierChanges(a),d=a.target||a.srcElement,c=(a.which===8)&&!SC.allowsBackspaceToPreviousPage&&(d===document.body);if(this._isModifierKey(a)){return(c?NO:b)}b=YES;if(this._isFunctionOrNonPrintableKey(a)){if(e>=37&&e<=40&&SC.browser.mozilla){return YES}b=this.sendEvent("keyDown",a);if(!b){b=!this.attemptKeyEquivalent(a)}else{b=a.hasCustomEventHandling;if(b){c=NO}}}return c?NO:b},keypress:function(b){var c,e=b.keyCode,f=!!SC.browser.mozilla;if(SC.browser.mozilla&&b.keyCode===9){this.keydownCounter++;if(this.keydownCounter==2){return YES}}if(f&&(b.which===8)){b.which=e;c=this.sendEvent("keyDown",b);return c?(SC.allowsBackspaceToPreviousPage||b.hasCustomEventHandling):YES}else{var d=(e>=37&&e<=40&&f),a=b.charCode;if((a!==undefined&&a===0&&b.keyCode!==9)&&!d){return YES}if(d){b.which=e}return this.sendEvent("keyDown",b)?b.hasCustomEventHandling:YES}},keyup:function(a){if(this._ffevt){this._ffevt=null}var b=this._handleModifierChanges(a);if(this._isModifierKey(a)){return b}if(this._IMEInputON&&a.keyCode===13){a.isIMEInput=YES;this.sendEvent("keyDown",a);this._IMEInputON=NO}return this.sendEvent("keyUp",a)?a.hasCustomEventHandling:YES},beforedeactivate:function(c){var b=c.toElement;if(b&&b.tagName&&b.tagName!=="IFRAME"){var a=SC.$(b).view()[0];if(a&&a.get("blocksIEDeactivate")){return NO}}return YES},mousedown:function(e){if(SC.platform.touch){e.allowDefault();this._lastMouseDownCustomHandling=YES;return YES}this._clickCount+=1;if(!this._lastMouseUpAt||((Date.now()-this._lastMouseUpAt)>250)){this._clickCount=1}else{var d=this._lastMouseDownX-e.clientX,a=this._lastMouseDownY-e.clientY,g=Math.sqrt(d*d+a*a);if(g>8){this._clickCount=1}}e.clickCount=this._clickCount;this._lastMouseDownX=e.clientX;this._lastMouseDownY=e.clientY;var c,b=this.targetViewForEvent(e);if(b){c=b.getPath("pane.firstResponder")}if(c&&c.get("blurOnMouseDown")&&c!==b){c.resignFirstResponder(e)}b=this._mouseDownView=this.sendEvent("mouseDown",e,b);if(b&&b.respondsTo("mouseDragged")){this._mouseCanDrag=YES}var f=b?e.hasCustomEventHandling:YES;this._lastMouseDownCustomHandling=f;return f},mouseup:function(b){var f=NO;if(SC.platform.touch){b.allowDefault();this._lastMouseUpCustomHandling=YES;return YES}if(this._drag){this._drag.tryToPerform("mouseUp",b);this._drag=null}var e=null,a=this._mouseDownView,d=this.targetViewForEvent(b);b.clickCount=this._clickCount;if(a){e=this.sendEvent("mouseUp",b,a);if(!e&&(this._clickCount===2)){e=this.sendEvent("doubleClick",b,a);f=YES}if(!e){e=this.sendEvent("click",b,a);f=YES}}if(!e&&!f){if(this._clickCount===2){e=this.sendEvent("doubleClick",b,d)}if(!e){e=this.sendEvent("click",b,d)}}this._mouseCanDrag=NO;this._mouseDownView=null;this._lastMouseUpAt=Date.now();var c=e?b.hasCustomEventHandling:YES;this._lastMouseUpCustomHandling=c;return c},click:function(a){if(!this._lastMouseUpCustomHandling||!this._lastMouseDownCustomHandling){a.preventDefault();a.stopPropagation();return NO}return YES},dblclick:function(a){if(SC.browser.isIE8OrLower){this._clickCount=2;this.mouseup(a)}},mousewheel:function(b){var a=this.targetViewForEvent(b),c=this.sendEvent("mouseWheel",b,a);return(c)?b.hasCustomEventHandling:YES},_lastHovered:null,mousemove:function(a){if(SC.platform.touch){a.allowDefault();return YES}if(SC.browser.msie){if(this._lastMoveX===a.clientX&&this._lastMoveY===a.clientY){return}}this._lastMoveX=a.clientX;this._lastMoveY=a.clientY;SC.run(function(){if(this._drag){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX||this._lastMouseDownY!==a.clientY){this._drag.tryToPerform("mouseDragged",a)}}else{this._drag.tryToPerform("mouseDragged",a)}}else{var d=this._lastHovered||[],e=[],g,f,b,c=this.targetViewForEvent(a);while(c&&(c!==this)){e.push(c);c=c.get("nextResponder")}for(f=0,b=d.length;f<b;f++){c=d[f];g=c.respondsTo("mouseExited");if(g&&e.indexOf(c)===-1){c.tryToPerform("mouseExited",a)}}for(f=0,b=e.length;f<b;f++){c=e[f];if(d.indexOf(c)!==-1){c.tryToPerform("mouseMoved",a)}else{c.tryToPerform("mouseEntered",a)}}this._lastHovered=e;if(this._mouseDownView){if(SC.browser.msie){if(this._lastMouseDownX!==a.clientX&&this._lastMouseDownY!==a.clientY){this._mouseDownView.tryToPerform("mouseDragged",a)}}else{this._mouseDownView.tryToPerform("mouseDragged",a)}}}},this)},_mouseCanDrag:YES,selectstart:function(b){var c=this.targetViewForEvent(b),a=this.sendEvent("selectStart",b,c);if(c&&c.respondsTo("mouseDragged")){return(a!==null?YES:NO)&&!this._mouseCanDrag}else{return(a!==null?YES:NO)}},drag:function(){return false},contextmenu:function(b){var a=this.targetViewForEvent(b);return this.sendEvent("contextMenu",b,a)},webkitAnimationStart:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidStart",b,a)}catch(c){SC.Logger.warn("Exception during animationDidStart: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationIteration:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidIterate",b,a)}catch(c){SC.Logger.warn("Exception during animationDidIterate: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},webkitAnimationEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("animationDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during animationDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES},transitionEnd:function(b){try{var a=this.targetViewForEvent(b);this.sendEvent("transitionDidEnd",b,a)}catch(c){SC.Logger.warn("Exception during transitionDidEnd: %@".fmt(c));throw c}return a?b.hasCustomEventHandling:YES}});SC.Touch=function(d,a){this.touchContext=a;this.identifier=d.identifier;var c=d.target,b;if(c&&SC.$(c).hasClass("touch-intercept")){d.target.style.webkitTransform="translate3d(0px,-5000px,0px)";c=document.elementFromPoint(d.pageX,d.pageY);if(c){b=SC.$(c).view()[0]}this.hidesTouchIntercept=NO;if(c.tagName==="INPUT"){this.hidesTouchIntercept=d.target}else{d.target.style.webkitTransform="translate3d(0px,0px,0px)"}}else{b=d.target?SC.$(d.target).view()[0]:null}this.targetView=b;this.target=c;this.hasEnded=NO;this.type=d.type;this.clickCount=1;this.view=undefined;this.touchResponder=this.nextTouchResponder=undefined;this.touchResponders=[];this.startX=this.pageX=d.pageX;this.startY=this.pageY=d.pageY;this.clientX=d.clientX;this.clientY=d.clientY;this.screenX=d.screenX;this.screenY=d.screenY};SC.Touch.prototype={unhideTouchIntercept:function(){var a=this.hidesTouchIntercept;if(a){setTimeout(function(){a.style.webkitTransform="translate3d(0px,0px,0px)"},500)}},allowDefault:function(){if(this.event){this.event.hasCustomEventHandling=YES}},preventDefault:function(){if(this.event){this.event.preventDefault()}},stopPropagation:function(){if(this.event){this.event.stopPropagation()}},stop:function(){if(this.event){this.event.stop()}},end:function(){this.touchContext.endTouch(this)},makeTouchResponder:function(b,c,a){this.touchContext.makeTouchResponder(this,b,c,a)},captureTouch:function(a,b){this.touchContext.captureTouch(this,a,b)},touchesForView:function(a){return this.touchContext.touchesForView(a)},touchesForResponder:function(a){return this.touchContext.touchesForView(a)},averagedTouchesForView:function(a,b){return this.touchContext.averagedTouchesForView(a,(b?this:null))}};SC.mixin(SC.Touch,{create:function(b,a){return new SC.Touch(b,a)}});SC.ready(SC.RootResponder,SC.RootResponder.ready=function(){var a;a=SC.RootResponder.responder=SC.RootResponder.create();a.setup()});sc_require("system/core_query");sc_require("system/ready");sc_require("system/root_responder");sc_require("system/platform");SC.PORTRAIT_ORIENTATION="portrait";SC.LANDSCAPE_ORIENTATION="landscape";SC.NO_ORIENTATION="desktop";SC.device=SC.Object.create({orientation:SC.NO_ORIENTATION,isOffline:NO,mouseLocation:function(){var a=SC.RootResponder.responder,c=a._lastMoveX,b=a._lastMoveY;if(SC.empty(c)||SC.empty(b)){return null}return{x:c,y:b}}.property(),init:function(){arguments.callee.base.apply(this,arguments);if(navigator&&navigator.onLine===false){this.set("isOffline",YES)}},setup:function(){var a=SC.RootResponder.responder;a.listenFor(["online","offline"],window,this);this.orientationHandlingShouldChange()},orientationHandlingShouldChange:function(){if(SC.platform.windowSizeDeterminesOrientation){SC.Event.remove(window,"orientationchange",this,this.orientationchange);this.windowSizeDidChange(SC.RootResponder.responder.get("currentWindowSize"))}else{if(SC.platform.supportsOrientationChange){SC.Event.add(window,"orientationchange",this,this.orientationchange);this.orientationchange()}}},windowSizeDidChange:function(a){if(SC.platform.windowSizeDeterminesOrientation){if(!SC.browser.iOS){SC.run(function(){if(SC.platform.touch){if(a.height>=a.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}}else{SC.device.set("orientation",SC.NO_ORIENTATION)}})}else{SC.run(function(){if(a.width===window.screen.width){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})}return YES}return NO},orientationchange:function(a){SC.run(function(){if(window.orientation===0||window.orientation===180){SC.device.set("orientation",SC.PORTRAIT_ORIENTATION)}else{SC.device.set("orientation",SC.LANDSCAPE_ORIENTATION)}})},orientationObserver:function(){var a=SC.$(document.body),b=this.get("orientation");if(b===SC.PORTRAIT_ORIENTATION){a.addClass("portrait")}else{a.removeClass("portrait")}if(b===SC.LANDSCAPE_ORIENTATION){a.addClass("landscape")}else{a.removeClass("landscape")}}.observes("orientation"),online:function(a){this.set("isOffline",NO)},offline:function(a){this.set("isOffline",YES)}});SC.ready(function(){SC.device.setup()});SC.Page=SC.Object.extend({owner:null,get:function(a){var b=this[a];if(b&&b.isClass){this[a]=b=b.create({page:this});if(!this.get("inDesignMode")){b.awake()}return b}else{return arguments.callee.base.apply(this,arguments)}},awake:function(){var b,a;for(a in this){if(!this.hasOwnProperty(a)){continue}b=this[a];if(b&&b.isViewClass){this[a]=b=b.create({page:this})}}return this},getIfConfigured:function(b){var a=this[b];return(a&&a.isViewClass)?null:this.get(b)},loc:function(c){var a,b;for(b in c){if(!c.hasOwnProperty(b)){continue}a=this[b];if(!a||!a.isViewClass){continue}a.loc(c[b])}return this}});SC.Page.design=SC.Page.create;SC.Page.localization=function(a){return a};sc_require("system/builder");SC.MODE_REPLACE="replace";SC.MODE_APPEND="append";SC.MODE_PREPEND="prepend";SC.NON_PIXEL_PROPERTIES=["zIndex","fontWeight","opacity"];SC.COMBO_STYLES={WebkitTransition:["WebkitTransitionProperty","WebkitTransitionDuration","WebkitTransitionDelay","WebkitTransitionTimingFunction"]};SC.RenderContext=SC.Builder.create({SELF_CLOSING:SC.CoreSet.create().addEach(["area","base","basefront","br","hr","input","img","link","meta"]),init:function(e,d){var b,a;if(d){this.prevObject=d;this.strings=d.strings;this.offset=d.length+d.offset}if(!this.strings){this.strings=[]}if(e===undefined){e="div";a=YES}else{if(e==="div"||e==="label"||e==="a"){a=YES}else{if(SC.typeOf(e)===SC.T_STRING){e=e.toLowerCase();a=YES}}}if(a){this._tagName=e;this._needsTag=YES;this.needsContent=YES;var f=this;while(f){f.length++;f=f.prevObject}this.strings.push(null);this._selfClosing=this.SELF_CLOSING.contains(e)}else{this._elem=e;this._needsTag=NO;this.length=0;this.needsContent=NO}return this},strings:null,offset:0,length:0,updateMode:SC.MODE_REPLACE,needsContent:NO,get:function(b){var a=this.strings||[];return(b===undefined)?a.slice(this.offset,this.length):a[b+this.offset]},push:function(d){var b=this.strings,a=arguments.length;if(!b){this.strings=b=[]}if(a>1){b.push.apply(b,arguments)}else{b.push(d)}var e=this;while(e){e.length+=a;e=e.prevObject}this.needsContent=YES;return this},text:function(c){var b=arguments.length,a=0;for(a=0;a<b;a++){this.push(SC.RenderContext.escapeHTML(arguments[a]))}return this},join:function(b){if(this._needsTag){this.end()}var a=this.strings;return a?a.join(b||""):""},begin:function(a){return SC.RenderContext(a,this)},element:function(){return this._elem?this._elem:SC.$(this.join())[0]},remove:function(a){if(!a){return}var b,c=this._elem;if(!c||!c.removeChild){return}b=document.getElementById(a);if(b){b=c.removeChild(b);b=null}},update:function(){var c=this._elem,g=this.updateMode,e,d,a,f,b;this._innerHTMLReplaced=NO;if(!c){return}e=this.$();if(this.length>0){this._innerHTMLReplaced=YES;if(g===SC.MODE_REPLACE){e.html(this.join())}else{a=c.cloneNode(false);a.innerHTML=this.join();f=a.firstChild;while(f){b=f.nextSibling;c.insertBefore(f,b);f=b}f=b=a=null}}if(this._idDidChange&&(d=this._id)){e.attr("id",d)}jQuery.Buffer.flush();c=this._elem=null;return this.prevObject||this},_DEFAULT_ATTRS:{},end:function(){var p="",b="",d,n,k,h,m=this._attrs,e=this._classNames,a=this._id,o=this._styles,j,g;p="<"+this._tagName;if(m||e||o||a){if(!m){m=this._DEFAULT_ATTRS}if(a){m.id=a}if(e){m["class"]=e.join(" ")}if(o){for(k in o){if(!o.hasOwnProperty(k)){continue}h=o[k];if(h===null){continue}if(typeof h===SC.T_NUMBER&&!SC.NON_PIXEL_PROPERTIES.contains(k)){h+="px"}b=b+this._dasherizeStyleName(k)+": "+h+"; "}m.style=b}p=p+" ";for(k in m){if(!m.hasOwnProperty(k)){continue}h=m[k];if(h===null){continue}p=p+k+'="'+h+'" '}if(m===this._DEFAULT_ATTRS){delete m.style;delete m["class"];delete m.id}}j=this.strings;g=(this._selfClosing===NO)?NO:(this.length===1);p=p+(g?" />":">");j[this.offset]=p;if(!g){j.push("</"+this._tagName+">");var f=this;while(f){f.length++;f=f.prevObject}}this._elem=null;return this.prevObject||this},tag:function(a,b){return this.begin(a,b).end()},tagName:function(a){if(a===undefined){if(!this._tagName&&this._elem){this._tagName=this._elem.tagName}return this._tagName}else{this._tagName=a;this._tagNameDidChange=YES;return this}},id:function(a){if(a===undefined){if(!this._id&&this._elem){this._id=this._elem.id}return this._id}else{this._id=a;this._idDidChange=YES;return this}},classNames:function(b,a){if(this._elem){if(b){this.$().resetClassNames().addClass(b);return this}else{return this.$().attr("class").split(" ")}}if(b===undefined){if(this._cloneClassNames){this._classNames=(this._classNames||[]).slice();this._cloneClassNames=NO}if(!this._classNames){this._classNames=[]}return this._classNames}else{this._classNames=b;this._cloneClassNames=a||NO;this._classNamesDidChange=YES;return this}},hasClass:function(a){if(this._elem){return this.$().hasClass(a)}return this.classNames().indexOf(a)>=0},addClass:function(f){if(f===undefined||f===null){SC.Logger.warn("You are adding an undefined or empty class"+this.toString());return this}if(this._elem){if(SC.typeOf(f)===SC.T_STRING){this.$().addClass(f)}else{var c,b=f.length;for(c=0;c<b;c++){this.$().addClass(f[c])}}return this}var g=this.classNames();if(SC.typeOf(f)===SC.T_STRING){if(g.indexOf(f)<0){g.push(f);this._classNamesDidChange=YES}}else{var d;for(var e=0,a=f.length;e<a;e++){d=f[e];if(g.indexOf(d)<0){g.push(d);this._classNamesDidChange=YES}}}return this},removeClass:function(b){if(this._elem){this.$().removeClass(b);return this}var c=this._classNames,a;if(c&&(a=c.indexOf(b))>=0){if(this._cloneClassNames){c=this._classNames=c.slice();this._cloneClassNames=NO}c[a]=null;this._classNamesDidChange=YES}return this},resetClassNames:function(){if(this._elem){this.$().resetClassNames();return this}this._classNames=[];this._classNamesDidChange=YES;return this},setClass:function(d,c){if(this._elem){this.$().setClass(d,c);return this}var f,a,b,e;if(c!==undefined){return c?this.addClass(d):this.removeClass(d)}else{f=this._classNames;if(!f){f=this._classNames=[]}if(this._cloneClassNames){f=this._classNames=f.slice();this._cloneClassNames=NO}e=NO;for(b in d){if(!d.hasOwnProperty(b)){continue}a=f.indexOf(b);if(d[b]){if(a<0){f.push(b);e=YES}}else{if(a>=0){f[a]=null;e=YES}}}if(e){this._classNamesDidChange=YES}}return this},_STYLE_REGEX:/-?\s*([^:\s]+)\s*:\s*([^;]+)\s*;?/g,styles:function(d,e){if(this._elem){if(d){this.$().resetStyles().css(d)}return this.$().styles()}var a,c,b;if(d===undefined){if(!this._styles&&this._elem){a=this.$().attr("style");if(a&&(a=a.toString()).length>0){if(SC.browser.msie){a=a.toLowerCase()}d={};c=this._STYLE_REGEX;c.lastIndex=0;while(b=c.exec(a)){d[this._camelizeStyleName(b[1])]=b[2]}this._styles=d;this._cloneStyles=NO}else{this._styles={}}}else{if(!this._styles){this._styles={}}else{if(this._cloneStyles){this._styles=SC.clone(this._styles);this._cloneStyles=NO}}}return this._styles}else{this._styles=d;this._cloneStyles=e||NO;this._stylesDidChange=YES;return this}},_deleteComboStyles:function(e,d){var g=SC.COMBO_STYLES[d],f=NO,c;if(g){for(var a=0,b=g.length;a<b;a++){c=g[a];if(e[c]){delete e[c];f=YES}}}return f},resetStyles:function(){this.styles({});return this},addStyle:function(a,e){if(this._elem){this.$().css(a,e);return this}var b,d=NO,c=this.styles();if(typeof a===SC.T_STRING){if(e===undefined){return c[a]}else{d=this._deleteComboStyles(c,a);if(c[a]!==e){c[a]=e;d=YES}if(d){this._stylesDidChange=YES}}}else{for(b in a){if(!a.hasOwnProperty(b)){continue}d=d||this._deleteComboStyles(c,b);e=a[b];if(c[b]!==e){c[b]=e;d=YES}}if(d){this._stylesDidChange=YES}}return this},removeStyle:function(a){if(this._elem){this.$().css(a,null);return this}if(!this._styles){return this}var b=this.styles();if(b[a]){b[a]=null;this._stylesDidChange=YES}},attr:function(a,e){if(this._elem){this.$().attr(a,e);return this}var c,b=this._attrs,d=NO;if(!b){this._attrs=b={}}if(typeof a===SC.T_STRING){if(e===undefined){return b[a]}else{if(b[a]!==e){b[a]=e;this._attrsDidChange=YES}}}else{for(c in a){if(!a.hasOwnProperty(c)){continue}e=a[c];if(b[c]!==e){b[c]=e;d=YES}}if(d){this._attrsDidChange=YES}}return this},$:function(c){var a,b=this._elem;a=!b?SC.$.buffer([]):(c===undefined)?SC.$.buffer(b):SC.$.buffer(c,b);b=null;return a},_camelizeStyleName:function(a){var b=a.match(/^-(webkit|moz|o)-/),c=SC.String.camelize(a);if(b){return c.substr(0,1).toUpperCase()+c.substr(1)}else{return c}},_dasherizeStyleName:function(a){var b=SC.String.dasherize(a);if(b.match(/^(webkit|moz|ms|o)-/)){b="-"+b}return b}});SC.RenderContext.fn.html=SC.RenderContext.fn.push;SC.RenderContext.fn.css=SC.RenderContext.fn.addStyle;(function(){var b=/[&<>]/g,a=function(c){switch(c){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;"}};SC.RenderContext.escapeHTML=function(c){if(!c){return""}return c.replace(b,a)}})();SC.SelectionSet=SC.Object.extend(SC.Enumerable,SC.Freezable,SC.Copyable,{isSelectionSet:YES,length:function(){var a=0,b=this._sets,c=this._objects;if(c){a+=c.get("length")}if(b){b.forEach(function(d){a+=d.get("length")})}return a}.property().cacheable(),sources:function(){var c=[],d=this._sets,b=d?d.length:0,a,f,e;for(a=0;a<b;a++){f=d[a];if(f&&f.get("length")>0&&f.source){c.push(f.source)}}return c}.property().cacheable(),indexSetForSource:function(e){if(!e||!e.isSCArray){return null}var b=this._indexSetCache,d=this._objects,c,a;if(!b){b=this._indexSetCache={}}c=b[SC.guidFor(e)];if(c&&c._sourceRevision&&(c._sourceRevision!==e.propertyRevision)){c=null}if(!c){c=this._indexSetForSource(e,NO);if(c&&c.get("length")===0){c=null}if(d){if(c){c=c.copy()}d.forEach(function(f){if((a=e.indexOf(f))>=0){if(!c){c=SC.IndexSet.create()}c.add(a)}},this)}if(c){c=b[SC.guidFor(e)]=c.frozenCopy();c._sourceRevision=e.propertyRevision}}return c},_indexSetForSource:function(f,g){if(g===undefined){g=YES}var d=SC.guidFor(f),c=this[d],e=this._sets,a=e?e.length:0,b=null;if(c>=a){c=null}if(SC.none(c)){if(g&&!this.isFrozen){this.propertyWillChange("sources");if(!e){e=this._sets=[]}b=e[a]=SC.IndexSet.create();b.source=f;this[d]=a;this.propertyDidChange("sources")}}else{b=e?e[c]:null}return b},add:function(a,b,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var g,f,k,j,c,e,h,m;if(b===undefined&&d===undefined){if(!a){throw"Must pass params to SC.SelectionSet.add()"}if(a.isIndexSet){return this.add(a.source,a)}if(a.isSelectionSet){g=a._sets;m=a._objects;f=g?g.length:0;this.beginPropertyChanges();for(k=0;k<f;k++){j=g[k];if(j&&j.get("length")>0){this.add(j.source,j)}}if(m){this.addObjects(m)}this.endPropertyChanges();return this}}j=this._indexSetForSource(a,YES);c=this.get("length");h=j.get("length");e=c-h;j.add(b,d);this._indexSetCache=null;e+=j.get("length");if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(h===0){this.notifyPropertyChange("sources")}}return this},remove:function(a,b,d){if(this.isFrozen){throw SC.FROZEN_ERROR}var g,f,k,j,c,e,h,m;if(b===undefined&&d===undefined){if(!a){throw"Must pass params to SC.SelectionSet.remove()"}if(a.isIndexSet){return this.remove(a.source,a)}if(a.isSelectionSet){g=a._sets;m=a._objects;f=g?g.length:0;this.beginPropertyChanges();for(k=0;k<f;k++){j=g[k];if(j&&j.get("length")>0){this.remove(j.source,j)}}if(m){this.removeObjects(m)}this.endPropertyChanges();return this}}j=this._indexSetForSource(a,YES);c=this.get("length");e=c-j.get("length");if(j&&(m=this._objects)){if(d!==undefined){b=SC.IndexSet.create(b,d);d=undefined}m.forEach(function(n){k=a.indexOf(n);if(b.contains(k)){m.remove(n);e--}},this)}j.remove(b,d);h=j.get("length");e+=h;this._indexSetCache=null;if(e!==c){this.propertyDidChange("length");this.enumerableContentDidChange();if(h===0){this.notifyPropertyChange("sources")}}return this},contains:function(b,d,a){if(d===undefined&&a===undefined){return this.containsObject(b)}var c=this.indexSetForSource(b);if(!c){return NO}return c.contains(d,a)},intersects:function(b,d,a){var c=this.indexSetForSource(b,NO);if(!c){return NO}return c.intersects(d,a)},_TMP_ARY:[],addObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.addObjects(c);c.length=0;return a},addObjects:function(a){var d=this._objects,b,c;if(!d){d=this._objects=SC.CoreSet.create()}b=d.get("length");d.addEach(a);c=d.get("length");this._indexSetCache=null;if(c!==b){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},removeObject:function(b){var c=this._TMP_ARY,a;c[0]=b;a=this.removeObjects(c);c.length=0;return a},removeObjects:function(b){var e=this._objects,c,d,a;if(!e){return this}c=e.get("length");e.removeEach(b);d=e.get("length");if(a=this._sets){a.forEach(function(f){c+=f.get("length");f.removeObjects(b);d+=f.get("length")},this)}this._indexSetCache=null;if(d!==c){this.propertyDidChange("length");this.enumerableContentDidChange()}return this},containsObject:function(c){var e=this._objects;if(e&&e.contains(c)){return YES}var d=this._sets,b=d?d.length:0,a,f;for(a=0;a<b;a++){f=d[a];if(f&&f.indexOf(c)>=0){return YES}}return NO},constrain:function(d){var e,b,a,c;this.beginPropertyChanges();this.get("sources").forEach(function(f){if(f===d){return}var g=this._indexSetForSource(d,NO);if(g){this.remove(d,g)}},this);e=this._indexSetForSource(d,NO);if(e&&((a=e.get("max"))>(b=d.get("length")))){this.remove(d,b,a-b)}if(c=this._objects){c.forEach(function(f){if(d.indexOf(f)<0){this.removeObject(f)}},this)}this.endPropertyChanges();return this},isEqual:function(g){var f,d,b,a,c,e;if(!g||!g.isSelectionSet){return NO}if(g===this){return YES}if((this._sets===g._sets)&&(this._objects===g._objects)){return YES}if(this.get("length")!==g.get("length")){return NO}f=this._objects;d=g._objects;if(f||d){if((f?f.get("length"):0)!==(d?d.get("length"):0)){return NO}if(f&&!f.isEqual(d)){return NO}}c=this.get("sources");a=c.get("length");for(b=0;b<a;b++){e=c.objectAt(b);f=this._indexSetForSource(e,NO);d=this._indexSetForSource(e,NO);if(!!d!==!!f){return NO}if(f&&!f.isEqual(d)){return NO}}return YES},clear:function(){if(this.isFrozen){throw SC.FROZEN_ERROR}if(this._sets){this._sets.length=0}if(this._objects){this._objects=null}this._indexSetCache=null;this.propertyDidChange("length");this.enumerableContentDidChange();this.notifyPropertyChange("sources");return this},copy:function(){var c=this.constructor.create(),d=this._sets,b=d?d.length:0,a,e;if(d&&b>0){d=c._sets=d.slice();for(a=0;a<b;a++){if(!(e=d[a])){continue}e=d[a]=e.copy();c[SC.guidFor(e.source)]=a}}if(this._objects){c._objects=this._objects.copy()}return c},freeze:function(){if(this.get("isFrozen")){return this}var a=this._sets,b=a?a.length:0,c;while(--b>=0){c=a[b];if(c){c.freeze()}}if(this._objects){this._objects.freeze()}this.set("isFrozen",YES);return this},toString:function(){var a=this._sets||[];a=a.map(function(b){return b.toString().replace("SC.IndexSet",SC.guidFor(b.source))},this);if(this._objects){a.push(this._objects.toString())}return"SC.SelectionSet:%@<%@>".fmt(SC.guidFor(this),a.join(","))},firstObject:function(){var b=this._sets,c=this._objects;if(b&&b.get("length")>0){var e=b?b[0]:null,d=e?e.source:null,a=e?e.firstObject():-1;if(d&&a>=0){return d.objectAt(a)}}return c?c.firstObject():undefined}.property(),nextObject:function(c,e,b){var d,a;if(c===0){d=b.objects=[];this.forEach(function(f){d.push(f)},this);b.max=d.length}d=b.objects;a=d[c];if(c+1>=b.max){b.objects=b.max=null}return a},forEach:function(g,e){var c=this._sets,d=this._objects,b=c?c.length:0,f,a;for(a=0;a<b;a++){f=c[a];if(f){f.forEachObject(g,e)}}if(d){d.forEach(g,e)}return this}});SC.SelectionSet.prototype.clone=SC.SelectionSet.prototype.copy;SC.SelectionSet.EMPTY=SC.SelectionSet.create().freeze();sc_require("mixins/delegate_support");SC.SparseArray=SC.Object.extend(SC.Observable,SC.Enumerable,SC.Array,SC.DelegateSupport,{_requestingLength:0,_requestingIndex:0,length:function(){var a=this.delegate;if(a&&SC.none(this._length)&&a.sparseArrayDidRequestLength){this._requestingLength++;a.sparseArrayDidRequestLength(this);this._requestingLength--}return this._length||0}.property().cacheable(),provideLength:function(b){var a;if(SC.none(b)){this._sa_content=null}if(b!==this._length){a=this._length;this._length=b;if(this._requestingLength<=0){this.arrayContentDidChange(0,a||0,b||0)}}return this},rangeWindowSize:1,requestedRangeIndex:null,init:function(){arguments.callee.base.apply(this,arguments);this.requestedRangeIndex=[];this._TMP_PROVIDE_ARRAY=[];this._TMP_PROVIDE_RANGE={length:1};this._TMP_RANGE={}},objectAt:function(a,d){var c=this._sa_content,b;if(!c){c=this._sa_content=[]}if((b=c[a])===undefined){if(!d){this.requestIndex(a)}b=c[a]}return b},definedIndexes:function(d){var c=SC.IndexSet.create(),e=this._sa_content,b,a;if(!e){return c.freeze()}if(d){d.forEach(function(f){if(e[f]!==undefined){c.add(f)}})}else{a=e.length;for(b=0;b<a;b++){if(e[b]!==undefined){c.add(b)}}}return c.freeze()},_TMP_RANGE:{},requestIndex:function(b){var c=this.delegate;if(!c){return this}var a=this.get("rangeWindowSize"),e=b;if(a>1){e=e-Math.floor(e%a)}if(a<1){a=1}this._requestingIndex++;if(c.sparseArrayDidRequestRange){var d=this._TMP_RANGE;if(this.wasRangeRequested(e)===-1){d.start=e;d.length=a;this.requestedRangeIndex.push(e);c.sparseArrayDidRequestRange(this,d)}}else{if(c.sparseArrayDidRequestIndex){while(--a>=0){c.sparseArrayDidRequestIndex(this,e+a)}}}this._requestingIndex--;return this},wasRangeRequested:function(c){var b,a;for(b=0,a=this.requestedRangeIndex.length;b<a;b++){if(this.requestedRangeIndex[b]===c){return b}}return -1},rangeRequestCompleted:function(b){var a=this.wasRangeRequested(b);if(a>=0){this.requestedRangeIndex.removeAt(a,1);return YES}return NO},provideObjectsInRange:function(b,e){var c=this._sa_content;if(!c){c=this._sa_content=[]}var d=b.start,a=b.length;while(--a>=0){c[d+a]=e.objectAt(a)}if(this._requestingIndex<=0){this.arrayContentDidChange(b.start,b.length,b.length)}return this},provideObjectAtIndex:function(c,b){var d=this._TMP_PROVIDE_ARRAY,a=this._TMP_PROVIDE_RANGE;d[0]=b;a.start=c;return this.provideObjectsInRange(a,d)},objectsDidChangeInRange:function(a){var b=this._sa_content;if(b){if(a.start===0&&SC.maxRange(a)>=b.length){this._sa_content=null}else{var d=a.start,c=Math.min(d+a.length,b.length);while(--c>=d){b[c]=undefined}}}this.arrayContentDidChange(a.start,a.length,a.length);return this},indexOf:function(c){var a=this.delegate;if(a&&a.sparseArrayDidRequestIndexOf){return a.sparseArrayDidRequestIndexOf(this,c)}else{var b=this._sa_content;if(!b){b=this._sa_content=[]}return b.indexOf(c)}},replace:function(b,g,e){e=e||[];var c=this.delegate;if(c){if(!c.sparseArrayShouldReplace||!c.sparseArrayShouldReplace(this,b,g,e)){return this}}var d=this._sa_content;if(!d){d=this._sa_content=[]}d.replace(b,g,e);var a=e?(e.get?e.get("length"):e.length):0;var f=a-g;this.arrayContentWillChange(b,g,a);if(!SC.none(this._length)){this.propertyWillChange("length");this._length+=f;this.propertyDidChange("length")}this.arrayContentDidChange(b,g,a);this.enumerableContentDidChange(b,g,f);return this},reset:function(){var a;this._sa_content=null;a=this._length;this._length=null;this.arrayContentDidChange(0,a,0);this.invokeDelegateMethod(this.delegate,"sparseArrayDidReset",this);return this}});SC.SparseArray.array=function(a){return this.create({_length:a||0})};SC.Timer=SC.Object.extend({target:null,action:null,isPooled:NO,interval:0,startTime:null,repeats:NO,until:null,isPaused:NO,isScheduled:NO,isValid:YES,lastFireTime:0,fireTime:function(){if(!this.get("isValid")){return -1}var e=this.get("startTime");if(!e||e===0){return -1}var a=this.get("interval"),c=this.get("lastFireTime");if(c<e){c=e}var b;if(this.get("repeats")){if(a===0){b=c}else{b=e+(Math.floor((c-e)/a)+1)*a}}else{b=e+a}var d=this.get("until");if(d&&d>0&&b>d){b=d}return b}.property("interval","startTime","repeats","until","isValid","lastFireTime").cacheable(),schedule:function(){if(!this.get("isValid")){return this}this.beginPropertyChanges();if(!this.startTime){this.set("startTime",SC.RunLoop.currentRunLoop.get("startTime"))}var a=this.get("fireTime"),b=this.get("lastFireTime");if(a>=b){this.set("isScheduled",YES);SC.RunLoop.currentRunLoop.scheduleTimer(this,a)}this.endPropertyChanges();return this},invalidate:function(){this.beginPropertyChanges();this.set("isValid",NO);var a=SC.RunLoop.currentRunLoop;if(a){a.cancelTimer(this)}this.action=this.target=null;this.endPropertyChanges();if(this.get("isPooled")){SC.Timer.returnTimerToPool(this)}return this},fire:function(){var b=Date.now();this.set("lastFireTime",b);var a=this.get("fireTime");if(!this.get("isPaused")){this.performAction()}if(a>b){this.schedule()}else{this.invalidate()}},performAction:function(){var a=SC.typeOf(this.action);if(a==SC.T_FUNCTION){this.action.call((this.target||this),this)}else{if(a===SC.T_STRING){if(this.action.indexOf(".")>=0){var e=this.action.split(".");var c=e.pop();var d=SC.objectForPropertyPath(e,window);var b=d.get?d.get(c):d[c];if(b&&SC.typeOf(b)==SC.T_FUNCTION){b.call(d,this)}else{throw"%@: Timer could not find a function at %@".fmt(this,this.action)}}else{SC.RootResponder.responder.sendAction(this.action,this.target,this)}}}},init:function(){arguments.callee.base.apply(this,arguments);if(this.startTime instanceof Date){this.startTime=this.startTime.getTime()}if(this.until instanceof Date){this.until=this.until.getTime()}},RESET_DEFAULTS:{target:null,action:null,isPooled:NO,isPaused:NO,isScheduled:NO,isValid:YES,interval:0,repeats:NO,until:null,startTime:null,lastFireTime:0},reset:function(b){if(!b){b=SC.EMPTY_HASH}this.propertyWillChange("fireTime");var c=this.RESET_DEFAULTS;for(var a in c){if(!c.hasOwnProperty(a)){continue}this[a]=SC.none(b[a])?c[a]:b[a]}this.propertyDidChange("fireTime");return this},removeFromTimerQueue:function(c){var b=this._timerQueuePrevious,a=this._timerQueueNext;if(!b&&!a&&c!==this){return c}if(b){b._timerQueueNext=a}if(a){a._timerQueuePrevious=b}this._timerQueuePrevious=this._timerQueueNext=null;return(c===this)?a:c},scheduleInTimerQueue:function(c,b){this._timerQueueRunTime=b;var a=c;var d=null;while(a&&a._timerQueueRunTime<b){d=a;a=a._timerQueueNext}if(d){d._timerQueueNext=this;this._timerQueuePrevious=d}if(a){a._timerQueuePrevious=this;this._timerQueueNext=a}return(a===c)?this:c},collectExpiredTimers:function(c,a){if(this._timerQueueRunTime>a){return this}c.push(this);var b=this._timerQueueNext;this._timerQueueNext=null;if(b){b._timerQueuePrevious=null}return b?b.collectExpiredTimers(c,a):null}});SC.Timer.schedule=function(a){var b;if(!a||SC.none(a.isPooled)||a.isPooled){b=this.timerFromPool(a)}else{b=this.create(a)}return b.schedule()};SC.Timer.timerFromPool=function(a){var b=this._timerPool;if(!b){b=this._timerPool=[]}var c=b.pop();if(!c){c=this.create()}return c.reset(a)};SC.Timer.returnTimerToPool=function(a){if(!this._timerPool){this._timerPool=[]}this._timerPool.push(a);return this};sc_require("system/browser");SC.mixin({normalizeURL:function(a){if(a.slice(0,1)=="/"){a=window.location.protocol+"//"+window.location.host+a}else{if((a.slice(0,5)=="http:")||(a.slice(0,6)=="https:")){}else{a=window.location.href+"/"+a}}return a},isPercentage:function(a){return(a<1&&a>0)},minX:function(a){return a.x||0},maxX:function(a){return(a.x||0)+(a.width||0)},midX:function(a){return(a.x||0)+((a.width||0)/2)},minY:function(a){return a.y||0},maxY:function(a){return(a.y||0)+(a.height||0)},midY:function(a){return(a.y||0)+((a.height||0)/2)},centerX:function(b,a){return(a.width-b.width)/2},centerY:function(b,a){return(a.height-b.height)/2},offset:function(d,c){var f,b,h,a;c=c||"document";if(c==="parent"){a=jQuery(d).position()}else{a=jQuery(d).offset();if(SC.browser.mobileSafari){f=navigator.userAgent;b=f.indexOf("Mobile/");h=f.substring(b+7,b+9);if(parseInt(SC.browser.mobileSafari,0)<=532||(h<="8A")){a.left-=window.pageXOffset;a.top-=window.pageYOffset}}if(c==="viewport"){if(SC.browser.isIE8OrLower){a.left-=$(window).scrollLeft();a.top-=$(window).scrollTop()}else{a.left-=window.pageXOffset;a.top-=window.pageYOffset}}}try{a.x=a.left;a.y=a.top}catch(g){a={x:a.left,y:a.top}}delete a.left;delete a.top;return a},viewportOffset:function(b){console.warn("SC.viewportOffset() has been deprecated in favor of SC.offset().  Please use SC.offset() from here on.");var a=SC.offset(b,"viewport");return{x:a.left,y:a.top}}});SC.mixin({ZERO_POINT:{x:0,y:0},pointInRect:function(a,b){return(a.x>=SC.minX(b))&&(a.y>=SC.minY(b))&&(a.x<=SC.maxX(b))&&(a.y<=SC.maxY(b))},rectsEqual:function(b,a,c){if(!b||!a){return(b==a)}if(!c&&c!==0){c=0.1}if((b.y!=a.y)&&(Math.abs(b.y-a.y)>c)){return NO}if((b.x!=a.x)&&(Math.abs(b.x-a.x)>c)){return NO}if((b.width!=a.width)&&(Math.abs(b.width-a.width)>c)){return NO}if((b.height!=a.height)&&(Math.abs(b.height-a.height)>c)){return NO}return YES},intersectRects:function(b,a){var c={x:Math.max(SC.minX(b),SC.minX(a)),y:Math.max(SC.minY(b),SC.minY(a)),width:Math.min(SC.maxX(b),SC.maxX(a)),height:Math.min(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},unionRects:function(b,a){var c={x:Math.min(SC.minX(b),SC.minX(a)),y:Math.min(SC.minY(b),SC.minY(a)),width:Math.max(SC.maxX(b),SC.maxX(a)),height:Math.max(SC.maxY(b),SC.maxY(a))};c.width=Math.max(0,c.width-c.x);c.height=Math.max(0,c.height-c.y);return c},cloneRect:function(a){return{x:a.x,y:a.y,width:a.width,height:a.height}},stringFromRect:function(a){if(!a){return"(null)"}else{return"{x:"+a.x+", y:"+a.y+", width:"+a.width+", height:"+a.height+"}"}}});sc_require("views/template");SC._BindableSpan=SC.TemplateView.extend({tagName:"span",shouldDisplayFunc:null,preserveContext:NO,displayTemplate:null,inverseTemplate:null,property:null,render:function(c){var h=this.get("shouldDisplayFunc"),f=this.get("property"),e=this.get("preserveContext"),d=this.get("previousContext");var b=this.get("inverseTemplate"),g=this.get("displayTemplate");var a=d.getPath(f);if(h(a)){this.set("template",g);if(e){this.set("context",d)}else{if(g){this.set("context",a)}else{c.push(Handlebars.Utils.escapeExpression(a));return}}}else{if(b){this.set("template",b);if(e){this.set("context",d)}else{this.set("context",a)}}else{this.set("template",function(){return""})}}return arguments.callee.base.apply(this,arguments)},rerender:function(){var b,a,e,f;e=this.get("childViews");a=e.get("length");for(b=a-1;b>=0;b--){f=e[b];f.$().remove();f.removeFromParent();f.destroy()}var c=this.renderContext(this.get("tagName"));var d;this.renderToContext(c);d=c.element();this.$().replaceWith(d);this.set("layer",d);this._notifyDidCreateLayer()}});sc_require("views/template");SC.TemplateCollectionView=SC.TemplateView.extend({tagName:"ul",content:null,template:SC.Handlebars.compile(""),emptyView:null,init:function(){var a=arguments.callee.base.apply(this,arguments);this._sctcv_contentDidChange();return a},didCreateLayer:function(){if(this._sctcv_layerCreated){return}this._sctcv_layerCreated=true;var a=this.get("content");if(a){this.arrayContentDidChange(0,0,a.get("length"))}},itemView:"SC.TemplateView",itemViewTemplate:null,itemViewTemplateName:null,inverseTemplate:function(b,d){if(d!==undefined){return d}var a=this.get("inverseTemplateName"),c=this.get("templates").get(a);if(!c){return function(){return""}}return c}.property("inverseTemplateName").cacheable(),inverseTemplateName:null,itemContext:null,itemViewClass:function(){var c=this.get("itemView");var a=this.get("itemViewTemplate");var d=this.get("itemViewTemplateName");var b={};if(SC.typeOf(c)===SC.T_STRING){c=SC.objectForPropertyPath(c)}if(!a&&d){a=this.get("templates").get(d)}if(a){b.template=a}if(this.get("tagName")==="ul"||this.get("tagName")==="ol"){b.tagName="li"}else{if(this.get("tagName")==="table"||this.get("tagName")==="thead"||this.get("tagName")==="tbody"){b.tagName="tr"}}return c.extend(b)}.property("itemView").cacheable(),_sctcv_contentDidChange:function(){this.$().empty();var c=this._content,a=0;var d=this.get("content"),b=0;if(c){c.removeArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});a=c.get("length")}if(d){d.addArrayObservers({target:this,willChange:"arrayContentWillChange",didChange:"arrayContentDidChange"});b=d.get("length")}this.arrayContentWillChange(0,a,b);this._content=this.get("content");this.arrayContentDidChange(0,a,b)}.observes("content"),arrayContentWillChange:function(h,d,f){if(!this.get("layer")){return}var c=this.get("emptyView");if(c){c.$().remove();c.removeFromParent()}var e=this.get("childViews"),g,b,a;a=e.get("length");for(b=h+d-1;b>=h;b--){g=e[b];g.$().remove();g.removeFromParent();g.destroy()}},arrayContentDidChange:function(e,n,v){if(!this.get("layer")){return}var o=this.get("content"),f=this.get("itemViewClass"),q=this.get("childViews"),a=[],t,u,h,r,g,s,m,k,p;if(o){var j=o.slice(e,e+v);h=this.get("itemViewOptions")||{};r=this.$();g=r.find("li")[e-1]||null;p=j.get("length");var d={id:h.id,"class":h["class"],classBinding:h.classBinding};t=function(w){arguments.callee.base.apply(this,arguments);SC.Handlebars.ViewHelper.applyAttributes(d,this,w)};h=SC.clone(h);delete h.id;delete h["class"];delete h.classBinding;for(k=0;k<p;k++){s=j.objectAt(k);u=this.createChildView(f.extend(h,{content:s,render:t,tagName:f.prototype.tagName||this.get("itemTagName")}));var c=u.get("contextProperty");if(c){u.set("context",u.get(c))}m=u.createLayer().$();if(!g){r.append(m)}else{m.insertAfter(g)}g=m;a.push(u)}q.replace(e,0,a)}var b=this.get("inverseTemplate");if(q.get("length")===0&&b){u=this.createChildView(SC.TemplateView.extend({template:b,content:this}));this.set("emptyView",u);u.createLayer().$().appendTo(r);this.childViews=[u]}this.invokeLast("invalidateFrame")},itemTagName:function(){switch(this.get("tagName")){case"ul":case"ol":return"li";case"table":case"thead":case"tbody":case"tfoot":return"tr"}}.property("tagName"),invalidateFrame:function(){this.notifyPropertyChange("frame")}});sc_require("panes/pane");sc_require("panes/keyboard");sc_require("panes/layout");sc_require("panes/manipulation");sc_require("panes/visibility");SC.MainPane=SC.Pane.extend({layout:{top:0,left:0,bottom:0,right:0,minHeight:200,minWidth:200},init:function(){var c={x:0,y:0,width:1000,height:1000},a=this.get("layout"),b=false;if(document&&document.body){c.width=document.body.clientWidth;c.height=document.body.clientHeight;if(a.minHeight||a.minWidth){if((a.minHeight&&c.height<a.minHeight)||(a.minWidth&&c.width<a.minWidth)){SC.bodyOverflowArbitrator.requestVisible(this)}else{SC.bodyOverflowArbitrator.requestHidden(this)}}}arguments.callee.base.apply(this,arguments)},paneDidAttach:function(){var b=arguments.callee.base.apply(this,arguments),a=this.rootResponder;a.makeMainPane(this);if(!a.get("keyRootView")){a.makeKeyPane(this)}return b},acceptsKeyPane:YES,classNames:["sc-main"]});SC.routes=SC.Object.create({wantsHistory:NO,usesHistory:null,baseURI:document.baseURI,_didSetup:NO,_location:null,_firstRoute:null,_extractParametersAndRoute:function(c){var a={},h=c.route||"",e,b,d,g,f,j;e=(h.indexOf("?")<0&&h.indexOf("&")>=0)?"&":"?";b=h.split(e);h=b[0];if(b.length===1){b=[]}else{if(b.length===2){b=b[1].split("&")}else{if(b.length>2){b.shift()}}}g=b.length;for(d=0;d<g;++d){f=b[d].split("=");a[f[0]]=f[1]}for(j in c){if(c.hasOwnProperty(j)&&j!=="route"){a[j]=""+c[j]}}b=[];for(j in a){b.push([j,a[j]].join("="))}a.params=e+b.join("&");a.route=h;return a},location:function(c,d){var a,b;if(d!==undefined){if(d===null){d=""}if(typeof(d)==="object"){a=this._extractParametersAndRoute(d);d=a.route+a.params}if(!SC.empty(d)||(this._location&&this._location!==d)){b=encodeURI(d);if(this.usesHistory){if(b.length>0){b="/"+b}window.history.pushState(null,null,this.get("baseURI")+b)}else{window.location.hash=b}}this._location=d}return this._location}.property(),ping:function(){var a;if(!this._didSetup){this._didSetup=YES;if(this.get("wantsHistory")&&SC.platform.supportsHistory){this.usesHistory=YES;this.popState();SC.Event.add(window,"popstate",this,this.popState)}else{this.usesHistory=NO;if(SC.platform.supportsHashChange){this.hashChange();SC.Event.add(window,"hashchange",this,this.hashChange)}else{a=this;this._invokeHashChange=function(){a.hashChange();setTimeout(a._invokeHashChange,100)};this._invokeHashChange()}}}},hashChange:function(a){var b=window.location.hash;b=(b&&b.length>0)?b.slice(1,b.length):"";if(!SC.browser.isMozilla){b=decodeURI(b)}if(this.get("location")!==b){SC.run(function(){this.set("location",b)},this)}},popState:function(a){var b=this.get("baseURI"),c=document.location.href;if(c.slice(0,b.length)===b){c=c.slice(b.length+1,c.length);if(this.get("location")!==c){SC.run(function(){this.set("location",c)},this)}}},add:function(a,b,c){if(!this._didSetup){this.invokeLast(this.ping)}if(c===undefined&&SC.typeOf(b)===SC.T_FUNCTION){c=b;b=null}else{if(SC.typeOf(c)===SC.T_STRING){c=b[c]}}if(!this._firstRoute){this._firstRoute=this._Route.create()}this._firstRoute.add(a.split("/"),b,c);return this},locationDidChange:function(){this.trigger()}.observes("location"),trigger:function(){var a=this._firstRoute,b=this.get("location"),d,c;if(a){d=this._extractParametersAndRoute({route:b});b=d.route;delete d.route;delete d.params;c=a.routeForParts(b.split("/"),d);if(c&&c.method){c.method.call(c.target||this,d)}}},_Route:SC.Object.extend({target:null,method:null,staticRoutes:null,dynamicRoutes:null,wildcardRoutes:null,add:function(c,b,e){var a,d;c=SC.clone(c);if(!c||c.length===0){this.target=b;this.method=e}else{a=c.shift();switch(a.slice(0,1)){case":":a=a.slice(1,a.length);if(!this.dynamicRoutes){this.dynamicRoutes={}}if(!this.dynamicRoutes[a]){this.dynamicRoutes[a]=this.constructor.create()}d=this.dynamicRoutes[a];break;case"*":a=a.slice(1,a.length);if(!this.wildcardRoutes){this.wildcardRoutes={}}d=this.wildcardRoutes[a]=this.constructor.create();break;default:if(!this.staticRoutes){this.staticRoutes={}}if(!this.staticRoutes[a]){this.staticRoutes[a]=this.constructor.create()}d=this.staticRoutes[a]}if(d){d.add(c,b,e)}}},routeForParts:function(d,e){var b,c,a;d=SC.clone(d);if(!d||d.length===0){return this.method?this:null}else{b=d.shift();if(this.staticRoutes&&this.staticRoutes[b]){return this.staticRoutes[b].routeForParts(d,e)}else{for(c in this.dynamicRoutes){a=this.dynamicRoutes[c].routeForParts(d,e);if(a){e[c]=b;return a}}for(c in this.wildcardRoutes){d.unshift(b);e[c]=d.join("/");return this.wildcardRoutes[c].routeForParts(null,e)}return null}}}})});SC.SCANNER_OUT_OF_BOUNDS_ERROR=new Error("Out of bounds.");SC.SCANNER_INT_ERROR=new Error("Not an int.");SC.SCANNER_SKIP_ERROR=new Error("Did not find the string to skip.");SC.SCANNER_SCAN_ARRAY_ERROR=new Error("Did not find any string of the given array to scan.");SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR=new Error("Can't compare the dates of two DateTimes that don't have the same timezone.");SC.DATETIME_ISO8601="%Y-%m-%dT%H:%M:%S%Z";SC.Scanner=SC.Object.extend({string:null,scanLocation:0,scan:function(a){if(this.scanLocation+a>this.length){throw SC.SCANNER_OUT_OF_BOUNDS_ERROR}var b=this.string.substr(this.scanLocation,a);this.scanLocation+=a;return b},scanInt:function(c,e){if(e===undefined){e=c}var d=this.scan(e);var b=new RegExp("^\\d{"+c+","+e+"}");var a=d.match(b);if(!a){throw SC.SCANNER_INT_ERROR}if(a[0].length<e){this.scanLocation+=a[0].length-e}return parseInt(a[0],10)},skipString:function(a){if(this.scan(a.length)!==a){throw SC.SCANNER_SKIP_ERROR}return YES},scanArray:function(c){for(var b=0,a=c.length;b<a;b++){if(this.scan(c[b].length)===c[b]){return b}this.scanLocation-=c[b].length}throw SC.SCANNER_SCAN_ARRAY_ERROR}});SC.DateTime=SC.Object.extend(SC.Freezable,SC.Copyable,{_ms:0,timezone:0,isFrozen:YES,adjust:function(b,a){var c;b=b?SC.clone(b):{};c=(b.timezone!==undefined)?b.timezone:(this.timezone!==undefined)?this.timezone:0;return this.constructor._adjust(b,this._ms,c,a)._createFromCurrentState()},advance:function(a){return this.constructor._advance(a,this._ms,this.timezone)._createFromCurrentState()},unknownProperty:function(a){return this.constructor._get(a,this._ms,this.timezone)},toFormattedString:function(a){return this.constructor._toFormattedString(a,this._ms,this.timezone)},toISO8601:function(){return this.constructor._toFormattedString(SC.DATETIME_ISO8601,this._ms,this.timezone)},toString:function(){return"UTC: "+new Date(this._ms).toUTCString()+", timezone: "+this.timezone},isEqual:function(a){return SC.DateTime.compare(this,a)===0},copy:function(){return this},toTimezone:function(a){if(a===undefined){a=0}return this.advance({timezone:a-this.timezone})}});SC.DateTime.mixin(SC.Comparable,{recordFormat:SC.DATETIME_ISO8601,dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],_englishDayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],AMPMNames:["AM","PM"],_date:new Date(),_tz:0,timezone:new Date().getTimezoneOffset(),_dt_cache:{},_dt_cache_index:-1,_DT_CACHE_MAX_LENGTH:1000,_setCalcState:function(a,c){var b={milliseconds:this._date.getTime(),timezone:this._tz};if(a!==undefined){this._date.setTime(a)}if(c!==undefined){this._tz=c}return b},_setCalcStateFromHash:function(c,b){var d=(b!==undefined)?b:this._tz;var a=this._toMilliseconds(c,this._ms,d);return this._setCalcState(a,d)},_get:function(x,b,p){var o,u,h,q,e,k,n,f,r,a;var c,j;var t=this._date;var s,g=null;s=this._setCalcState(b,p);if(x==="milliseconds"){g=t.getTime()}else{if(x==="timezone"){g=this._tz}}if(g===null){r=x.slice(0,4);a=x.slice(4);if(r==="last"||r==="next"){c=this._get("dayOfWeek",b,p);j=this._englishDayNames.indexOf(a);if(j>=0){var w=j-c;if(r==="last"&&w>=0){w-=7}if(r==="next"&&w<0){w+=7}this._advance({day:w},b,p);g=this._createFromCurrentState()}}}if(g===null){if(p!==undefined){this._setCalcState(t.getTime()-(p*60000),0)}switch(x){case"year":g=t.getUTCFullYear();break;case"month":g=t.getUTCMonth()+1;break;case"day":g=t.getUTCDate();break;case"dayOfWeek":g=t.getUTCDay();break;case"hour":g=t.getUTCHours();break;case"minute":g=t.getUTCMinutes();break;case"second":g=t.getUTCSeconds();break;case"millisecond":g=t.getUTCMilliseconds();break}if((g===null)&&(x==="isLeapYear")){e=this._get("year");g=(e%4===0&&e%100!==0)||e%400===0}if((g===null)&&(x==="daysInMonth")){switch(this._get("month")){case 4:case 6:case 9:case 11:g=30;break;case 2:g=this._get("isLeapYear")?29:28;break;default:g=31;break}}if((g===null)&&(x==="dayOfYear")){o=t.getTime();h=this._get("day");this._setCalcStateFromHash({day:1});for(q=this._get("month")-1;q>0;q--){this._setCalcStateFromHash({month:q});h+=this._get("daysInMonth")}t.setTime(o);g=h}if((g===null)&&(x.slice(0,4)==="week")){k=x.length===4?1:parseInt(x.slice("4"),10);n=this._get("dayOfWeek");f=this._get("dayOfYear")-1;if(k===0){g=parseInt((f-n+7)/7,10)}else{g=parseInt((f-(n-1+7)%7+7)/7,10)}}}this._setCalcState(s.milliseconds,s.timezone);return g},_adjust:function(c,f,e,a){var d=c?SC.clone(c):{};var b=this._toMilliseconds(c,f,e,a);this._setCalcState(b,e);return this},_advance:function(a,f,d){var c=a?SC.clone(a):{};var e;for(var b in c){c[b]+=this._get(b,f,d)}e=(c.timezone!==undefined)?c.timezone:d;return this._adjust(c,f,e,NO)},_toMilliseconds:function(k,c,h,f){var a=k?SC.clone(k):{};var j=this._date;var g=j.getTime();var b,e;if(!SC.none(c)){j.setTime(c)}e=(h!==undefined)?h:(this.timezone!==undefined)?this.timezone:0;j.setTime(j.getTime()-(e*60000));if(f===undefined||f===YES){if(!SC.none(a.hour)&&SC.none(a.minute)){a.minute=0}if(!(SC.none(a.hour)&&SC.none(a.minute))&&SC.none(a.second)){a.second=0}if(!(SC.none(a.hour)&&SC.none(a.minute)&&SC.none(a.second))&&SC.none(a.millisecond)){a.millisecond=0}}if(SC.none(a.year)){a.year=j.getUTCFullYear()}if(SC.none(a.month)){a.month=j.getUTCMonth()+1}if(SC.none(a.day)){a.day=j.getUTCDate()}if(SC.none(a.hour)){a.hour=j.getUTCHours()}if(SC.none(a.minute)){a.minute=j.getUTCMinutes()}if(SC.none(a.second)){a.second=j.getUTCSeconds()}if(SC.none(a.millisecond)){a.millisecond=j.getUTCMilliseconds()}b=Date.UTC(a.year,a.month-1,a.day,a.hour,a.minute,a.second,a.millisecond);j.setTime(b+(e*60000));b=j.getTime();j.setTime(g);return b},create:function(){var j=arguments.length===0?{}:arguments[0];var d;if(SC.typeOf(j)===SC.T_NUMBER){j={milliseconds:j}}d=(j.timezone!==undefined)?j.timezone:this.timezone;if(d===undefined){d=0}if(!SC.none(j.milliseconds)){var h="nu"+j.milliseconds+d,a=this._dt_cache;var e=a[h];if(!e){var f,g=this._dt_cache_index,b=this;e=a[h]=new b([{_ms:j.milliseconds,timezone:d}]);g=this._dt_cache_index=(g+1)%this._DT_CACHE_MAX_LENGTH;f=a[g];if(f!==undefined&&a[f]){delete a[f]}a[g]=h}return e}else{var c=new Date();return this.create({milliseconds:this._toMilliseconds(j,c.getTime(),d,j.resetCascadingly),timezone:d})}},_createFromCurrentState:function(){return this.create({milliseconds:this._date.getTime(),timezone:this._tz})},parse:function(q,c){var r=new RegExp("(?:%([aAbBcdDhHiIjmMpsSUWwxXyYZ%])|(.))","g");var p,k,a={},b={},j=SC.Scanner.create({string:q});if(SC.none(c)){c=SC.DATETIME_ISO8601}try{while((k=r.exec(c))!==null){switch(k[1]){case"a":b.dayOfWeek=j.scanArray(this.abbreviatedDayNames);break;case"A":b.dayOfWeek=j.scanArray(this.dayNames);break;case"b":a.month=j.scanArray(this.abbreviatedMonthNames)+1;break;case"B":a.month=j.scanArray(this.monthNames)+1;break;case"c":throw"%c is not implemented";case"d":case"D":a.day=j.scanInt(1,2);break;case"h":case"H":a.hour=j.scanInt(1,2);break;case"i":case"I":a.hour=j.scanInt(1,2);break;case"j":throw"%j is not implemented";case"m":a.month=j.scanInt(1,2);break;case"M":a.minute=j.scanInt(1,2);break;case"p":a.meridian=j.scanArray(this.AMPMNames);break;case"S":a.second=j.scanInt(1,2);break;case"s":a.millisecond=j.scanInt(1,3);break;case"U":throw"%U is not implemented";case"W":throw"%W is not implemented";case"w":throw"%w is not implemented";case"x":throw"%x is not implemented";case"X":throw"%X is not implemented";case"y":a.year=j.scanInt(2);a.year+=(a.year>70?1900:2000);break;case"Y":a.year=j.scanInt(4);break;case"Z":var g=j.scan(1);if(g==="Z"){a.timezone=0}else{if(g==="+"||g==="-"){var n=j.scanInt(2);if(j.scan(1)!==":"){j.scan(-1)}var f=j.scanInt(2);a.timezone=(g==="+"?-1:1)*(n*60+f)}}break;case"%":j.skipString("%");break;default:j.skipString(k[0]);break}}}catch(o){SC.Logger.log("SC.DateTime.createFromString "+o.toString());return null}if(!SC.none(a.meridian)&&!SC.none(a.hour)){if((a.meridian===1&&a.hour!==12)||(a.meridian===0&&a.hour===12)){a.hour=(a.hour+12)%24}delete a.meridian}p=SC.DateTime.create(a);if(!SC.none(b.dayOfWeek)&&p.get("dayOfWeek")!==b.dayOfWeek){return null}return p},_pad:function(b,a){var c=""+b;if(a===undefined){a=2}while(c.length<a){c="0"+c}return c},__toFormattedString:function(b,e,c){var a,d;switch(b[1]){case"a":return this.abbreviatedDayNames[this._get("dayOfWeek")];case"A":return this.dayNames[this._get("dayOfWeek")];case"b":return this.abbreviatedMonthNames[this._get("month")-1];case"B":return this.monthNames[this._get("month")-1];case"c":return this._date.toString();case"d":return this._pad(this._get("day"));case"D":return this._get("day");case"h":return this._get("hour");case"H":return this._pad(this._get("hour"));case"i":a=this._get("hour");return(a===12||a===0)?12:(a+12)%12;case"I":a=this._get("hour");return this._pad((a===12||a===0)?12:(a+12)%12);case"j":return this._pad(this._get("dayOfYear"),3);case"m":return this._pad(this._get("month"));case"M":return this._pad(this._get("minute"));case"p":return this._get("hour")>11?this.AMPMNames[1]:this.AMPMNames[0];case"S":return this._pad(this._get("second"));case"s":return this._pad(this._get("millisecond"),3);case"u":return this._pad(this._get("utc"));case"U":return this._pad(this._get("week0"));case"W":return this._pad(this._get("week1"));case"w":return this._get("dayOfWeek");case"x":return this._date.toDateString();case"X":return this._date.toTimeString();case"y":return this._pad(this._get("year")%100);case"Y":return this._get("year");case"Z":d=-1*c;return(d>=0?"+":"-")+this._pad(parseInt(Math.abs(d)/60,10))+":"+this._pad(Math.abs(d)%60);case"%":return"%"}},_toFormattedString:function(c,e,b){var a=this;var d=(b!==undefined)?b:(this.timezone!==undefined)?this.timezone:0;this._setCalcState(e-(b*60000),0);return c.replace(/\%([aAbBcdDhHiIjmMpsSUWwxXyYZ\%])/g,function(){var f=a.__toFormattedString.call(a,arguments,e,b);return f})},compare:function(d,c){var f=d.get("milliseconds");var e=c.get("milliseconds");return f<e?-1:f===e?0:1},compareDate:function(d,c){if(d.get("timezone")!==c.get("timezone")){throw SC.DATETIME_COMPAREDATE_TIMEZONE_ERROR}var f=d.adjust({hour:0}).get("milliseconds");var e=c.adjust({hour:0}).get("milliseconds");return f<e?-1:f===e?0:1}});SC.Binding.dateTime=function(a){return this.transform(function(b,c){return b?b.toFormattedString(a):null})};SC.stringsFor("English",{"_SC.DateTime.dayNames":"Sunday Monday Tuesday Wednesday Thursday Friday Saturday","_SC.DateTime.abbreviatedDayNames":"Sun Mon Tue Wed Thu Fri Sat","_SC.DateTime.monthNames":"January February March April May June July August September October November December","_SC.DateTime.abbreviatedMonthNames":"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec","_SC.DateTime.AMPMNames":"AM PM"});SC.DateTime.mixin({_setup:function(){SC.DateTime.dayNames=SC.String.w(SC.String.loc("_SC.DateTime.dayNames"));SC.DateTime.abbreviatedDayNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedDayNames"));SC.DateTime.monthNames=SC.String.w(SC.String.loc("_SC.DateTime.monthNames"));SC.DateTime.abbreviatedMonthNames=SC.String.w(SC.String.loc("_SC.DateTime.abbreviatedMonthNames"));SC.DateTime.AMPMNames=SC.String.w(SC.String.loc("_SC.DateTime.AMPMNames"))}});jQuery(document).ready(function(){SC.DateTime._setup()});SC.Response=SC.Object.extend({isResponse:YES,isError:NO,errorValue:function(){return this}.property().cacheable(),errorObject:null,request:null,originalRequest:function(){var a=this.get("request");while(a.get("source")){a=a.get("source")}return a}.property("request").cacheable(),type:function(){return this.getPath("request.type")}.property("request").cacheable(),address:function(){return this.getPath("request.address")}.property("request").cacheable(),isJSON:function(){return this.getPath("request.isJSON")||NO}.property("request").cacheable(),isXML:function(){return this.getPath("request.isXML")||NO}.property("request").cacheable(),listeners:function(){return this.getPath("request.listeners")}.property("request").cacheable(),status:-100,headers:null,body:function(){var a=this.get("encodedBody");if(a&&this.get("isJSON")){try{a=SC.json.decode(a)}catch(b){return SC.Error.create({message:b.name+": "+b.message,label:"Response",errorValue:this})}}return a}.property("encodedBody").cacheable(),response:function(){return this.get("body")}.property("body").cacheable(),isCancelled:NO,timedOut:null,timeoutTimer:null,fire:function(){var a=this.get("request"),c=a?a.get("source"):null;if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport()}var b=a.get("timeout");if(b){var d=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});this.set("timeoutTimer",d)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)}},invokeTransport:function(){this.receive(function(a){this.set("status",200)},this)},receive:function(e,a){if(!this.get("timedOut")){var d=this.get("timeoutTimer");if(d){d.invalidate()}this.set("timedOut",NO)}var b=this.get("request");var c=b?b.get("source"):null;SC.run(function(){if(c&&c.willReceive){c.willReceive(b,this)}e.call(a,!this.get("isCancelled"));if(!this.get("isCancelled")&&c&&c.didReceive){c.didReceive(b,this)}if(!this.get("isCancelled")){this.notify()}},this);SC.Request.manager.transportDidClose(this);return this},cancel:function(){if(!this.get("isCancelled")){this.set("isCancelled",YES);this.cancelTransport();SC.Request.manager.transportDidClose(this)}},timeoutReached:function(){if(this.get("timedOut")===null){this.set("timedOut",YES);this.cancelTransport();this.receive(function(b){if(!b){return}var a=SC.$error("HTTP Request timed out","Request",0);a.set("errorValue",this);this.set("isError",YES);this.set("errorObject",a);this.set("status",0)},this);return YES}return NO},cancelTransport:function(){},_notifyListeners:function(h,c){var j=h[c],a,g,b;if(!j){return NO}var e=NO;var f=j.length;for(var d=0;d<f;d++){var k=j[d];a=(k.params||[]).copy();a.unshift(this);g=k.target;b=k.action;if(SC.typeOf(b)===SC.T_STRING){b=g[b]}e=b.apply(g,a)}return e},notify:function(){var b=this.get("listeners"),a=this.get("status"),c=Math.floor(a/100)*100,d=NO;if(!b){return this}d=this._notifyListeners(b,a);if(!d&&c!==a){d=this._notifyListeners(b,c)}if(!d&&a!==0){d=this._notifyListeners(b,0)}return this},toString:function(){var a=arguments.callee.base.apply(this,arguments);return"%@<%@ %@, status=%@".fmt(a,this.get("type"),this.get("address"),this.get("status"))}});SC.XHRResponse=SC.Response.extend({headers:function(){var c=this.get("rawRequest"),b=c?c.getAllResponseHeaders():null,a={};if(!b){return a}b.split("\n").forEach(function(g){var d=g.indexOf(":"),e,f;if(d>=0){e=g.slice(0,d);f=g.slice(d+1).trim();a[e]=f}},this);return a}.property("status").cacheable(),header:function(a){var b=this.get("rawRequest");return b?b.getResponseHeader(a):null},encodedBody:function(){var a=this.get("rawRequest");if(!a){return null}if(this.get("isXML")){return a.responseXML}return a.responseText}.property("status").cacheable(),cancelTransport:function(){var a=this.get("rawRequest");if(a){a.abort()}this.set("rawRequest",null)},invokeTransport:function(){var d,f,b,c,e;d=this.createRequest();this.set("rawRequest",d);c=!!this.getPath("request.isAsynchronous");if(c){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(d,"readystatechange",this,this.finishRequest,d)}else{f=this;b=function(){if(!f){return null}var g=f.finishRequest();if(g){f=null}return g};d.onreadystatechange=b}}d.open(this.get("type"),this.get("address"),c);e=this.getPath("request.headers");for(var a in e){d.setRequestHeader(a,e[a])}d.send(this.getPath("request.encodedBody"));if(!c){this.finishRequest()}return d},createRequest:function(){function a(){for(var b=0;b<arguments.length;b++){try{var c=arguments[b]();return c}catch(d){}}return NO}return a(function(){return new XMLHttpRequest()},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")})},finishRequest:function(c){var e=this.get("rawRequest"),a=e.readyState,d,b,f;if(a===4&&!this.get("timedOut")){this.receive(function(g){if(!g){return}b=-1;try{b=e.status||0}catch(j){}if((b<200)||(b>=300)){try{f=e.statusText||""}catch(h){f=""}d=SC.$error(f||"HTTP Request failed","Request",b);d.set("errorValue",this);this.set("isError",YES);this.set("errorObject",d)}this.set("status",b)},this);if(!SC.browser.msie&&!SC.browser.opera){SC.Event.remove(e,"readystatechange",this,this.finishRequest)}else{e.onreadystatechange=null}return YES}return NO}});sc_require("system/response");SC.Request=SC.Object.extend(SC.Copyable,SC.Freezable,{isAsynchronous:YES,isJSON:NO,isXML:NO,attachIdentifyingHeaders:YES,headers:function(){var a=this._headers;if(!a){a=this._headers={}}return a}.property().cacheable(),responseClass:SC.XHRResponse,source:null,address:null,type:"GET",timeout:null,body:null,encodedBody:function(){var a=this.get("body");if(a&&this.get("isJSON")){a=SC.json.encode(a)}return a}.property("isJSON","isXML","body").cacheable(),willSend:function(b,a){},didSend:function(b,a){},willReceive:function(b,a){},didReceive:function(b,a){},concatenatedProperties:"COPY_KEYS",COPY_KEYS:["attachIdentifyingHeaders","isAsynchronous","isJSON","isXML","address","type","timeout","body","responseClass","willSend","didSend","willReceive","didReceive"],copy:function(){var a={},d=this.COPY_KEYS,f=d.length,b,c,e;while(--f>=0){b=d[f];if(this.hasOwnProperty(b)){a[b]=this.get(b)}}if(this.hasOwnProperty("listeners")){a.listeners=SC.copy(this.get("listeners"))}if(this.hasOwnProperty("_headers")){a._headers=SC.copy(this._headers)}a.source=this.get("source")||this;return this.constructor.create(a)},header:function(a,b){var c;if(SC.typeOf(a)===SC.T_STRING){c=this._headers;if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("headers");if(!c){c=this._headers={}}c[a]=b;this.propertyDidChange("headers");return this}}else{if(b===undefined){c=a;this.beginPropertyChanges();for(a in c){if(!c.hasOwnProperty(a)){continue}this.header(a,c[a])}this.endPropertyChanges();return this}}return this},clearHeaders:function(){this.propertyWillChange("headers");this._headers={};this.propertyDidChange("headers")},async:function(a){if(a===undefined){a=YES}return this.set("isAsynchronous",a)},timeoutAfter:function(a){return this.set("timeout",a)},json:function(a){if(a===undefined){a=YES}if(a){this.set("isXML",NO)}return this.set("isJSON",a)},xml:function(a){if(a===undefined){a=YES}if(a){this.set("isJSON",NO)}return this.set("isXML",a)},_prep:function(){var a=!!this.header("Content-Type");if(this.get("attachIdentifyingHeaders")){this.header("X-Requested-With","XMLHttpRequest");this.header("X-SproutCore-Version",SC.VERSION)}if(this.get("isJSON")&&!a){this.header("Content-Type","application/json")}else{if(this.get("isXML")&&!a){this.header("Content-Type","text/xml")}}return this},send:function(a){var b=this.get("timeout");if(b&&!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"}else{if(b===0){throw"The timeout value must either not be specified or must be greater than 0"}}if(a){this.set("body",a)}return SC.Request.manager.sendRequest(this.copy()._prep())},resend:function(){var a=this.get("source")?this:this.copy()._prep();return SC.Request.manager.sendRequest(a)},notify:function(a,e,d,f){var c=YES;if(SC.typeOf(a)!==SC.T_NUMBER){f=SC.A(arguments).slice(2);d=e;e=a;a=0;c=NO}else{f=SC.A(arguments).slice(3)}var b=this.get("listeners");if(!b){this.set("listeners",b={})}if(!b[a]){b[a]=[]}b[a].push({target:e,action:d,params:f});return this}});SC.Request.mixin({getUrl:function(a){return this.create().set("address",a).set("type","GET")},postUrl:function(b,a){var c=this.create().set("address",b).set("type","POST");if(a){c.set("body",a)}return c},deleteUrl:function(a){return this.create().set("address",a).set("type","DELETE")},putUrl:function(b,a){var c=this.create().set("address",b).set("type","PUT");if(a){c.set("body",a)}return c}});SC.Request.manager=SC.Object.create({maxRequests:6,inflight:[],pending:[],sendRequest:function(b){if(!b){return null}var a=b.get("responseClass").create({request:b});this.get("pending").pushObject(a);this.fireRequestIfNeeded();return a},cancel:function(b){var d=this.get("pending"),c=this.get("inflight"),a;if(d.indexOf(b)>=0){this.propertyWillChange("pending");d.removeObject(b);this.propertyDidChange("pending");return YES}else{if(c.indexOf(b)>=0){b.cancel();c.removeObject(b);this.fireRequestIfNeeded();return YES}}return NO},cancelAll:function(){if(this.get("pending").length||this.get("inflight").length){this.set("pending",[]);this.get("inflight").forEach(function(a){a.cancel()});this.set("inflight",[]);return YES}return NO},fireRequestIfNeeded:function(){var d=this.get("pending"),c=this.get("inflight"),a=this.get("maxRequests"),b;if((d.length>0)&&(c.length<a)){b=d.shiftObject();c.pushObject(b);b.fire()}},transportDidClose:function(a){this.get("inflight").removeObject(a);this.fireRequestIfNeeded()}});SC.FOCUS_ALL_CONTROLS=NO;SC.ready(function(){var a=SC.SAFARI_FOCUS_BEHAVIOR;if(a!==null&&a!==undefined){SC.FOCUS_ALL_CONTROLS=SC.SAFARI_FOCUS_BEHAVIOR}});SC.TreeItemContent={isTreeItemContent:YES,treeItemChildren:null,treeItemIsExpanded:YES,treeItemIsGrouped:NO,treeItemDisclosureState:function(b,a){return this.get("treeItemIsExpanded")?SC.BRANCH_OPEN:SC.BRANCH_CLOSED},treeItemCollapse:function(b,a){this.setIfChanged("treeItemIsExpanded",NO)},treeItemExpand:function(b,a){this.setIfChanged("treeItemIsExpanded",YES)},treeItemBranchIndexes:function(e,c){var d=this.get("treeItemChildren"),b,g,a,f;if(!d){return null}b=SC.IndexSet.create();g=d.get("length");for(a=0;a<g;a++){if(!(f=d.objectAt(a))){continue}if(!f.get("treeItemChildren")){continue}if(f.treeItemDisclosureState(this,a)!==SC.LEAF_NODE){b.add(a)}}return b.get("length")>0?b:null}};SC.BRANCH_OPEN=17;SC.BRANCH_CLOSED=18;SC.LEAF_NODE=32;SC.CollectionContent={isCollectionContent:YES,contentIndexIsSelected:function(b,c,a){var d=b.get("selection");return d?d.contains(c,a):NO},contentIndexIsEnabled:function(b,c,a){return b.get("isEnabled")},contentGroupIndexes:function(a,b){return null},contentIndexIsGroup:function(b,c,a){return NO},contentIndexOutlineLevel:function(b,c,a){return -1},contentIndexDisclosureState:function(b,c,a){return SC.LEAF_NODE},contentIndexExpand:function(b,c,a){SC.Logger.log("contentIndexExpand(%@, %@, %@)".fmt(b,c,a))},contentIndexCollapse:function(b,c,a){SC.Logger.log("contentIndexCollapse(%@, %@, %@)".fmt(b,c,a))}};sc_require("mixins/tree_item_content");sc_require("mixins/collection_content");SC.TreeItemObserver=SC.Object.extend(SC.Array,SC.CollectionContent,{item:null,delegate:null,parentObserver:null,parentItem:function(){var a=this.get("parentObserver");return a?a.get("item"):null}.property("parentObserver").cacheable(),index:null,outlineLevel:0,children:null,disclosureState:SC.BRANCH_OPEN,branchIndexes:function(){var e=this.get("item"),b,f,a,d,c;if(!e){return SC.IndexSet.EMPTY}else{if(e.isTreeItemContent){f=this.get("parentItem");a=this.get("index");return e.treeItemBranchIndexes(f,a)}else{d=this.get("children");if(!d){return null}c=SC.IndexSet.create();b=d.get("length");f=e;for(a=0;a<b;a++){if(!(e=d.objectAt(a))){continue}if(!this._computeChildren(e,f,a)){continue}if(this._computeDisclosureState(e,f,a)!==SC.LEAF_NODE){c.add(a)}}return c.get("length")>0?c:null}}}.property("children").cacheable(),isHeaderVisible:function(){return !!this.get("parentObserver")}.property("parentObserver").cacheable(),length:0,objectAt:function(f,c){var g=this.get("length"),j=this.get("item"),a=this._objectAtCache,h=f,e=0,d,b;if(f>=g){return undefined}if(this.get("isHeaderVisible")){if(f===0){return j}else{h--}}j=null;if(!a){a=this._objectAtCache=[]}if((j=a[f])!==undefined){return j}b=this.get("children");if(!b){return undefined}if(d=this.get("branchIndexes")){d.forEach(function(n){if(j||(n>h)){return}var m=this.branchObserverAt(n),k;if(!m){return}k=m.get("length");if(n+k>h){j=m.objectAt(h-n,c);h=-1}else{h-=k-1}},this)}if(h>=0){j=b.objectAt(h,c)}a[f]=j;return j},replace:function(a,b,k,d){var j=a,g=null,e,f,h;if(d===undefined){d=SC.DROP_BEFORE}if(this.get("isHeaderVisible")){j--}if(j<0){throw"Tree Item cannot replace itself"}if(e=this.get("branchIndexes")){e.forEach(function(m){if(g||(m>=j)){return}if(!(g=this.branchObserverAt(m))){return}f=g.get("length");if((m+f===j)&&d===SC.DROP_AFTER){j-=m}else{if(m+f>j){j-=m}else{j-=f-1;g=null}}},this)}if(g){g.replace(j,b,k,d);return this}h=j+b;if(b>1&&e){e.forEachIn(j,e.get("max")-j,function(m){if(m>h){return}if(!(g=this.branchObserverAt(m))){return}f=g.get("length");h-=f-1},this)}b=h-j;var c=this.get("children");if(!c){throw"cannot replace() tree item with no children"}if((b<0)||(h>c.get("length"))){throw"replace() range must lie within a single tree item"}c.replace(j,b,k,d);return this},observerContentDidChange:function(b,c,j){this.invalidateBranchObserversAt(b);this._objectAtCache=this._outlineLevelCache=null;this._disclosureStateCache=null;this._contentGroupIndexes=NO;this.notifyPropertyChange("branchIndexes");var d=this.get("length"),e=this._computeLength(),g=this.get("parentObserver"),f;if(d!==e){this.set("length",e)}if(!this._notifyParent){return this}if(g){f=SC.IndexSet.create(this.get("index"));g._childrenRangeDidChange(g.get("children"),null,"[]",f)}else{if(d===e){c=this.expandChildIndex(b+c);b=this.expandChildIndex(b);c=c-b;j=0}else{b=this.expandChildIndex(b);c=e-b;j=e-d}var h=c;var a=j+h;this.arrayContentDidChange(b,h,a)}},expandChildIndex:function(c){var b=c;if(this.get("isHeaderVisible")){c++}var a=this.get("branchIndexes");if(!a||a.get("length")===0){return b}a.forEachIn(0,c,function(d){b+=this.branchObserverAt(d).get("length")-1},this);return b},_contentGroupIndexes:NO,contentGroupIndexes:function(a,e){if(e!==this){return null}var c=this._contentGroupIndexes;if(c!==NO){return c}if(this.get("parentObserver")){return null}var d=this.get("item"),g,b,h,f;if(d&&d.isTreeItemContent){g=d.get("treeItemIsGrouped")}else{g=!!this.delegate.get("treeItemIsGrouped")}if(g){c=SC.IndexSet.create();b=this.get("branchIndexes");if(b){h=b.min();f=0;b.forEach(function(k){c.add(k+f,1);var j=this.branchObserverAt(k);if(j){f+=j.get("length")-1;h+=f}},this)}}else{c=null}this._contentGroupIndexes=c;return c},contentIndexIsGroup:function(b,d,a){var c=this.contentGroupIndexes(b,d);return c?c.contains(a):NO},contentIndexOutlineLevel:function(k,g,e){if(g!==this){return -1}var a=this._outlineLevelCache;if(a&&(a[e]!==undefined)){return a[e]}if(!a){a=this._outlineLevelCache=[]}var f=this.get("length"),m=e,d=0,h=null,c,b,j;if(e>=f){return -1}if(this.get("isHeaderVisible")){if(e===0){return a[0]=this.get("outlineLevel")-1}else{m--}}if(c=this.get("branchIndexes")){c.forEach(function(p){if((h!==null)||(p>m)){return}var o=this.branchObserverAt(p),n;if(!o){return}n=o.get("length");if(p+n>m){h=o.contentIndexOutlineLevel(k,o,m-p);m=-1}else{m-=n-1}},this)}if(m>=0){h=this.get("outlineLevel")}a[e]=h;return h},contentIndexDisclosureState:function(k,g,e){if(g!==this){return -1}var a=this._disclosureStateCache;if(a&&(a[e]!==undefined)){return a[e]}if(!a){a=this._disclosureStateCache=[]}var f=this.get("length"),m=e,d=0,h=null,c,b,j;if(e>=f){return SC.LEAF_NODE}if(this.get("isHeaderVisible")){if(e===0){return a[0]=this.get("disclosureState")}else{m--}}if(c=this.get("branchIndexes")){c.forEach(function(p){if((h!==null)||(p>m)){return}var o=this.branchObserverAt(p),n;if(!o){return}n=o.get("length");if(p+n>m){h=o.contentIndexDisclosureState(k,o,m-p);m=-1}else{m-=n-1}},this)}if(m>=0){h=SC.LEAF_NODE}a[e]=h;return h},contentIndexExpand:function(b,f,a){var c,g=a,d,e;if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._expand(this.get("item"));return}else{g--}}if(c=this.get("branchIndexes")){c.forEach(function(k){if(k>=g){return}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexExpand(b,j,g-k);g=-1}else{g-=h-1}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._expand(e,this.get("item"),g)}}},contentIndexCollapse:function(b,f,a){var c,d,e,g=a;if(f!==this){return}if(this.get("isHeaderVisible")){if(a===0){this._collapse(this.get("item"));return}else{g--}}if(c=this.get("branchIndexes")){c.forEach(function(k){if(k>=g){return}var j=this.branchObserverAt(k),h;if(!j){return}h=j.get("length");if(k+h>g){j.contentIndexCollapse(b,j,g-k);g=-1}else{g-=h-1}},this)}if(g>=0){d=this.get("children");e=d?d.objectAt(g):null;if(e){this._collapse(e,this.get("item"),g)}}},branchObserverAt:function(d){var g=this._branchObserversByIndex,c=this._branchObserverIndexes,e,h,b,k,a,f,j;if(!g){g=this._branchObserversByIndex=[]}if(!c){c=this._branchObserverIndexes=SC.IndexSet.create()}if(e=g[d]){return e}a=this.get("children");k=a?a.objectAt(d):null;if(!k){return null}g[d]=e=SC.TreeItemObserver.create({item:k,delegate:this.get("delegate"),parentObserver:this,index:d,outlineLevel:this.get("outlineLevel")+1});c.add(d);return e},invalidateBranchObserversAt:function(c){var b=this._branchObserversByIndex,a=this._branchObserverIndexes;if(!b||b.length<=c){return this}if(c<0){c=0}a.forEachIn(c,a.get("max")-c,function(e){var d=b[e];if(d){d.destroy()}},this);b.length=c;return this},init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("item");if(!a){throw"SC.TreeItemObserver.item cannot be null"}a.addObserver("*",this,this._itemPropertyDidChange);this._itemPropertyDidChange(a,"*");this._notifyParent=YES},destroy:function(){this.invalidateBranchObserversAt(0);this._objectAtCache=null;this._notifyParent=NO;var c=this.get("item");if(c){c.removeObserver("*",this,this._itemPropertyDidChange)}var a=this._children,b=this._childrenRangeObserver;if(a&&b){a.removeRangeObserver(b)}this.set("length",0);arguments.callee.base.apply(this,arguments)},_itemPropertyDidChange:function(f,b){var a=this.get("children"),e=this.get("disclosureState"),d=this.get("item"),c;this.beginPropertyChanges();c=this._computeDisclosureState(d);if(e!==c){this.set("disclosureState",c)}c=this._computeChildren(d);if(a!==c){this.set("children",c)}this.endPropertyChanges()},_childrenDidChange:function(){var c=this.get("disclosureState"),d=c===SC.BRANCH_OPEN?this.get("children"):null,b=this._children,a=this._childrenRangeObserver;if(b===d){return this}if(a){b.removeRangeObserver(a)}if(d){this._childrenRangeObserver=d.addRangeObserver(null,this,this._childrenRangeDidChange)}else{this._childrenRangeObserver=null}this._children=d;this._childrenRangeDidChange(d,null,"[]",null)}.observes("children","disclosureState"),_childrenRangeDidChange:function(f,j,h,d){var a=this.get("children"),e=a?a.get("length"):0,c=d?d.get("min"):0,g=d?d.get("max"):e,b=this._childrenLen||0;this._childrenLen=e;this.observerContentDidChange(c,g-c,e-b)},_computeDisclosureState:function(d,e,b){var c,a;if(!d||!this._computeChildren(d)){return SC.LEAF_NODE}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")}if(b===undefined){b=this.get("index")}return d.treeItemDisclosureState(e,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}return d.get(c)?SC.BRANCH_OPEN:SC.BRANCH_CLOSED}}},_collapse:function(d,e,b){var c,a;if(!d||!this._computeChildren(d)){return this}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")}if(b===undefined){b=this.get("index")}d.treeItemCollapse(e,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}d.setIfChanged(c,NO)}}return this},_expand:function(d,e,b){var c,a;if(!d||!this._computeChildren(d)){return this}else{if(d.isTreeItemContent){if(e===undefined){e=this.get("parentItem")}if(b===undefined){b=this.get("index")}d.treeItemExpand(e,b)}else{c=this._treeItemIsExpandedKey;if(!c){a=this.get("delegate");c=a?a.get("treeItemIsExpandedKey"):"treeItemIsExpanded";this._treeItemIsExpandedKey=c}d.setIfChanged(c,YES)}}return this},_computeChildren:function(c){var a,b;if(!c){return null}else{if(c.isTreeItemContent){return c.get("treeItemChildren")}else{b=this._treeItemChildrenKey;if(!b){a=this.get("delegate");b=a?a.get("treeItemChildrenKey"):"treeItemChildren";this._treeItemChildrenKey=b}return c.get(b)}}},_computeLength:function(){var b=this.get("isHeaderVisible")?1:0,d=this.get("disclosureState"),c=this.get("children"),a;if((d===SC.BRANCH_OPEN)&&c){b+=c.get("length");if(a=this.get("branchIndexes")){a.forEach(function(e){var f=this.branchObserverAt(e);b+=f.get("length")-1},this)}}return b}});sc_require("private/tree_item_observer");SC.TreeController=SC.ObjectController.extend(SC.SelectionSupport,{treeItemIsGrouped:NO,treeItemIsExpandedKey:"treeItemIsExpanded",treeItemChildrenKey:"treeItemChildren",arrangedObjects:function(){var a,b=this.get("content");if(b){a=SC.TreeItemObserver.create({item:b,delegate:this})}else{a=null}this._sctc_arrangedObjects=a;return a}.property().cacheable(),_sctc_invalidateArrangedObjects:function(){this.propertyWillChange("arrangedObjects");var a=this._sctc_arrangedObjects;if(a){a.destroy()}this._sctc_arrangedObjects=null;this.propertyDidChange("arrangedObjects")}.observes("content","treeItemIsExpandedKey","treeItemChildrenKey","treeItemIsGrouped"),_sctc_arrangedObjectsContentDidChange:function(){this.updateSelectionAfterContentChange()}.observes("*arrangedObjects.[]"),canSelectGroups:NO,firstSelectableObject:function(){var d=this.get("arrangedObjects"),c,b,a=0;if(!d){return null}if(this.get("canSelectGroups")){return d.get("firstObject")}c=d.contentGroupIndexes(null,d);b=d.get("length");while(c.contains(a)&&(a<b)){a++}return a>=b?null:d.objectAt(a)}.property()});SC.InlineTextFieldDelegate={editor:null,acquireEditor:function(a){var b=this.editor;if(b){if(b.get("isEditing")&&!b.commitEditing()&&!b.discardEditing()){return null}this.releaseEditor(b)}var c=a.exampleEditor?a.exampleEditor:SC.InlineTextFieldView,d=a.get("pane");b=this.editor=d.createChildView(c,{inlineEditorDelegate:this});d.appendChild(b);return b},releaseEditor:function(a){a.removeFromParent();this.editor=null;return YES}};SC.STRING_TITLEIZE_REGEXP=(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g);SC.STRING_HUMANIZE_REGEXP=(/[\-_]/g);SC.STRING_REGEXP_ESCAPED_REGEXP=(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g);SC.STRING_DASHERIZE_CACHE={top:"top",left:"left",right:"right",bottom:"bottom",width:"width",height:"height",minWidth:"min-width",maxWidth:"max-width"};SC.INFLECTION_CONSTANTS={PLURAL:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/s$/i,"s"],[/$/,"s"]],SINGULAR:[[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/s$/i,""]],IRREGULAR:[["move","moves"],["sex","sexes"],["child","children"],["man","men"],["person","people"]],UNCOUNTABLE:["sheep","fish","series","species","money","rice","information","info","equipment"]};SC.mixin(SC.String,{capitalizeEach:function(a){return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,b,d){return(d)?(b+d.toUpperCase()):b}).capitalize()},titleize:function(b){var a=b.replace(SC.STRING_DECAMELIZE_REGEXP,"$1_$2");return a.replace(SC.STRING_TITLEIZE_REGEXP,function(c,e,d){return d?" "+d.toUpperCase():" "}).capitalize()},classify:function(d){var a=d.replace(SC.STRING_TITLEIZE_REGEXP,function(e,g,f){return f?f.toUpperCase():""});var c=a.charAt(0),b=c.toUpperCase();return c!==b?b+a.slice(1):a},humanize:function(a){return SC.String.decamelize(a).replace(SC.STRING_HUMANIZE_REGEXP," ")},escapeForRegExp:function(a){return a.replace(SC.STRING_REGEXP_ESCAPED_REGEXP,"\\$1")},removeDiacritics:function(g){var a=SC.diacriticMappingTable;if(!a){SC.diacriticMappingTable={"":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A"," ":"A","":"A","":"A","":"A","":"A","":"A"," ":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"A","":"B","":"B","":"B","":"C","":"C","":"C","":"C","":"C","":"C","":"D","":"D","":"D","":"D","":"D","":"D","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"E","":"F","":"G","":"G"," ":"G","":"G","":"G","":"G"," ":"G","":"H","":"H","":"H","":"H","":"H","":"H","":"H","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"I","":"J","":"K","":"K","":"K","":"K","":"K","":"L","":"L","":"L","":"L","":"L","":"L","":"L","":"M","":"M","":"M","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"N","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O"," ":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O","":"O"," ":"O","":"O","":"P","":"P","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"R","":"S","":"S","":"S"," ":"S","":"S"," ":"S","":"S","":"S","":"S","":"S","":"T","":"T","":"T","":"T","":"T","":"T","":"T","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"U","":"V","":"V","":"W","":"W","":"W","":"W","":"W","":"W","":"X","":"X","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Y","":"Z","":"Z","":"Z","":"Z","":"Z","":"Z","":"`"," ":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"a","":"b","":"b","":"b","":"c","":"c","":"c","":"c","":"c","":"c","":"d","":"d","":"d","":"d","":"d","":"d","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"e","":"f","":"g","":"g","":"g","":"g","":"g","":"g","":"g","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"h","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"i","":"j","":"j","":"k","":"k","":"k","":"k","":"k","":"l","":"l","":"l","":"l","":"l","":"l","":"l","":"m","":"m","":"m","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"n","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"o","":"p","":"p","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"r","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"s","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"t","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"u","":"v","":"v","":"w","":"w","":"w","":"w","":"w","":"w","":"w","":"x","":"x","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"y","":"z","":"z","":"z","":"z","":"z","":"z"};a=SC.diacriticMappingTable}var d,e,b="",f=g.length;for(var c=0;c<=f;++c){d=g.charAt(c);e=a[d];b+=e||d}return b},pluralize:function(g){var m,e,b=g.split(/\s/).pop(),h=g.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(m=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;m<e;m++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[m];if(b==f){return g.toString()}}for(m=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;m<e;m++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[m][0],k=SC.INFLECTION_CONSTANTS.IRREGULAR[m][1];if((b==c)||(b==k)){if(a){k=k.capitalize()}return h+k}}for(m=0,e=SC.INFLECTION_CONSTANTS.PLURAL.length;m<e;m++){var j=SC.INFLECTION_CONSTANTS.PLURAL[m][0],d=SC.INFLECTION_CONSTANTS.PLURAL[m][1];if(j.test(b)){return g.replace(j,d)}}},singularize:function(g){var m,e,b=g.split(/\s/).pop(),h=g.replace(b,""),a=b.charAt(0).match(/[A-Z]/)?true:false;b=b.toLowerCase();for(m=0,e=SC.INFLECTION_CONSTANTS.UNCOUNTABLE.length;m<e;m++){var f=SC.INFLECTION_CONSTANTS.UNCOUNTABLE[m];if(b==f){return g.toString()}}for(m=0,e=SC.INFLECTION_CONSTANTS.IRREGULAR.length;m<e;m++){var c=SC.INFLECTION_CONSTANTS.IRREGULAR[m][0],k=SC.INFLECTION_CONSTANTS.IRREGULAR[m][1];if((b==c)||(b==k)){if(a){c=c.capitalize()}return h+c}}for(m=0,e=SC.INFLECTION_CONSTANTS.SINGULAR.length;m<e;m++){var j=SC.INFLECTION_CONSTANTS.SINGULAR[m][0],d=SC.INFLECTION_CONSTANTS.SINGULAR[m][1];if(j.test(b)){return g.replace(j,d)}}}});SC.String.strip=SC.String.trim;sc_require("system/string");SC.supplement(String.prototype,{capitalizeEach:function(){return SC.String.capitalizeEach(this,arguments)},titleize:function(a){return SC.String.titleize(this,arguments)},classify:function(a){return SC.String.classify(this,arguments)},humanize:function(a){return SC.String.humanize(this,arguments)},escapeForRegExp:function(a){return SC.String.escapeForRegExp(this,arguments)},removeDiacritics:function(a){return SC.String.removeDiacritics(this,arguments)},trim:function(a){return SC.String.trim(this,arguments)},trimLeft:function(a){return SC.String.trimLeft(this,arguments)},trimRight:function(a){return SC.String.trimRight(this,arguments)},pluralize:function(a){return SC.String.pluralize(this,arguments)},singularize:function(a){return SC.String.singularize(this,arguments)}});SC.Gesture=SC.Object.extend({name:"gesture",touchIsInGesture:function(b,a){return NO},touchStart:function(a){},touchesDragged:function(a,b){},touchEnd:function(a){},start:function(){if(!this.get("isActive")){this.set("isActive",YES);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Start";if(this.view[a]){this.view[a].apply(this.view,b)}}},end:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"End";if(this.view[a]){this.view[a].apply(this.view,b)}}},change:function(){if(this.get("isActive")){var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Changed";if(this.view[a]){this.view[a].apply(this.view,b)}}},cancel:function(){if(this.get("isActive")){this.set("isActive",NO);var b=SC.$A(arguments);b.unshift(this);var a=this.name+"Cancelled";if(this.view[a]){this.view[a].apply(this.view,b)}}},trigger:function(){var b=SC.$A(arguments);b.unshift(this);var a=this.name;if(this.view[a]){this.view[a].apply(this.view,b)}},take:function(a){a.isTaken=YES;if(SC.none(a.touchResponder)||a.touchResponder!==this){a.makeTouchResponder(this,YES)}},release:function(a){a.isTaken=NO;if(a.nextTouchResponder){a.makeTouchResponder(a.nextTouchResponder)}},discardTouch:function(a){a.isTaken=YES;a.makeTouchResponder(null)},statusForTouch:function(c){var b=SC.guidFor(c.view)+this.name;var a=c[b];if(!a){a=c[b]={}}return a},unassignedTouchDidStart:function(a){if(a.isTaken){return}if(this.touchIsInGesture(a,this.statusForTouch(a))){this.take(a)}},unassignedTouchesDidChange:function(a,b){b.forEach(function(c){if(c.isTaken){return}if(this.touchIsInGesture(c,this.statusForTouch(c))){this.take(c)}},this)},unassignedTouchDidEnd:function(a){},interestedInTouch:function(b){var a=this.statusForTouch(b);if(a.isInterested){return}a.isInterested=YES;b.isInteresting++},uninterestedInTouch:function(b){var a=this.statusForTouch(b);if(!a.isInterested){return}a.isInterested=NO;b.isInteresting--}});sc_require("system/gesture");SC.PinchGesture=SC.Gesture.extend({name:"pinch",acceptsMultitouch:YES,scale:1,unassignedTouchesDidChange:function(a,b){if(b.length==2){this.take(b[0]);this.take(b[1])}},touchStart:function(b){var a=b.touchesForResponder(this);if(!a||a.length===0){return YES}else{if(a.length==1){this.start([a[0],b]);return YES}else{return NO}}},touchesDragged:function(a,c){var d=c.firstObject(),b=d.averagedTouchesForView(this);if(b.touchCount==2){if(!this._startDistance){this._startDistance=b.d}this.scale=b.d/this._startDistance;this.change(c,this.scale)}},touchEnd:function(b){this._startDistance=null;var a=b.touchesForResponder(this);this.trigger(a,this.scale);this.end(a,this.scale);if(a){a.forEach(function(c){this.release(c)},this)}}});sc_require("system/gesture");SC.SWIPE_HORIZONTAL="X";SC.SWIPE_VERTICAL="Y";SC.SWIPE_ANY="XY";SC.SWIPE_LEFT="LEFT";SC.SWIPE_RIGHT="RIGHT";SC.SWIPE_UP="UP";SC.SWIPE_DOWN="DOWN";SC.SwipeGesture=SC.Gesture.extend({name:"swipe",acceptsMultitouch:YES,direction:SC.SWIPE_HORIZONTAL,currentDirection:null,startDistance:5,swipeDistance:40,tolerance:0.5,touchIsInGesture:function(j,g){if(!g.flunked){var k=this.get("direction"),e=this.get("currentDirection"),a=this.get("startDistance"),h=j.pageX-j.startX,f=j.pageY-j.startY,c=Math.abs(h),b=Math.abs(f);if(Math.abs(h)>a||Math.abs(f)>a){if(!e){if(k==SC.SWIPE_ANY){if(c>b){e=SC.SWIPE_HORIZONTAL}else{if(b>c){e=SC.SWIPE_VERTICAL}else{return NO}}}else{e=k}this.set("currentDirection",e)}var n=(e==SC.SWIPE_HORIZONTAL)?h:f,m=(e==SC.SWIPE_HORIZONTAL)?f:h;if(Math.abs(n)*this.get("tolerance")>Math.abs(m)){return YES}}}return NO},touchStart:function(e){var b=this.get("currentDirection"),c=e["page"+b]-e["start"+b],a;if(c<0){a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(b===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}this.start(e,a,c);return YES},touchesDragged:function(k,e){var c=e.firstObject();var f=this.get("currentDirection"),a=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),j=c["page"+f]-c["start"+f],g=c["page"+a]-c["start"+a],h;if(j<0){h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{h=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(j)<this.get("startDistance")||Math.abs(j)*this.get("tolerance")<Math.abs(g)){this.release(c);var b=c.touchesForResponder(this);if(!b||b.length===0){this.cancel(c,h,j)}}else{this.change(c,h,j)}},touchEnd:function(h){var f=this.get("currentDirection"),e=(f===SC.SWIPE_HORIZONTAL?"Y":"X"),g=h["page"+f]-h["start"+f],b=h["page"+e]-h["start"+e],a;if(g<0){a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_LEFT:SC.SWIPE_UP}else{a=(f===SC.SWIPE_HORIZONTAL)?SC.SWIPE_RIGHT:SC.SWIPE_DOWN}if(Math.abs(g)>this.get("swipeDistance")||Math.abs(g)*this.get("tolerance")<Math.abs(b)){this.trigger(h,a)}this.end(h,a,g);this.set("currentDirection",null);var c=h.touchesForResponder(this);if(c){c.forEach(function(d){this.release(d)},this)}},cancel:function(){arguments.callee.base.apply(this,arguments);this.set("currentDirection",null)}});sc_require("system/gesture");SC.TapGesture=SC.Gesture.extend({name:"tap",acceptsMultitouch:NO,_tapCount:null,_candidateTouch:null,_eventTimer:null,tapWiggle:10,tapDelay:200,touchIsInGesture:function(b,a){return !b.tapFlunked},touchStart:function(a){if(this._eventTimer){this._eventTimer.invalidate()}if(this._candidateTouch&&this._candidateTouch.touch.identifier!==a.identifier){this._cancelTap(a);return NO}this._candidateTouch={startTime:Date.now(),touch:a};this.start(a);return YES},touchesDragged:function(a,c){var e=c[0];var b=(c.length>1||!this._candidateTouch||e.identifier!==this._candidateTouch.touch.identifier);var d=this._calculateDragDistance(e)>this.get("tapWiggle");if(b||d){this._cancelTap(e)}},touchEnd:function(a){if(this._calculateDragDistance(a)>this.get("tapWiggle")||Date.now()-this._candidateTouch.startTime>this.get("tapDelay")){this._cancelTap(a)}else{this._addTap(a)}},_addTap:function(b){var a=this;if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=(this._tapCount||0)+1;this._candidateTouch=null;this._eventTimer=SC.Timer.schedule({target:a,action:function(){this._triggerTap(b)},interval:this.get("tapDelay")});this.change(b,this._tapCount);this.trigger(b,this._tapCount)},_cancelTap:function(a){a.tapFlunked=YES;this.release(a);this.cancel(a,this._tapCount);if(this._eventTimer){this._eventTimer.invalidate()}this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_triggerTap:function(a){this.end(a,this._tapCount);this._tapCount=null;this._candidateTouch=null;this._eventTimer=null},_calculateDragDistance:function(a){return Math.sqrt(Math.pow(a.pageX-a.startX,2)+Math.pow(a.pageY-a.startY,2))}});SC.AutoMixin={autoMixins:[],createChildView:function(b,c){if(!c){c={}}c.owner=c.parentView=this;c.isVisibleInWindow=this.get("isVisibleInWindow");if(!c.page){c.page=this.page}var a=this.get("autoMixins");a.push(c);b=b.create.apply(b,a);return b}};SC.mixin({_copy_computed_props:["maxWidth","maxHeight","paddingLeft","paddingRight","paddingTop","paddingBottom","fontFamily","fontSize","fontStyle","fontWeight","fontVariant","lineHeight","whiteSpace","letterSpacing"],stringFromLayout:function(e){var d=["maxHeight","maxWidth","minHeight","minWidth","centerY","centerX","width","height","bottom","right","top","left"],a=[],c,b=d.length;while(--b>=0){c=d[b];if(e.hasOwnProperty(c)){a.push(c+":"+e[c])}}return"{"+a.join(", ")+"}"},heightForString:function(h,c,b,a,g){var e=this._heightCalcElement,f,j;if(!g){h=SC.RenderContext.escapeHTML(h)}f=(a&&SC.typeOf(a)===SC.T_ARRAY)?a.join(" "):"";if(!c){c=100}if(!e){e=this._heightCalcElement=document.createElement("div");document.body.insertBefore(e,null)}b=b+"; width: "+c+"px; left: "+(-1*c)+"px; position: absolute";var d=SC.$(e);d.attr("style",b);if(f!==""){d.attr("class",f)}e.innerHTML=h;j=e.clientHeight;e=null;return j},prepareStringMeasurement:function(p,a){var k=this._metricsCalculationElement,h,q,c,d;h=SC.A(a).join(" ");if(!k){var o=document.createElement("div");o.style.cssText="position:absolute; left:-10010px; top:-10px;width:10000px; height:0px; overflow:hidden;visibility:hidden;";k=this._metricsCalculationElement=document.createElement("div");o.appendChild(k);document.body.insertBefore(o,null)}d=SC.$(k);if(SC.typeOf(p)!=SC.T_STRING){var g=null;if(document.defaultView&&document.defaultView.getComputedStyle){g=document.defaultView.getComputedStyle(p,null)}else{g=p.currentStyle}var n=this._copy_computed_props;for(var j=0;j<n.length;j++){var b=n[j],f=g[b];k.style[b]=f}var m=k.style;if(m.font===""){var e="";if(m.fontStyle){e+=m.fontStyle+" "}if(m.fontVariant){e+=m.fontVariant+" "}if(m.fontWeight){e+=m.fontWeight+" "}if(m.fontSize){e+=m.fontSize}else{e+="10px"}if(m.lineHeight){e+="/"+m.lineHeight}e+=" ";if(m.fontFamily){e+=m.fontFamily}else{m+="sans-serif"}k.style.font=e}SC.mixin(k.style,{left:"0px",top:"0px",position:"absolute",bottom:"auto",right:"auto",width:"auto",height:"auto"});g=null}else{c=p;d.attr("style",c+"; position:absolute; left: 0px; top: 0px; bottom: auto; right: auto; width: auto; height: auto;")}k.className=h;k=null},teardownStringMeasurement:function(){var a=this._metricsCalculationElement;a.innerHTML="";a.className="";a.setAttribute("style","");a=null},measureString:function(c,b){var d=this._metricsCalculationElement,e=0;if(!d){throw"measureString requires a string measurement environment to be set up. Did you mean metricsForString?"}if(b){d.innerHTML=c}else{if(typeof d.innerText!="undefined"){d.innerText=c}else{d.textContent=c}}if(SC.browser.isIE){e=1}var a={width:d.clientWidth+e,height:d.clientHeight};d=null;return a},metricsForString:function(c,d,e,b){SC.prepareStringMeasurement(d,e);var a=SC.measureString(c,b);SC.teardownStringMeasurement();return a}});sc_require("system/utils/string_measurement");SC.AutoResize={shouldAutoResize:YES,shouldMeasureSize:YES,shouldCacheSizes:NO,shouldResizeWidth:YES,shouldResizeHeight:NO,measuredSize:{width:0,height:0},maxWidth:null,maxHeight:null,shouldAutoFitText:NO,autoFitDiscreteFontSizes:NO,minFontSize:12,maxFontSize:20,calculatedFontSize:20,fontPropertyDidChange:function(){if(this.get("shouldAutoFitText")){this.invokeLast(this.fitTextToFrame)}}.observes("shouldAutoFitText","minFontSize","maxFontSize","measuredSize"),measuredSizeDidChange:function(){var c=this.get("measuredSize"),b=c.width,h=c.height,g,a,d=this.get("autoResizePadding")||0,f=this.get("maxWidth"),e=this.get("maxHeight");if(SC.typeOf(d)===SC.T_NUMBER){g=a=d}else{g=d.height;a=d.width}h+=g;b+=a;if(this.get("shouldAutoResize")){if(this.get("shouldResizeWidth")){if(f&&b>f){b=f}this.set("calculatedWidth",b);this.adjust("width",b)}if(this.get("shouldResizeHeight")){if(e&&h>e){h=e}this.set("calculatedHeight",h);this.adjust("height",h)}}}.observes("shouldAutoResize","measuredSize","autoResizePadding"),initMixin:function(){},batchResizeId:null,_scar_measurementPending:NO,_scar_requestedBatchResizeId:null,scheduleMeasurement:function(){var b=this.get("batchResizeId");if(!this.get("shouldMeasureSize")||!this.get("isVisibleInWindow")||(this.get("autoResizeText")===this._lastMeasuredText&&b===this._lastMeasuredId)){return}var a=this._scar_requestedBatchResizeId;if(this._scar_measurementPending&&this._scar_requestedBatchResizeId!==b){SC.AutoResizeManager.cancelMeasurementForView(this,a)}SC.AutoResizeManager.scheduleMeasurementForView(this,b);this._scar_measurementPending=YES;this._scar_requestedBatchResizeId=b}.observes("isVisibleInWindow","shouldMeasureSize","autoResizeText","batchResizeId"),_lastMeasuredText:null,_cachedMetrics:function(b,c){if(!this.get("shouldCacheSizes")){return}var a=SC.cacheSlotFor(this.get("batchResizeId")||this,this.get("autoResizeText"));if(c){a.measuredSize=c}else{c=a.measuredSize}return c}.property("shouldCacheSizes","autoResizeText","batchResizeId").cacheable(),measureSize:function(c){var h,f=this.get("autoResizeLayer"),j=this.get("autoResizeText"),m,a,e,d=!this.get("escapeHTML"),b=this.get("batchResizeId"),g=this.get("_cachedMetrics"),k=this.get("maxFontSize");if(!f){return}if(g){h=g}else{if(SC.none(j)||j===""){h={width:0,height:0}}else{if(c){if(this.get("calculatedFontSize")!==k){this.prepareLayerForStringMeasurement(f)}h=SC.measureString(j,d)}else{f=this.get("autoResizeLayer");if(!f){return}if(this.get("calculatedFontSize")!==k){this.prepareLayerForStringMeasurement(f)}h=SC.metricsForString(j,f,this.get("classNames"),d)}}}this.set("measuredSize",h);if(this.get("shouldCacheSizes")){this.setIfChanged("_cachedMetrics",h)}this._lastMeasuredText=j;this._lastMeasuredId=b;this._scar_measurementPending=NO;return h},prepareLayerForStringMeasurement:function(a){if(this.get("shouldAutoFitText")){a.style.fontSize=this.get("maxFontSize")+"px"}},viewDidResize:function(a){a();if(this.get("shouldAutoFitText")){this.fontPropertyDidChange()}}.enhance(),fitTextToFrame:function(){var s=this.get("autoResizeLayer");if(!s){return}var c=this.get("maxFontSize"),d=this.get("minFontSize");if(this.get("calculatedFontSize")!==c){this.prepareLayerForStringMeasurement(s)}var e=this.get("frame"),f=this.get("autoResizePadding")||0,k=e.width-1,g=e.height-1,r=this.get("measuredSize"),a=r.width,t=r.height;if(SC.typeOf(f)===SC.T_NUMBER){k-=f;g-=f}else{k-=f.width;g-=f.height}if(a<=k&&t<=g){return}if(this.get("autoFitDiscreteFontSizes")){h=d}else{var b=k/a,j=g/t,n=Math.floor(c*Math.min(b,j)),h,q=this.get("classNames"),p=!this.get("escapeHTML"),m=this.get("autoResizeText"),o;n=h=Math.min(c,Math.max(d,n));s.style.fontSize=n+"px";o=SC.metricsForString(m,s,q,p);if(o.width>k||o.height>g){for(n=n-1;n>=d;n--){s.style.fontSize=n+"px";o=SC.metricsForString(m,s,q,p);h=n;if(o.width<=k&&o.height<=g){break}}}else{if(o.width<k||o.height<g){for(n=n+1;n<=c;n++){s.style.fontSize=n+"px";o=SC.metricsForString(m,s,q,p);if(o.width<=k&&o.height<=g){h=n}if(o.width>=k||o.height>=g){break}}}}}s.style.fontSize=h+"px";this.set("calculatedFontSize",h)},applyAttributesToContext:function(b,a){b(a);if(this.get("shouldAutoFitText")){a.css("font-size",this.get("calculatedFontSize")+"px")}}.enhance(),didCreateLayer:function(a){a();this.scheduleMeasurement()}.enhance()};SC.AutoResizeManager={viewsNeedingResize:null,untaggedViews:null,scheduleMeasurementForView:function(b,e){if(SC.none(e)){var d=this.untaggedViews||(this.untaggedViews=SC.CoreSet.create());d.add(b)}else{var c=this.viewsNeedingResize||(this.viewsNeedingResize={}),a=c[e]||(c[e]=SC.CoreSet.create());a.add(b)}SC.RunLoop.currentRunLoop.invokeLast(this.doBatchResize)},cancelMeasurementForView:function(a,c){var b=SC.none(c)?this.untaggedViews:this.viewsNeedingResize[c];if(b){b.remove(a)}},doBatchResize:function(){if(this!==SC.AutoResizeManager){return SC.AutoResizeManager.doBatchResize()}var a,d,c,e,f,g,b;f=this.viewsNeedingResize;for(a in f){if(f.hasOwnProperty(a)){d=f[a];g=NO;while((c=d.pop())){if(c.get("isVisibleInWindow")&&c.get("shouldMeasureSize")&&(e=c.get("autoResizeLayer"))){b=c.get("autoResizeText");if(!SC.none(b)&&b!==""&&!c.get("_cachedMetrics")&&!g){c.prepareLayerForStringMeasurement(e);SC.prepareStringMeasurement(e,c.get("classNames"));g=YES}c.measureSize(YES)}}if(g){SC.teardownStringMeasurement()}}}d=this.untaggedViews;if(!d){return}while((c=d.pop())){c.measureSize()}}};SC.Button.initMixin=function(){throw"SC.Button is deprecated as a mixin and is now a subclass of SC.TemplateView. Subclass SC.ButtonView instead."};SC.ContentDisplay={concatenatedProperties:"contentDisplayProperties",displayProperties:["content"],contentDisplayProperties:[],initMixin:function(){this._display_contentDidChange()},destroyMixin:function(){if(!this._display_content){return}this._display_stopObservingContent(this._display_content);this._display_content=null},_display_beginObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("addObserver","*",this,b)}else{if(a.addObserver){a.addObserver("*",this,b)}}},_display_stopObservingContent:function(a){var b=this._display_contentPropertyDidChange;if(SC.isArray(a)){a.invoke("removeObserver","*",this,b)}else{if(a.removeObserver){a.removeObserver("*",this,b)}}},_display_contentDidChange:function(d,a,c){if((c=this.get("content"))===this._display_content){return}var b=this._display_content;if(b){this._display_stopObservingContent(b)}b=this._display_content=c;if(b){this._display_beginObservingContent(b)}this.displayDidChange()}.observes("content","contentDisplayProperties"),_display_contentPropertyDidChange:function(e,c,d,b){if(c==="*"){this.displayDidChange()}else{var a=this.get("contentDisplayProperties");if(a&&a.indexOf(c)>=0){this.displayDidChange()}}}};SC.ContentValueSupport={hasContentValueSupport:YES,initMixin:function(){this._control_contentDidChange()},value:null,content:null,contentValueKey:null,contentPropertyDidChange:function(b,a){return this.updatePropertyFromContent("value",a,"contentValueKey",b)},_justWroteValue:undefined,updatePropertyFromContent:function(f,c,e,d){var a,b;if(e===undefined){e="content"+f.capitalize()+"Key"}if(this[e]){e=this.get(e)}else{if((a=this.displayDelegate)&&(b=a[e])){e=a.get?a.get(e):b}else{return this}}if(c==="*"||c===e){if(d===undefined){d=this.get("content")}if(d){b=d.get?d.get(e):d[e]}else{b=null}if(b===this._justWroteValue){return this}this._justWroteValue=b;this.set(f,b)}return this},updateContentWithValueObserver:function(){var a=this.contentValueKey?this.get("contentValueKey"):this.getDelegateProperty("contentValueKey",this.displayDelegate),b=this.get("content");if(!a||!b){return this}var c=this.get("value");if(c===this._justWroteValue){return this}this._justWroteValue=c;if(typeof b.setIfChanged===SC.T_FUNCTION){b.setIfChanged(a,c)}else{if(b[a]!==c){b[a]=c}}}.observes("value"),_control_content:null,_control_contentDidChange:function(){var b=this.get("content");if(this._control_content===b){return}var c=this.contentPropertyDidChange,a=this._control_content;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._control_content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),_control_contentValueKeyDidChange:function(){this.contentPropertyDidChange(this.get("content"),"*")}.observes("contentValueKey")};sc_require("mixins/content_value_support");sc_require("system/string");SC.AUTO_CONTROL_SIZE="__AUTO__";SC.JUMBO_CONTROL_SIZE="sc-jumbo-size";SC.HUGE_CONTROL_SIZE="sc-huge-size";SC.LARGE_CONTROL_SIZE="sc-large-size";SC.REGULAR_CONTROL_SIZE="sc-regular-size";SC.SMALL_CONTROL_SIZE="sc-small-size";SC.TINY_CONTROL_SIZE="sc-tiny-size";SC.Control=SC.mixin(SC.clone(SC.ContentValueSupport),{isControl:YES,isSelected:NO,isSelectedBindingDefault:SC.Binding.oneWay().bool(),isActive:NO,isActiveBindingDefault:SC.Binding.oneWay().bool(),fieldKey:null,fieldLabel:null,errorLabel:function(){var a,d,c,b;if(a=this.get("fieldLabel")){return a}d=this.get("fieldKey")||this.constructor.toString();c=d?SC.String.capitalize(SC.String.humanize(d)):"";b=SC.String.locWithDefault("FieldKey."+d,c);return SC.String.locWithDefault("ErrorLabel."+d,b)}.property("fieldLabel","fieldKey").cacheable(),controlSize:SC.REGULAR_CONTROL_SIZE,displayProperties:["isEnabled","isSelected","isActive","controlSize"],_CONTROL_TMP_CLASSNAMES:{},renderMixin:function(b,g){var d=this.get("isSelected"),c=!this.get("isEnabled"),e=this._CONTROL_TMP_CLASSNAMES;e.mixed=d===SC.MIXED_STATE;e.sel=d&&(d!==SC.MIXED_STATE);e.active=this.get("isActive");var f=this.get("controlSize");if(!f){f=SC.REGULAR_CONTROL_SIZE}if(g){b.setClass(e);if(!this.get("renderDelegate")){b.addClass(f)}}else{b.$().setClass(e);if(!this.get("renderDelegate")){b.$().addClass(f)}}if(!g&&this.$input){var a=this.$input();if(a.attr("type")!=="radio"){this.$input().attr("disabled",c)}}}});SC.Editable={isEditable:NO,isEditing:NO,beginEditing:function(){if(!this.get("isEditable")){return NO}if(this.get("isEditing")){return YES}this.beginPropertyChanges();this.set("isEditing",YES);this.becomeFirstResponder();this.endPropertyChanges();return YES},discardEditing:function(){return !this.get("isEditing")},commitEditing:function(){if(!this.get("isEditing")){return YES}this.set("isEditing",NO);this.resignFirstResponder();return YES}};SC.ALIGN_JUSTIFY="justify";SC.FlowedLayout={layoutDirection:SC.LAYOUT_HORIZONTAL,autoResize:YES,shouldResizeWidth:YES,shouldResizeHeight:YES,align:SC.ALIGN_LEFT,canWrap:YES,defaultFlowSpacing:{left:0,bottom:0,top:0,right:0},flowPadding:{left:0,bottom:0,right:0,top:0},_scfl_validFlowPadding:function(){var b=this.get("flowPadding")||{},a={};a.left=b.left||0;a.top=b.top||0;a.bottom=b.bottom||0;a.right=b.right||0;return a}.property("flowPadding").cacheable(),concatenatedProperties:["childMixins"],initMixin:function(){this.invokeOnce("_scfl_tile")},_scfl_childViewsDidChange:function(a){this.invokeOnce("_scfl_tile")}.observes("childViews"),_scfl_layoutPropertyDidChange:function(a){this.invokeOnce("_scfl_tile")}.observes("layoutDirection","align","flowPadding","canWrap","defaultFlowSpacing","isVisibleInWindow"),layoutDidChangeFor:function(g){var b=g._scfl_lastLayout,a=g.get("layout"),d=g.get("frame");if(!b){return arguments.callee.base.apply(this,arguments)}var e=YES;if(b.left&&b.left!==a.left){e=NO}else{if(b.top&&b.top!==a.top){e=NO}else{if(!g.get("fillWidth")&&b.width&&b.width!==a.width){e=NO}else{if(!b.width&&!g.get("fillWidth")&&d.width!==g._scfl_lastFrame.width){e=NO}else{if(!g.get("fillHeight")&&b.height&&b.height!==a.height){e=NO}else{if(!b.height&&!g.get("fillHeight")&&d.height!==g._scfl_lastFrame.height){e=NO}}}}}}if(e){return arguments.callee.base.apply(this,arguments)}this.invokeOnce("_scfl_tile");arguments.callee.base.apply(this,arguments)},observeChildLayout:function(a){if(a._scfl_isBeingObserved){return}a._scfl_isBeingObserved=YES;a.addObserver("flowSpacing",this,"_scfl_layoutPropertyDidChange");a.addObserver("isVisible",this,"_scfl_layoutPropertyDidChange");a.addObserver("useAbsoluteLayout",this,"_scfl_layoutPropertyDidChange");a.addObserver("calculatedWidth",this,"_scfl_layoutPropertyDidChange");a.addObserver("calculatedHeight",this,"_scfl_layoutPropertyDidChange");a.addObserver("startsNewRow",this,"_scfl_layoutPropertyDidChange");a.addObserver("isSpacer",this,"_scfl_layoutPropertyDidChange");a.addObserver("maxSpacerLength",this,"_scfl_layoutPropertyDidChange");a.addObserver("fillWidth",this,"_scfl_layoutPropertyDidChange");a.addObserver("fillHeight",this,"_scfl_layoutPropertyDidChange")},unobserveChildLayout:function(a){a._scfl_isBeingObserved=NO;a.removeObserver("flowSpacing",this,"_scfl_layoutPropertyDidChange");a.removeObserver("isVisible",this,"_scfl_layoutPropertyDidChange");a.removeObserver("useAbsoluteLayout",this,"_scfl_layoutPropertyDidChange");a.removeObserver("calculatedWidth",this,"_scfl_layoutPropertyDidChange");a.removeObserver("calculatedHeight",this,"_scfl_layoutPropertyDidChange");a.removeObserver("startsNewRow",this,"_scfl_layoutPropertyDidChange");a.removeObserver("isSpacer",this,"_scfl_layoutPropertyDidChange");a.removeObserver("maxSpacerLength",this,"_scfl_layoutPropertyDidChange");a.removeObserver("fillWidth",this,"_scfl_layoutPropertyDidChange");a.removeObserver("fillHeight",this,"_scfl_layoutPropertyDidChange")},shouldIncludeChildInFlow:function(a,b){return b.get("isVisible")&&!b.get("useAbsoluteLayout")},flowSpacingForChild:function(a,b){var c=b.get("flowSpacing");if(SC.none(c)){c=this.get("defaultFlowSpacing")}if(SC.none(c)){c=0}if(SC.typeOf(c)===SC.T_NUMBER){c={left:c,right:c,bottom:c,top:c}}else{c.left=c.left||0;c.right=c.right||0;c.top=c.top||0;c.bottom=c.bottom||0}return c},flowSizeForChild:function(a,d){var c=d.get("calculatedWidth"),g=d.get("calculatedHeight"),j=this.get("layoutDirection"),e={},h=d.get("frame"),b=d.get("layout");d._scfl_lastFrame=h;if(c){e.width=c}else{e.width=h.width}if(g){e.height=g}else{e.height=h.height}if(d.get("isSpacer")){e.maxSpacerLength=d.get("maxSpacerLength");if(j===SC.LAYOUT_HORIZONTAL){e.width=b.minWidth||0}else{e.height=b.minHeight||0}}if(j===SC.LAYOUT_HORIZONTAL&&d.get("fillHeight")){e.height=b.minHeight||0}else{if(j===SC.LAYOUT_VERTICAL&&d.get("fillWidth")){e.width=b.minWidth||0}}if(b.width==undefined){d.adjust("width",h.width)}if(b.height==undefined){d.adjust("height",h.height)}return e},clippingFrame:function(){return{left:0,top:0,width:this.get("calculatedWidth"),height:this.get("calculatedHeight")}}.property("calculatedWidth","calculatedHeight"),_scfl_maxCollapsedRowLength:0,_scfl_totalCollapsedRowSize:0,_scfl_calculatedSizeDidChange:function(){if(this.get("autoResize")){if(this.get("layoutDirection")==SC.LAYOUT_VERTICAL){if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_totalCollapsedRowSize"))}}else{if(this.get("shouldResizeWidth")){this.adjust("minWidth",this.get("_scfl_maximumCollapsedRowLength"))}if(this.get("shouldResizeHeight")){this.adjust("minHeight",this.get("_scfl_totalCollapsedRowSize"))}}}}.observes("autoResize","shouldResizeWidth","_scfl_maximumCollapsedRowLength","_scfl_totalCollapsedRowSize","shouldResizeHeight"),_scfl_createPlan:function(){var e=this.get("layoutDirection"),a=this.get("_scfl_validFlowPadding"),d=this.get("frame");var c=(e===SC.LAYOUT_VERTICAL);var b={rows:undefined,maximumCollapsedRowLength:0,totalCollapsedRowSize:0,isVertical:e===SC.LAYOUT_VERTICAL,isHorizontal:e===SC.LAYOUT_HORIZONTAL,flowPadding:a,planStartPadding:a[c?"left":"top"],planEndPadding:a[c?"right":"bottom"],rowStartPadding:a[c?"top":"left"],rowEndPadding:a[c?"bottom":"right"],maximumRowLength:undefined,fitToPlanSize:undefined,align:this.get("align")};if(c){b.maximumRowLength=d.height-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=d.width-b.planStartPadding-b.planEndPadding}else{b.maximumRowLength=d.width-b.rowStartPadding-b.rowEndPadding;b.fitToPlanSize=d.height-b.planStartPadding-b.planEndPadding}return b},_scfl_distributeChildrenIntoRows:function(d){var b=this.get("childViews"),a,g,c=b.length,e=d.isVertical,j=[],f;f=-1;g=0;while(g<c&&g!==f){f=g;var h={plan:d,rowLength:undefined,rowSize:undefined,shouldExpand:undefined,items:undefined,position:undefined};g=this._scfl_distributeChildrenIntoRow(b,g,h);j.push(h)}d.rows=j},_scfl_distributeChildrenIntoRow:function(d,n,h){var p,u=d.length,b=h.plan,f,a,c,q=[],k=0,m=b.isVertical,j,e,r,o=this.get("canWrap"),g=NO;var r=0;var t=h.plan.maximumRowLength;for(p=n;p<u;p++){f=d[p];g=g||(q.length>0&&f.get("startsNewRow"));if(!this.shouldIncludeChildInFlow(p,f)){continue}a=this.flowSizeForChild(p,f);c=this.flowSpacingForChild(p,f);a.width+=c.left+c.right;a.height+=c.top+c.bottom;e=a[m?"height":"width"];r=a.maxSpacerLength+(m?c.top+c.bottom:c.left+c.right);j=a[m?"width":"height"];if((g||(o&&k+e>t))&&q.length>0){break}var v={child:f,itemLength:e,maxItemLength:r,itemSize:j,spacing:c,position:undefined,fillRow:m?f.get("fillWidth"):f.get("fillHeight"),isSpacer:f.get("isSpacer"),left:undefined,top:undefined,width:undefined,height:undefined};q.push(v);k+=e;r=Math.max(e,r)}h.rowLength=k;var s=o?r:h.rowLength;h.plan.maximumCollapsedRowLength=Math.max(s,h.plan.maximumCollapsedRowLength);h.items=q;return p},_scfl_positionChildrenInRows:function(d){var c=d.rows,b=c.length,a;for(a=0;a<b;a++){this._scfl_positionChildrenInRow(c[a])}},_scfl_positionChildrenInRow:function(o){var g=o.items,e=g.length,k,n,d,m=0,a=0,c,f=o.plan.align,j=YES,b=0,h=NO;for(k=0;k<e;k++){n=g[k];if(n.isSpacer){a+=n.child.get("spaceUnits")||1}}if(f===SC.ALIGN_JUSTIFY){a+=e-1}c=Math.max(0,o.plan.maximumRowLength-o.rowLength)/a;while(c>0){for(k=0;k<e;k++){n=g[k];if(n.isSpacer){n.itemLength+=c*(n.child.get("spaceUnits")||1);if(n.itemLength>n.maxItemLength){b+=n.itemLength-n.maxItemLength;n.itemLength=n.maxItemLength}else{h=YES}}}if(!h){break}c=Math.round(b/a);b=0}d=0;if(a===0&&(f===SC.ALIGN_RIGHT||f===SC.ALIGN_BOTTOM)){d=o.plan.maximumRowLength-o.rowLength}else{if(a===0&&(f===SC.ALIGN_CENTER||f===SC.ALIGN_MIDDLE)){d=(o.plan.maximumRowLength/2)-(o.rowLength/2)}}d+=o.plan.rowStartPadding;for(k=0;k<e;k++){n=g[k];if(!n.fillRow){j=NO}m=Math.max(n.itemSize,m);n.position=d;d+=n.itemLength;if(f===SC.ALIGN_JUSTIFY&&k<e-1){d+=c}}o.shouldExpand=e>0?j:NO;o.rowLength=d-o.plan.rowStartPadding;o.rowSize=m;o.plan.totalCollapsedRowSize+=o.rowSize},_scfl_positionRows:function(d){var j=d.rows,c=j.length,f,h,b,a=0,g=0,e;for(f=0;f<c;f++){if(j[f].shouldExpand){a++}g+=j[f].rowSize}e=d.fitToPlanSize-g;b=d.planStartPadding;for(f=0;f<c;f++){h=j[f];if(h.shouldExpand&&e>0){h.rowSize+=e/a;a--}h.position=b;b+=h.rowSize}},_scfl_applyPlan:function(h){var o=h.rows,b,c,n,e=0,k=0,g,a,d,m,f,j=h.isVertical;c=o.length;for(b=0;b<c;b++){n=o[b];e=Math.max(e,n.rowLength);k+=n.rowSize;g=n.items;d=g.length;for(a=0;a<d;a++){m=g[a];m.child.beginPropertyChanges();f={};f.left=m.spacing.left+(j?n.position:m.position);f.top=m.spacing.top+(j?m.position:n.position);if(m.fillRow){f[j?"width":"height"]=n.rowSize}if(m.isSpacer){f[j?"height":"width"]=m.itemLength}if(f.width!==undefined){f.width-=m.spacing.left+m.spacing.right}if(f.height!==undefined){f.height-=m.spacing.top+m.spacing.bottom}this.applyPlanToView(m.child,f);m.child._scfl_lastLayout=f;m.child.endPropertyChanges()}}k+=h.planStartPadding+h.planEndPadding;e+=h.rowStartPadding+h.rowEndPadding;this.beginPropertyChanges();this.set("calculatedHeight",j?e:k);this.set("calculatedWidth",j?k:e);this.set("_scfl_maximumCollapsedRowLength",h.maximumCollapsedRowLength);this.set("_scfl_totalCollapsedRowSize",h.totalCollapsedRowSize);this.endPropertyChanges()},applyPlanToView:function(a,b){a.adjust(b)},_scfl_tile:function(){if(!this.get("isVisibleInWindow")){return}var f=this._scfl_createPlan();this._scfl_distributeChildrenIntoRows(f);this._scfl_positionChildrenInRows(f);this._scfl_positionRows(f);this._scfl_applyPlan(f);this.setIfChanged("numberOfRows",f.rows.length);var d=this._scfl_isObserving||SC.CoreSet.create(),c=SC.CoreSet.create();var e=this.get("childViews"),b=e.length,a,g;for(a=0;a<b;a++){g=e[a];if(!d.contains(g)){this.observeChildLayout(g)}else{d.remove(g)}c.add(g)}b=d.length;for(a=0;a<b;a++){this.unobserveChildLayout(d[a])}},_scfl_frameDidChange:function(){if(this._scfl_isChangingSize){return}var b=this.get("frame"),a=this._scfl_lastFrameSize||{};this._scfl_lastFrameSize=SC.clone(b);if(a.width==b.width&&a.height==b.height){return}this.invokeOnce("_scfl_tile")}.observes("frame"),destroyMixin:function(){var c=this._scfl_isObserving;if(!c){return}var b=c.length,a;for(a=0;a<b;a++){this.unobserveChildLayout(c[a])}},reorder:function(b){if(!SC.typeOf(b)===SC.T_ARRAY){b=arguments}var c=b.length,d=this.childViews,a;this.beginPropertyChanges();while(c-->0){a=b[c];if(SC.typeOf(a)===SC.T_STRING){a=this.get(a)}d.removeObject(a);d.unshiftObject(a)}this.endPropertyChanges();this._scfl_childViewsDidChange();return this}};SC.Gesturable={concatenatedProperties:["gestures"],gestures:[],initMixin:function(){this.createGestures()},createGestures:function(){var e=this.get("gestures"),b,a=e.length,c,d=[];for(b=0;b<a;b++){if(SC.typeOf(e[b])===SC.T_STRING){c=this.get(e[b])}else{c=e[b]}if(!c){throw"Could not find gesture named '"+e[b]+"' on view."}if(c.isClass){c=c.create({view:this})}if(SC.typeOf(e[b])===SC.T_STRING){this[e[b]]=c}d.push(c)}this.set("gestures",d)},touchStart:function(a){this.gestureTouchStart(a)},touchesDragged:function(a,b){this.gestureTouchesDragged(a,b)},touchEnd:function(a){this.gestureTouchEnd(a)},gestureTouchStart:function(e){e.isInteresting=0;var d=this.get("gestures"),b,a=d.length,c;for(b=0;b<a;b++){c=d[b];c.unassignedTouchDidStart(e)}},gestureTouchesDragged:function(c,e){var f=this.get("gestures"),b,a=f.length,d;for(b=0;b<a;b++){d=f[b];d.unassignedTouchesDidChange(c,e)}},gestureTouchEnd:function(e){var d=this.get("gestures"),b,a=d.length,c;for(b=0;b<a;b++){c=d[b];c.unassignedTouchDidEnd(e)}}};SC.InlineEditable={isInlineEditable:YES,isEditable:YES,exampleEditor:SC.InlineTextFieldView,isEditing:NO,inlineEditorDelegate:SC.InlineTextFieldDelegate,_editor:null,beginEditing:function(){var a;a=this.delegateFor("inlineEditorShouldBeginEditing",this.inlineEditorDelegate);if(a&&!a.inlineEditorShouldBeginEditing(this,this.get("value"))){return NO}this._editor=this.invokeDelegateMethod(this.inlineEditorDelegate,"acquireEditor",this);if(this._editor){return this._editor.beginEditing(this)}else{return NO}},commitEditing:function(){return this._editor?this._editor.commitEditing():NO},discardEditing:function(){return this._editor?this._editor.discardEditing():NO},inlineEditorShouldBeginEditing:function(){return !this.isEditing&&this.isEditable},inlineEditorWillBeginEditing:function(b,c,a){b.set("value",this.get("value"))},inlineEditorDidBeginEditing:function(b,c,a){this.set("isEditing",YES)},inlineEditorWillCommmitEditing:function(b,c,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,c)}},inlineEditorDidCommitEditing:function(b,c,a){a.setIfChanged("value",c);if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,c)}this._endEditing()},inlineEditorWillDiscardEditing:function(b,a){if(this.inlineEditorWillEndEditing){this.inlineEditorWillEndEditing(b,this.get("value"))}},inlineEditorDidDiscardEditing:function(b,a){if(this.inlineEditorDidEndEditing){this.inlineEditorDidEndEditing(b,this.get("value"))}this._endEditing()},_endEditing:function(){if(this._editor){this.invokeDelegateMethod(this.inlineEditorDelegate,"releaseEditor",this._editor);this._editor=null}this.set("isEditing",NO)}};SC.InlineEditor={isInlineEditor:YES,isEditing:NO,inlineEditorDelegate:null,_target:null,beginEditing:function(b){if(this.get("isEditing")||!b||!b.isInlineEditable){return NO}var a,c;c=this._target=b;a=this.delegateFor("inlineEditorWillBeginEditing",this.inlineEditorDelegate,c);if(a){a.inlineEditorWillBeginEditing(this,this.get("value"),c)}this.set("isEditing",YES);this.invokeLast(this._callDidBegin);return YES},_callDidBegin:function(){var b=this._target,a;a=this.delegateFor("inlineEditorDidBeginEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidBeginEditing(this,this.get("value"),b)}},commitEditing:function(){if(!this.get("isEditing")){return NO}var a,b=this._target;a=this.delegateFor("inlineEditorShouldCommitEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldCommitEditing(this,this.get("value"),b)){return NO}a=this.delegateFor("inlineEditorWillCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillCommitEditing(this,this.get("value"),b)}this._endEditing();a=this.delegateFor("inlineEditorDidCommitEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidCommitEditing(this,this.get("value"),b)}return YES},discardEditing:function(){if(!this.get("isEditing")){return NO}var a,b=this._target;a=this.delegateFor("inlineEditorShouldDiscardEditing",this.inlineEditorDelegate,b);if(a&&!a.inlineEditorShouldDiscardEditing(this,b)){return NO}a=this.delegateFor("inlineEditorWillDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorWillDiscardEditing(this,b)}this._endEditing();a=this.delegateFor("inlineEditorDidDiscardEditing",this.inlineEditorDelegate,b);if(a){a.inlineEditorDidDiscardEditing(this,b)}return YES},_endEditing:function(){this.set("isEditing",NO);this._target=null}};SC.InlineEditorDelegate={acquireEditor:function(a){},releaseEditor:function(a){},inlineEditorShouldBeginEditing:function(a,b){},inlineEditorWillBeginEditing:function(b,c,a){},inlineEditorDidBeginEditing:function(b,c,a){},inlineEditorShouldCommitEditing:function(b,c,a){},inlineEditorWillCommitEditing:function(b,c,a){},inlineEditorDidCommitEditing:function(b,c,a){},inlineEditorShouldDiscardEditing:function(b,a){},inlineEditorWillDiscardEditing:function(b,a){},inlineEditorDidDiscardEditing:function(b,a){},inlineEditorWillEndEditing:function(b,c,a){},inlineEditorDidEndEditing:function(b,c,a){}};SC.SCALE_NONE="none";SC.FILL="fill";SC.FILL_PROPORTIONALLY="fillProportionally";SC.BEST_FIT="fitBest";SC.BEST_FIT_DOWN_ONLY="fitBestDown";SC.InnerFrame={align:SC.ALIGN_CENTER,innerFrameForSize:function(a,c,h,b){var e=this.get("align"),d=this.get("scale"),g,f,j;j={x:0,y:0,width:h,height:b};if(d===SC.FILL){return j}g=h/a;f=b/c;switch(d){case SC.FILL_PROPORTIONALLY:d=g>f?g:f;break;case SC.BEST_FIT:d=g<f?g:f;break;case SC.BEST_FIT_DOWN_ONLY:if((a>h)||(c>b)){d=g<f?g:f}else{d=1}break;case SC.SCALE_NONE:d=1;break;default:if(isNaN(window.parseFloat(d))||(window.parseFloat(d)<=0)){SC.Logger.warn("SC.InnerFrame: The scale '%@' was not understood.  Scale must be one of SC.FILL, SC.FILL_PROPORTIONALLY, SC.BEST_FIT, SC.BEST_FIT_DOWN_ONLY or a positive number greater than 0.00.".fmt(d));return j}}a*=d;c*=d;j.width=Math.round(a);j.height=Math.round(c);switch(e){case SC.ALIGN_LEFT:j.x=0;j.y=(b/2)-(c/2);break;case SC.ALIGN_RIGHT:j.x=h-a;j.y=(b/2)-(c/2);break;case SC.ALIGN_TOP:j.x=(h/2)-(a/2);j.y=0;break;case SC.ALIGN_BOTTOM:j.x=(h/2)-(a/2);j.y=b-c;break;case SC.ALIGN_TOP_LEFT:j.x=0;j.y=0;break;case SC.ALIGN_TOP_RIGHT:j.x=h-a;j.y=0;break;case SC.ALIGN_BOTTOM_LEFT:j.x=0;j.y=b-c;break;case SC.ALIGN_BOTTOM_RIGHT:j.x=h-a;j.y=b-c;break;default:if(e!==SC.ALIGN_CENTER&&e!==SC.ALIGN_MIDDLE){SC.Logger.warn("SC.InnerFrame: The align '%@' was not understood.  Align must be one of SC.ALIGN_CENTER/SC.ALIGN_MIDDLE, SC.ALIGN_LEFT, SC.ALIGN_RIGHT, SC.ALIGN_TOP, SC.ALIGN_BOTTOM, SC.ALIGN_TOP_LEFT, SC.ALIGN_TOP_RIGHT, SC.ALIGN_BOTTOM_LEFT or SC.ALIGN_BOTTOM_RIGHT.".fmt(e))}j.x=(h/2)-(a/2);j.y=(b/2)-(c/2)}return j},scale:SC.FILL};SC.StaticLayout={hasStaticLayout:YES};SC.Validatable={initMixin:function(){this._validatable_validatorDidChange()},validator:null,errorLabel:null,isValid:function(){return SC.typeOf(this.get("value"))!==SC.T_ERROR}.property("value"),ownerForm:null,performValidate:function(c){var a=SC.VALIDATE_OK;if(this._validator){var b=this.get("ownerForm");if(c){a=this._validator.validatePartial(b,this);if((a==SC.VALIDATE_NO_CHANGE)&&(this._validator.validateChange(b,this)==SC.VALIDATE_OK)){a=SC.VALIDATE_OK}}else{a=this._validator.validateChange(b,this)}}return a},performValidateSubmit:function(){return this._validator?this._validator.validateSubmit(this.get("ownerForm"),this):SC.VALIDATE_OK},performValidateKeyDown:function(a){var b=a.getCharString();if(!b){return YES}return this._validator?this._validator.validateKeyDown(this.get("ownerForm"),this,b):YES},validatorObject:function(){return this._validator}.property(),validateSubmit:function(){return this.performValidateSubmit()},objectForFieldValue:function(b,a){return this._validator?this._validator.objectForFieldValue(b,this.get("ownerForm"),this):b},fieldValueForObject:function(a){return this._validator?this._validator.fieldValueForObject(a,this.get("ownerForm"),this):a},_validatable_displayObserver:function(){this.displayDidChange()}.observes("isValid"),renderMixin:function(a){a.setClass("invalid",!this.get("isValid"))},_validatable_validatorDidChange:function(){var a=this.get("ownerForm");var b=SC.Validator.findFor(a,this,this.get("validator"));if(b!=this._validator){this.propertyWillChange("validatorObject");if(this._validator){this._validator.detachFrom(a,this)}this._validator=b;if(this._validator){this._validator.attachTo(a,this)}this.propertyDidChange("validatorObject")}}.observes("validator","ownerForm")};SC.RenderDelegate={create:function(){var c=SC.beget(this);var b,a=arguments.length;for(b=0;b<a;b++){c.mixin(arguments[b])}return c},reopen:function(b){var c,a;for(c in b){a=b[c];if(!b.hasOwnProperty(c)){continue}if(typeof a==="function"&&a!==this[c]){a.base=this[c]||SC.K}if(a&&a.isEnhancement&&a!==this[c]){a=SC._enhance(this[c]||SC.K,a)}this[c]=a}},get:function(a){return this[a]},getPropertyFor:function(b,a){if(this[a+"For"]){return this[a+"For"](b,a)}return this[a]},className:undefined,render:function(b,a){},update:function(b,a){}};SC.RenderDelegate.extend=SC.RenderDelegate.create;SC.RenderDelegate.mixin=SC.RenderDelegate.reopen;sc_require("render_delegates/render_delegate");SC.BaseTheme.canvasImageRenderDelegate=SC.RenderDelegate.create({className:"canvasImage",render:function(d,b){var c=d.get("width")||0,a=d.get("height")||0;b.attr("width",c);b.attr("height",a)},update:function(a,e){var g=e[0],j=a.get("image"),d=a.get("frame"),n=d.width,k=d.height,m=a.get("innerFrame"),o=a.get("backgroundColor"),q=a.get("renderState"),b;var p=![m.x,m.y,m.width,m.height].isEqual(q._lastInnerFrameValues),h=![g.width,g.height].isEqual(q._lastElemSizeValues),f=a.didChangeFor("canvasImageRenderDelegate","backgroundColor"),c=a.didChangeFor("canvasImageRenderDelegate","image")||(j&&j.complete)!==q._lastImageComplete;if(h||p||f||c){if(g&&g.getContext){g.height=k;g.width=n;b=g.getContext("2d");b.clearRect(0,0,n,k);if(o){b.fillStyle=o;b.fillRect(0,0,n,k)}if(j&&j.complete){b.drawImage(j,Math.floor(m.x),Math.floor(m.y),Math.floor(m.width),Math.floor(m.height))}}q._lastInnerFrameValues=[m.x,m.y,m.width,m.height];q._lastElemSizeValues=[g.width,g.height];q._lastImageComplete=j&&j.complete}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.containerRenderDelegate=SC.RenderDelegate.create({render:function(b,a){},update:function(){}});sc_require("render_delegates/render_delegate");SC.RenderDelegate.reopen({sizes:[SC.TINY_CONTROL_SIZE,SC.SMALL_CONTROL_SIZE,SC.REGULAR_CONTROL_SIZE,SC.LARGE_CONTROL_SIZE,SC.HUGE_CONTROL_SIZE,SC.JUMBO_CONTROL_SIZE],sizeFor:function(f){var e=f.get("controlSize"),c,b,a;if(e){if(!this[e]){this[e]={}}c=this[e];if(!c.name){c.name=e}return c}var d=f.get("frame");if(!d){c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c}for(b=0;b<a;b++){key=sizes[b];c=this[key];if(!c){continue}if((c.width===undefined&&c.height===undefined&&c.minHeight===undefined&&c.minWidth===undefined&&c.maxHeight===undefined&&c.maxWidth===undefined)||(c.width!==undefined&&d.width!==c.width)||(c.minWidth!==undefined&&d.width<c.minWidth)||(c.maxWidth!==undefined&&d.width>c.maxWidth)||(c.height!==undefined&&d.height!==c.height)||(c.minHeight!==undefined&&d.height<c.minHeight)||(c.maxHeight!==undefined&&d.height<c.maxHeight)){continue}if(!c.name){c.name=key}return c}c=this["sc-regular-size"];if(!c){c=this["sc-regular-size"]={}}if(!c.name){c.name="sc-regular-size"}return c},addSizeClassName:function(c,b){var a=this.sizeFor(c);if(a){b.addClass(a.name)}},updateSizeClassName:function(c,a){var b=this.sizeFor(c);if(b){a.addClass(b.name)}},getPropertyFor:function(c,a){var b=this.sizeFor(c);if(b){if(b[a+"For"]){return b[a+"For"](c,a)}else{if(b[a]!==undefined){return b[a]}}}if(this[a+"For"]){return this[a+"For"]}return this[a]}});sc_require("render_delegates/render_delegate");SC.BaseTheme.imageRenderDelegate=SC.RenderDelegate.create({className:"image",render:function(f,c){var e=f.get("image"),b=f.get("imageValue"),d=f.get("type")||SC.IMAGE_TYPE_URL,a=f.get("toolTip");c=c.begin("img");c.attr("src",e.src);if(b&&d===SC.IMAGE_TYPE_CSS_CLASS){c.addClass(b);this._last_class=b}if(a){c.attr("title",a);c.attr("alt",a)}c.addStyle(this.imageStyles(f));c=c.end()},update:function(e,a){var d=e.get("image"),c=e.get("imageValue"),b=e.get("toolTip");a=a.find("img");a.attr("src",d.src);if(c!==this._last_class){a.setClass(this._last_class,NO)}if(c){a.addClass(c);this._last_class=c}if(b){a.attr("title",b);a.attr("alt",b)}a.css(this.imageStyles(e))},imageStyles:function(b){var a=b.get("innerFrame");return{position:"absolute",left:Math.round(a.x),top:Math.round(a.y),width:Math.round(a.width),height:Math.round(a.height)}}});sc_require("render_delegates/render_delegate");SC.BaseTheme.labelRenderDelegate=SC.RenderDelegate.create({className:"label",render:function(c,b){this.addSizeClassName(c,b);b.addStyle({fontWeight:c.get("fontWeight")||null,textAlign:c.get("textAlign")||null});b.setClass("ellipsis",c.get("needsEllipsis")||NO);b.setClass("icon",c.get("icon")||NO);var a=this.htmlForTitleAndIcon(c);b.push(a);c.get("renderState")._lastHTMLForTitleAndIcon=a},update:function(c,a){this.updateSizeClassName(c,a);a.css({fontWeight:c.get("fontWeight")||null,textAlign:c.get("textAlign")||null});a.setClass("ellipsis",c.get("needsEllipsis")||NO);var b=this.htmlForTitleAndIcon(c);if(c.get("renderState")._lastHTMLForTitleAndIcon!==b){a.html(b);c.get("renderState")._lastHTMLForTitleAndIcon=b}},htmlForTitleAndIcon:function(f){var e=f.get("title"),d=f.get("hint"),a=f.get("hintEnabled"),c=f.get("escapeHTML"),b=f.get("icon")||"";if(e&&c){e=SC.RenderContext.escapeHTML(e)}if(a&&d&&!e){if(c){d=SC.RenderContext.escapeHTML(d)}e="<span class='sc-hint'>"+d+"</span>"}if(b){if(b.indexOf("/")>=0){b='<img src="'+b+'" alt="" class="icon" />'}else{b='<img src="'+SC.BLANK_IMAGE_URL+'" alt="" class="icon '+b+'" />'}}return b+e}});sc_require("core");SC.Benchmark={verbose:NO,enabled:YES,events:{},stats:{},globalStartTime:null,addEvent:function(a,b){if(!b){b=new Date().getTime()}this.events[a]=b},start:function(b,a,e,d){if(!this.enabled){return}var f=(e||Date.now()),c;if(a){c=this._subStatFor(b,a)}else{c=this._statFor(b)}if(d&&c._starts.length>0){c._starts.push("ignore")}else{c._starts.push(f)}c._times.push({start:f,_subStats:{}});return b},end:function(c,b,f){var e;if(!this.enabled){return}if(b){e=this._subStatFor(c,b)}else{e=this._statFor(c)}var g=e._starts.pop();if(!g){SC.Logger.log('SC.Benchmark "%@" ended without a matching start.  No information was saved.'.fmt(c));return}if(g=="ignore"){return}var a=(f||Date.now());var d=a-g;e._times[e._times.length-1].end=a;e._times[e._times.length-1].dur=d;e.amt+=d;e.runs++;if(this.verbose){this.log(c)}},setGlobalStartTime:function(a){this.globalStartTime=a},bench:function(e,d,a){if(!d){d="bench%@".fmt(this._benchCount++)}if(!a){a=1}var b;while(--a>=0){var c=SC.Benchmark.start(d);b=e();SC.Benchmark.end(c)}return b},install:function(a,d,b){a["b__"+d]=a[d];var c=a["b__"+d];a[d]=function(){var f="%@(%@)".fmt(d,$A(arguments).join(", "));SC.Benchmark.start(f,b);var e=c.apply(this,arguments);SC.Benchmark.end(f);return e}},restore:function(a,b){a[b]=a["b__"+b]},report:function(c){if(c){return this._genReport(c)}var b=[];for(var a in this.stats){if(!this.stats.hasOwnProperty(a)){continue}b.push(this._genReport(a))}return b.join("\n")},timelineReport:function(a){a=(a)?"SproutCore Application":a;var b=[a,"User-Agent: %@".fmt(navigator.userAgent),"Report Generated: %@ (%@)".fmt(new Date().toString(),Date.now()),""];var d=this._compileChartData(true);for(var c=0;c<d.length;c++){if(d[c][4]){b.push(this._timelineGenSubReport(d[c]))}else{b.push(this._timelineGenReport(d[c]))}}return b.join("\n")},getTimelineChartContent:function(){var m=this._compileChartData(false);var g=m.length;if(g===0){return}var c=this.globalStartTime?this.globalStartTime:m[0][1];var d=m[g-1][2]-c;var o=25+g*30;var r=Math.ceil(d/200)+1;var s=r*50;var n=10,u=300;var p="<div class = 'sc-benchmark-timeline-chart' style = 'position:relative;'>";p+="<div class = 'sc-benchmark-top'></div>";for(var q=0;q<r;q++){p+="<div class = 'sc-benchmark-tick' style = '";p+="left: "+(n+q*50)+"px; ";p+="height: "+o+"px;";p+="'></div>";p+="<div class = 'sc-benchmark-tick-label' style = '";p+="left: "+(n+q*50)+"px; ";p+="'>"+(q*200)+"ms</div>"}for(q=0;q<g;q++){p+="<div class = 'sc-benchmark-row ";p+=(q%2===0)?"even":"odd";p+="' style = '";p+="top: "+(50+(q*30))+"px; ";p+="'></div>";var j=document.createElement("div");var f=m[q][1];var e=m[q][2];var a=m[q][3];p+="<div class = 'sc-benchmark-bar' style = '";p+="left:"+(n+((f-c)/4))+"px; width: "+((a/4))+"px;";p+="top: "+(28+(q*30))+"px;";p+="' title = 'start: "+(f-c)+" ms, end: "+(e-c)+" ms, duration: "+a+" ms'";p+=">";p+="&nbsp;"+m[q][0]+" <span class='sc-benchmark-emphasis'>";p+=a+"ms (start: "+(f-c)+"ms)";p+="</span>";p+="</div>"}var b=this.events,k=0;for(q in b){var h=b[q]-c;p+="<div class = 'sc-benchmark-event idx"+(k%10)+"' style = '";p+="left: "+(n+h/4)+"px; height: "+o+"px; top: 20px;";p+="' title = '"+q+": "+h+"'></div>";k++}p+="</div>";return{html:p,totalCapturedTime:d,pointsCaptured:g,width:s+n+u,height:o}},getTimelineChartView:function(){var a=SC.ScrollView.create({contentView:SC.StaticContentView.extend({}),reload:function(){var b=SC.Benchmark.getTimelineChartContent();this.contentView.set("content",b.html);this.contentView.adjust({width:b.width,height:b.height});this.chartContent=b;SC.RunLoop.invokeLater(SC.Benchmark,function(){this.contentView.notifyPropertyChange("frame")})}});a.reload();return a},timelineChart:function(a){SC.RunLoop.begin();var c=0;this.hideChart();var b=this.getTimelineChartView();var e=b.chartContent.pointsCaptured,d=b.chartContent.totalCapturedTime;this._benchmarkChart=SC.Pane.create({classNames:["sc-benchmark-pane"],layout:{left:20,right:20,bottom:20,top:20},childViews:["title","exit"],exit:SC.ButtonView.extend({layout:{right:20,top:20,width:100,height:30},title:"Hide Chart",target:this,action:"hideChart"}),title:SC.LabelView.extend({classNames:["sc-benchmark-title"],layout:{left:20,top:23,right:200,height:30},value:((a)?a:"SproutCore Application")+(" - Total Captured Time: "+d+" ms - Points Captured: "+e),fontWeight:"bold"})}).append();b.set("layout",{left:20,top:60,bottom:20,right:20});this._benchmarkChart.appendChild(b);SC.RunLoop.end()},hideChart:function(){if(this._benchmarkChart){this._benchmarkChart.remove();this._benchmarkChart=null}return YES},tryToPerform:function(b,a){if(this[b]){return this[b](a)}return NO},log:function(d){var c=this.report(d).split("\n"),b=c.length,a;for(a=0;a<b;a++){SC.Logger.log(c[a])}},startProfile:function(a){if(!this.enabled){return}SC.Logger.profile(a)},endProfile:function(a){if(!this.enabled){return}SC.Logger.profileEnd(a)},loadPreloadEvents:function(){var f=SC.benchmarkPreloadEvents,e=[],b,a,c;if(typeof webkitPerformnce!=="undefined"){SC.mixin(f,webkitPerformane.timing)}if(!this.globalStartTime){var d=["navigation","navigationStart","headStart"];a=d.length;for(b=0;b<a;b++){if(f[d[b]]){this.globalStartTime=f[d[b]];break}}}this.javascriptStartTime=f.headStart;SC.mixin(this.events,f);this._hasLoadedPreloadEvents=true},_loadBenchmarksFromEvents:function(){if(!this._hasLoadedPreloadEvents){this.loadPreloadEvents()}var b=this.events;for(var a in b){if(a.substr(-3)!=="End"){continue}var c=a.substr(0,a.length-3);if(!b[c+"Start"]){continue}SC.Benchmark.start(c,undefined,b[c+"Start"]);SC.Benchmark.end(c,undefined,b[c+"End"]);delete b[c+"Start"];delete b[c+"End"]}},_compileChartData:function(g){this._loadBenchmarksFromEvents();var m=[],a;for(var n in this.stats){var e=this.stats[n];for(var f=0;f<e._times.length;f++){var o=e._times[f];a=(e._times.length>1)?(f+1)+" - "+n:n;m.push([a,o.start,o.end,o.dur,false]);if(g){var b=o._subStats;for(var c in b){var h=b[c];for(var d=0;d<h._times.length;d++){var p=h._times[d];a=(h._times.length>1)?(d+1)+" - "+c:c;m.push([a,p.start,p.end,p.dur,true])}}}}}m.sort(function(k,j){if(k[1]<j[1]){return -1}else{if(k[1]==j[1]){if(k[3]&&!j[3]){return -1}if(!k[3]&&j[3]){return 1}return 0}}return 1});return m},_genReport:function(a){var b=this._statFor(a);var d=(b.runs>0)?(Math.floor(b.amt*1000/b.runs)/1000):0;var c=b._times[b._times.length-1];return"BENCH %@ msec: %@ (%@x); latest: %@".fmt(d,(b.name||a),b.runs,c.end-c.start)},_timelineGenReport:function(a){if(this.globalStartTime){return"BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_timelineGenSubReport:function(a){if(this.globalStartTime){return"   CHECKPOINT BENCH start: %@ msec, duration: %@ msec,  %@".fmt((a[1]-this.globalStartTime),a[3],a[0])}else{return"   CHECKPOINT BENCH duration: %@ msec, %@".fmt(a[3],a[0])}},_subStatFor:function(d,c){var e=this.stats[c]._times.length;if(e===0){return}var a=this.stats[c]._times[this.stats[c]._times.length-1]._subStats;var b=a[d];if(!b){a[d]={runs:0,amt:0,name:d,_starts:[],_times:[]};b=a[d]}return b},_statFor:function(b){var a=this.stats[b];if(!a){a=this.stats[b]={runs:0,amt:0,name:b,_starts:[],_times:[]};a=this.stats[b]}return a},reset:function(){this.stats={}},_bench:function(b,a){SC.Benchmark.bench(b,a,1)},_benchCount:1};SC.Benchmark=SC.Benchmark;SC.Cookie=SC.Object.extend({name:null,value:"",expires:null,path:null,domain:null,secure:NO,isCookie:YES,destroy:function(){this.set("expires",-1);this.write();arguments.callee.base.apply(this,arguments)},write:function(){var d=this.get("name"),f=this.get("value"),a=this.get("expires"),h=this.get("path"),e=this.get("domain"),g=this.get("secure"),b="",c;if(a){if(typeof a===SC.T_NUMBER){c=new Date();c.setTime(c.getTime()+(a*24*60*60*1000))}else{if(SC.DateTime&&a.get&&a.get("milliseconds")){c=new Date(a.get("milliseconds"))}else{if(a.toUTCString&&a.toUTCString.apply){c=a}}}if(c){b="; expires="+c.toUTCString()}}if(!SC.none(h)){b+="; path="+h}if(!SC.none(e)){b+="; domain="+e}if(g===YES){b+="; secure"}document.cookie=d+"="+encodeURIComponent(f)+b;return this}});SC.Cookie.mixin({find:function(a){if(document.cookie&&document.cookie!==""){var d=document.cookie.split(";");for(var c=0;c<d.length;c++){var b=SC.String.trim(String(d[c]));if(b.substring(0,a.length+1)===(a+"=")){return SC.Cookie.create({name:a,value:decodeURIComponent(b.substring(a.length+1))})}}}return null}});SC.CookieMonster={nomNomNom:function(b){var a=SC.kindOf(b,SC.Cookie);if(a){SC.Logger.log("YUM!");return b.destroy()}SC.Logger.error("Y U PASS ME NO COOKIE? %@",b);return NO}};SC.mixin(SC.$.fn,{setClass:function(d,c){if(SC.none(d)){return this}var e=SC.typeOf(d)!==SC.T_STRING,a=this._fixupClass,b;this.each(function(){if(this.nodeType!==1){return}var h=this.className.split(/\s+/),g=NO;if(e){for(var f in d){if(d.hasOwnProperty(f)){g=a(h,f,d[f])||g}}}else{g=a(h,d,c)}if(g){this.className=h.join(" ")}});return this},_fixupClass:function(d,a,c){var b=d.indexOf(a);if(c){if(b<0){d.push(a);return YES}}else{if(b>=0){d[b]=null;return YES}}return NO}});SC.ExceptionHandler={enabled:(SC.buildMode!=="debug"),handleException:function(a){if(this.isShowingErrorDialog){return NO}this._displayErrorDialog(a);return NO},_displayErrorDialog:function(b){var a=this._errorDialogHTMLForException(b),c=document.createElement("div");c.style.cssText="left: 0px; right: 0px; top: 0px; bottom: 0px; position: absolute; background-color: white; background-color: rgba(255,255,255,0.6); z-index:100;";c.innerHTML=a;document.body.appendChild(c);this.isShowingErrorDialog=YES},_errorDialogHTMLForException:function(b){var a;a=['<div id="sc-error-dialog" style="position: absolute; width: 500px; left: 50%; top: 50%; margin-left: -250px; background-color: white; border: 1px solid black; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; padding: 10px">',"An error has occurred which prevents the application from running:","<br><br>",b.message,'<div id="sc-error-dialog-reload-button" onclick="window.location.reload();" style="float: right; font-family: Monaco, monospace; font-size: 9px; letter-spacing: 1px; border: 1px solid black; padding: 3px; clear: both; margin-top: 20px; cursor: pointer;">',"Reload","</div>","</div>"];return a.join("")},isShowingErrorDialog:NO};SC.IMAGE_ABORTED_ERROR=SC.$error("SC.Image.AbortedError","Image",-100);SC.IMAGE_FAILED_ERROR=SC.$error("SC.Image.FailedError","Image",-101);SC.imageQueue=SC.Object.create({loadLimit:4,activeRequests:0,loadImage:function(a,e,f,d){var b=SC.typeOf(e);if(SC.none(f)&&SC.typeOf(e)===SC.T_FUNCTION){e=null;f=e}if(SC.typeOf(f)===SC.T_STRING){f=e[f]}if(SC.none(d)){d=SC.none(e)&&SC.none(f)}var c=this._imageEntryFor(a);if(c.status===this.IMAGE_LOADED){if(f){f.call(e||c.image,c.url,c.image)}}else{if(e||f){this._addCallback(c,e,f)}c.retainCount++;this._scheduleImageEntry(c,d)}},releaseImage:function(a,d,e){var c=this._imageEntryFor(a,NO);if(!c){return this}if(--c.retainCount<=0){this._deleteEntry(c)}else{if(d||e){var b=SC.typeOf(d);if(SC.none(e)&&SC.typeOf(d)===SC.T_FUNCTION){d=null;e=d}if(SC.typeOf(e)===SC.T_STRING){e=d[e]}this._removeCallback(c,d,e)}}},reloadImage:function(a){var b=this._imageEntryFor(a,NO);if(b&&b.status===this.IMAGE_LOADED){b.status=this.IMAGE_WAITING}},loadNextImage:function(){var c=null,a;if(this.get("activeRequests")>=this.get("loadLimit")){return}a=this._foregroundQueue;while(a.length>0&&!c){c=a.shift()}if(!c){a=this._backgroundQueue;while(a.length>0&&!c){c=a.shift()}}this.set("isLoading",!!c);if(c){var b=c.image;if(!b){return}$(b).bind("abort",this._imageDidAbort);$(b).bind("error",this._imageDidError);$(b).bind("load",this._imageDidLoad);b.src=c.url;this._loading.push(c);this.incrementProperty("activeRequests");this.loadNextImage()}},_imageEntryFor:function(c,a){if(a===undefined){a=YES}var d=this._images[c];if(!d&&a){var b=new Image();d=this._images[c]={url:c,status:this.IMAGE_WAITING,callbacks:[],retainCount:0,image:b};b.entry=d}return d},_deleteEntry:function(a){this._unscheduleImageEntry(a);delete this._images[a.url]},_addCallback:function(c,d,e){var b=c.callbacks;var a=b.find(function(f){return f[0]===d&&f[1]===e},this);if(!a){b.push([d,e])}b=null;return this},_removeCallback:function(b,c,d){var a=b.callbacks;a.forEach(function(f,e){if(f[0]===c&&f[1]===d){a[e]=null}},this);a=null;return this},_scheduleImageEntry:function(d,c){var b=this._backgroundQueue;var e=this._foregroundQueue;if(d.status===this.IMAGE_LOADED){return this}if((d.status===this.IMAGE_QUEUED)&&!c&&d.isBackground){b[b.indexOf(d)]=null;d.status=this.IMAGE_WAITING}if(d.status!==this.IMAGE_QUEUED){var a=(c)?b:e;a.push(d);d.status=this.IMAGE_QUEUED;d.isBackground=c}if(!this.isLoading){this.invokeLater(this.loadNextImage,100)}this.set("isLoading",YES);return this},_unscheduleImageEntry:function(b){if(b.status!==this.IMAGE_QUEUED){return this}var a=b.isBackground?this._backgroundQueue:this._foregroundQueue;a[a.indexOf(b)]=null;if(this._loading.indexOf(b)>=0){if(a.image){a.image.abort()}this.imageStatusDidChange(b,this.ABORTED)}return this},_imageDidAbort:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ABORTED)},this)},_imageDidError:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.ERROR)},this)},_imageDidLoad:function(){SC.run(function(){SC.imageQueue.imageStatusDidChange(this.entry,SC.imageQueue.LOADED)},this)},imageStatusDidChange:function(c,a){if(!c){return}var b=c.url;var d;switch(a){case this.LOADED:d=c.image;break;case this.ABORTED:d=SC.IMAGE_ABORTED_ERROR;break;case this.ERROR:d=SC.IMAGE_FAILED_ERROR;break;default:d=SC.IMAGE_FAILED_ERROR;break}c.callbacks.forEach(function(f){var g=f[0],h=f[1];h.call(g,b,d)},this);c.callbacks=[];c.status=(a===this.LOADED)?this.IMAGE_LOADED:this.IMAGE_WAITING;var e=c.image;if(e){e.onload=e.onerror=e.onabort=null;if(a!==this.LOADED){c.image=null}}this._loading[this._loading.indexOf(c)]=null;if(this._loading.length>this.loadLimit*2){this._loading=this._loading.compact()}this.decrementProperty("activeRequests");this.loadNextImage()},init:function(){arguments.callee.base.apply(this,arguments);this._images={};this._loading=[];this._foregroundQueue=[];this._backgroundQueue=[]},IMAGE_LOADED:"loaded",IMAGE_QUEUED:"queued",IMAGE_WAITING:"waiting",ABORTED:"aborted",ERROR:"error",LOADED:"loaded"});SC.Math=SC.Object.create({near:function(c,b,a){if(!a){a=0.00001}return Math.abs(c-b)<=a},round:function(d,a){if(!a){a=0}var b=Math.pow(10,a);if(a<0){var c=b.toString();b=c.substring(0,c.indexOf("1")+1)}d=d.valueOf();return Math.round(d*b)/b}});SC.Task=SC.Object.extend({run:function(a){}});sc_require("tasks/task");SC.LOG_MODULE_LOADING=YES;SC.Module=SC.Object.create({isModuleReady:function(a){var b=SC.MODULE_INFO[a];return b?!!b.isReady:NO},loadModule:function(b,g,a){var c=SC.MODULE_INFO[b],h,f,j=SC.A(arguments).slice(3),d=SC.LOG_MODULE_LOADING,k,e;if(a===undefined&&SC.typeOf(g)===SC.T_FUNCTION){a=g;g=null}if(d){SC.debug("SC.Module: Attempting to load '%@'",b)}if(!c){throw"SC.Module: could not find module '%@'".fmt(b)}c.isPrefetching=NO;if(c.isLoaded&&!c.isWaitingForRunLoop){if(d){SC.debug("SC.Module: Module '%@' already loaded.",b)}if(!this._dependenciesMetForModule(b)){this._addCallbackForModule(b,g,a,j);this._loadDependenciesForModule(b);return NO}if(c.source){if(d){SC.debug("SC.Module: Evaluating JavaScript for module '%@'.",b)}this._evaluateStringLoadedModule(c);this._addCallbackForModule(b,g,a,j);this.invokeLast(function(){c.isReady=YES;this._moduleDidBecomeReady(b)});return NO}if(a){if(SC.isReady){SC.Module._invokeCallback(b,g,a,j)}else{SC.ready(SC.Module,function(){SC.Module._invokeCallback(b,g,a,j)})}}return YES}else{if(c.isWaitingForRunLoop){this._addCallbackForModule(b,g,a,j)}else{if(d){SC.debug("SC.Module: Module '%@' is not loaded, loading now.",b)}this._addCallbackForModule(b,g,a,j);if(!c.isLoading){this._loadDependenciesForModule(b);this._loadCSSForModule(b);this._loadJavaScriptForModule(b);c.isLoading=YES}return NO}}},_addCallbackForModule:function(b,e,f,a){var c=SC.MODULE_INFO[b];var d=c.callbacks||[];if(f){d.push(function(){SC.Module._invokeCallback(b,e,f,a)})}c.callbacks=d},prefetchModule:function(a){var b=SC.MODULE_INFO[a];if(b.isLoading||b.isLoaded){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Prefetching module '%@'.",a)}this._loadDependenciesForModule(a);this._loadCSSForModule(a);this._loadJavaScriptForModule(a);b.isLoading=YES;b.isPrefetching=YES},_executeLazilyInstantiatedModule:function(b,c,j){var h=SC.LAZY_INSTANTIATION[b];var g;var a;var k,d;if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' is marked for lazy instantiation, instantiating it now",b)}d=h.length;for(k=0;k<d;k++){try{h[k]()}catch(f){SC.Logger.error("SC.Module: Failed to lazily instatiate entry for  '%@'".fmt(b))}}delete SC.LAZY_INSTANTIATION[b];g=this._targetForTargetName(c);a=this._methodForMethodNameInTarget(j,g);if(!a){throw"SC.Module: could not find callback for lazily instantiated module '%@'".fmt(b)}},_evaluateStringLoadedModule:function(b){var a=b.source;jQuery.globalEval(a);delete b.source;if(b.cssSource){var c=document.createElement("style");c.setAttribute("type","text/css");if(c.styleSheet){c.styleSheet.cssText=b.cssSource}else{var d=document.createTextNode(b.cssSource);c.appendChild(d)}document.getElementsByTagName("head")[0].appendChild(c)}b.isReady=YES},_loadCSSForModule:function(d){var f=document.getElementsByTagName("head")[0];var e=SC.MODULE_INFO[d];var h=e.styles||[];var b=h.length;var c;var g;var a;if(!f){f=document.documentElement}b=h.length;for(a=0;a<b;a++){c=h[a];if(c.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading CSS file in '%@' -> '%@'",d,c)}g=document.createElement("link");g.setAttribute("href",c);g.setAttribute("rel","stylesheet");g.setAttribute("type","text/css");f.appendChild(g)}}g=null},_loadJavaScriptForModule:function(b){var c=SC.MODULE_INFO[b];var d;var a;var e=c.dependencies;var f=YES;if(e&&e.length>0){f=this._dependenciesMetForModule(b)}if(c.isPrefetched){a=c.stringURL}else{if(f){a=c.scriptURL}else{a=c.stringURL}}if(a.length>0){if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Loading JavaScript file in '%@' -> '%@'",b,a)}d=document.createElement("script");d.setAttribute("type","text/javascript");d.setAttribute("src",a);if(SC.browser.isIE){d.onreadystatechange=function(){if(this.readyState=="complete"||this.readyState=="loaded"){SC.run(function(){SC.Module._moduleDidLoad(b)})}}}else{d.onload=function(){SC.run(function(){SC.Module._moduleDidLoad(b)})}}document.body.appendChild(d)}},_dependenciesMetForModule:function(c){var e=SC.MODULE_INFO[c].dependencies||[];var b,a=e.length;var f;var d;for(b=0;b<a;b++){f=e[b];d=SC.MODULE_INFO[f];if(!d){throw"SC.loadModule: Unable to find dependency %@ for module %@.".fmt(f,c)}if(!d.isReady){return NO}}return YES},_loadDependenciesForModule:function(a){var b=SC.MODULE_INFO[a];var e=SC.LOG_MODULE_LOADING;var j=b.dependencies||[];var f=YES;var g=j.length;var k;var d;var c;var h;for(k=0;k<g;k++){d=j[k];c=SC.MODULE_INFO[d];if(!c){throw"SC.Module: could not find required module '%@' for module '%@'".fmt(d,a)}else{if(c.isLoading){f=NO;h=c.dependents;if(!h){c.dependents=h=[]}h.push(a)}else{if(c.isReady){continue}else{f=NO;h=c.dependents;if(!h){c.dependents=h=[]}h.push(a);if(e){SC.debug("SC.Module: '%@' depends on '%@', loading dependency",a,d)}SC.Module.loadModule(d)}}}}},_invokeCallback:function(c,d,a,b){var g;var f;f=this._targetForTargetName(d);g=this._methodForMethodNameInTarget(a,f);if(!g){if(SC.LAZY_INSTANTIATION[c]){this._executeLazilyInstantiatedModule(c,d,a);f=this._targetForTargetName(d);g=this._methodForMethodNameInTarget(a,f)}else{throw"SC.Module: could not find callback for '%@'".fmt(c)}}if(!b){b=[]}b.unshift(c);var e=!!SC.RunLoop.currentRunLoop;if(e){SC.run(function(){g.apply(f,b)})}else{g.apply(f,b)}},_invokeCallbacksForModule:function(c){var e=SC.MODULE_INFO[c],d;if(!e){return}if(SC.LOG_MODULE_LOADING){SC.debug("SC.Module: Module '%@' has completed loading, invoking callbacks.",c)}d=e.callbacks||[];for(var b=0,a=d.length;b<a;++b){d[b]()}},_evaluateAndInvokeCallbacks:function(a){var d=SC.MODULE_INFO;var b=d[a];var c=SC.LOG_MODULE_LOADING;if(c){SC.debug("SC.Module: Evaluating and invoking callbacks for '%@'.",a)}if(b.source){this._evaluateStringLoadedModule(b)}b.isWaitingForRunLoop=YES;this.invokeLast(function(){b.isReady=YES;this._moduleDidBecomeReady(a)})},_moduleDidBecomeReady:function(a){var c=SC.MODULE_INFO;var b=c[a];var d=SC.LOG_MODULE_LOADING;b.isWaitingForRunLoop=NO;if(SC.isReady){SC.Module._invokeCallbacksForModule(a);delete b.callbacks}else{SC.ready(SC,function(){SC.Module._invokeCallbacksForModule(a);delete b.callbacks})}var g=b.dependents||[];var e,j;for(var h=0,f=g.length;h<f;h++){e=g[h];j=c[e];if(j.isLoaded&&this._dependenciesMetForModule(e)){if(d){SC.debug("SC.Module: Now that %@ has loaded, all dependencies for a dependent %@ are met.",a,e)}this._evaluateAndInvokeCallbacks(e)}}},_moduleDidLoad:function(b){var c=SC.MODULE_INFO[b];var e=SC.LOG_MODULE_LOADING;var d;var f,a;if(e){SC.debug("SC.Module: Module '%@' finished loading.",b)}if(!c){if(e){SC.debug("SC._moduleDidLoad() called for unknown module '@'.",b)}c=SC.MODULE_INFO[b]={isLoaded:YES,isReady:YES};return}if(c.isLoaded){if(e){SC.debug("SC._moduleDidLoad() called more than once for module '%@'. Skipping.",b)}return}delete c.isLoading;c.isLoaded=YES;if(!c.isPrefetching){d=this._dependenciesMetForModule(b);if(d){this._evaluateAndInvokeCallbacks(b)}else{if(e){SC.debug("SC.Module: Dependencies for '%@' not met yet, waiting to evaluate.",b)}}}else{delete c.isPrefetching;if(e){SC.debug("SC.Module: Module '%@' was prefetched, not evaluating until needed.",b)}}},_targetForTargetName:function(a){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a)}return a},_methodForMethodNameInTarget:function(a,b){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a,b)}return a},methodsForSuspend:"loadModule _moduleDidLoad prefetchModule _moduleDidBecomeReady".w(),suspend:function(){this._suspendCount=(this._suspendCount||0)+1;if(this._suspendCount!==1){return}var a=this.get("methodsForSuspend"),e,d,c,b;for(b=0;c=a[b];b++){if(!this[e="__replacement_"+c+"__"]){(this[e]=function(){(this._bufferedCalls||(this._bufferedCalls=[])).push({method:arguments.callee.methodName,arguments:arguments})}).methodName=c}if(!this[d="__saved_"+c+"__"]){this[d]=this[c]}this[c]=this[e]}},resume:function(){this._suspendCount=(this._suspendCount||0)-1;if(this._suspendCount<0){SC.warn("SC.Module.resume() was called without SC.Module having been in a suspended state. Call aborted.");this._suspendCount=0;return}if(this._suspendCount>0){return}var a=this.get("methodsForSuspend"),d=this._bufferedCalls,c,b,f,e;for(b=0;(c=a[b]);b++){this[c]=this["__saved_"+c+"__"]}for(b=0;e=d&&d[b];b++){this[e.method].apply(this,e.arguments)}if(d){d.length=0}}});SC.ready(function(){var d=SC.MODULE_INFO;var b;var c;var a;for(b in d){c=d[b];if(c.isPrefetched){a=SC.Module.PrefetchModuleTask.create({prefetchedModuleName:b});SC.backgroundTaskQueue.push(a)}}});SC.Module.PrefetchModuleTask=SC.Task.extend({prefetchedModuleName:null,run:function(){SC.Module.prefetchModule(this.prefetchedModuleName)}});sc_require("tasks/task");SC.TaskQueue=SC.Task.extend({init:function(){var a=this;this._doIdleEntry=function(){a._idleEntry()};this._suspendCount=0;this._tasks=[]},runWhenIdle:NO,runLimit:50,interval:50,isRunning:NO,minimumIdleDuration:500,_tasks:null,hasTasks:function(){return this._tasks.length>0}.property("taskCount").cacheable(),taskCount:function(){return this._tasks.length}.property().cacheable(),push:function(a){this._tasks.push(a);this.notifyPropertyChange("taskCount")},next:function(){if(this._tasks.length<1){return null}var a=this._tasks.shift();this.notifyPropertyChange("taskCount");return a},suspend:function(){this._suspendCount++},resume:function(){this._suspendCount--;if(this._suspendCount<=0){this._setupIdle()}},_taskCountDidChange:function(){this._setupIdle()}.observes("taskCount"),_runWhenIdleDidChange:function(){this._setupIdle()}.observes("runWhenIdle"),_setupIdle:function(){if(!this._suspendCount&&this.get("runWhenIdle")&&!this._idleIsScheduled&&this.get("taskCount")>0){setTimeout(this._doIdleEntry,this.get("interval"));this._idleIsScheduled=YES}},_idleEntry:function(){this._idleIsScheduled=NO;var a=SC.RunLoop.lastRunLoopEnd;if(!this.get("runWhenIdle")&&!this._suspendCount){return}if(Date.now()-a>this.get("minimumIdleDuration")){SC.run(this.run,this);SC.RunLoop.lastRunLoopEnd=a}this._setupIdle()},run:function(a){this.set("isRunning",YES);if(!a){a=this.get("runLimit")}var b,c=Date.now();while(b=this.next()){b.run(this);if(Date.now()-c>a){break}}this.set("isRunning",NO)}});SC.backgroundTaskQueue=SC.TaskQueue.create({runWhenIdle:YES});SC.TextSelection=SC.Object.extend(SC.Copyable,SC.Freezable,{start:-1,end:-1,length:function(){var b=this.get("start");var a=this.get("end");if((b)===-1||(a===-1)){return -1}else{return a-b}}.property("start","end").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.freeze()},copy:function(){return SC.TextSelection.create({start:this.get("start"),end:this.get("end")})},toString:function(){var a=this.get("length");if(a&&a>0){if(a===1){return"[%@ character selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}else{return"[%@ characters selected: {%@, %@}]".fmt(a,this.get("start"),this.get("end"))}}else{return"[no text selected; caret at %@]".fmt(this.get("start"))}}});SC.UserDefaults=SC.Object.extend({ready:NO,userDomain:null,appDomain:null,_defaults:null,_safari3DB:null,defaults:function(a){this._defaults=a;this.allPropertiesDidChange()},readDefault:function(h){var c,a,j,g,k,f;h=this._normalizeKeyName(h);a=this._userKeyName(h);if(this._written){c=this._written[a]}if(SC.browser.msie=="7.0"){j=document.body;try{j.load("SC.UserDefaults")}catch(b){SC.Logger.error("Couldn't load userDefaults in IE7: "+b.description)}}else{if(this.HTML5DB_noLocalStorage){f=this._safari3DB}else{j=window.localStorage;if(!j&&window.globalStorage){j=window.globalStorage[window.location.hostname]}}}if(j||f){g=["SC.UserDefaults",a].join("-at-");if(SC.browser.msie=="7.0"){c=j.getAttribute(g.replace(/\W/gi,""))}else{if(f){c=this.dataHash[g]}else{c=j[g]}}if(!SC.none(c)){try{c=SC.json.decode(c)}catch(d){}}}k=this.delegate;if(k&&k.userDefaultsNeedsDefault){c=k.userDefaultsNeedsDefault(this,h,a)}if((c===undefined)&&this._defaults){c=this._defaults[a]||this._defaults[h]}return c},writeDefault:function(k,h){var d,b,m,j,n,g;k=this._normalizeKeyName(k);d=this._userKeyName(k);b=this._written;if(!b){b=this._written={}}b[d]=h;if(SC.browser.msie=="7.0"){m=document.body}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{m=window.localStorage;if(!m&&window.globalStorage){m=window.globalStorage[window.location.hostname]}}}j=["SC.UserDefaults",d].join("-at-");if(m||g){var a=SC.json.encode(h);if(SC.browser.msie=="7.0"){m.setAttribute(j.replace(/\W/gi,""),a);m.save("SC.UserDefaults")}else{if(g){var c=this;g.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[j],function(){e.executeSql("insert into SCLocalStorage(key, value) VALUES ('"+j+"', '"+a+"');",[],c._nullDataHandler,c.killTransaction)})});this.dataHash[j]=a}else{try{m[j]=a}catch(f){SC.Logger.error("Failed using localStorage. "+f)}}}}n=this.delegate;if(n&&n.userDefaultsDidChange){n.userDefaultsDidChange(this,k,h,d)}return this},resetDefault:function(j){var a,d,b,k,h,g;a=this._normalizeKeyName(j);d=this._userKeyName(a);this.propertyWillChange(j);this.propertyWillChange(a);b=this._written;if(b){delete b[d]}if(SC.browser.msie=="7.0"){k=document.body}else{if(this.HTML5DB_noLocalStorage){g=this._safari3DB}else{k=window.localStorage;if(!k&&window.globalStorage){k=window.globalStorage[window.location.hostname]}}}h=["SC.UserDefaults",d].join("-at-");if(k){if(SC.browser.msie=="7.0"){k.setAttribute(h.replace(/\W/gi,""),null);k.save("SC.UserDefaults")}else{if(g){var c=this;g.transaction(function(e){e.executeSql("delete from SCLocalStorage where key = ?",[h],null)});delete this.dataHash[h]}else{try{delete k[h]}catch(f){SC.Logger.warn("Deleting local storage encountered a problem. "+f)}}}}this.propertyDidChange(j);this.propertyDidChange(a);return this},unknownProperty:function(a,b){if(b===undefined){return this.readDefault(a)}else{this.writeDefault(a,b);return b}},_normalizeKeyName:function(a){if(a.indexOf(":")<0){var b=this.get("appDomain")||"app";a=[b,a].join(":")}return a},_userKeyName:function(b){var a=this.get("userDomain")||"(anonymous)";return[a,b].join("-at-")},_domainDidChange:function(){var a=NO;if(this.get("userDomain")!==this._scud_userDomain){this._scud_userDomain=this.get("userDomain");a=YES}if(this.get("appDomain")!==this._scud_appDomain){this._scud_appDomain=this.get("appDomain");a=YES}if(a){this.allPropertiesDidChange()}}.observes("userDomain","appDomain"),init:function(){arguments.callee.base.apply(this,arguments);jQuery.readyWait++;if(SC.userDefaults&&SC.userDefaults.get("dataHash")){var f=SC.userDefaults.get("dataHash");if(f){this.dataHash=SC.userDefaults.get("dataHash")}}this._scud_userDomain=this.get("userDomain");this._scud_appDomain=this.get("appDomain");if(SC.browser.msie=="7.0"){document.body.addBehavior("#default#userData")}this.HTML5DB_noLocalStorage=((parseInt(SC.browser.webkit,0)>523)&&(parseInt(SC.browser.webkit,0)<528));if(this.HTML5DB_noLocalStorage){var d;try{if(!window.openDatabase){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}else{var a="scdb",c="1.0",b="SproutCore database",j=65536;d=openDatabase(a,c,b,j)}}catch(h){SC.Logger.error("Trying to load a database with safari version 3.1 to get SC.UserDefaults to work. You are either in a previous version or there is a problem with your browser.");return}if(d){var g=this;d.transaction(function(e){e.executeSql("CREATE TABLE IF NOT EXISTS SCLocalStorage(key TEXT NOT NULL PRIMARY KEY, value TEXT NOT NULL);",[],g._nullDataHandler,g.killTransaction)});d.transaction(function(e){e.parent=g;e.executeSql("SELECT * from SCLocalStorage;",[],function(q,n){var o={},p;for(var m=0,k=n.rows.length;m<k;m++){p=n.rows.item(m);o[p.key]=p.value}q.parent.dataHash=o;SC.run(function(){jQuery.ready(true)})},g.killTransaction)});this._safari3DB=d}}else{jQuery.ready(true)}},_killTransaction:function(b,a){return true},_nullDataHandler:function(b,a){}});SC.userDefaults=SC.UserDefaults.create();SC.mixin({convertHsvToHex:function(j,x,u){var a=0,k=0,o=0;if(u>0){var e=(j==1)?0:Math.floor(j*6),m=(j==1)?0:(j*6)-e,d=u*(1-x),c=u*(1-(x*m)),w=u*(1-(x*(1-m))),n=[[u,w,d],[c,u,d],[d,u,w],[d,c,u],[w,d,u],[u,d,c]];a=Math.round(255*n[e][0]);k=Math.round(255*n[e][1]);o=Math.round(255*n[e][2])}return this.parseColor("rgb("+a+","+k+","+o+")")},convertHexToHsv:function(g){var c=this.expandColor(g),a=Math.max(Math.max(c[0],c[1]),c[2]),d=Math.min(Math.min(c[0],c[1]),c[2]),f=(a===0)?0:(1-d/a),b=a/255,e=(a==d)?0:((a==c[0])?((c[1]-c[2])/(a-d)/6):((a==c[1])?((c[2]-c[0])/(a-d)/6+1/3):((c[0]-c[1])/(a-d)/6+2/3)));e=(e<0)?(e+1):((e>1)?(e-1):e);return[e,f,b]},PARSE_COLOR_RGBRE:/^rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/i,PARSE_COLOR_HEXRE:/^\#([0-9a-fA-F]{3}|[0-9a-fA-F]{6})$/,expandColor:function(b){var c,e,d,a;c=this.parseColor(b);if(c){e=parseInt(c.slice(1,3),16);d=parseInt(c.slice(3,5),16);a=parseInt(c.slice(5,7),16);return[e,d,a]}},parseColor:function(d){var e=0,a="#",c,b;if(c=this.PARSE_COLOR_RGBRE.exec(d)){for(e=1;e<=3;e++){b=Math.max(0,Math.min(255,parseInt(c[e],0)));a+=this.toColorPart(b)}return a}if(c=this.PARSE_COLOR_HEXRE.exec(d)){if(c[1].length==3){for(e=0;e<3;e++){a+=c[1].charAt(e)+c[1].charAt(e)}return a}return"#"+c[1]}return false},toColorPart:function(a){if(a>255){a=255}var b=a.toString(16);if(a<16){return"0"+b}return b}});SC.mixin({_downloadFrames:0,download:function(d){var a=document.createElement("iframe"),c="DownloadFrame_"+this._downloadFrames;SC.$(a).attr("id",c);a.style.border="10px";a.style.width="0px";a.style.height="0px";a.style.position="absolute";a.style.top="-10000px";a.style.left="-10000px";if(!SC.browser.isSafari){SC.$(a).attr("src",d)}document.getElementsByTagName("body")[0].appendChild(a);if(SC.browser.isSafari){SC.$(a).attr("src",d)}this._downloadFrames=this._downloadFrames+1;if(!SC.browser.isSafari){var b=function(){document.body.removeChild(document.getElementById(c));c=null};b.invokeLater(null,2000)}a=null},getStyle:function(a,b){var c="";if(document.defaultView&&document.defaultView.getComputedStyle){c=document.defaultView.getComputedStyle(a,"").getPropertyValue(b)}else{if(a.currentStyle){b=b.replace(/\-(\w)/g,function(d,e){return e.toUpperCase()});c=a.currentStyle[b]}}return c},uniJapaneseConvert:function(e){var a,c="",b,d;for(b=0,d=e.length;b<d;b++){a=e.charCodeAt(b);a=((a>=65281&&a<=65392)?a-65248:a);a=(a===12540?45:a);c=c+String.fromCharCode(a)}return c},pointInElement:function(b,g,c,f){var h,d,a,e;g=jQuery(g);c=c||"border";h=SC.offset(g,f);if(c==="padding"){d=g.innerWidth();a=g.innerHeight();h.x+=window.parseInt(g.css("border-top-width").replace("px",""));h.y+=window.parseInt(g.css("border-left-width").replace("px",""))}else{d=g.outerWidth(c==="margin");a=g.outerHeight(c==="margin");if(c==="margin"){h.x-=window.parseInt(g.css("margin-top").replace("px",""));h.y-=window.parseInt(g.css("margin-left").replace("px",""))}}e={x:h.x,y:h.y,width:d,height:a};return SC.pointInRect(b,e)},switchScale:function(){$("head meta[name=viewport]").remove();if(window.innerWidth===window.screen.width){$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=0.5, maximum-scale=0.5, minimum-scale=0.5, user-scalable=0" />')}else{$("head").prepend('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=0" />')}}});SC.mixin({ZERO_RANGE:{start:0,length:0},RANGE_NOT_FOUND:{start:0,length:-1},valueInRange:function(b,a){return(b>=0)&&(b>=a.start)&&(b<(a.start+a.length))},minRange:function(a){return a.start},maxRange:function(a){return(a.length<0)?-1:(a.start+a.length)},unionRanges:function(c,b){if((c==null)||(c.length<0)){return b}if((b==null)||(b.length<0)){return c}var d=Math.min(c.start,b.start),a=Math.max(SC.maxRange(c),SC.maxRange(b));return{start:d,length:a-d}},intersectRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var d=Math.max(SC.minRange(c),SC.minRange(b)),a=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},subtractRanges:function(c,b){if((c==null)||(b==null)){return SC.RANGE_NOT_FOUND}if((c.length<0)||(b.length<0)){return SC.RANGE_NOT_FOUND}var a=Math.max(SC.minRange(c),SC.minRange(b)),d=Math.min(SC.maxRange(c),SC.maxRange(b));if(a<d){return SC.RANGE_NOT_FOUND}return{start:d,length:a-d}},cloneRange:function(a){return{start:a.start,length:a.length}},rangesEqual:function(b,a){if(b===a){return true}if(b==null){return a.length<0}if(a==null){return b.length<0}return(b.start==a.start)&&(b.length==a.length)}});SC.mixin({bestStringMetricsForMaxWidth:function(a,x,n,z,w){if(!x){SC.warn("When calling bestMetricsForWidth, the second argument, maxWidth, is required. There's no reason to call this without a maxWidth.");return undefined}x=Math.ceil(parseFloat(x));var A=arguments.callee,h=SC.typeOf(n||(n=""))!==SC.T_STRING,m=h?n.style.maxWidth:undefined,o=(!h||n.cacheableForMetrics)?SC.cacheSlotFor(n,z,w,a):undefined,r=h?(A._applyMaxToEl||(A._applyMaxToEl=function(F,E){F.style.maxWidth=E+"px";return F})):(A._applyMaxToStr||(A._applyMaxToStr=function(F,E){return F.replace(/max-width:[^;]*;/g,"")+" max-width:"+E+"px"})),u=h?(A._removeMaxFromEl||(A._removeMaxFromEl=function(E){E.style.maxWidth="none";return E})):(A._removeMaxFromStr||(A._removeMaxFromStr=function(E){return E.replace(/max-width:[^;]*;/g,"")+" max-width:none"})),p=false;if(o){o.list||(o.list=[{width:Infinity,height:0}]);for(var v=1,t=o.list.length,C,b,D;v<t&&!D;v++){C=o.list[v];b=o.list[v-1];if(!C||!C.width){continue}if(x>=C.width){if((b&&b.width)||(x<=C.maxWidth)){return C}D=C}}}var q=r(n,x),s=SC.metricsForString(a,q,z,w),y=s.height,d=o?o.parent.height||(o.parent.height=SC.metricsForString("W",q,z).height):SC.metricsForString("W",q,z).height,c=Math.round(y/d);if(p){c--;y=c*d}if(y>d){var g=p?Math.ceil(s.width*2.5):s.width,k=p?s.width:Math.floor(s.width/2.5),B,f=new Date()*1,j=0;while(g-k>1||(s.height>y&&!p)||(s.height<y&&p)){j++;B=(g+k)/2;q=r(q,B);s=SC.metricsForString(a,q,z,w);if(s.height>y){k=B}else{g=B}}s.width=Math.ceil(B);s.height=y;s.maxWidth=x;s.lineHeight=d;s.lines=c;s.searchPerformed=true;s.searchTime=new Date()*1-f;s.searchCount=j}else{if(p){s=SC.metricsForString(a,q=u(q),z,w)}s.maxWidth=x;s.lineHeight=d;s.lines=c;s.searchPerformed=false}s.browserCorrection=0;if(SC.browser.msie){s.browserCorrection=1}if(SC.browser.mozilla){s.browserCorrection=1}s.width=Math.min(x,s.width+s.browserCorrection);if(o){var e=o.list[c];if(e&&e.maxWidth<x){e.maxWidth=x}if(!e){e=o.list[c]=s}}if(h){q.style.maxWidth=m}D=p?D:s;return D},cacheSlotFor:function(){var e=arguments.callee.caller,f=e.cache||(e.cache={});if(!arguments[0]){return f}var b=(arguments[0] instanceof Array||arguments[0].callee)?arguments[0]:arguments,d=b.length,a,c;for(c=0;c<d;c++){if(typeof(a=b[c])==="object"){a=SC.guidFor(a)}f=f[a]||(f[a]={parent:f})}return f},cachedVersionOf:function(){var a=function(c){var b=function(){var d=SC.cacheSlotFor(arguments);return d.result||(d.result=arguments.callee.func.apply(this,arguments))};b.func=c;return b};return a(a)}()});sc_require("tasks/task");SC.didPreloadBundle=function(){};SC.PreloadBundleTask=SC.Task.extend({bundle:null,target:"SC",action:"preloaded",run:function(a){var b;if(b=this.get("bundle")){var c=Date.now();SC.Module.loadModule(this.get("bundle"),this.get("target"),this.get("action"))}}});sc_require("system/string");SC.VALIDATE_OK=YES;SC.VALIDATE_NO_CHANGE=NO;SC.Validator=SC.Object.extend({fieldValueForObject:function(b,c,a){return b},objectForFieldValue:function(c,b,a){return c},validate:function(a,b){return true},validateError:function(a,b){return SC.$error(SC.String.loc("Invalid.General(%@)",b.get("fieldValue")),b.get("fieldKey"))},validateChange:function(b,c,a){return this.validate(b,c)?SC.VALIDATE_OK:this.validateError(b,c)},validateSubmit:function(a,b){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)},validatePartial:function(a,b){if(!b.get("isValid")){return this.validate(a,b)?SC.VALIDATE_OK:this.validateError(a,b)}else{return SC.VALIDATE_NO_CHANGE}},validateKeyDown:function(b,c,a){return true},attachTo:function(a,b){},detachFrom:function(a,b){}});SC.Validator.mixin({OK:true,NO_CHANGE:false,findFor:function(e,g,f){var c;if(!f){return}if(f instanceof SC.Validator){c=f}else{if(f.isClass){c=f.create()}else{if(SC.typeOf(f)===SC.T_STRING){var b=null;var a=f.match(/^(.+)\[(.*)\]/);if(a){f=a[1];b=a[2]}f=SC.String.classify(f);var d=SC.Validator[f];if(SC.none(d)){throw"validator %@ not found for %@".fmt(f,g)}else{if(b){if(!e){throw"named validator (%@) could not be found for field %@ because the field does not belong to a form".fmt(b,g)}if(!e._validatorHash){e._validatorHash={}}c=(b)?e._validatorHash[b]:null;if(!c){c=d.create()}if(b){e._validatorHash[b]=c}}else{c=d.create()}}}}}return c},fieldValueForObject:function(a,b,c){if(this.prototype&&this.prototype.fieldValueForObject){return this.prototype.fieldValueForObject(a,b,c)}else{return null}},objectForFieldValue:function(b,a,c){if(this.prototype&&this.prototype.objectForFieldValue){return this.prototype.objectForFieldValue(b,a,c)}else{return null}}});sc_require("validators/validator");SC.Validator.CreditCard=SC.Validator.extend({fieldValueForObject:function(a,b,c){if(typeof(a)=="string"&&a.length==16){a=[a.slice(0,4),a.slice(4,8),a.slice(8,12),a.slice(12,16)].join(" ")}return a},objectForFieldValue:function(b,a,c){return b.replace(/[\s-\.\:]/g,"")},validate:function(a,b){return this.checkNumber(b.get("fieldValue"))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.CreditCard(%@)",a),a)},validateKeyDown:function(b,c,a){return !!a.match(/[0-9\- ]/)},checkNumber:function(h){if(!h||h.length===0){return YES}h=h.replace(/[^0-9]/g,"");var a="0123456789";var g=h.length;var f=parseInt(h,0);var m=h.toString();m=m.replace(/^\s+|\s+$/g,"");var k=0;var o=true;var b=false;var n;var d;for(var c=0;c<g;c++){n=""+m.substring(c,c+1);if(a.indexOf(n)=="-1"){o=false}}if(!o){b=false}if((g===0)&&(b)){b=false}else{if(g>=15){for(var e=g;e>0;e--){d=parseInt(f,0)%10;d=parseInt(d,0);k+=d;e--;f=f/10;d=parseInt(f,0)%10;d=d*2;switch(d){case 10:d=1;break;case 12:d=3;break;case 14:d=5;break;case 16:d=7;break;case 18:d=9;break;default:d=d}f=f/10;k+=d}if((k%10)===0){b=true}else{b=false}}}return b}});sc_require("validators/validator");SC.Validator.Date=SC.Validator.extend({format:"%b %d, %Y %i:%M:%S %p",fieldValueForObject:function(a,b,e){var d=this.get("format"),c;if(SC.typeOf(a)===SC.T_NUMBER){c=SC.DateTime.create(a)}else{if(a instanceof Date){c=a.getTime()}}if(c){a=c.toFormattedString(d)}return a},objectForFieldValue:function(c,a,e){var d=this.get("format"),b;if(c){b=SC.DateTime.parse(c,d);c=b?b._ms:null}return c}});sc_require("validators/validator");SC.Validator.DateTime=SC.Validator.extend({format:"%d/%m/%Y",fieldValueForObject:function(a,b,c){if(SC.kindOf(a,SC.DateTime)){a=a.toFormattedString(this.get("format"))}else{a=null}return a},objectForFieldValue:function(b,a,c){if(b){b=SC.DateTime.parse(b,this.get("format"))}return b}});sc_require("validators/validator");SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return(b.get("fieldValue")||"").match(/.+@.+\...+/)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Email(%@)",a),a)}});SC.Validator.EmailOrEmpty=SC.Validator.Email.extend({validate:function(a,c){var b=c.get("fieldValue");return(b&&b.length>0)?b.match(/.+@.+\...+/):true}});sc_require("validators/validator");SC.Validator.NotEmpty=SC.Validator.extend({validate:function(a,c){var b=c.get("fieldValue");if(SC.none(b)){return NO}if(!SC.none(b.length)){return b.length>0}return YES},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.NotEmpty(%@)",SC.String.capitalize(a)),c.get("errorLabel"))}});sc_require("validators/validator");sc_require("system/utils/misc");SC.Validator.Number=SC.Validator.extend({places:0,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(this.get("places"));break;case SC.T_NULL:case SC.T_UNDEFINED:a="";break}return a},objectForFieldValue:function(c,b,d){var a;c=c.replace(/,/g,"");switch(SC.typeOf(c)){case SC.T_STRING:if(c.length===0){c=null}else{if(this.get("places")>0){c=parseFloat(c)}else{if(c.length==1&&c.match(/-/)){c=null}else{a=parseInt(c,0);if(isNaN(a)){c=SC.uniJapaneseConvert(c);c=parseInt(c,0);if(isNaN(c)){c=""}}else{c=a}}}}break;case SC.T_NULL:case SC.T_UNDEFINED:c=null;break}return c},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!(isNaN(b)||isNaN(parseFloat(b)))},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var d=c.$input().val();if(!d){d=""}d+=a;if(this.get("places")===0){if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*/)[0]===d}}else{if(a.length===0){return true}else{return d.match(/^[\-{0,1}]?[0-9,\0]*\.?[0-9\0]+/)===d}}}});sc_require("validators/validator");SC.Validator.Password=SC.Validator.extend({attachTo:function(a,b){arguments.callee.base.apply(this,arguments);if(!this.fields){this.fields=[]}this.fields.push(b)},validate:function(e){if(!this.fields||this.fields.length===0){return true}var d=false;var b=false;var a=true;var c=this.fields[0].get("fieldValue");this.fields.forEach(function(g){var f=g.get("fieldValue");if(f!=c){a=false}if(!f||f.length===0){d=true}if(f&&f.length>0){b=true}});if(e){return(b===false)?false:a}else{return(d===true)?true:a}},updateFields:function(c,b){if(!this.fields||this.fields.length===0){return true}var a=SC.String.loc("Invalid.Password");var d=this._field;this.fields.forEach(function(e){var g=(b)?null:((e==d)?a:"");c.setErrorFor(e,g)});return(b)?SC.VALIDATE_OK:a},validateChange:function(b,c,a){return this.updateFields(b,this.validate(false))},validateSubmit:function(a,b){return this.updateFields(a,this.validate(true))},validatePartial:function(b,c){var a=!this._field.get("isValid");if(a){return this.updateFields(b,this.validate(false))}else{return SC.VALIDATE_NO_CHANGE}}});sc_require("validators/validator");SC.Validator.PositiveInteger=SC.Validator.extend({defaultValue:null,fieldValueForObject:function(a,b,c){switch(SC.typeOf(a)){case SC.T_NUMBER:a=a.toFixed(0);break;case SC.T_NULL:case SC.T_UNDEFINED:a=this.get("defaultValue");break}return a},objectForFieldValue:function(b,a,c){b=b.replace(/,/g,"");switch(SC.typeOf(b)){case SC.T_STRING:if(b.length===0){b=this.get("defaultValue")}else{b=parseInt(b,0)}break;case SC.T_NULL:case SC.T_UNDEFINED:b=this.get("defaultValue");break}if(isNaN(b)){return this.get("defaultValue")}return b},validate:function(a,c){var b=c.get("fieldValue");return(b==="")||!isNaN(b)},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error(SC.String.loc("Invalid.Number(%@)",a),a)},validateKeyDown:function(b,c,a){var d=c.$input().val();if(!d){d=""}d+=a;if(a.length===0){return true}else{return d.match(/^[0-9\0]*/)[0]===d}}});SC.ContainerView=SC.View.extend({classNames:["sc-container-view"],renderDelegateName:"containerRenderDelegate",nowShowing:null,contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("nowShowing");if(a&&a.length>0){this.nowShowingDidChange()}},nowShowingDidChange:function(){var c=this.get("nowShowing");if(c===SC.CONTENT_SET_DIRECTLY){return}var a=(this._instantiatedLastView===YES)?this.get("contentView"):null;this._instantiatedLastView=NO;if(SC.typeOf(c)===SC.T_STRING&&c.length>0){if(c.indexOf(".")>0){c=SC.objectForPropertyPath(c)}else{var b=this.getPath(c);c=SC.kindOf(b,SC.CoreView)?b:SC.objectForPropertyPath(c,this.get("page"))}}if(SC.typeOf(c)===SC.T_CLASS){if(c.kindOf(SC.CoreView)){c=this.createChildView(c);this._instantiatedLastView=YES}else{c=null}}if(c&&!(c instanceof SC.CoreView)){c=null}this.set("contentView",c);if(a){a.destroy()}}.observes("nowShowing"),contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView")});sc_require("mixins/validatable");SC.FieldView=SC.View.extend(SC.Control,SC.Validatable,{isTextArea:NO,_field_isMouseDown:NO,fieldValue:function(){var a=this.get("value");if(SC.typeOf(a)===SC.T_ERROR){a=a.get("errorValue")}return this.fieldValueForObject(a)}.property("value","validator").cacheable(),$input:function(){if(this.get("isTextArea")){return this.$("textarea").andSelf().filter("textarea")}else{return this.$("input").andSelf().filter("input")}},setFieldValue:function(b){if(SC.none(b)){b=""}var a=this.$input();if(a.val()!==b){a.val(b)}return this},getFieldValue:function(){return this.$input().val()},_field_fieldValueDidChange:function(a){SC.run(function(){this.fieldValueDidChange(NO)},this)},fieldValueDidChange:function(a){var c=this.getFieldValue();var b=this.objectForFieldValue(c,a);this.setIfChanged("value",b)},_field_valueDidChange:function(){this.setFieldValue(this.get("fieldValue"))}.observes("fieldValue"),didCreateLayer:function(){this.setFieldValue(this.get("fieldValue"));SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)},didAppendToDocument:function(){if(this.get("isTextArea")){this.setFieldValue(this.get("fieldValue"));SC.Event.add(this.$input(),"change",this,this._field_fieldValueDidChange)}},willDestroyLayer:function(){SC.Event.remove(this.$input(),"change",this,this._field_fieldValueDidChange)},mouseDown:function(a){this._field_isMouseDown=YES;a.allowDefault();return YES},mouseExited:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}a.allowDefault();return YES},mouseEntered:function(a){this.set("isActive",this._field_isMouseDown);a.allowDefault();return YES},mouseUp:function(a){if(this._field_isMouseDown){this.set("isActive",NO)}this._field_isMouseDown=NO;a.allowDefault();return YES},keyDown:function(b){if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(this.performValidateKeyDown(b)){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_field_setFieldValue:function(b){this.propertyWillChange("fieldValue");if(this.fieldValueForObject){b=this.fieldValueForObject(b)}var a=this.setFieldValue(b);this.propertyDidChange("fieldValue");return a},_field_getFieldValue:function(){var a=this.getFieldValue();if(this.objectForFieldValue){a=this.objectForFieldValue(a)}return a}});SC.IMAGE_STATE_NONE="none";SC.IMAGE_STATE_LOADING="loading";SC.IMAGE_STATE_LOADED="loaded";SC.IMAGE_STATE_FAILED="failed";SC.IMAGE_TYPE_NONE="NONE";SC.IMAGE_TYPE_URL="URL";SC.IMAGE_TYPE_CSS_CLASS="CSS_CLASS";SC.BLANK_IMAGE_DATAURL="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";SC.BLANK_IMAGE_URL=SC.browser.msie&&SC.browser.msie<8?"/system/sproutcore/foundation/en-us/1FCS29.34215/source/resources/blank.gif":SC.BLANK_IMAGE_DATAURL;SC.BLANK_IMAGE=new Image();SC.BLANK_IMAGE.src=SC.BLANK_IMAGE_URL;SC.BLANK_IMAGE.width=SC.BLANK_IMAGE.height=1;SC.ImageView=SC.View.extend(SC.Control,SC.InnerFrame,{classNames:"sc-image-view",ariaRole:"img",displayProperties:["frame","image","innerFrame","toolTip","imageValue","type"],renderDelegateName:function(){return(this.get("useCanvas")?"canvasImage":"image")+"RenderDelegate"}.property("useCanvas").cacheable(),tagName:function(){return this.get("useCanvas")?"canvas":"div"}.property("useCanvas").cacheable(),canLoadInBackground:NO,image:SC.BLANK_IMAGE,imageValue:function(){var a=this.get("value");return a&&a.isEnumerable?a.firstObject():a}.property("value").cacheable(),innerFrame:function(){var c=this.get("image"),b=c.width,a=c.height,d=this.get("frame");if(SC.none(d)){return{x:0,y:0,width:0,height:0}}return this.innerFrameForSize(b,a,d.width,d.height)}.property("align","image","scale","frame").cacheable(),localize:YES,status:SC.IMAGE_STATE_NONE,type:function(){var a=this.get("imageValue");if(SC.ImageView.valueIsUrl(a)){return SC.IMAGE_TYPE_URL}else{if(!SC.none(a)){return SC.IMAGE_TYPE_CSS_CLASS}}return SC.IMAGE_TYPE_NONE}.property("imageValue").cacheable(),useCanvas:function(){return SC.platform.supportsCanvas&&!this.get("useStaticLayout")&&this.get("type")!==SC.IMAGE_TYPE_CSS_CLASS}.property("useStaticLayout","type").cacheable(),useImageQueue:YES,value:null,viewDidResize:function(){var b=this.get("layer"),c,a;if(b){c=b.offsetWidth;a=b.offsetHeight;if(this._cachedWidth!==c||this._cachedHeight!==a){this.notifyPropertyChange("frame");this._cachedWidth=c;this._cachedHeight=a}}},init:function(){arguments.callee.base.apply(this,arguments);this._image_valueDidChange();if(this.get("useImageCache")!==undefined){SC.Logger.warn("%@ has useImageCache set, please set useImageQueue instead".fmt(this));this.set("useImageQueue",this.get("useImageCache"))}},layerDidChange:function(){if(this.get("useCanvas")){this.set("layerNeedsUpdate",YES)}}.observes("layer"),_image_valueDidChange:function(){var b=this.get("imageValue"),a=this.get("type");if(b!==this._iv_value){this._iv_value=b;this.set("image",SC.BLANK_IMAGE);if(a!==SC.IMAGE_TYPE_CSS_CLASS){this.set("status",SC.IMAGE_STATE_LOADING);if(!this._loadImageUsingCache()){this._loadImage()}}}}.observes("imageValue"),_loadImageUsingCache:function(){var c=this.get("imageValue"),b=this.get("type");if(b===SC.IMAGE_TYPE_URL&&this.get("useImageQueue")){var a=this.get("isVisibleInWindow")||this.get("canLoadInBackground");SC.imageQueue.loadImage(c,this,this._loadImageUsingCacheDidComplete,a);return YES}return NO},_loadImageUsingCacheDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},_loadImage:function(){var d=this.get("imageValue"),b=this.get("type"),c=this,f,a;if(b===SC.IMAGE_TYPE_URL){f=new Image();var e=function(){SC.run(function(){c._loadImageDidComplete(d,SC.$error("SC.Image.FailedError","Image",-101))})};var g=function(){SC.run(function(){c._loadImageDidComplete(d,f)})};a=$(f);a.bind("error",e);a.bind("abort",e);a.bind("load",g);f.src=d;return YES}return NO},_loadImageDidComplete:function(a,c){var b=this.get("imageValue");if(b===a){if(SC.ok(c)){this.didLoad(c)}else{this.didError(c)}}},didLoad:function(a){this.set("status",SC.IMAGE_STATE_LOADED);if(!a){a=SC.BLANK_IMAGE}this.set("image",a)},didError:function(a){this.set("status",SC.IMAGE_STATE_FAILED);this.set("image",SC.BLANK_IMAGE)}});SC.ImageView.valueIsUrl=function(a){return a?a.indexOf("/")>=0:NO};sc_require("views/field");sc_require("system/text_selection");sc_require("mixins/static_layout");sc_require("mixins/editable");SC.TextFieldView=SC.FieldView.extend(SC.StaticLayout,SC.Editable,{classNames:["sc-text-field-view"],isTextField:YES,applyImmediately:YES,commitOnBlur:YES,isPassword:NO,isTextArea:NO,hint:"",type:"text",isBrowserFocusable:YES,autoCorrect:true,autoCapitalize:true,formattedHint:function(){var a=this.get("hint");return typeof(a)==="string"&&this.get("localize")?SC.String.loc(a):a}.property("hint","localize").cacheable(),hintOnFocus:NO,localize:YES,isEditing:NO,defaultTabbingEnabled:YES,isContextMenuEnabled:YES,continuouslyUpdatesValue:null,allowsErrorAsValue:YES,leftAccessoryView:null,rightAccessoryView:null,spellCheckEnabled:YES,maxLength:5096,shouldRenderBorder:YES,supportsAutoResize:YES,autoResizeLayer:function(){return this.$input()[0]}.property("layer").cacheable(),autoResizeText:function(){return this.get("value")}.property("value").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",20),_hintON:YES,init:function(){var a=this.get("value");this._hintON=((!a||a&&a.length===0)&&!this.get("hintOnFocus"))?YES:NO;var b=this.get("continouslyUpdatesValue");if(b!==null&&b!==undefined){this.set("applyImmediately",b)}return arguments.callee.base.apply(this,arguments)},isEditable:YES,selection:function(n,k){var d=this.$input()[0],f,a,c;if(k===undefined){if(d){a=null;c=null;if(!d.value){a=c=0}else{try{if("selectionStart" in d){a=d.selectionStart}if("selectionEnd" in d){c=d.selectionEnd}}catch(g){return null}if(a===null||c===null){var m=document.selection;if(m){var j=m.type;if(j&&(j==="None"||j==="Text")){f=m.createRange();if(!this.get("isTextArea")){var b=f.text.length;a=Math.abs(f.moveStart("character",0-(d.value.length+1)));c=a+b}else{var h=f.duplicate();h.moveToElementText(d);h.setEndPoint("EndToStart",f);a=h.text.length;c=a+f.text.length}}}}}return SC.TextSelection.create({start:a,end:c})}else{return null}}else{if(!k||!k.kindOf||!k.kindOf(SC.TextSelection)){throw"When setting the selection, you must specify an SC.TextSelection instance."}if(d){if(d.setSelectionRange){d.setSelectionRange(k.get("start"),k.get("end"))}else{f=d.createTextRange();a=k.get("start");f.move("character",a);f.moveEnd("character",k.get("end")-a);f.select()}}return k}}.property("fieldValue").cacheable(),displayProperties:["isBrowserFocusable","formattedHint","fieldValue","isEditing","isEditable","leftAccessoryView","rightAccessoryView","isTextArea"],createChildViews:function(){arguments.callee.base.apply(this,arguments);this.accessoryViewObserver()},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),accessoryViewObserver:function(){var f,h=["leftAccessoryView","rightAccessoryView"],a=h.length,b,e,d,g;for(b=0;b<a;b++){e=h[b];d=this["_"+e];g=this.get(e);if(!(d&&g&&(d===g))){if(d){f=d.get("classNames");f=f.without("sc-text-field-accessory-view");d.set("classNames",f);this.removeChild(d);d=null;this["_"+e]=null}if(g){if(g.isClass){g=g.create({layoutView:this})}f=g.get("classNames");var c="sc-text-field-accessory-view";if(f.indexOf(c)<0){f=SC.clone(f);f.push(c);g.set("classNames",f)}this.appendChild(g);this["_"+e]=g}}}}.observes("leftAccessoryView","rightAccessoryView"),layoutChildViewsIfNeeded:function(a){if(!a){a=this.get("isVisibleInWindow")}if(a&&this.get("childViewsNeedLayout")){var b=this.get("rightAccessoryView");if(b&&b.get){var c=b.get("layout");if(c){c.left=null;if(!c.right){c.right=0}b.adjust({layout:c})}}}arguments.callee.base.apply(this,arguments)},render:function(e,f){arguments.callee.base.apply(this,arguments);var a,d,c,b;a=this.get("fieldValue");if(SC.none(a)){a=""}a=String(a);e.setClass("not-empty",a.length>0);d=this._getAccessoryViewWidths();c=d.left;b=d.right;if(c){c+="px"}if(b){b+="px"}this._renderField(e,f,a,c,b)},_forceRenderFirstTime:NO,_renderFieldLikeFirstTime:function(){this.set("_forceRenderFirstTime",YES)}.observes("isTextArea"),_renderField:function(f,m,u,j,q){var r=this.get("formattedHint"),b=this.get("hintOnFocus"),o="",k=this.get("maxLength"),z="",e="",c="",A,v,g,x,d,n,h,a,t,s;f.setClass("text-area",this.get("isTextArea"));a=SC.browser.isWebkit&&(parseInt(SC.browser.webkit,0)<532);f.setClass("oldWebKitFieldPadding",a);if(m||this._forceRenderFirstTime){this._forceRenderFirstTime=NO;t=this.get("isEnabled")?(this.get("isEditable")?"":'readonly="readonly"'):'disabled="disabled"';A=this.get("layerId");z=this.get("spellCheckEnabled")?' spellcheck="true"':' spellcheck="false"';if(SC.browser.mobileSafari){c=!this.get("autoCorrect")?' autocorrect="off"':"";e=!this.get("autoCapitalize")?' autocapitalize="off"':""}if(this.get("isBrowserFocusable")){s='tabindex="-1"'}if(SC.platform.input.placeholder&&!b){o=' placeholder="'+r+'"'}if(this.get("shouldRenderBorder")){f.push('<span class="border"></span>')}v="";if(j||q){v='style="';if(j){v+="left: "+j+"; "}if(q){v+="right: "+q+";"}v+='"'}f.push('<span class="padding" '+v+">");u=this.get("escapeHTML")?SC.RenderContext.escapeHTML(u):u;if(this._hintON&&!SC.platform.input.placeholder&&(!u||(u&&u.length===0))){u=r;f.setClass("sc-hint",YES)}if(b){f.push('<span class="hint%@">'.fmt(u?" sc-hidden":""),r,"</span>")}h="field";if(this.get("isTextArea")){f.push('<textarea class="'+h+'" name="'+A+'" '+t+o+z+c+s+e+' maxlength="'+k+'">'+u+"</textarea></span>")}else{g=this.get("type");if(this.get("isPassword")){g="password"}f.push('<input class="'+h+'" type="'+g+'" name="'+A+'" '+t+' value="'+u+'"'+o+z+s+' maxlength="'+k+'" '+c+" "+e+"/></span>")}}else{var p=this.$input(),w=p[0],y=this.get("value");if(b){this.$(".hint")[0].innerHTML=r}else{if(!b){w.placeholder=r}}if(!y||(y&&y.length===0)){if(!this.get("isFirstResponder")){if(!SC.platform.input.placeholder&&this._hintON){f.setClass("sc-hint",YES);p.val(r)}}else{if(!SC.platform.input.placeholder&&this._hintON){f.setClass("sc-hint",NO);p.val("")}}}if(SC.browser.mobileSafari){if(!this.get("autoCapitalize")){p.attr("autoCapitalize","off")}else{p.attr("autoCapitalize","true")}if(!this.get("autoCorrect")){p.attr("autoCorrect","off")}else{p.attr("autoCorrect","true")}}if(!b&&SC.platform.input.placeholder){p.attr("placeholder",r)}if(this.get("isBrowserFocusable")){p.removeAttr("tabindex")}else{p.attr("tabindex","-1")}d=p[0];if(d){if(!this.get("isEnabled")){d.disabled="true";d.readOnly=null}else{if(!this.get("isEditable")){d.disabled=null;d.readOnly="true"}else{d.disabled=null;d.readOnly=null}}n=d.parentNode.style;if(j){if(n.left!==j){n.left=j}}else{n.left=null}if(q){if(n.right!==q){n.right=q}}else{n.right=null}}}},_getAccessoryViewWidths:function(){var c={},k=["left","right"],d=k.length,f,g,m,j,a,h,e,b;for(f=0;f<d;f++){g=k[f];m=this.get(g+"AccessoryView");if(m){if(m.isClass){m=m.create({layoutView:this})}if(m.get){b=m.get("frame");if(b){a=b.width;if(a){h=m.get("layout");if(h){e=h[g];a+=e}c[g]=a}}}}}return c},didCreateLayer:function(){arguments.callee.base.apply(this,arguments);if(!SC.platform.input.placeholder){this.invokeLast(this._setInitialPlaceHolderIE)}if(this.get("isTextArea")){this.invokeLast(this._addTextAreaEvents)}else{this._addTextAreaEvents();if(SC.browser.mozilla){var a=this.$input();SC.Event.add(a,"keypress",this,this._firefox_dispatch_keypress)}}},_setInitialPlaceHolderIE:function(){if(!SC.platform.input.placeholder&&this._hintON){var a=this.$input(),b=a.val();if(!b||(b&&b.length===0)){a.val(this.get("formattedHint"))}}},_addTextAreaEvents:function(){var a=this.$input();SC.Event.add(a,"focus",this,this._textField_fieldDidFocus);SC.Event.add(a,"blur",this,this._textField_fieldDidBlur);SC.Event.add(a,"select",this,this._textField_selectionDidChange)},willDestroyLayer:function(){arguments.callee.base.apply(this,arguments);var a=this.$input();SC.Event.remove(a,"focus",this,this._textField_fieldDidFocus);SC.Event.remove(a,"blur",this,this._textField_fieldDidBlur);SC.Event.remove(a,"select",this,this._textField_selectionDidChange);SC.Event.remove(a,"keypress",this,this._firefox_dispatch_keypress)},_textField_fieldDidFocus:function(a){SC.run(function(){this.set("focused",YES);this.fieldDidFocus(a);var b=this.get("value");if(!SC.platform.input.placeholder&&((!b)||(b&&b.length===0))){this._hintON=NO}},this)},_textField_fieldDidBlur:function(a){SC.run(function(){this.set("focused",NO);this.fieldDidBlur(this._origEvent||a);var b=this.get("value");if(!SC.platform.input.placeholder&&!this.get("hintOnFocus")&&((!b)||(b&&b.length===0))){this._hintON=YES}},this)},fieldDidFocus:function(a){this.becomeFirstResponder();this.beginEditing(a);if(this._didHideInterceptForPane){this._didHideInterceptForPane.showTouchIntercept();this._didHideInterceptForPane=null}var b=this.get("pane");if(b&&b.get("hasTouchIntercept")){b.hideTouchIntercept();this._didHideInterceptForPane=this.get("pane")}},fieldDidBlur:function(a){this.resignFirstResponder(a);if(this.get("commitOnBlur")){this.commitEditing(a)}var b=this._didHideInterceptForPane;if(b){b.showTouchIntercept();b=null}},_field_fieldValueDidChange:function(a){if(this.get("focused")){SC.run(function(){this.fieldValueDidChange(NO)},this)}this.updateHintOnFocus()},updateHintOnFocus:function(){var a=this.get("hintOnFocus");if(!a){return}if(this.getFieldValue()){this.$(".hint").addClass("sc-hidden")}else{this.$(".hint").removeClass("sc-hidden")}}.observes("value"),_topOffsetForFirefoxCursorFix:3,_firefox_dispatch_keypress:function(a){var d=this.get("selection"),e=this.get("value"),c=e?e.length:0,b;if(!d||((d.get("length")===0&&(d.get("start")===0)||d.get("end")===c))){b=SC.RootResponder.responder;if(a.keyCode===9){return}b.keypress.call(b,a);a.stopPropagation()}},_textField_selectionDidChange:function(){this.notifyPropertyChange("selection")},didBecomeKeyResponderFrom:function(a){if(this.get("isVisibleInWindow")){var b=this.$input()[0];try{if(b){b.focus()}}catch(c){}if(!this._txtFieldMouseDown){this.invokeLast(this._selectRootElement)}}},_selectRootElement:function(){var a=this.$input()[0];if(a){if(!(SC.browser.isSafari&&SC.browser.isLion&&SC.buildLocale==="ko-kr")){a.select()}}else{this._textField_selectionDidChange()}},didLoseKeyResponderTo:function(a){var b=this.$input()[0];if(b){b.blur()}this.invokeLater("scrollToOriginIfNeeded",100)},scrollToOriginIfNeeded:function(){var b=this.get("pane");if(!b){return}var a=b.get("firstResponder");if(!a||!a.get("isTextField")){document.body.scrollTop=document.body.scrollLeft=0}},keyDown:function(b){var h=b.which,f=b.keyCode,d=false,e,a;if((h===SC.Event.KEY_RETURN&&!b.isIMEInput)&&!this.get("isTextArea")){return NO}if(h===SC.Event.KEY_ESC){return NO}if((h===SC.Event.KEY_TAB||f===SC.Event.KEY_TAB)&&this.get("defaultTabbingEnabled")){a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(!SC.platform.input.maxlength&&this.get("isTextArea")){var g=this.get("value");if(g&&((!SC.browser.mozilla&&h>47)||(SC.browser.mozilla&&((h>32&&h<43)||h>47)&&!(f>36&&f<41)))&&(g.length>=this.get("maxLength"))){d=true}}if((this.performValidateKeyDown(b)||SC.platform.touch)&&!d){this._isKeyDown=YES;b.allowDefault()}else{b.stop()}if(this.get("applyImmediately")){var c=this;setTimeout(function(){c.fieldValueDidChange()},10)}return YES},keyUp:function(a){if(SC.browser.mozilla&&a.keyCode===SC.Event.KEY_RETURN){this.fieldValueDidChange()}this.notifyPropertyChange("selection");this._isKeyDown=NO;a.allowDefault();return YES},mouseDown:function(a){var b=this.get("fieldValue");this._txtFieldMouseDown=YES;this.becomeFirstResponder();if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},mouseUp:function(a){this._txtFieldMouseDown=NO;this.notifyPropertyChange("selection");if(!this.get("isEnabled")){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},mouseWheel:function(a){if(this.get("isTextArea")){a.allowDefault();return YES}else{return NO}},selectStart:function(a){return YES},_valueObserver:function(){var b=this.get("value"),a;if(b&&b.length>0){this._hintON=NO;a=this.get("maxLength");if(!SC.platform.input.maxlength&&b.length>a){this.set("value",b.substr(0,a))}}else{if(!this.get("hintOnFocus")){this._hintON=YES}}}.observes("value")});sc_require("views/text_field");sc_require("system/utils/misc");sc_require("delegates/inline_text_field");sc_require("mixins/inline_editor");SC.InlineTextFieldView=SC.TextFieldView.extend(SC.InlineEditor,{classNames:["inline-editor"],_topOffsetForFirefoxCursorFix:0,blurOnMouseDown:YES,_updateViewStyle:function(b){var c="",a=SC.getStyle(b,"font-size");if(a&&a.length>0){c=c+"font-size: "+a+" !important; "}a=SC.getStyle(b,"font-family");if(a&&a.length>0){c=c+"font-family: "+a+" !important; "}a=SC.getStyle(b,"font-weight");if(a&&a.length>0){c=c+"font-weight: "+a+" !important; "}a=SC.getStyle(b,"z-index");if(a&&a.length>0){c=c+"z-index: "+a+" !important; "}a=SC.getStyle(b,"line-height");if(a&&a.length>0){c=c+"line-height: "+a+" !important; "}a=SC.getStyle(b,"text-align");if(a&&a.length>0){c=c+"text-align: "+a+" !important; "}a=SC.getStyle(b,"top-margin");if(a&&a.length>0){c=c+"top-margin: "+a+" !important; "}a=SC.getStyle(b,"bottom-margin");if(a&&a.length>0){c=c+"bottom-margin: "+a+" !important; "}a=SC.getStyle(b,"left-margin");if(a&&a.length>0){c=c+"left-margin: "+a+" !important; "}a=SC.getStyle(b,"right-margin");if(a&&a.length>0){c=c+"right-margin: "+a+" !important; "}return c},_updateViewPaddingStyle:function(b){var c="",a=SC.getStyle(b,"padding-top");if(a&&a.length>0){c=c+"top: "+a+" !important; "}a=SC.getStyle(b,"padding-bottom");if(a&&a.length>0){c=c+"bottom: "+a+" !important; "}a=SC.getStyle(b,"padding-left");if(a&&a.length>0){c=c+"left: "+a+" !important; "}a=SC.getStyle(b,"padding-right");if(a&&a.length>0){c=c+"right: "+a+" !important; "}return c},updateStyle:function(d){if(d.length){d=d[0]}var a=document.getElementById("sc-inline-text-field-style"),c=this._updateViewStyle(d),e=this._updateViewPaddingStyle(d),f=".inline-editor input{"+c+"}.inline-editor textarea{"+c+"}.inline-editor .padding{"+e+"}";if(!a){var b=document.getElementsByTagName("head")[0];a=document.createElement("style");a.type="text/css";a.media="screen";a.id="sc-inline-text-field-style";b.appendChild(a)}if(a.styleSheet){a.styleSheet.cssText=f}else{a.innerHTML=f}},positionOverTargetView:function(j,d,c,b,e){if(!c){c=j.get("pane")}if(!e){e=j.$()[0]}if(!b){var g=j.get("frame");b=SC.offset(e);b.height=g.height;b.width=g.width}var h={},a=c.$()[0],f=j.get("layout");h.height=b.height;h.width=b.width;if(d&&f.left){h.left=b.x-f.left-a.offsetLeft-1;if(SC.browser.msie==7){h.left--}}else{h.left=b.x-a.offsetLeft-1;if(SC.browser.msie==7){h.left--}}if(d&&f.top){h.top=b.y-f.top-a.offsetTop;if(SC.browser.msie==7){h.top=h.top-2}}else{h.top=b.y-a.offsetTop;if(SC.browser.msie==7){h.top=h.top-2}}this.set("layout",h)},multiline:NO,isTextArea:function(){return this.get("multiline")}.property("multiline").cacheable(),beginEditing:function(b,a){if(!b(a)){return NO}var d=a.get("pane"),c=this.get("exampleElement");this.beginPropertyChanges();if(c){if(c.length){c=c[0]}}else{c=a.$()[0]}this.updateStyle(c);this.positionOverTargetView(a,this.get("isCollection"),d,this.get("exampleFrame"),c);this._previousFirstResponder=d?d.get("firstResponder"):null;this.becomeFirstResponder();this.endPropertyChanges();return YES}.enhance(),blurEditor:function(a){if(!this.get("isEditing")){return YES}return this.commitOnBlur?this.commitEditing():this.discardEditing()},_endEditing:function(b){var a=b();if(this.get("isFirstResponder")){var c=this.get("pane");if(c&&this._previousFirstResponder){c.makeFirstResponder(this._previousFirstResponder)}else{this.resignFirstResponder()}}this._previousFirstResponder=null;return a}.enhance(),mouseDown:function(a){arguments.callee.base.call(this,a);return this.get("isEditing")},touchStart:function(a){this.mouseDown(a)},keyDown:function(a){var b=this.interpretKeyEvents(a);this.fieldValueDidChange(true);return !b?NO:b},insertText:null,_scitf_blurInput:function(){var a=this.$input()[0];if(a){a.blur()}a=null},willRemoveFromParent:function(){return this._scitf_blurInput()},willLoseFirstResponder:function(b,a){if(b!==this){return}this._previousFirstResponder=null;this._origEvent=a;this._scitf_blurInput();return this.blurEditor(a)},cancel:function(){this.discardEditing();return YES},fieldValueDidChange:function(a){arguments.callee.base.call(this,a)},insertNewline:function(a){if(this.get("isTextArea")){a.allowDefault();return arguments.callee.base.call(this,a)}else{if(this.get("value")!=this.$input().val()){this.set("value",this.$input().val())}this.commitEditing();return YES}},insertTab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("nextValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},insertBacktab:function(a){var c=this.target;this.resignFirstResponder();this.commitEditing();if(c){var b=c.get("previousValidKeyView");if(b&&b.beginEditing){b.beginEditing()}}return YES},deleteForward:function(a){a.allowDefault();return YES},deleteBackward:function(a){a.allowDefault();return YES}});SC.mixin(SC.InlineTextFieldView,{inlineEditorDelegate:SC.InlineTextFieldDelegate,label:null,editor:null,beginEditing:function(c){var a,d,b,e,f;if(SC.typeOf(c)===SC.T_HASH){b=c;if(!b.delegate||!b.exampleElement||!b.frame){SC.error("Delegate, exampleElement, and frame options are required.");return NO}c=b.delegate;e=b.value}else{e=c.get("value")}f=SC.beget(c);f.mixin({inlineEditorWillBeginEditing:function(){if(c.inlineEditorWillBeginEditing){c.inlineEditorWillBeginEditing.apply(c,arguments)}},inlineEditorDidBeginEditing:function(){if(c.inlineEditorDidBeginEditing){c.inlineEditorDidBeginEditing.apply(c,arguments)}},inlineEditorWillCommitEditing:function(h,j,g){if(c.inlineEditorWillCommitEditing){c.inlineEditorWillCommitEditing(h,j,g)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(h,j)}},inlineEditorDidCommitEditing:function(h,j,g){if(c.inlineEditorDidCommitEditing){c.inlineEditorDidCommitEditing(h,j,g)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(h,j)}SC.InlineTextFieldView._endEditing()},inlineEditorWillDiscardEditing:function(h,g){if(c.inlineEditorWillDiscardEditing){c.inlineEditorWillDiscardEditing(h,g)}if(c.inlineEditorWillEndEditing){c.inlineEditorWillEndEditing(h,this.get("value"))}},inlineEditorDidDiscardEditing:function(h,g){if(c.inlineEditorDidDiscardEditing){c.inlineEditorDidDiscardEditing(h,g)}if(c.inlineEditorDidEndEditing){c.inlineEditorDidEndEditing(h,this.get("value"))}SC.InlineTextFieldView._endEditing()}});if(c.inlineEditorShouldBeginEditing&&!c.inlineEditorShouldBeginEditing(c,e)){return NO}this.editor=d=this.inlineEditorDelegate.acquireEditor(c);d.set("value",e);if(b){d.set("exampleElement",b.exampleElement);d.set("exampleFrame",b.frame);d.set("multiline",b.multiline);d.set("escapeHTML",b.escapeHTML);d.set("isCollection",b.isCollection);d.set("commitOnBLur",b.commitOnBlur);d.set("validator",b.validator)}if(d){return d.beginEditing(f)}else{return NO}},commitEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.commitEditing():NO},discardEditing:function(){return this.inlineEditorDelegate.editor?this.inlineEditorDelegate.editor.discardEditing():NO},_endEditing:function(){this.inlineEditorDelegate.releaseEditor(this.editor);this.editor=null}});sc_require("mixins/inline_editable");sc_require("mixins/inline_editor_delegate");sc_require("delegates/inline_text_field");SC.REGULAR_WEIGHT="normal";SC.BOLD_WEIGHT="bold";SC.LabelView=SC.View.extend(SC.Control,SC.InlineEditable,{classNames:["sc-label-view"],displayProperties:["displayTitle","textAlign","fontWeight","icon","escapeHTML","needsEllipsis","hint"],inlineEditorDelegate:SC.InlineTextFieldDelegate,isEditable:NO,exampleEditor:SC.InlineTextFieldView,fontWeight:null,escapeHTML:YES,escapeHTMLBindingDefault:SC.Binding.oneWay().bool(),localize:NO,localizeBindingDefault:SC.Binding.oneWay().bool(),formatter:null,value:"",hint:null,hintEnabled:function(){return this.get("isEditable")}.property("isEditable").cacheable(),icon:null,textAlign:null,supportsAutoResize:YES,autoResizeLayer:function(){return this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),renderDelegateName:"labelRenderDelegate",displayTitle:function(){var g,e;g=this.get("value");e=this.getDelegateProperty("formatter",this.displayDelegate);if(e){var f=(SC.typeOf(e)===SC.T_FUNCTION)?e(g,this):e.fieldValueForObject(g,this);if(!SC.none(f)){g=f}}if(SC.typeOf(g)===SC.T_ARRAY){var d=[];for(var b=0,c=g.get("length");b<c;b++){var a=g.objectAt(b);if(!SC.none(a)&&a.toString){a=a.toString()}d.push(a)}g=d.join(",")}if(!SC.none(g)&&g.toString){g=g.toString()}if(g&&this.getDelegateProperty("localize",this.displayDelegate)){g=SC.String.loc(g)}return g}.property("value","localize","formatter").cacheable(),hintValue:function(){var a=this.get("hint");return a}.property("hint").cacheable(),doubleClick:function(a){return this.beginEditing()},inlineEditorDidBeginEditing:function(b,c,d,a){this._oldOpacity=this.get("layout").opacity||1;this.adjust("opacity",0);b(c,d,a)}.enhance(),inlineEditorDidEndEditing:function(){this.adjust("opacity",this._oldOpacity);this._oldOpacity=null}});SC.allowsBackspaceToPreviousPage=NO;SC.HORIZONTAL_ORIENTATION="horizontal";SC.VERTICAL_ORIENTATION="vertical";SC.BORDER_BEZEL="sc-bezel-border";SC.BORDER_BLACK="sc-black-border";SC.BORDER_GRAY="sc-gray-border";SC.BORDER_TOP="sc-top-border";SC.BORDER_BOTTOM="sc-bottom-border";SC.BORDER_NONE=null;SC.Border={borderTop:0,borderRight:0,borderBottom:0,borderLeft:0,borderStyle:SC.BORDER_GRAY,hasBorder:YES,displayProperties:["borderStyle"],_BORDER_REGEXP:(/-border$/),initMixin:function(){console.warn("SC.Border is deprecated, please set border in your layout");this._sc_border_borderStyleDidChange();this._sc_border_borderDimensionsDidChange()},renderMixin:function(a,c){var b=this.get("borderStyle");if(b){if(this._BORDER_REGEXP.exec(b)){a.addClass(b)}else{a.addStyle("border","1px "+b+" solid")}}},_sc_border_borderStyleDidChange:function(){var a=this.get("borderStyle"),b=SC.Border.dimensions[a];if(b){this.beginPropertyChanges();this.set("borderTop",b);this.set("borderRight",b);this.set("borderBottom",b);this.set("borderLeft",b);this.endPropertyChanges()}},_sc_border_borderDimensionsDidChange:function(){var d=this.get("borderTop"),a=this.get("borderRight"),b=this.get("borderBottom"),c=this.get("borderLeft");this.adjust({borderTop:d,borderRight:a,borderBottom:b,borderLeft:c})}.observes("borderTop","borderRight","borderBottom","borderLeft")};SC.mixin(SC.Border,{dimensions:{"sc-bezel-border":1,"sc-black-border":1,"sc-gray-border":1,"sc-top-border":1,"sc-bottom-border":1}});SC.CollectionFastPath={initMixin:function(){this._indexMap={}},poolForExampleView:function(a){var b="_pool_"+SC.guidFor(a);if(!this[b]){this[b]=[]}return this[b]},createItemViewFromExampleView:function(c,b){var a=this.createItemView(c,null,b);if(a.isPoolable){a.owningPool=this.poolForExampleView(c)}a.createdFromExampleView=c;return a},configureItemView:function(b,a){b.beginPropertyChanges();b.setIfChanged("content",a.content);b.setIfChanged("contentIndex",a.contentIndex);b.setIfChanged("parentView",a.parentView);b.setIfChanged("layerId",a.layerId);b.setIfChanged("isEnabled",a.isEnabled);b.setIfChanged("isSelected",a.isSelected);b.setIfChanged("outlineLevel",a.outlineLevel);b.setIfChanged("layout",a.layout);b.setIfChanged("disclosureState",a.disclosureState);b.setIfChanged("isVisibleInWindow",a.isVisibleInWindow);b.setIfChanged("isGroupView",a.isGroupView);b.setIfChanged("page",this.page);b.endPropertyChanges()},wakePooledView:function(b,a){this.configureItemView(b,a);if(b.awakeFromPool){b.awakeFromPool(b.owningPool,this)}},allocateItemView:function(d,b){var a;if(d.prototype.isPoolable){var c=this.poolForExampleView(d);if(c.length>0){a=c.pop();this.wakePooledView(a,b)}}if(!a){a=this.createItemViewFromExampleView(d,b)}return a},releaseItemView:function(b){if(!b.isPoolable){b.destroy();return}var a=b.owningPool;a.push(b);if(b.hibernateInPool){b.hibernateInPool(a,this)}},contentIndexIsGroup:function(a,d,c){var e=this.get("contentDelegate");var b=this.get("_contentGroupIndexes"),f=NO;f=b&&b.contains(c);if(f){f=e.contentIndexIsGroup(this,this.get("content"),c)}return f},exampleViewForItem:function(f,d){var b=this.get("contentDelegate"),c=this.get("_contentGroupIndexes"),e,a,g=this.contentIndexIsGroup(this,this.get("content"),d);if(g){e=this.get("contentGroupExampleViewKey");if(e&&f){a=f.get(e)}if(!a){a=this.get("groupExampleView")||this.get("exampleView")}}else{e=this.get("contentExampleViewKey");if(e&&f){a=f.get(e)}if(!a){a=this.get("exampleView")}}return a},setAttributesForItem:function(f,d,c){var b=this.get("contentDelegate"),g=this.contentIndexIsGroup(this,this.get("content"),d),a=this.exampleViewForItem(f,d),e=this.get("content");c.createdFromExampleView=a;c.parentView=this.get("containerView")||this;c.contentIndex=d;c.owner=c.displayDelegate=this;c.content=f;c.page=this.page;c.layerId=this.layerIdFor(d);c.isEnabled=b.contentIndexIsEnabled(this,e,d);c.isSelected=b.contentIndexIsSelected(this,e,d);c.outlineLevel=b.contentIndexOutlineLevel(this,e,d);c.disclosureState=b.contentIndexDisclosureState(this,e,d);c.isVisibleInWindow=this.get("isVisibleInWindow");c.isGroupView=g;c.layout=this.layoutForContentIndex(d);if(!c.layout){c.layout=a.prototype.layout}},mappedViewsForItem:function(a,b){if(!b){b=this._viewMap}return b[SC.guidFor(a)]},mappedViewForItem:function(c,b,d){if(!d){d=this._viewMap}var a=d[SC.guidFor(c)];if(!a){return undefined}return a[b]},mapView:function(e,c,b,f){if(!f){f=this._viewMap}var d=SC.guidFor(e),a=f[d];if(!a){a=f[d]={_length:0}}a[c]=b;a._length++},unmapView:function(e,c,f){if(!f){f=this._viewMap}var d=SC.guidFor(e),a=f[d];if(!a){return}if(a[c]){var b=a[c];delete a[c];a._length--;if(a._length<=0){delete f[d]}}},itemViewForContentIndex:function(b){var d=this.get("content");if(!d){return}var c=d.objectAt(b);if(!c){return null}var e=this.exampleViewForItem(c,b),a=this._indexMap[b];if(a&&a.createdFromExampleView!==e){this.removeItemView(a);this.unmapView(c,b);a=null}if(!a){a=this.addItemView(e,c,b)}return a},nearestMappedViewIndexForItem:function(e,c,f){var b=this.mappedViewsForItem(e,f);if(!b){return null}var d=null,h=-1,g=0;for(var a in b){a=parseInt(a,10);if(isNaN(a)){continue}g=Math.abs(c-a);if(h<0||g<h){h=g;d=a}}return d},remapItemViews:function(b){var k=this._viewMap||{},a=(this._viewMap={}),j=(this._indexMap={}),m=[],h=this.get("content"),p;if(!h){return}var f=this._itemsToAdd;b.forEach(function(q){p=h.objectAt(q);var s=this.mappedViewsForItem(p,k);if(s){if(s[q]){var r=s[q];this.unmapView(p,q,k);this.mapView(p,q,r,a);j[q]=r}else{m.push(q)}}else{f.push(q)}},this);for(var o=0,g=m.length;o<g;o++){var n=m[o];p=h.objectAt(n);var e=this.nearestMappedViewIndexForItem(p,n,k),c;if(!SC.none(e)){c=this.mappedViewForItem(p,e,k);var d=this.exampleViewForItem(p,n);if(d===c.createdFromExampleView){this.unmapView(p,e,k);this.mapView(p,n,c,a);j[n]=c}else{f.push(n)}}else{f.push(n)}}return k},reloadIfNeeded:function(f,b){var d=this.get("content"),e;if(!f||!f.isIndexSet){f=this.get("nowShowing")}if(!b){e=this._invalidIndexes;if(!e||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;if(e.isIndexSet&&e.contains(f)){e=YES}if(this.willReload){this.willReload(e===YES?null:e)}}var g=this._itemsToAdd||(this._itemsToAdd=[]);var a=this.remapItemViews(f);this.processRemovals(a);if(e){this.processUpdates(e===YES?f:e)}this.processAdds();if(!b){this.clearDOMPools()}g.length=0;if(!b){var c=this.computeLayout();if(c){this.adjust(c)}if(this.didReload){this.didReload(e===YES?null:e)}}return this},processRemovals:function(c){var f=this.get("content");for(var d in c){var b=c[d];for(var e in b){e=parseInt(e,10);if(isNaN(e)){continue}var a=b[e];if(this._indexMap[e]===a){delete this._indexMap[e]}a._isInCollection=NO;this.removeItemView(a)}}},processUpdates:function(e){var b=this._itemsToUpdate,d=this.get("content"),c,a;e.forEach(function(f){c=d.objectAt(f);if(a=this.mappedViewForItem(c,f)){if(!a._isInCollection){return}var g=this.exampleViewForItem(c,f);this.updateItemView(a,g,c,f)}},this)},processAdds:function(){var f=this.get("content");var g=this._itemsToAdd,b,a=g.length,e,d;for(b=0;b<a;b++){e=g[b];d=f.objectAt(e);var h=this.exampleViewForItem(d,e);var c=this.addItemView(h,d,e)}},clearDOMPools:function(){var a=this._domPools||(this._domPools={});for(var b in a){this.clearDOMPool(a[b])}},domPoolSize:10,clearDOMPool:function(c){var b,a=c.length,d;for(b=this.domPoolSize;b<a;b++){d=c[b];this.removeChild(d);this.releaseItemView(d)}c.length=Math.min(c.length,this.domPoolSize)},domPoolForExampleView:function(d){var c=this._domPools||(this._domPools={}),a=SC.guidFor(d);var b=c[a];if(!b){b=c[a]=[]}return b},itemFromDOMPool:function(c){var b=this.domPoolForExampleView(c);if(b.length<1){return null}var a=b.shift();if(a.wakeFromDOMPool){a.wakeFromDOMPool()}return a},sendToDOMPool:function(a){var b=this.domPoolForExampleView(a.createdFromExampleView);b.push(a);var c=a.get("frame");a.adjust({top:-c.height});a.set("layerId",SC.guidFor(a));if(a.sleepInDOMPool){a.sleepInDOMPool()}},addItemView:function(e,d,c){var a,b=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(d,c,b);if(a=this.itemFromDOMPool(e)){this.configureItemView(a,b);a._isInCollection=YES;this.mapView(d,c,a);this._indexMap[c]=a;return a}a=this.allocateItemView(e,b);this.appendChild(a);a._isInCollection=YES;this.mapView(d,c,a);this._indexMap[c]=a;return a},removeItemView:function(a){if(a.get("layerIsCacheable")){this.sendToDOMPool(a)}else{this.removeChild(a)}a._isInCollection=NO},updateItemView:function(d,e,c,b){if(!d.get("layerIsCacheable")||d.createdFromExampleView!==e){this.unmapView(d,b);delete this._indexMap[b];this.removeItemView(d,c,b);var f=this.addItemView(e,c,b)}else{var a=this._TMP_ATTRS||(this._TMP_ATTRS={});this.setAttributesForItem(c,b,a);this.configureItemView(d,a)}},_lastTopUpdate:0,_lastLeftUpdate:0,_tolerance:100,touchScrollDidChange:function(g,f){if(Date.now()-this._lastTouchScrollTime<25){return}var h=this.get("clippingFrame");var e=this._inScrollClippingFrame||(this._inScrollClippingFrame={x:0,y:0,width:0,height:0});e.x=h.x;e.y=h.y;e.width=h.width;e.height=h.height;e.x=g;e.y=f;var d=this.contentIndexesInRect(e);if(!d){return}var b=this.get("length"),a=d.get("max"),c=d.get("min");if(a>b||c<0){d=d.copy();d.remove(b,a-b).remove(c,0-c).freeze()}if(this._lastNowShowing){if(d.contains(this._lastNowShowing)&&this._lastNowShowing.contains(d)){return}}this._lastNowShowing=d;this.reloadIfNeeded(d,YES);this._lastTouchScrollTime=Date.now()}};SC.CollectionGroup={classNames:["sc-collection-group"]};SC.CollectionRowDelegate={isCollectionRowDelegate:YES,itemHeight:24,rowSpacing:0,rowPadding:0,rowHeight:function(b,c){var a=this.get("rowPadding");var d=this.get("itemHeight");if(c!==undefined){this.set("itemHeight",c-a*2);return c}return d+a*2}.property("itemHeight","rowPadding"),customRowHeightIndexes:null,contentIndexRowHeight:function(a,b,c){return this.get("rowHeight")}};SC.CollectionViewDelegate={isCollectionViewDelegate:YES,collectionViewSelectionForProposedSelection:function(a,b){return b},collectionViewShouldSelectIndexes:function(a,b,c){return b},collectionViewShouldDeselectIndexes:function(a,b){return b},collectionViewShouldDeleteIndexes:function(a,b){return b},collectionViewDeleteContent:function(a,c,b){if(!c){return NO}if(SC.typeOf(c.destroyAt)===SC.T_FUNCTION){c.destroyAt(b);a.selectPreviousItem(NO,1);return YES}else{if(SC.typeOf(c.removeAt)===SC.T_FUNCTION){c.removeAt(b);a.selectPreviousItem(NO,1);return YES}else{return NO}}},collectionViewShouldBeginDrag:function(a){return YES},collectionViewDragDataTypes:function(a){return[]},collectionViewDragDataForType:function(a,c,b){return null},collectionViewComputeDragOperations:function(a,b,c){return c},collectionViewValidateDragOperation:function(b,d,e,c,a){return(a&SC.DROP_ON)?SC.DRAG_NONE:e},collectionViewPerformDragOperation:function(b,d,e,c,a){return SC.DRAG_NONE},collectionViewDragViewFor:function(a,b){return null},ghostActsLikeCursor:NO};SC.NavigationBuilder={isNavigationBuilder:YES,navigationTransitions:NO,initMixin:function(){var b=SC.Animatable;if(b&&!this.isAnimatable){this.mixin(b)}else{if(!b){SC.Logger.error("SC.NavigationView and SC.NavigationBuilder require SC.Animatable to perform animations, but it is not present. Please ensure your app or framework references it.")}}var a=this.get("navigationTransitions");if(!a&&SC.Animatable){a={left:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"},transform:{duration:0.25,timing:SC.Animatable.TRANSITION_EASE_IN_OUT,action:"navigationBuildDidFinish"}}}if(SC.Animatable){SC.mixin(this.transitions,a)}},metrics:function(){var a=this.computeFrameWithParentFrame();return a},transform:function(a){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+a+"px,0px,0px)")}else{this.adjust("transform","translate("+a+"px,0px)")}},buildInNavigation:function(){var a=this.metrics();this.disableAnimation();this.transform(this.get("buildDirection")===SC.TO_LEFT?a.width:-a.width);this.enableAnimation();this.invokeLater("transform",10,0)},buildOutNavigation:function(){var a=this.metrics();this.transform(this.get("buildDirection")===SC.TO_LEFT?-a.width:a.width)},buildIn:function(){this.buildInNavigation()},buildOut:function(){this.buildOutNavigation()},resetBuild:function(){this.transform(0)},navigationBuildDidFinish:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}}};SC.Scrollable={isScrollable:true,verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("innerFrame").height}.property("innerFrame"),horizontalPageScroll:function(){return this.get("innerFrame").width}.property("innerFrame"),hasVerticalScroller:function(){return this.get("scrollFrame").height>this.get("innerFrame").height}.property("scrollFrame"),hasHorizontalScroller:function(){return this.get("scrollFrame").width>this.get("innerFrame").width}.property("scrollFrame"),scrollBy:function(a){var b=this.get("scrollFrame");var c=this.get("innerFrame");if(!this.get("hasVerticalScroller")){a.y=0}if(b.height<=c.height){a.y=0}if(!this.get("hasHorizontalScroller")){a.x=0}if(b.width<=c.width){a.x=0}var d={x:b.x-(a.x||0),y:b.y-(a.y||0)};this.set("scrollFrame",d);d=this.get("scrollFrame");return{x:d.x-b.x,y:d.y-b.y}},scrollTo:function(a,b){this.set("scrollFrame",{x:0-a,y:0-b})},scrollToVisible:function(b){var e=this.get("innerFrame");var d=this.get("scrollFrame");var a=this.convertFrameFromView(b.get("frame"),b);a.x-=(e.x+d.x);a.y-=(e.y+d.y);var c={x:0-d.x,y:0-d.y,width:e.width,height:e.height};c.y-=Math.max(0,SC.minY(c)-SC.minY(a));c.x-=Math.max(0,SC.minX(c)-SC.minX(a));c.y+=Math.max(0,SC.maxY(a)-SC.maxY(c));c.x+=Math.max(0,SC.maxX(a)-SC.maxX(c));this.scrollTo(c.x,c.y)},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalLineScroll")*a}).y},scrollUpLine:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalLineScroll")*a}).y},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalLineScroll")*a}).x},scrollLeftLine:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalLineScroll")*a}).x},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy({y:this.get("verticalPageScroll")*a}).y},scrollUpPage:function(a){if(a===undefined){a=1}return 0-this.scrollBy({y:0-this.get("verticalPageScroll")*a}).y},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollTo({y:this.get("horizontalPageScroll")*a}).x},scrollLeftPage:function(a){if(a===undefined){a=1}return 0-this.scrollTo({y:0-this.get("horizontalPageScroll")*a}).x}};SC.ModalPane=SC.Pane.extend({classNames:"sc-modal",_openPaneCount:0,paneWillAppend:function(e){var d;this._openPaneCount++;if(!this.get("isVisibleInWindow")){this.append()}var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){d=c[b];if(d!==e){d.set("ariaHidden",YES);this._hideShowTextfields(d,NO)}}return this},paneDidRemove:function(e){var d;this._openPaneCount--;var c=SC.RootResponder.responder.panes;for(var b=0,a=c.length;b<a;b++){d=c[b];if(d!==e){d.set("ariaHidden",NO);this._hideShowTextfields(d,YES)}}if(this._openPaneCount<=0){this._openPaneCount=0;if(this.get("isVisibleInWindow")){this.remove()}}},_hideShowTextfields:function(c,b){var a;for(a in SC.View.views){a=SC.View.views[a];if(a!==c&&a.get("pane")===c&&a.get("isTextField")){a.set("isBrowserFocusable",b)}}},mouseDown:function(b){var a=this.get("owner");if(a&&a.modalPaneDidClick){a.modalPaneDidClick(b)}},touchStart:function(a){this.mouseDown(a)}});sc_require("panes/modal");SC.PanelPane=SC.Pane.extend({isPanelPane:YES,classNames:["sc-panel"],acceptsKeyPane:YES,ariaRole:"dialog",ariaLabel:null,isModal:YES,modalPane:SC.ModalPane.extend({classNames:"for-sc-panel"}),contentView:null,contentViewBindingDefault:SC.Binding.single(),replaceContent:function(a){this.removeAllChildren();if(a){this.appendChild(a)}},createChildViews:function(){var a=this.contentView;if(a){a=this.contentView=this.createChildView(a);this.childViews=[a]}},contentViewDidChange:function(){this.replaceContent(this.get("contentView"))}.observes("contentView"),renderDelegateName:"panelRenderDelegate",_modalPane:function(){var a=this.get("modalPane");if(a&&a.isClass){a=a.create({owner:this});this.set("modalPane",a)}return a},appendTo:function(a){var b;if(!this.get("isVisibleInWindow")&&this.get("isModal")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}return arguments.callee.base.apply(this,arguments)},remove:function(){var b,a=arguments.callee.base.apply(this,arguments);if(this._isShowingModal){this._isShowingModal=NO;if(b=this._modalPane()){b.paneDidRemove(this)}}return a},destroy:function(){var a=this.get("modalPane");if(a&&!a.isClass){a.destroy()}arguments.callee.base.apply(this,arguments)},_isModalDidChange:function(){var b,a=this.get("isModal");if(a){if(!this._isShowingModal&&this.get("isVisibleInWindow")&&(b=this._modalPane())){this._isShowingModal=YES;b.paneWillAppend(this)}}else{if(this._isShowingModal&&(b=this._modalPane())){this._isShowingModal=NO;b.paneDidRemove(this)}}}.observes("isModal"),paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.becomeKeyPane();return a},displayProperties:["ariaLabel"]});SC.TOGGLE_BEHAVIOR="toggle";SC.PUSH_BEHAVIOR="push";SC.TOGGLE_ON_BEHAVIOR="on";SC.TOGGLE_OFF_BEHAVIOR="off";SC.HOLD_BEHAVIOR="hold";SC.ButtonView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-button-view"],themeName:"square",value:null,toggleOnValue:YES,toggleOffValue:NO,localize:NO,localizeBindingDefault:SC.Binding.bool(),title:"",tooltip:"",contentTitleKey:null,icon:null,contentIconKey:null,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");return(a&&this.get("localize"))?SC.String.loc(a):(a||"")}.property("title","localize").cacheable(),keyEquivalent:null,buttonBehavior:SC.PUSH_BEHAVIOR,holdInterval:100,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),isCancel:NO,isCancelBindingDefault:SC.Binding.oneWay().bool(),action:null,target:null,supportFocusRing:NO,supportsAutoResize:YES,autoResizeLayer:function(){var a=this.invokeRenderDelegateMethod("getRenderedAutoResizeLayer",this.$());return a||this.get("layer")}.property("layer").cacheable(),autoResizeText:function(){return this.get("displayTitle")}.property("displayTitle").cacheable(),autoResizePadding:SC.propertyFromRenderDelegate("autoResizePadding",10),_labelMinWidthIE7:0,triggerActionAfterDelay:function(a){if(!this.get("isEnabled")){return NO}this.set("isActive",YES);this.invokeLater("triggerAction",200,a);return YES},triggerAction:function(a){this._action(a,YES);this.didTriggerAction();this.set("isActive",NO)},didTriggerAction:function(){},titleMinWidth:80,init:function(){arguments.callee.base.apply(this,arguments);var a=this.get("keyEquivalent");if(a){this._defaultKeyEquivalent=a}if(!SC.none(this.get("value"))){this._button_valueDidChange()}},ariaRole:"button",displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","escapeHTML","needsEllipsis","tooltip","titleMinWidth","supportFocusRing","buttonBehavior"],renderDelegateName:"buttonRenderDelegate",contentPropertyDidChange:function(h,c){var b=this.get("displayDelegate"),e=this.get("content"),g;var d=this.getDelegateProperty("contentValueKey",b);if(d&&(c===d||c==="*")){this.set("value",e?(e.get?e.get(d):e[d]):null)}var a=this.getDelegateProperty("contentTitleKey",b);if(a&&(c===a||c==="*")){this.set("title",e?(e.get?e.get(a):e[a]):null)}var f=this.getDelegateProperty("contentIconKey",b);if(f&&(c===f||c==="*")){this.set("icon",e?(e.get?e.get(f):e[f]):null)}return this},_button_displayObserver:function(){this.displayDidChange()}.observes("title","icon","value"),performKeyEquivalent:function(c,b){if(!this.get("isVisibleInWindow")){return NO}if(!this.get("isEnabled")){return NO}var a=this.get("keyEquivalent");if(a){if(a===c){return this.triggerAction(b)}}else{if((this.get("isDefault")&&(c==="return"))||(this.get("isCancel")&&(c==="escape"))){return this.triggerAction(b)}}return NO},computeIsSelectedForValue:function(d){var b=this.get("toggleOnValue"),c,a;if(SC.typeOf(d)===SC.T_ARRAY){if(d.length===1){c=(d[0]==b)}else{c=null;d.find(function(e){a=(e==b);if(c===null){c=a}else{if(a!==c){c=SC.MIXED_STATE}}return c===SC.MIXED_STATE})}}else{if(d===SC.MIXED_STATE){c=SC.MIXED_STATE}else{c=(d===b)}}return c},_button_valueDidChange:function(){var b=this.get("value"),a=this.computeIsSelectedForValue(b);this.set("isSelected",a)}.observes("value"),_button_isSelectedDidChange:function(){var c=this.get("isSelected"),b=this.computeIsSelectedForValue(this.get("value"));if((c!==SC.MIXED_STATE)&&(b!==c)){var a=(c)?"toggleOnValue":"toggleOffValue";this.set("value",this.get(a))}}.observes("isSelected"),_defaultKeyEquivalent:null,_isDefaultOrCancelDidChange:function(){var b=!!this.get("isDefault"),a=!b&&this.get("isCancel");if(b){this.set("keyEquivalent","return")}else{if(a){this.set("keyEquivalent","escape")}else{this.set("keyEquivalent",this._defaultKeyEquivalent)}}}.observes("isDefault","isCancel"),mouseDown:function(a){var b=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(b===SC.HOLD_BEHAVIOR){this._action(a)}else{if(!this._isFocused&&(b!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}return YES},mouseExited:function(a){if(this._isMouseDown){this.set("isActive",NO)}return YES},mouseEntered:function(a){if(this._isMouseDown){this.set("isActive",YES)}return YES},mouseUp:function(b){if(this._isMouseDown){this.set("isActive",NO)}this._isMouseDown=false;if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){var a=this.$().within(b.target);if(a&&this.get("isEnabled")){this._action(b)}}return YES},touchStart:function(b){var a=this.get("buttonBehavior");if(!this.get("isEnabled")){return YES}this.set("isActive",YES);if(a===SC.HOLD_BEHAVIOR){this._action(b)}else{if(!this._isFocused&&(a!==SC.PUSH_BEHAVIOR)){this._isFocused=YES;this.becomeFirstResponder()}}b.preventDefault();return YES},touchesDragged:function(a,b){if(!this.touchIsInBoundary(a)){if(!this._touch_exited){this.set("isActive",NO)}this._touch_exited=YES}else{if(this._touch_exited){this.set("isActive",YES)}this._touch_exited=NO}a.preventDefault();return YES},touchEnd:function(a){this._touch_exited=NO;this.set("isActive",NO);if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.touchIsInBoundary(a)&&this.get("isEnabled")){this._action()}}a.preventDefault();return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this.triggerActionAfterDelay(b);return YES}b.allowDefault();return NO},_action:function(a,c){switch(this.get("buttonBehavior")){case SC.TOGGLE_BEHAVIOR:var b=this.get("isSelected");if(b){this.set("value",this.get("toggleOffValue"))}else{this.set("value",this.get("toggleOnValue"))}break;case SC.TOGGLE_ON_BEHAVIOR:this.set("value",this.get("toggleOnValue"));break;case SC.TOGGLE_OFF_BEHAVIOR:this.set("value",this.get("toggleOffValue"));break;case SC.HOLD_BEHAVIOR:this._runHoldAction(a,c);break;default:this._runAction(a)}},_runAction:function(a){var c=this.get("action"),d=this.get("target")||null,b;if(c){if(c&&(SC.typeOf(c)===SC.T_FUNCTION)){this.action(a);return}else{b=this.getPath("pane.rootResponder");if(b){b.sendAction(c,d,this,this.get("pane"),null,this)}}}},_runHoldAction:function(a,b){if(this.get("isActive")){this._runAction();if(!b){SC.RunLoop.begin();this.invokeLater("_runHoldAction",this.get("holdInterval"),a);SC.RunLoop.end()}}},didBecomeKeyResponderFrom:function(a){if(!this._isFocused){this._isFocused=YES;this.becomeFirstResponder();if(this.get("isVisibleInWindow")){this.$().focus()}}},willLoseKeyResponderTo:function(a){if(this._isFocused){this._isFocused=NO}},didAppendToDocument:function(){if(parseInt(SC.browser.msie,0)===7&&this.get("useStaticLayout")){var e=this.get("layout"),d=this.$(),a=0;if(d&&d[0]&&(a=d[0].clientWidth)&&a!==0&&this._labelMinWidthIE7===0){var c=this.$(".sc-button-label"),h=parseInt(c.css("paddingRight"),0),b=parseInt(c.css("paddingLeft"),0),g=parseInt(c.css("marginRight"),0),f=parseInt(c.css("marginLeft"),0);if(g=="auto"){SC.Logger.log(g+","+f+","+h+","+b)}if(!h&&isNaN(h)){h=0}if(!b&&isNaN(b)){b=0}if(!g&&isNaN(g)){g=0}if(!f&&isNaN(f)){f=0}this._labelMinWidthIE7=a-(h+b)-(g+f);c.css("minWidth",this._labelMinWidthIE7+"px")}else{this.invokeLater(this.didAppendToDocument,1)}}}});SC.ButtonView.CLICK_AND_HOLD_DELAY=SC.browser.msie?600:300;SC.REGULAR_BUTTON_HEIGHT=24;sc_require("panes/panel");sc_require("views/button");SC.BUTTON1_STATUS="button1";SC.BUTTON2_STATUS="button2";SC.BUTTON3_STATUS="button3";SC.AlertPane=SC.PanelPane.extend({classNames:["sc-alert"],ariaRole:"alertdialog",delegate:null,icon:"sc-icon-alert-48",message:"",ariaLabel:function(){return this.get("message")}.property("message").cacheable(),description:"",displayDescription:function(){var a=this.get("description");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="description">'+a.split("\n").join('</p><p class="description">')+"</p>"}.property("description").cacheable(),caption:"",displayCaption:function(){var a=this.get("caption");if(!a||a.length===0){return a}a=SC.RenderContext.escapeHTML(a);return'<p class="caption">'+a.split("\n").join('</p><p class="caption">')+"</p>"}.property("caption").cacheable(),button1:SC.outlet("contentView.childViews.1.childViews.1"),button2:SC.outlet("contentView.childViews.1.childViews.0"),button3:SC.outlet("contentView.childViews.2.childViews.0"),buttonThreeWrapper:SC.outlet("contentView.childViews.2"),layout:{top:0.3,centerX:0,width:500},contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:[SC.View.extend(SC.StaticLayout,{classNames:["info"],render:function(a,c){var b=this.get("pane");if(b.get("icon")=="blank"){a.addClass("plain")}a.push('<img src="'+SC.BLANK_IMAGE_URL+'" class="icon '+b.get("icon")+'" />');a.begin("h1").attr("class","header").text(b.get("message")||"").end();a.push(b.get("displayDescription")||"");a.push(b.get("displayCaption")||"");a.push('<div class="separator"></div>')}}),SC.View.extend({layout:{bottom:13,height:24,right:18,width:466},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:64,layout:{right:5,height:"auto",width:"auto",bottom:0},isCancel:YES,action:"dismiss",isVisible:NO}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},isDefault:YES,action:"dismiss",isVisible:NO})}),SC.View.extend({layout:{bottom:13,height:24,left:18,width:150},childViews:[SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:64,layout:{left:0,height:"auto",width:"auto",bottom:0},action:"dismiss",isVisible:NO})]})]}),dismiss:function(b){var a=this.delegate,c,d,e;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}if(d=(b&&b.get("customAction"))){if(SC.typeOf(d)===SC.T_FUNCTION){d.call(d)}else{c=this.getPath("pane.rootResponder");if(c){e=b.get("target");c.sendAction(d,e||a,this,this,null,this)}}}this.remove()},alertInfoDidChange:function(){var a=this.getPath("contentView.childViews.0");if(a){a.displayDidChange()}}.observes("icon","message","displayDescription","displayCaption")});SC.AlertPane.mixin({show:function(f){f=SC.AlertPane._argumentsCall.apply(this,arguments);var a=this.create(f),k=0,g=f.buttons,e,h,b,d,c;if(g){g.forEach(function(m){k++;if(!m){return}e=a.get("button%@".fmt(k));h=m.title;b=m.action;d=m.target;c=f.themeName||"capsule";e.set("title".fmt(k),h);if(b){e.set("customAction".fmt(k),b)}if(d){e.set("target".fmt(k),d)}e.set("isVisible",!!h);e.set("themeName",c)})}else{e=a.get("button1");e.set("title","OK");e.set("isVisible",YES)}var j=a.append();a.adjust("height",a.childViews[0].$().height());a.updateLayout();return j},warn:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-alert-48";return this.show(a)},info:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-info-48";return this.show(a)},error:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="sc-icon-error-48";return this.show(a)},plain:function(a){a=SC.AlertPane._argumentsCall.apply(this,arguments);a.icon="blank";return this.show(a)},_argumentsCall:function(b){var a=b;if(SC.typeOf(b)!==SC.T_HASH){var c=this._normalizeArguments(arguments);a={message:c[0],description:c[1],caption:c[2],delegate:c[7],icon:(c[6]||"sc-icon-alert-48"),themeName:"capsule"};if(SC.typeOf(c[3])===SC.T_STRING||SC.typeOf(c[4])===SC.T_STRING||SC.typeOf(c[5])===SC.T_STRING){a.buttons=[{title:c[3]},{title:c[4]},{title:c[5]}]}}return a},_normalizeArguments:function(b){b=SC.A(b);var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[7]=c;return b}});sc_require("panes/panel");SC.PalettePane=SC.PanelPane.extend({classNames:["sc-palette"],isModal:NO,modalPane:SC.ModalPane,isAnchored:NO,_mouseOffsetX:null,_mouseOffsetY:null,mouseDown:function(a){var b=this.get("frame");this._mouseOffsetX=b?(b.x-a.pageX):0;this._mouseOffsetY=b?(b.y-a.pageY):0;return YES},mouseDragged:function(a){if(!this.isAnchored){this.set("layout",{width:this.layout.width,height:this.layout.height,left:this._mouseOffsetX+a.pageX,top:this._mouseOffsetY+a.pageY});this.updateLayout()}return YES},touchStart:function(a){return this.mouseDown(a)},touchesDragged:function(a){return this.mouseDragged(a)}});sc_require("panes/palette");SC.PICKER_MENU="menu";SC.PICKER_FIXED="fixed";SC.PICKER_POINTER="pointer";SC.PICKER_MENU_POINTER="menu-pointer";SC.POINTER_LAYOUT=["perfectRight","perfectLeft","perfectTop","perfectBottom"];SC.PickerPane=SC.PalettePane.extend({classNames:["sc-picker"],isAnchored:YES,isModal:YES,pointerPos:"perfectRight",pointerPosX:0,pointerPosY:0,anchorElement:null,anchorCached:null,preferType:null,preferMatrix:null,pointerOffset:null,extraRightOffset:0,removeTarget:null,removeAction:null,repositionOnWindowResize:YES,_anchorView:null,_anchorHTMLElement:null,popup:function(c,b,d,a){if(c){if(c.isView){this._anchorView=c;this._setupScrollObservers(c)}else{this._anchorHTMLElement=c}}this.beginPropertyChanges();if(b){this.set("preferType",b)}if(d){this.set("preferMatrix",d)}if(a){this.set("pointerOffset",a)}this.endPropertyChanges();this.positionPane();this._hideOverflow();return this.append()},positionPane:function(f){f=f&&this.get("anchorCached");var b=f?this.get("anchorCached"):this.get("anchorElement"),c=this.get("preferType"),d=this.get("preferMatrix"),e=this.get("layout"),a;if(b){if(!f){b=this.computeAnchorRect(b);this.set("anchorCached",b)}if(b.x===0&&b.y===0){return}a=SC.cloneRect(b);if(c){switch(c){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!d||d.length!==3){this.set("preferMatrix",[1,4,3])}a.x+=((this.preferMatrix[2]===0)?a.width:0)+this.preferMatrix[0];a.y+=((this.preferMatrix[2]===3)?a.height:0)+this.preferMatrix[1];break;default:a.y+=a.height;break}}else{a.y+=a.height}a=this.fitPositionToScreen(a,this.get("frame"),b);this.adjust({width:a.width,height:a.height,left:a.x,top:a.y})}else{this.adjust({width:e.width,height:e.height,centerX:0,centerY:0})}this.updateLayout();return this},computeAnchorRect:function(c){var e,b,d,a=SC.RootResponder.responder.computeWindowSize();if(c.getBoundingClientRect){e=c.getBoundingClientRect();b={x:e.left,y:e.top,width:e.width,height:e.height};if(b.width===undefined||b.height===undefined){d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()}}else{b=SC.offset(c);d=SC.$(c);b.width=d.outerWidth();b.height=d.outerHeight()}b.height=(a.height-b.y)<b.height?(a.height-b.y):b.height;if(!SC.browser.msie&&window.scrollX>0||window.scrollY>0){b.x+=window.scrollX;b.y+=window.scrollY}else{if(SC.browser.msie&&(document.documentElement.scrollTop>0||document.documentElement.scrollLeft>0)){b.x+=document.documentElement.scrollLeft;b.y+=document.documentElement.scrollTop}}return b},fitPositionToScreen:function(h,c,b){var a=SC.RootResponder.responder.computeWindowSize(),g={x:0,y:0,width:a.width,height:a.height};var d=SC.RootResponder.responder.mainPane;if(d){var e=d.layout.minWidth,f=d.layout.minHeight;if(e&&g.width<e){g.width=d.layout.minWidth}if(f&&g.height<f){g.height=d.layout.minHeight}}c.x=h.x;c.y=h.y;if(this.preferType){switch(this.preferType){case SC.PICKER_MENU:c=this.fitPositionToScreenMenu(g,c,this.get("isSubMenu"));break;case SC.PICKER_MENU_POINTER:this.setupPointer(b);c=this.fitPositionToScreenMenuPointer(g,c,b);break;case SC.PICKER_POINTER:this.setupPointer(b);c=this.fitPositionToScreenPointer(g,c,b);break;case SC.PICKER_FIXED:break;default:break}}else{c=this.fitPositionToScreenDefault(g,c,b)}this.displayDidChange();return c},fitPositionToScreenDefault:function(c,d,b){if(SC.maxX(d)>c.width){var e=Math.max(SC.maxX(b),d.width);d.x=Math.min(e,c.width)-d.width}if(SC.minX(d)<0){d.x=SC.minX(Math.max(b,0));if(SC.maxX(d)>c.width){d.x=Math.max(0,c.width-d.width)}}if(SC.maxY(d)>c.height){e=Math.max((b.y-d.height),0);if(e>c.height){d.y=Math.max(0,c.height-d.height)}else{d.y=e}}if(SC.minY(d)<0){e=Math.min(SC.maxY(b),(c.height-b.height));d.y=Math.max(e,0)}return d},fitPositionToScreenMenu:function(c,b,a){if(a){b.x-=this.get("submenuOffsetX");b.y-=Math.floor(this.get("menuHeightPadding")/2)}if((b.x+b.width)>(c.width-20)){if(a){b.x=b.x-(b.width*2)}else{b.x=c.width-b.width-20}}if(b.x<7){b.x=7}if(b.y<7){b.height+=b.y;b.y=7}if(b.height+b.y+35>=c.height){if(b.height+50>=c.height){b.y=SC.MenuPane.VERTICAL_OFFSET;b.height=c.height-(SC.MenuPane.VERTICAL_OFFSET*2)}else{b.y+=(c.height-(b.height+b.y+35))}}return b},fitPositionToScreenMenuPointer:function(c,d,b){d=this.fitPositionToScreenPointer(c,d,b);if(d.height+d.y+35>=c.height){d.height=c.height-d.y-(SC.MenuPane.VERTICAL_OFFSET*2)}return d},fitPositionToScreenPointer:function(p,n,o){var h=[this.pointerOffset[0],this.pointerOffset[1],this.pointerOffset[2],this.pointerOffset[3]];var e=[[o.x+o.width+h[0],o.y+parseInt(o.height/2,0)-40],[o.x-n.width+h[1],o.y+parseInt(o.height/2,0)-40],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y-n.height+h[2]],[o.x+parseInt((o.width/2)-(n.width/2),0),o.y+o.height+h[3]]];var c=[[o.x+o.width+n.width+h[0],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+h[1],o.y+parseInt(o.height/2,0)+n.height-24],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+h[2]],[o.x+parseInt((o.width/2)-(n.width/2),0)+n.width,o.y+o.height+n.height+h[3]]];var g=[[e[0][1]>0?0:0-e[0][1],c[0][0]<p.width?0:c[0][0]-p.width,c[0][1]<p.height?0:c[0][1]-p.height,e[0][0]>0?0:0-e[0][0]],[e[1][1]>0?0:0-e[1][1],c[1][0]<p.width?0:c[1][0]-p.width,c[1][1]<p.height?0:c[1][1]-p.height,e[1][0]>0?0:0-e[1][0]],[e[2][1]>0?0:0-e[2][1],c[2][0]<p.width?0:c[2][0]-p.width,c[2][1]<p.height?0:c[2][1]-p.height,e[2][0]>0?0:0-e[2][0]],[e[3][1]>0?0:0-e[3][1],c[3][0]<p.width?0:c[3][0]-p.width,c[3][1]<p.height?0:c[3][1]-p.height,e[3][0]>0?0:0-e[3][0]]];var d=this.preferMatrix;if(d[4]===-1){n.x=o.x+parseInt(o.width/2,0);n.y=o.y+parseInt(o.height/2,0)-parseInt(n.height/2,0);this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(n.height/2,0)-40)}else{n.x=e[d[4]][0];n.y=e[d[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[d[4]]);this.set("pointerPosY",0)}this.set("pointerPosX",0);for(var j=0,b,k=SC.POINTER_LAYOUT.length;j<k;j++){b=d[j];if(g[b][0]===0&&g[b][1]===0&&g[b][2]===0&&g[b][3]===0){if(d[4]!==b){n.x=e[b][0];n.y=e[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])}j=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&g[b][0]===0&&g[b][1]===0&&g[b][2]<n.height-91&&g[b][3]===0){if(d[4]!==b){n.x=e[b][0];this.set("pointerPos",SC.POINTER_LAYOUT[b])}n.y=e[b][1]-g[b][2];this.set("pointerPosY",g[b][2]);j=SC.POINTER_LAYOUT.length}else{if((b===0||b===1)&&g[b][0]===0&&g[b][1]===0&&g[b][2]<=n.height-51&&g[b][3]===0){if(d[4]!==b){n.x=e[b][0]}n.y=e[b][1]-(n.height-51);this.set("pointerPosY",(n.height-53));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-low");j=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&g[b][0]===0&&g[b][1]<=parseInt(n.width/2,0)-this.get("extraRightOffset")&&g[b][2]===0&&g[b][3]===0){if(d[4]!==b){n.y=e[b][1]}n.x=e[b][0]-(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-right");j=SC.POINTER_LAYOUT.length}else{if((b===2||b===3)&&g[b][0]===0&&g[b][1]===0&&g[b][2]===0&&g[b][3]<=parseInt(n.width/2,0)-this.get("extraRightOffset")){if(d[4]!==b){n.y=e[b][1]}n.x=e[b][0]+(parseInt(n.width/2,0)-this.get("extraRightOffset"));this.set("pointerPos",SC.POINTER_LAYOUT[b]+" extra-left");j=SC.POINTER_LAYOUT.length}}}}}}return n},setupPointer:function(f){var g=this.pointerOffset,e=SC.PickerPane;if(!g||g.length!==4){if(this.get("preferType")==SC.PICKER_MENU_POINTER){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("pointerOffset",e.TINY_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",e.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.SMALL_CONTROL_SIZE:this.set("pointerOffset",e.SMALL_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",e.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.REGULAR_CONTROL_SIZE:this.set("pointerOffset",e.REGULAR_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",e.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.LARGE_CONTROL_SIZE:this.set("pointerOffset",e.LARGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",e.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break;case SC.HUGE_CONTROL_SIZE:this.set("pointerOffset",e.HUGE_PICKER_MENU_POINTER_OFFSET);this.set("extraRightOffset",e.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET);break}}else{var d=(f.width<16)?((f.width<4)?9:6):0,b=(f.height<16)?((f.height<4)?9:6):0,c=e.PICKER_POINTER_OFFSET;var h=[c[0]+d,c[1]-d,c[2]-b,c[3]+b];this.set("pointerOffset",h);this.set("extraRightOffset",e.PICKER_EXTRA_RIGHT_OFFSET)}}if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",this.get("preferType")===SC.PICKER_MENU_POINTER?[3,2,1,0,3]:[0,1,2,3,2])}},displayProperties:["preferType","pointerPos","pointerPosY"],renderDelegateName:"pickerRenderDelegate",modalPaneDidClick:function(a){var d=this.get("frame"),e=this.get("removeTarget")||null,c=this.get("removeAction"),b=this.get("rootResponder");if(!this.clickInside(d,a)){if(c){b.sendAction(c,e,this,this,null,this)}else{this.remove()}return YES}return NO},mouseDown:function(a){return this.modalPaneDidClick(a)},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},windowSizeDidChange:function(b,a){if(this.repositionOnWindowResize){this.positionPane()}},remove:function(){if(this.get("isVisibleInWindow")&&this.get("isPaneAttached")){this._withdrawOverflowRequest()}this._removeScrollObservers();return arguments.callee.base.apply(this,arguments)},anchorElement:function(a,b){var c;if(b===undefined){c=this._anchorView;return c?c.get("layer"):this._anchorHTMLElement}else{if(!b){throw"You must set 'anchorElement' to either a view or a DOM element"}else{if(b.isView){this._anchorView=b;this._anchorHTMLElement=null}else{this._anchorView=null;this._anchorHTMLElement=b}}}}.property("layer").cacheable(),_hideOverflow:function(){var b=SC.$(document.body),a=SC.$(".sc-main"),d=parseInt(a.css("minWidth"),0),e=parseInt(a.css("minHeight"),0),c=SC.RootResponder.responder.get("currentWindowSize");if(c.width>=d&&c.height>=e){SC.bodyOverflowArbitrator.requestHidden(this)}},_withdrawOverflowRequest:function(){SC.bodyOverflowArbitrator.withdrawRequest(this)},_getScrollViewOfView:function(b){var a=b;while(YES){if(!a){return null}if(a.isScrollable){return a}a=a.get("parentView")}},_setupScrollObservers:function(b){var a=this._getScrollViewOfView(b);if(a){a.addObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.addObserver("verticalScrollOffset",this,this._scrollOffsetDidChange);this._scrollView=a}},_removeScrollObservers:function(){var a=this._scrollView;if(a){a.removeObserver("horizontalScrollOffset",this,this._scrollOffsetDidChange);a.removeObserver("verticalScrollOffset",this,this._scrollOffsetDidChange)}},_scrollOffsetDidChange:function(){this.positionPane()}});SC.PickerPane.PICKER_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.PICKER_EXTRA_RIGHT_OFFSET=20;SC.PickerPane.TINY_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.TINY_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.SMALL_PICKER_MENU_POINTER_OFFSET=[9,-9,-8,8];SC.PickerPane.SMALL_PICKER_MENU_EXTRA_RIGHT_OFFSET=11;SC.PickerPane.REGULAR_PICKER_MENU_POINTER_OFFSET=[9,-9,-12,12];SC.PickerPane.REGULAR_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.PickerPane.LARGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-16,16];SC.PickerPane.LARGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=17;SC.PickerPane.HUGE_PICKER_MENU_POINTER_OFFSET=[9,-9,-18,18];SC.PickerPane.HUGE_PICKER_MENU_EXTRA_RIGHT_OFFSET=12;SC.SeparatorView=SC.View.extend({classNames:["sc-separator-view"],tagName:"span",layoutDirection:SC.LAYOUT_HORIZONTAL,render:function(a,b){if(b){a.push("<span></span>")}a.addClass(this.get("layoutDirection"))}});sc_require("views/button");sc_require("views/separator");SC.MenuItemView=SC.View.extend(SC.ContentDisplay,{classNames:["sc-menu-item"],displayProperties:["title","isEnabled","isSeparator","isChecked"],ariaRole:"menuitem",escapeHTML:YES,acceptsFirstResponder:YES,blocksIEDeactivate:YES,isContextMenuEnabled:NO,content:null,isSeparator:function(){return this.getContentProperty("itemSeparatorKey")===YES}.property("content").cacheable(),isEnabled:function(){return this.getContentProperty("itemIsEnabledKey")!==NO&&this.getContentProperty("itemSeparatorKey")!==YES}.property("content.isEnabled").cacheable(),isChecked:function(){return this.getContentProperty("itemCheckboxKey")}.property(),subMenu:function(){var c=this.get("content"),b,a;if(!c){return null}a=this.get("parentMenu");b=c.get(a.itemSubMenuKey);if(b){if(SC.kindOf(b,SC.MenuPane)){b.set("isModal",NO);b.set("isSubMenu",YES);b.set("parentMenu",a);return b}else{return SC.MenuPane.create({layout:{width:200},items:b,isModal:NO,isSubMenu:YES,parentMenu:a,controlSize:a.get("controlSize"),exampleView:a.get("exampleView")})}}return null}.property("content").cacheable(),hasSubMenu:function(){return !!this.get("subMenu")}.property("subMenu").cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this.contentDidChange()},render:function(b,h){var c=this.get("content"),a,f,e=this.get("parentMenu"),d=this.get("itemWidth")||e.layout.width,g=this.get("itemHeight")||SC.DEFAULT_MENU_ITEM_HEIGHT;this.set("itemWidth",d);this.set("itemHeight",g);if(this.get("isSeparator")){b.attr("role","separator")}else{if(this.get("isChecked")){b.attr("role","menuitemcheckbox");b.attr("aria-checked",true)}}b=b.begin("a").addClass("menu-item");if(this.get("isSeparator")){b.push('<span class="separator"></span>');b.addClass("disabled")}else{f=c.get(e.itemIconKey);if(f){this.renderImage(b,f);b.addClass("has-icon")}f=this.get("title");if(SC.typeOf(f)!==SC.T_STRING){f=f.toString()}this.renderLabel(b,f);if(this.get("isChecked")){b.push('<div class="checkbox"></div>')}if(this.get("hasSubMenu")){this.renderBranch(b)}f=this.getContentProperty("itemShortCutKey");if(f){this.renderShortcut(b,f)}}b=b.end()},renderImage:function(b,d){var a,c;if(d&&SC.ImageView.valueIsUrl(d)){a=d;c=""}else{c=d;a=SC.BLANK_IMAGE_URL}b.begin("img").addClass("image").addClass(c).attr("src",a).end()},renderLabel:function(b,a){if(this.get("escapeHTML")){a=SC.RenderContext.escapeHTML(a)}b.push("<span class='value ellipsis'>"+a+"</span>")},renderBranch:function(a){a.push('<span class="has-branch"></span>')},renderShortcut:function(b,a){b.push('<span class = "shortcut">'+a+"</span>")},showSubMenu:function(){var a=this.get("subMenu");if(a){a.set("mouseHasEntered",NO);a.popup(this,[0,0,0])}this._subMenuTimer=null},title:function(){var b=this.getContentProperty("itemTitleKey"),a=this.getPath("parentMenu.localize");if(a&&b){b=SC.String.loc(b)}return b||""}.property("content.title").cacheable(),getContentProperty:function(b){var a=this.get("content"),c=this.get("parentMenu");if(a){return a.get(c.get(b))}},mouseUp:function(b){var a;a=this.getPath("parentMenu.rootMenu.targetMenuItem");if(a){a.performAction()}return YES},performAction:function(){if(!this.get("isEnabled")){this.getPath("parentMenu.rootMenu").remove();return YES}if(this.get("hasSubMenu")){return NO}var b=this.getContentProperty("itemDisableMenuFlashKey"),a;if(b){this.sendAction()}else{this._flashCounter=0;a=this.getPath("parentMenu.rootMenu");a._isFlashing=YES;this.invokeLater(this.flashHighlight,25);this.invokeLater(this.sendAction,150)}return YES},sendAction:function(){var c=this.getContentProperty("itemActionKey"),d=this.getContentProperty("itemTargetKey"),b=this.getPath("parentMenu.rootMenu"),a;this.getPath("parentMenu.rootMenu").remove();b._isFlashing=NO;c=(c===undefined)?b.get("action"):c;d=(d===undefined)?b.get("target"):d;b.set("selectedItem",this.get("content"));if(SC.typeOf(c)===SC.T_FUNCTION){c.apply(d,[b])}else{a=this.getPath("pane.rootResponder")||SC.RootResponder.responder;if(a){a.sendAction(c,d,b)}}},flashHighlight:function(){var a=this._flashCounter,b=this.$();if(a%2===0){b.addClass("focus")}else{b.removeClass("focus")}if(a<=2){this.invokeLater(this.flashHighlight,50);this._flashCounter++}},mouseDown:function(a){return YES},mouseEntered:function(a){var c=this.get("parentMenu"),b=c.get("rootMenu");if(b._isFlashing){return}c.set("mouseHasEntered",YES);this.set("mouseHasEntered",YES);c.set("currentMenuItem",this);if(this.get("isEnabled")){this.becomeFirstResponder()}if(this.get("hasSubMenu")){this._subMenuTimer=this.invokeLater(this.showSubMenu,100)}return YES},mouseExited:function(a){var b,c;if(this.get("hasSubMenu")){c=this._subMenuTimer;if(c){c.invalidate()}else{this.invokeLater(this.checkMouseLocation,100)}}else{b=this.get("parentMenu");if(b.get("currentMenuItem")===this){b.set("currentMenuItem",null)}}return YES},touchStart:function(a){this.mouseEntered(a);return YES},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},checkMouseLocation:function(){var b=this.get("subMenu"),c=this.get("parentMenu"),a,d;if(!b.get("mouseHasEntered")){a=c.get("currentMenuItem");if(a===this||a===null){d=c.get("previousMenuItem");if(d){d.resignFirstResponder()}this.resignFirstResponder();b.remove()}}},moveUp:function(b,a){var c=this.get("parentMenu");if(c){c.moveUp(this)}return YES},moveDown:function(b,a){var c=this.get("parentMenu");if(c){c.moveDown(this)}return YES},moveRight:function(b,a){this.showSubMenu();return YES},insertText:function(b,a){var c=this.get("parentMenu");if(c){c.insertText(b,a)}},keyDown:function(a){return this.interpretKeyEvents(a)},keyUp:function(a){return YES},cancel:function(a){this.getPath("parentMenu.rootMenu").remove();return YES},didBecomeFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",this)}},willLoseFirstResponder:function(a){if(a!==this){return}var b=this.get("parentMenu");if(b){b.set("currentSelectedMenuItem",null);b.set("previousSelectedMenuItem",this)}},insertNewline:function(b,a){this.mouseUp(a)},closeParent:function(){this.$().removeClass("focus");var a=this.get("parentMenu");if(a){a.remove()}},clickInside:function(b,a){return SC.pointInRect({x:a.pageX,y:a.pageY},b)},contentDidChange:function(){var b=this.get("content"),a=this._content;if(b===a){return}var c=this.contentPropertyDidChange;if(a&&a.removeObserver){a.removeObserver("*",this,c)}this._content=b;if(b&&b.addObserver){b.addObserver("*",this,c)}this.contentPropertyDidChange(b,"*")}.observes("content"),contentPropertyDidChange:function(g,j){var b=this.get("parentMenu");if(!b){return}var a=SC.MenuItemView._contentPropertyToMenuItemPropertyMapping,h=SC.keys(a),e,f,d,c;if(j==="*"){for(e=0,f=h.length;e<f;++e){d=h[e];c=a[d];this.notifyPropertyChange(c)}}else{for(e=0,f=h.length;e<f;++e){d=h[e];if(b.get(d)===j){c=a[d];this.notifyPropertyChange(c)}}}}});SC.MenuItemView._contentPropertyToMenuItemPropertyMapping={itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemSeparatorKey:"isSeparator",itemSubMenuKey:"subMenu"};sc_require("panes/picker");sc_require("views/menu_item");SC.MenuPane=SC.PickerPane.extend({classNames:["sc-menu"],ariaRole:"menu",items:[],controlSize:SC.REGULAR_CONTROL_SIZE,itemHeight:SC.propertyFromRenderDelegate("itemHeight",20),itemSeparatorHeight:SC.propertyFromRenderDelegate("itemSeparatorHeight",9),menuHeight:0,menuHeightPadding:SC.propertyFromRenderDelegate("menuHeightPadding",6),submenuOffsetX:SC.propertyFromRenderDelegate("submenuOffsetX",2),selectedItem:null,exampleView:SC.MenuItemView,anchor:null,isSubMenu:NO,localize:YES,acceptsMenuPane:YES,isContextMenuEnabled:NO,popup:function(b,c){var a;this.beginPropertyChanges();if(b){if(b.isView){this._anchorView=b;this._setupScrollObservers(b)}else{this._anchorHTMLElement=b}}if(c){this.set("preferMatrix",c)}this.adjust("height",this.get("menuHeight"));this.positionPane();this.set("defaultResponder",this);this.endPropertyChanges();this._hideOverflow();this.append()},remove:function(){var a=this.get("parentMenu");this.set("currentMenuItem",null);this.closeOpenMenus();this.resignMenuPane();if(a){a.becomeMenuPane()}return arguments.callee.base.apply(this,arguments)},itemTitleKey:"title",itemIsEnabledKey:"isEnabled",itemValueKey:"value",itemIconKey:"icon",itemHeightKey:"height",itemSubMenuKey:"subMenu",itemSeparatorKey:"separator",itemTargetKey:"target",itemActionKey:"action",itemCheckboxKey:"checkbox",itemShortCutKey:"shortcut",itemKeyEquivalentKey:"keyEquivalent",itemDisableMenuFlashKey:"disableMenuFlash",itemLayerIdKey:"layerId",itemExampleViewKey:"exampleView",menuItemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemSeparatorKey","itemActionKey","itemCheckboxKey","itemShortCutKey","itemHeightKey","itemSubMenuKey","itemKeyEquivalentKey","itemTargetKey","itemLayerIdKey"],preferType:SC.PICKER_MENU,isModal:YES,_menuView:null,init:function(){return arguments.callee.base.apply(this,arguments)},displayProperties:["controlSize"],renderDelegateName:"menuRenderDelegate",createChildViews:function(){var b,a,c;b=this.createChildView(SC.MenuScrollView,{borderStyle:SC.BORDER_NONE,controlSize:this.get("controlSize")});a=this._menuView=SC.View.create({parentViewDidResize:function(){this.notifyPropertyChange("frame")},viewDidResize:function(){}});c=this.get("menuItemViews");a.set("layout",{top:0,left:0,height:this.get("menuHeight")});a.replaceAllChildren(c);b.set("contentView",a);this.childViews=[b];return this},paneDidAttach:function(){var a=(this.rootResponder=SC.RootResponder.responder);a.panes.add(this);this.set("currentWindowSize",a.computeWindowSize());this.set("isPaneAttached",YES);this.parentViewDidChange();this._notifyDidAppendToDocument();this.becomeMenuPane();return this},becomeMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(this)}return this},resignMenuPane:function(){if(this.rootResponder){this.rootResponder.makeMenuPane(null)}return this},menuItemViews:function(){return this.createMenuItemViews()}.property("displayItems").cacheable(),createMenuItemViews:function(){var g=[],q=this.get("displayItems"),a=this.get("exampleView"),t,d,k,p,n,f,b,j,r,c,e,m,h,o,v,u,s;if(!q){return g}n=this.get("itemHeightKey");f=this.get("itemSeparatorKey");exampleViewKey=this.get("itemExampleViewKey");b=this.get("itemHeight");e=this.get("itemKeyEquivalentKey");j=this.get("itemSeparatorHeight");v=this.get("itemLayerIdKey");c=Math.floor(this.get("menuHeightPadding")/2);r=c;h=this.menuItemKeys.map(SC._menu_fetchKeys,this);s=q.get("length");for(o=0;o<s;o++){t=q[o];p=t.get(n);if(!p){p=t.get(f)?j:b}u={layout:{height:p,top:r},contentDisplayProperties:h,content:t,parentMenu:this};if(t.get(v)){u.layerId=t.get(v)}itemExampleView=t.get(exampleViewKey);if(itemExampleView){d=itemExampleView}else{d=a}k=this._menuView.createChildView(d,u);g[o]=k;r+=p;m=t.get(e);if(m){if(SC.typeOf(m)===SC.T_ARRAY){m.forEach(function(w){this._keyEquivalents[w]=k},this)}else{this._keyEquivalents[m]=k}}}this.set("menuHeight",r+c);return g},menuItemViewForContentIndex:function(a){var b=this.get("menuItemViews");if(!b){return undefined}return b.objectAt(a)},_keyEquivalents:{},rootMenu:function(){if(this.get("isSubMenu")){return this.getPath("parentMenu.rootMenu")}return this}.property("isSubMenu").cacheable(),windowSizeDidChange:function(b,a){this.remove();return arguments.callee.base.apply(this,arguments)},displayItems:function(){var d=this.get("items"),c=this.get("localize"),h=this.get("itemHeight"),b,e=[],a,f,g;if(!d){return null}b=d.get("length");for(a=0;a<b;a++){f=d.objectAt(a);if(!f){continue}g=SC.typeOf(f);if(g===SC.T_STRING){f=SC.Object.create({title:f,value:f,isEnabled:YES})}else{if(g===SC.T_HASH){f=SC.Object.create(f)}else{if(g===SC.T_ARRAY){f=this.convertArrayMenuItemToObject(f)}}}f.contentIndex=a;e.push(f)}return e}.property("items").cacheable(),_sc_menu_itemsDidChange:function(){var a=this.get("menuItemViews");this._menuView.replaceAllChildren(a);this._menuView.adjust("height",this.get("menuHeight"))}.observes("items"),convertArrayMenuItemToObject:function(f){SC.Logger.warn("Support for Array-based menu items has been deprecated.  Please update your menus to use a hash.");var e,c=SC._menu_fetchKeys,b=SC._menu_fetchItem,h,d=SC.Object.create(),a,g;e=this.menuItemKeys.map(c,this);d[e[0]]=f[0];d[e[1]]=f[1];d[e[2]]=f[2];d[e[3]]=f[3];d[e[4]]=f[4];d[e[5]]=f[5];d[e[6]]=f[6];d[e[7]]=f[7];d[e[8]]=f[8];d[e[9]]=f[9];d[e[10]]=f[10];d[e[11]]=f[11];d[e[12]]=f[12];return d},currentMenuItem:function(a,b){if(b!==undefined){if(this._currentMenuItem!==null){this.set("previousMenuItem",this._currentMenuItem)}this._currentMenuItem=b;this.setPath("rootMenu.targetMenuItem",b);return b}return this._currentMenuItem}.property().cacheable(),_sc_menu_currentMenuItemDidChange:function(){var a=this.get("currentMenuItem"),b=this.get("previousMenuItem");if(b){if(b.get("hasSubMenu")&&a===null){}else{b.resignFirstResponder();this.closeOpenMenusFor(b)}}if(a&&a.get("isEnabled")){a.scrollToVisible()}}.observes("currentMenuItem"),closeOpenMenusFor:function(a){if(!a){return}var b=a.get("parentMenu");while(b&&a){b=a.get("subMenu");if(b){b.remove();a.resignFirstResponder();a=b.get("previousMenuItem")}}},closeOpenMenus:function(){this.closeOpenMenusFor(this.get("previousMenuItem"))},mouseDown:function(a){this.modalPaneDidClick(a);return YES},mouseEntered:function(a){this.set("mouseHasEntered",YES)},keyUp:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},moveUp:function(){var c=this.get("currentMenuItem"),d=this.get("menuItemViews"),b,e,a;if(!c){a=d.get("length")-1}else{b=c.getPath("content.contentIndex");if(b===0){return YES}a=b-1}while(a>=0){if(d[a].get("isEnabled")){this.set("currentMenuItem",d[a]);d[a].becomeFirstResponder();break}a--}return YES},moveDown:function(){var d=this.get("currentMenuItem"),e=this.get("menuItemViews"),b=e.get("length"),c,f,a;if(!d){a=0}else{c=d.getPath("content.contentIndex");if(c===b){return YES}a=c+1}while(a<b){if(e[a].get("isEnabled")){this.set("currentMenuItem",e[a]);e[a].becomeFirstResponder();break}a++}return YES},insertText:function(b,a){var d=this._timer,c=this._keyBuffer;if(d){d.invalidate()}d=this._timer=SC.Timer.schedule({target:this,action:"clearKeyBuffer",interval:500,isPooled:NO});c=c||"";c+=b.toUpperCase();this.selectMenuItemForString(c);this._keyBuffer=c;return YES},performKeyEquivalent:function(d,a,b){if(!b&&!this.get("isVisibleInWindow")){return NO}var c=this._keyEquivalents[d];if(c){c.performAction(YES);return YES}if(d==="escape"||d==="return"){this.remove();return YES}return NO},selectMenuItemForString:function(c){var d=this.get("menuItemViews"),f,g,b,a,e;if(!d){return}e=c.length;a=d.get("length");for(b=0;b<a;b++){f=d.objectAt(b);g=f.get("title");if(!g){continue}g=g.replace(/ /g,"").substr(0,e).toUpperCase();if(g===c){this.set("currentMenuItem",f);f.becomeFirstResponder();break}}},clearKeyBuffer:function(){this._keyBuffer=""},modalPaneDidClick:function(a){this.remove();return YES}});SC._menu_fetchKeys=function(a){return this.get(a)};SC._menu_fetchItem=function(a){if(!a){return null}return this.get?this.get(a):this[a]};SC.MenuPane.VERTICAL_OFFSET=23;sc_require("panes/panel");SC.SheetPane=SC.PanelPane.extend({classNames:["sc-sheet"],modalPane:SC.ModalPane,transitionDuration:200,_state:"NO_VIEW",init:function(){arguments.callee.base.apply(this,arguments);if(SC.Animatable){SC.SheetPane.ANIMATABLE_AVAILABLE=YES;this.mixin(SC.Animatable);if(!this.transitions){this.transitions={}}if(!this.transitions.top){this.transitions.top={duration:this.transitionDuration===200?0.3:this.transitionDuration/1000,action:"_complete",target:this}}}},append:function(){var a=this.get("layout");if(!a.height||!a.top){a=SC.View.convertLayoutToAnchoredLayout(a,this.computeParentDimensions())}a.top=-1*a.height;if(this.disableAnimation){this.disableAnimation()}this.adjust(a);this.updateLayout();if(this.enableAnimation){this.enableAnimation()}return arguments.callee.base.apply(this,arguments)},remove:function(){var b=this,a=arguments;this.invokeLater(function(){a.callee.base.apply(b,a)},this.transitionDuration);this.slideUp();return this},paneDidAttach:function(){var a=arguments.callee.base.apply(this,arguments);this.slideDown();return a},slideDown:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_DOWN;if(SC.SheetPane.ANIMATABLE_AVAILABLE){this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_OUT;this.adjust("top",0)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},slideUp:function(){this._state=SC.SheetPane.ANIMATING;this._direction=SC.SheetPane.SLIDE_UP;if(SC.SheetPane.ANIMATABLE_AVAILABLE){var a=this.get("layout");this.transitions.top.timing=SC.Animatable.TRANSITION_EASE_IN;this.adjust("top",-1*a.height)}else{this._start=Date.now();this._end=this._start+this.get("transitionDuration");this.tick()}},_complete:function(){var a=this._direction;if(a===SC.SheetPane.SLIDE_DOWN){if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",0)}this.adjust({centerX:0,left:null});if(SC.browser.mozilla){this.parentViewDidChange()}}else{var b=this.get("layout");if(!SC.SheetPane.ANIMATABLE_AVAILABLE){this.adjust("top",-1*b.height)}}this._state=SC.SheetPane.READY;this.updateLayout()},blurTo:function(a){this.setFirstResponder("")},tick:function(){this._timer=null;var b=Date.now();var e=(b-this._start)/(this._end-this._start),g=this,a=this._direction,c=this.get("layout"),d,f;if(e<0){e=0}if(e>=1){this._complete();return this}f=Math.floor(c.height*e);if(a==SC.SheetPane.SLIDE_DOWN){g.adjust("top",0-(c.height-f))}else{if(a==SC.SheetPane.SLIDE_UP){g.adjust("top",0-f)}}this._timer=this.invokeLater(this.tick,20);g.updateLayout();return this}});SC.SheetPane.mixin({ANIMATABLE_AVAILABLE:NO,NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",SLIDE_DOWN:"SLIDEDOWN",SLIDE_UP:"SLIDEUP"});SC.BaseTheme.buttonRenderDelegate=SC.RenderDelegate.create({className:"button","sc-small-size":{height:18,autoResizePadding:{width:15,height:0}},"sc-regular-size":{height:24,autoResizePadding:{width:20,height:0}},"sc-huge-size":{height:30,autoResizePadding:{width:30,height:0}},"sc-jumbo-size":{height:44,autoResizePadding:{width:50,height:0}},render:function(a,g){this.addSizeClassName(a,g);var f,b=a.get("toolTip"),h=a.get("isSelected")||NO,m=a.get("isActive")||NO,j=a.get("isDefault")||NO,k=a.get("isCancel")||NO,e=a.get("isToggle")||NO,d=SC.guidFor(a)+"-label",c=a.get("titleMinWidth")||NO;g.setClass({icon:!!a.get("icon"),def:j,cancel:k&&!j,active:m,sel:h});if(b){g.attr("title",b);g.attr("alt",b)}if(c){g.attr("min-width",c+"px")}this.includeSlices(a,g,SC.THREE_SLICE);if(a.get("isSegment")){g.attr("aria-selected",h.toString())}else{if(e){g.attr("aria-pressed",m.toString())}}g.attr("aria-labelledby",d);g=g.begin("label").addClass("sc-button-label").id(d);a.get("theme").labelRenderDelegate.render(a,g);g=g.end();if(a.get("supportFocusRing")){g=g.begin("div").addClass("focus-ring");this.includeSlices(a,g,SC.THREE_SLICE);g=g.end()}},update:function(e,a){var d=(e.get("buttonBehavior")===SC.TOGGLE_BEHAVIOR);this.updateSizeClassName(e,a);if(e.get("isActive")){a.addClass("active")}var c=e.get("isDefault"),b=e.get("isCancel");if(e.get("isSegment")){a.attr("aria-selected",e.get("isSelected").toString())}else{if(d){a.attr("aria-pressed",e.get("isActive").toString())}}a.attr("title",e.get("toolTip"));a.setClass("icon",!!e.get("icon"));a.setClass("def",!!c);a.setClass("cancel",!!b&&!c);e.get("theme").labelRenderDelegate.update(e,a.find("label"))},getRenderedAutoResizeLayer:function(a,b){return b.find(".sc-button-label")[0]}});SC.BaseTheme.checkboxRenderDelegate=SC.RenderDelegate.create({className:"checkbox",render:function(a,c){this.addSizeClassName(a,c);var e=a.get("theme"),f,b;b=SC.guidFor(a)+"-label";var d=a.get("isSelected")||NO;var j=a.get("isActive");var h=!a.get("isEnabled");var g;if(d===SC.MIXED_STATE){g="mixed"}else{if(d){g="true"}else{g="false"}}c.attr("role","checkbox");c.attr("aria-checked",g);c.attr("aria-labelledby",b);c.setClass({sel:d,active:j,disabled:h});c.push('<span class = "button"></span>');c=c.begin("span").addClass("label").id(b);e.labelRenderDelegate.render(a,c);c=c.end()},update:function(g,c){this.updateSizeClassName(g,c);var f=g.get("theme");var d=g.get("isSelected");var e=g.get("isActive");var b=!g.get("isEnabled");var a;if(d===SC.MIXED_STATE){a="mixed"}else{if(d){a="true"}else{a="false"}}c.attr("aria-checked",a);f.labelRenderDelegate.update(g,c.find("span.label"));c.setClass({sel:d,active:e,disabled:b})}});SC.BaseTheme.collectionRenderDelegate=SC.RenderDelegate.create({className:"collection",render:function(b,a){a.setClass("focus",b.get("hasFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))},update:function(b,a){a.setClass("focus",b.get("hasFirstResponder"));a.setClass("disabled",!b.get("isEnabled"));a.setClass("active",b.get("isActive"))}});SC.BaseTheme.disclosureRenderDelegate=SC.RenderDelegate.create({className:"disclosure",render:function(g,a){this.addSizeClassName(g,a);var e=g.get("theme"),c=g.get("value"),f=g.get("title");var d=SC.guidFor(g)+"-label";a.attr("aria-expanded",c);a.attr("aria-labelledby",d);if(g.get("isSelected")){a.addClass("sel")}var b="";b+=g.get("isSelected")?"open":"closed";if(g.get("isActive")){b+=" active"}a.push('<img src = "'+SC.BLANK_IMAGE_URL+'" class = "disclosure button '+b+'" />');a=a.begin("span").addClass("sc-button-label").id(d);e.labelRenderDelegate.render(g,a);a=a.end()},update:function(e,a){this.updateSizeClassName(e,a);var c=e.get("theme"),b=e.get("value"),d=e.get("title");a.attr("aria-expanded",b);if(e.get("isSelected")){a.addClass("sel")}a.find("img").setClass({open:e.get("isSelected"),closed:!e.get("isSelected"),active:e.get("isActive")});c.labelRenderDelegate.update(e,a.find("span.sc-button-label"))}});SC.THREE_SLICE=["left","middle","right"];SC.NINE_SLICE=["top-left","top","top-right","left","middle","right","bottom-left","bottom","bottom-right"];SC.RenderDelegate.reopen({includeSlices:function(e,c,d){for(var b=0,a=d.length;b<a;b++){c.push('<div class="'+d[b]+'"></div>')}}});SC.BaseTheme.imageButtonRenderDelegate=SC.RenderDelegate.create({className:"image-button",render:function(d,b){var c=d.get("image"),a=d.get("toolTip");this.addSizeClassName(d,b);b.addClass("no-min-width");if(a){b.attr("title",a);b.attr("alt",a)}if(c){b.push("<div class='img "+c+"'></div>")}else{b.push("<div class='img'></div>")}},update:function(d,b){var c,a;this.updateSizeClassName(d,b);if(d.didChangeFor("imageButtonRenderDelegate","toolTip")){a=d.get("toolTip");b.attr("title",a);b.attr("alt",a)}if(d.didChangeFor("imageButtonRenderDelegate","image")){c=d.get("image");b.children()[0].className="img "+c}}});SC.BaseTheme.MASTER_DETAIL_DIVIDER_WIDTH=1;SC.BaseTheme.masterDetailRenderDelegate=SC.RenderDelegate.create({className:"master-detail",dividerWidth:1,render:function(b,a){a.setClass("round-toolbars",SC.platform.touch)},update:function(b,a){a.setClass("round-toolbars",SC.platform.touch)}});SC.BaseTheme.panelRenderDelegate=SC.RenderDelegate.create({className:"panel",render:function(c,b){b=b.begin("div").addClass("panel-background");this.includeSlices(c,b,SC.NINE_SLICE);b=b.end();var a=c.get("ariaLabel");b.attr("aria-label",a||"")},update:function(c,b){var a=c.get("ariaLabel");b.attr("aria-label",a||"")}});sc_require("render_delegates/panel");SC.BaseTheme.pickerRenderDelegate=SC.RenderDelegate.create({className:"picker",render:function(f,c){var a=f.get("theme").panelRenderDelegate;a.render(f,c);var b=f.get("preferType");var e=f.get("pointerPos");var d=f.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){c.push('<div class="sc-pointer '+e+'" style="margin-top: '+d+'px"></div>');c.addClass(e)}},update:function(g,f){var a=g.get("theme").panelRenderDelegate;a.update(g,f);var b=g.get("preferType");var e=g.get("pointerPos");var d=g.get("pointerPosY");if(b==SC.PICKER_POINTER||b==SC.PICKER_MENU_POINTER){var c=f.find(".sc-pointer");c.attr("class","sc-pointer "+e);c.attr("style","margin-top: "+d+"px");f.addClass(e)}}});sc_require("render_delegates/picker");SC.BaseTheme.menuRenderDelegate=SC.BaseTheme.pickerRenderDelegate.create({className:"menu",render:function(c,b,a){this.addSizeClassName(b,a);c(b,a)}.enhance(),update:function(c,b,a){this.updateSizeClassName(b,a);c(b,a)}.enhance(),itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:6,menuWidthPadding:50,minimumMenuWidth:50,submenuOffsetX:2,verticalOffset:23,"sc-tiny-size":{itemHeight:10,itemSeparatorHeight:2,menuHeightPadding:2,submenuOffsetX:0},"sc-small-size":{itemHeight:16,itemSeparatorHeight:7,menuHeightPadding:4,submenuOffsetX:2},"sc-large-size":{itemHeight:60,itemSeparatorHeight:20,menuHeightPadding:0,submenuOffsetX:4},"sc-huge-size":{itemHeight:20,itemSeparatorHeight:9,menuHeightPadding:0,submenuOffsetX:0}});SC.BaseTheme.popupButtonRenderDelegate=SC.BaseTheme.buttonRenderDelegate.create({render:function(b,a){a.attr("aria-haspopup","true");arguments.callee.base.apply(this,arguments)},update:function(b,a){arguments.callee.base.apply(this,arguments)}});SC.BaseTheme.progressRenderDelegate=SC.RenderDelegate.create({className:"progress",render:function(g,b){this.addSizeClassName(g,b);var f=g.get("theme"),a=g.get("maximum"),d=g.get("minimum"),c=g.get("ariaValue");var e;if(g.get("isIndeterminate")){e=120}else{e=g.get("value")}b.attr("aria-valuemax",a);b.attr("aria-valuemin",d);b.attr("aria-valuenow",c);b.attr("aria-valuetext",c);b.setClass({indeterminate:g.get("isIndeterminate"),running:g.get("isRunning"),disabled:!g.get("isEnabled"),"sc-empty":(e<=0),"sc-complete":(e>=100)});b=b.begin("div").addClass("track");this.includeSlices(g,b,SC.THREE_SLICE);b=b.end();b=b.begin("div").addClass("content");b.css("width",(e*100)+"%");this.includeSlices(g,b,SC.THREE_SLICE);b=b.end()},update:function(g,e){this.updateSizeClassName(g,e);var f=g.get("theme"),a=g.get("maximum"),c=g.get("minimum"),b=g.get("ariaValue");e.attr("aria-valuemax",a);e.attr("aria-valuemin",c);e.attr("aria-valuenow",b);e.attr("aria-valuetext",b);var d;if(g.get("isIndeterminate")){d=120}else{d=g.get("value")}e.setClass({indeterminate:g.get("isIndeterminate"),running:g.get("isRunning"),disabled:!g.get("isEnabled"),"sc-empty":(d<=0),"sc-complete":(d>=100)});e.find(".content").css("width",(d*100)+"%")}});SC.BaseTheme.radioRenderDelegate=SC.RenderDelegate.create({className:"radio",render:function(f,b){this.addSizeClassName(f,b);var e=f.get("theme");var a=f.get("isSelected"),c=f.get("width"),d=SC.guidFor(f)+"-label";b.setClass({active:f.get("isActive"),mixed:f.get("isMixed"),sel:f.get("isSelected"),disabled:!f.get("isEnabled")});b.attr("role","radio");b.attr("aria-checked",a);b.attr("aria-labelledby",d);b.attr("aria-disabled",f.get("isEnabled")?"false":"true");if(c){b.css("width",c)}b.push('<span class = "button"></span>');b=b.begin("span").addClass("sc-button-label").id(d);e.labelRenderDelegate.render(f,b);b=b.end()},update:function(f,a){this.updateSizeClassName(f,a);var e=f.get("theme");var b=f.get("isSelected"),c=f.get("width"),d=f.get("value");a.setClass({active:f.get("isActive"),mixed:f.get("isMixed"),sel:f.get("isSelected"),disabled:!f.get("isEnabled")});a.attr("aria-disabled",f.get("isEnabled")?"false":"true");a.attr("aria-checked",b);a.css("width",c?c:null);e.labelRenderDelegate.update(f,a.find(".sc-button-label"))}});SC.BaseTheme.radioGroupRenderDelegate=SC.RenderDelegate.create({className:"radio-group",render:function(h,e){this.addSizeClassName(h,e);var g=h.get("theme"),d=SC.guidFor(this),c=h.get("items"),b,a=c.length,f;e.addClass(h.get("layoutDirection"));e.attr("role","radiogroup");e.attr("aria-disabled",h.get("isEnabled")?"false":"true");for(b=0;b<a;b++){f=c[b];e=e.begin("div").addClass("radio-"+b).attr("index",b).addClass(g.classNames).addClass(g.radioRenderDelegate.className).addClass("sc-radio-button");g.radioRenderDelegate.render(f,e);e=e.end()}h.get("renderState").radioCount=b},update:function(a,d){this.updateSizeClassName(a,d);var e=a.get("theme"),b=SC.guidFor(this),g=a.get("items"),h,f=g.length,j;d.addClass(a.get("layoutDirection"));d.attr("aria-disabled",a.get("isEnabled")?"false":"true");if(a.get("renderState").radioCount!==f){var c=SC.RenderContext(d[0]);this.render(a,c);c.update();return}for(h=0;h<f;h++){j=g[h];e.radioRenderDelegate.update(j,d.find(".radio-"+h))}},updateRadioAtIndex:function(d,a,b){var c=d.get("items")[b];d.get("theme").radioRenderDelegate.update(c,a.find(".radio-"+b))},indexForEvent:function(d,b,a){var c=$(a.target).closest(".sc-radio-button").attr("index");if(isNaN(c)){return undefined}return parseInt(c,0)}});SC.BaseTheme.segmentRenderDelegate=SC.RenderDelegate.create({className:"segment",render:function(e,b){var c=e.get("theme"),d,a;a={"sc-first-segment":e.get("isFirstSegment"),"sc-middle-segment":e.get("isMiddleSegment"),"sc-last-segment":e.get("isLastSegment"),"sc-overflow-segment":e.get("isOverflowSegment")};if(!SC.none(e.get("index"))){a["sc-segment-"+e.get("index")]=YES}b.setClass(a);d=c.buttonRenderDelegate;d.render(e,b)},update:function(f,a){var d=f.get("theme"),e,c,b={};b={"sc-first-segment":f.get("isFirstSegment"),"sc-middle-segment":f.get("isMiddleSegment"),"sc-last-segment":f.get("isLastSegment"),"sc-overflow-segment":f.get("isOverflowSegment")||NO};if(!SC.none(f.get("index"))){b["sc-segment-"+f.get("index")]=YES}a.setClass(b);e=d.buttonRenderDelegate;e.update(f,a)}});SC.BaseTheme.segmentedRenderDelegate=SC.RenderDelegate.create({className:"segmented",render:function(b,a){this.addSizeClassName(b,a);a.addStyle("text-align",b.get("align"))},update:function(b,a){this.updateSizeClassName(b,a);a.css("text-align",b.get("align"))},segmentWidths:function(f){var e=f.$(".sc-segment-view"),b,d=[];for(var a=0,c=e.length;a<c-1;a++){b=e[a];d[a]=b.getBoundingClientRect().width}return d},overflowSegmentWidth:function(c){var b=c.$(".sc-segment-view"),a;a=b[b.length-1];return a.getBoundingClientRect().width},indexForClientPosition:function(a,h,f){var e=a.$(".sc-segment-view"),b,d,c,g,j;j={x:h,y:f};for(d=0,b=e.length;d<b;d++){c=e[d];g=c.getBoundingClientRect();g={x:g.left,y:g.top,width:(g.right-g.left),height:(g.bottom-g.top)};if(SC.pointInRect(j,g)){return d}}return -1}});SC.BaseTheme.sliderRenderDelegate=SC.RenderDelegate.create({className:"slider",render:function(f,c){this.addSizeClassName(f,c);var b=SC.BLANK_IMAGE_URL,a=f.get("maximum"),e=f.get("minimum"),d=f.get("ariaValue");c.attr("aria-valuemax",a);c.attr("aria-valuemin",e);c.attr("aria-valuenow",d);if(e!==0||a!==100){c.attr("aria-valuetext",d)}c.attr("aria-orientation","horizontal");c=c.begin("span").addClass("track");this.includeSlices(f,c,SC.THREE_SLICE);c.push('<img src="'+b+'" class="sc-handle" style="left: '+f.get("value")+'%" /></span>');c=c.end();f.get("renderState")._cachedHandle=null},update:function(h,b){this.updateSizeClassName(h,b);var a=h.get("maximum"),d=h.get("minimum"),c=h.get("ariaValue");b.attr("aria-valuemax",a);b.attr("aria-valuemin",d);b.attr("aria-valuenow",c);if(d!==0||a!==100){b.attr("aria-valuetext",c)}b.attr("aria-orientation","horizontal");if(h.didChangeFor("sliderRenderDelegate","value")){var f=h.get("renderState")._cachedHandle;if(!f){f=h.get("renderState")._cachedHandle=b.find(".sc-handle")}var g=h.get("frame"),e=h.get("value");f.css("left",e+"%")}}});SC.BaseTheme.SourceList=SC.BaseTheme.subtheme("source-list");SC.BaseTheme.toolbarRenderDelegate=SC.RenderDelegate.create({className:"toolbar",render:function(b,a){},update:function(){}});SC.BaseTheme.wellRenderDelegate=SC.RenderDelegate.create({className:"well",render:function(b,a){this.includeSlices(b,a,SC.NINE_SLICE)},update:function(){}});SC.BaseTheme.workspaceRenderDelegate=SC.RenderDelegate.create({className:"workspace",render:function(){},update:function(){}});SC.DRAG_LINK=4;SC.DRAG_COPY=1;SC.DRAG_MOVE=2;SC.DRAG_NONE=0;SC.DRAG_ANY=15;SC.DRAG_DATA=8;SC.DRAG_AUTOSCROLL_ZONE_THICKNESS=20;SC.View.reopen({init:function(a){a();if(this.get("isDropTarget")){SC.Drag.addDropTarget(this)}if(this.get("isScrollable")){SC.Drag.addScrollableView(this)}}.enhance(),destroy:function(a){if(this.get("isDropTarget")){SC.Drag.removeDropTarget(this)}if(this.get("isScrollable")){SC.Drag.removeScrollableView(this)}return a()}.enhance()});SC.Drag=SC.Object.extend({source:null,ghostView:null,ghostActsLikeCursor:NO,dragView:null,ghost:YES,sourceIsDraggable:YES,slideBack:YES,ghostOffset:{x:0,y:0},location:{},dataTypes:function(){if(this.dataSource){return this.dataSource.get("dragDataTypes")||[]}var d=this.data;if(d){var a=[];for(var b in d){if(d.hasOwnProperty(b)){a.push(b)}}return a}var c=this.get("source");if(c&&c.dragDataTypes){return c.get("dragDataTypes")||[]}return[]}.property().cacheable(),hasDataType:function(a){return(this.get("dataTypes").indexOf(a)>=0)},dataForType:function(a){if(this.dataSource){return this.dataSource.dragDataForType(this,a)}else{if(this.data){return this.data[a]}else{var b=this.get("source");if(b&&SC.typeOf(b.dragDataForType)==SC.T_FUNCTION){return b.dragDataForType(this,a)}else{return null}}}},dataSource:null,data:null,allowedDragOperations:SC.DRAG_ANY,_dragInProgress:YES,_dragViewWasVisible:null,startDrag:function(){if(this.get("sourceIsDraggable")){this._createGhostView()}var h=this.event;var e={x:h.pageX,y:h.pageY};this.set("location",e);if(this.get("sourceIsDraggable")){var b=this._getDragView();var j=b.get("parentView");var g=j?j.convertFrameToView(b.get("frame"),null):b.get("frame");if(this.get("ghost")){this._dragViewWasVisible=b.get("isVisible");b.set("isVisible",NO)}if(this.ghostActsLikeCursor){this.ghostOffset={x:14,y:14}}else{this.ghostOffset={x:(e.x-g.x),y:(e.y-g.y)}}if(!this._ghostViewHidden){this._positionGhostView(h)}if(h.makeTouchResponder){var k=this;SC.Timer.schedule({target:h,action:function(){if(!h.hasEnded){h.makeTouchResponder(k,YES)}},interval:1})}else{this.ghostView.rootResponder.dragDidStart(this,h)}}var a=this.source;if(a&&a.dragDidBegin){a.dragDidBegin(this,e)}var c=this._dropTargets();for(var f=0,d=c.length;f<d;f++){c[f].tryToPerform("dragStarted",this,h)}},cancelDrag:function(){var b=this._lastTarget,c=this.get("location");if(b&&b.dragExited){b.dragExited(this,this._lastMouseDraggedEvent)}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,c,SC.DRAG_NONE)}this._lastTarget=null;this._dragInProgress=NO},touchStart:function(a){return YES},mouseDragged:function(a){var b=this._autoscroll(a);var f=this.get("location");if(!b&&(a.pageX===f.x)&&(a.pageY===f.y)){return}f={x:a.pageX,y:a.pageY};this.set("location",f);this._lastMouseDraggedEvent=a;var d=this.source;var c=this._lastTarget;var e=this._findDropTarget(a);var g=SC.DRAG_NONE;while(e&&(e!==c)&&(g===SC.DRAG_NONE)){if(e&&d&&d.dragSourceOperationMaskFor){g=d.dragSourceOperationMaskFor(this,e)}else{g=SC.DRAG_ANY}if((g!==SC.DRAG_NONE)&&e&&e.computeDragOperations){g=g&e.computeDragOperations(this,a,g)}else{g=SC.DRAG_NONE}this.allowedDragOperations=g;if(g===SC.DRAG_NONE){e=this._findNextDropTarget(e)}}if(e!==c){if(c&&c.dragExited){c.dragExited(this,a)}if(e){if(e.dragEntered){e.dragEntered(this,a)}if(e.dragUpdated){e.dragUpdated(this,a)}}this._lastTarget=e}else{if(e&&e.dragUpdated){e.dragUpdated(this,a)}}if(d&&d.dragDidMove){d.dragDidMove(this,f)}if(this.get("sourceIsDraggable")&&!this._ghostViewHidden){this._positionGhostView(a)}},touchesDragged:function(a){this.mouseDragged(a)},mouseUp:function(n){var g={x:n.pageX,y:n.pageY},h=this._lastTarget,d=this.allowedDragOperations;this.set("location",g);try{if(h&&h.acceptDragOperation&&h.acceptDragOperation(this,d)){d=h.performDragOperation?h.performDragOperation(this,d):SC.DRAG_NONE}else{d=SC.DRAG_NONE}}catch(j){SC.Logger.error("Exception in SC.Drag.mouseUp(acceptDragOperation|performDragOperation): %@".fmt(j))}try{if(h&&h.dragExited){h.dragExited(this,n)}}catch(k){SC.Logger.error("Exception in SC.Drag.mouseUp(target.dragExited): %@".fmt(k))}var c=this._dropTargets();for(var m=0,f=c.length;m<f;m++){try{c[m].tryToPerform("dragEnded",this,n)}catch(b){SC.Logger.error("Exception in SC.Drag.mouseUp(dragEnded on %@): %@".fmt(c[m],b))}}if(this.get("sourceIsDraggable")){this._destroyGhostView();if(this.get("ghost")){if(this._dragViewWasVisible){this._getDragView().set("isVisible",YES)}this._dragViewWasVisible=null}}var a=this.source;if(a&&a.dragDidEnd){a.dragDidEnd(this,g,d)}this._lastTarget=null;this._dragInProgress=NO},touchEnd:function(a){this.mouseUp(a)},_getDragView:function(){if(!this.dragView){if(!this.source||!this.source.isView){throw"Source can't be used as dragView, because it's not a view."}this.dragView=this.source}return this.dragView},_createGhostView:function(){var c=this,b=this._getDragView(),d=b.get("frame"),a;a=this.ghostView=SC.Pane.create({classNames:["sc-ghost-view"],layout:{top:d.y,left:d.x,width:d.width,height:d.height},owner:this,didCreateLayer:function(){if(b){var e=b.get("layer");if(e){e=e.cloneNode(true);e.style.top="0px";e.style.left="0px";this.get("layer").appendChild(e)}}}});a.append()},_positionGhostView:function(a){var c=this.get("location");c.x-=this.ghostOffset.x;c.y-=this.ghostOffset.y;var b=this.ghostView;if(b){b.adjust({top:c.y,left:c.x});b.invokeOnce("updateLayout")}},_ghostViewHidden:NO,hideGhostView:function(){if(this.ghostView&&!this._ghostViewHidden){this.ghostView.remove();this._ghostViewHidden=YES}},unhideGhostView:function(){if(this._ghostViewHidden){this._ghostViewHidden=NO;this._createGhostView()}},_destroyGhostView:function(){if(this.ghostView){this.ghostView.remove();this.ghostView=null;this._ghostViewHidden=NO}},_dropTargets:function(){if(this._cachedDropTargets){return this._cachedDropTargets}var b=[];var d=SC.Drag._dropTargets;for(var c in d){if(d.hasOwnProperty(c)){b.push(d[c])}}var f={};var e=SC.Drag._dropTargets;var a=function(g){if(!g){return 0}var j=SC.guidFor(g);var h=f[j];if(!h){h=1;while(g=g.get("parentView")){if(e[SC.guidFor(g)]!==undefined){h++}}f[j]=h}return h};b.sort(function(h,g){if(h===g){return 0}h=a(h);g=a(g);return(h>g)?-1:1});this._cachedDropTargets=b;return b},_findDropTarget:function(c){var g={x:c.pageX,y:c.pageY};var e,f;var d=this._dropTargets();for(var b=0,a=d.length;b<a;b++){e=d[b];if(!e.get("isVisibleInWindow")){continue}f=e.convertFrameToView(e.get("clippingFrame"),null);if(SC.pointInRect(g,f)){return e}}return null},_findNextDropTarget:function(a){var b=SC.Drag._dropTargets;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null},_autoscroll:function(n){if(!n){n=this._lastAutoscrollEvent}if(!this._dragInProgress){return NO}var g=n?{x:n.pageX,y:n.pageY}:this.get("location"),h=this._findScrollableView(g),o=null,m,c,d,j,b,a,e;while(h&&!o){m=h.get("canScrollVertical")?1:0;c=h.get("canScrollHorizontal")?1:0;if(m||c){a=h.get("containerView");if(a){e=h.convertFrameToView(a.get("frame"),null)}else{m=c=0}}if(m){j=SC.maxY(e);d=j-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.y>=d&&g.y<=j){m=1}else{d=SC.minY(e);j=d+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.y>=d&&g.y<=j){m=-1}else{m=0}}}if(c){j=SC.maxX(e);d=j-SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.x>=d&&g.x<=j){c=1}else{d=SC.minX(e);j=d+SC.DRAG_AUTOSCROLL_ZONE_THICKNESS;if(g.x>=d&&g.x<=j){c=-1}else{c=0}}}if(m||c){o=h}else{h=this._findNextScrollableView(h)}}if(o&&(this._lastScrollableView===o)){if((Date.now()-this._hotzoneStartTime)>100){this._horizontalScrollAmount*=1.05;this._verticalScrollAmount*=1.05}}else{this._lastScrollableView=o;this._horizontalScrollAmount=15;this._verticalScrollAmount=15;this._hotzoneStartTime=(o)?Date.now():null;c=m=0}if(o&&(c||m)){var k={x:c*this._horizontalScrollAmount,y:m*this._verticalScrollAmount};o.scrollBy(k)}if(o){if(n){this._lastAutoscrollEvent={pageX:n.pageX,pageY:n.pageY}}this.invokeLater(this._autoscroll,100,null);return YES}else{this._lastAutoscrollEvent=null;return NO}},_scrollableViews:function(){if(this._cachedScrollableView){return this._cachedScrollableView}var a=[];var c=SC.Drag._scrollableViews;for(var b in c){if(c.hasOwnProperty(b)){a.push(c[b])}}a=a.sort(function(f,d){var e=f;while(e=e.get("parentView")){if(d==e){return -1}}return 1});this._cachedScrollableView=a;return a},_findScrollableView:function(f){var c=this._scrollableViews(),b=c?c.length:0,d,e,a;for(a=0;a<b;a++){d=c[a];if(!d.get("isVisibleInWindow")){continue}e=d.convertFrameToView(d.get("clippingFrame"),null);if(SC.pointInRect(f,e)){return d}}return null},_findNextScrollableView:function(a){var b=SC.Drag._scrollableViews;while(a=a.get("parentView")){if(b[SC.guidFor(a)]){return a}}return null}});SC.Drag.mixin({start:function(b){var a=this.create(b);a.startDrag();return a},_dropTargets:{},_scrollableViews:{},addDropTarget:function(a){this._dropTargets[SC.guidFor(a)]=a},removeDropTarget:function(a){delete this._dropTargets[SC.guidFor(a)]},addScrollableView:function(a){this._scrollableViews[SC.guidFor(a)]=a},removeScrollableView:function(a){delete this._scrollableViews[SC.guidFor(a)]}});SC.MODIFIED_KEY_BINDINGS={"ctrl_.":"cancel",shift_tab:"insertBacktab",shift_left:"moveLeftAndModifySelection",shift_right:"moveRightAndModifySelection",shift_up:"moveUpAndModifySelection",shift_down:"moveDownAndModifySelection",alt_left:"moveLeftAndModifySelection",alt_right:"moveRightAndModifySelection",alt_up:"moveUpAndModifySelection",alt_down:"moveDownAndModifySelection",ctrl_a:"selectAll"};SC.BASE_KEY_BINDINGS={escape:"cancel",backspace:"deleteBackward","delete":"deleteForward","return":"insertNewline",tab:"insertTab",left:"moveLeft",right:"moveRight",up:"moveUp",down:"moveDown",home:"moveToBeginningOfDocument",end:"moveToEndOfDocument",pagedown:"pageDown",pageup:"pageUp"};SC.UndoManager=SC.Object.extend({undoActionName:function(){return this.undoStack?this.undoStack.name:null}.property("undoStack"),redoActionName:function(){return this.redoStack?this.redoStack.name:null}.property("redoStack"),canUndo:function(){return this.undoStack!=null}.property("undoStack"),canRedo:function(){return this.redoStack!=null}.property("redoStack"),undo:function(){this._undoOrRedo("undoStack","isUndoing")},redo:function(){this._undoOrRedo("redoStack","isRedoing")},isUndoing:NO,isRedoing:NO,groupingLevel:0,registerUndo:function(b,a){this.beginUndoGroup(a);this._activeGroup.actions.push(b);this.endUndoGroup(a)},beginUndoGroup:function(b){if(this._activeGroup){this.groupingLevel++}else{var a=this.isUndoing?"redoStack":"undoStack";this._activeGroup={name:b,actions:[],prev:this.get(a)};this.set(a,this._activeGroup);this.groupingLevel=1}},endUndoGroup:function(a){if(!this._activeGroup){raise("endUndoGroup() called outside group.")}if(this.groupingLevel>1){this.groupingLevel--}else{this._activeGroup=null;this.groupingLevel=0}this.propertyDidChange(this.isUndoing?"redoStack":"undoStack")},setActionName:function(a){if(!this._activeGroup){raise("setActionName() called outside group.")}this._activeGroup.name=a},_activeGroup:null,undoStack:null,redoStack:null,_undoOrRedo:function(a,c){if(this._activeGroup){return false}if(this.get(a)==null){return true}this.set(c,true);var e=this.get(a);this.set(a,e.prev);var b;var d=e.actions.length>1;if(d){this.beginUndoGroup(e.name)}while(b=e.actions.pop()){b()}if(d){this.endUndoGroup(e.name)}this.set(c,false)}});SC.CheckboxView=SC.ButtonView.extend(SC.StaticLayout,{classNames:["sc-checkbox-view","sc-checkbox-control"],ariaRole:"checkbox",themeName:null,renderDelegateName:"checkboxRenderDelegate",needsEllipsis:NO,acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),_toggleValue:function(){var a=this.get("value")===this.get("toggleOnValue");this.set("value",a?this.get("toggleOffValue"):this.get("toggleOnValue"))},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;if(a){a.allowDefault()}return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",NO);this._isMouseDown=NO;this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(a.target)){this._action(a)}}return YES},keyDown:function(b){if(!this.get("isEnabled")){return YES}if(b.which===9||b.keyCode===9){var a=b.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES}if(b.which===13||b.which===32){this._toggleValue();if(this.get("buttonBehavior")!==SC.HOLD_BEHAVIOR){if(this.$().within(b.target)){this._action(b)}}return YES}b.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.LIST_ITEM_ACTION_CANCEL="sc-list-item-cancel-action";SC.LIST_ITEM_ACTION_REFRESH="sc-list-item-cancel-refresh";SC.LIST_ITEM_ACTION_EJECT="sc-list-item-cancel-eject";SC.ListItemView=SC.View.extend(SC.InlineEditable,SC.Control,{classNames:["sc-list-item-view"],displayProperties:["disclosureState","escapeHTML"],content:null,contentIndex:null,hasContentIcon:NO,hasContentRightIcon:NO,hasContentBranch:NO,contentCheckboxKey:null,icon:null,contentIconKey:null,rightIcon:null,contentRightIconKey:null,contentValueKey:null,escapeHTML:YES,contentUnreadCountKey:null,contentIsBranchKey:null,outlineIndent:16,outlineLevel:0,disclosureState:SC.LEAF_NODE,validator:null,contentPropertyDidChange:function(){if(this.get("contentIsEditable")!==this.contentIsEditable()){this.notifyPropertyChange("contentIsEditable")}this.displayDidChange()},contentIsEditable:function(){var a=this.get("content");return a&&(a.get?a.get("isEditable")!==NO:NO)}.property("content").cacheable(),inlineEditorDelegate:SC.InlineTextFieldDelegate,$label:function(){return this.$("label")},_isInsideElementWithClassName:function(e,a){var c=this.get("layer");if(!c){return NO}var d=SC.$(a.target);var b=NO,f;while(!b&&d.length>0&&(d[0]!==c)){if(d.hasClass(e)){b=YES}d=d.parent()}d=c=null;return b},_isInsideCheckbox:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentCheckboxKey",a);return c&&this._isInsideElementWithClassName("sc-checkbox-view",b)},_isInsideDisclosure:function(a){if(this.get("disclosureState")===SC.LEAF_NODE){return NO}return this._isInsideElementWithClassName("sc-disclosure-view",a)},_isInsideRightIcon:function(c){var b=this.displayDelegate;var a=this.getDelegateProperty("hasContentRightIcon",b)||!SC.none(this.rightIcon);return a&&this._isInsideElementWithClassName("right-icon",c)},mouseDown:function(a){if(!this.get("contentIsEditable")){return NO}if(this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseDownOnCheckbox=YES;this._isMouseInsideCheckbox=YES;return YES}else{if(this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseDownOnDisclosure=YES;this._isMouseInsideDisclosure=YES;return YES}else{if(this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseDownOnRightIcon=YES;this._isMouseInsideRightIcon=YES;return YES}}}return NO},mouseUp:function(h){var c=NO,j,d,b,a,g,f;if(this._isMouseDownOnCheckbox){if(this._isInsideCheckbox(h)){j=this.displayDelegate;d=this.getDelegateProperty("contentCheckboxKey",j);b=this.get("content");if(b&&b.get){var e=b.get(d);e=(e===SC.MIXED_STATE)?YES:!e;b.set(d,e);this.displayDidChange()}}this._removeCheckboxActiveState();c=YES}else{if(this._isMouseDownOnDisclosure){if(this._isInsideDisclosure(h)){a=this.get("disclosureState");g=this.get("contentIndex");f=(!SC.none(g))?SC.IndexSet.create(g):null;j=this.get("displayDelegate");if(a===SC.BRANCH_OPEN){if(f&&j&&j.collapse){j.collapse(f)}else{this.set("disclosureState",SC.BRANCH_CLOSED)}this.displayDidChange()}else{if(a===SC.BRANCH_CLOSED){if(f&&j&&j.expand){j.expand(f)}else{this.set("disclosureState",SC.BRANCH_OPEN)}this.displayDidChange()}}}this._removeDisclosureActiveState();c=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();c=YES}}}this._isMouseInsideCheckbox=this._isMouseDownOnCheckbox=NO;this._isMouseDownOnDisclosure=this._isMouseInsideDisclosure=NO;this._isMouseInsideRightIcon=this._isMouseDownOnRightIcon=NO;return c},mouseMoved:function(a){if(this._isMouseDownOnCheckbox&&this._isInsideCheckbox(a)){this._addCheckboxActiveState();this._isMouseInsideCheckbox=YES}else{if(this._isMouseDownOnCheckbox){this._removeCheckboxActiveState();this._isMouseInsideCheckbox=NO}else{if(this._isMouseDownOnDisclosure&&this._isInsideDisclosure(a)){this._addDisclosureActiveState();this._isMouseInsideDisclosure=YES}else{if(this._isMouseDownOnDisclosure){this._removeDisclosureActiveState();this._isMouseInsideDisclosure=NO}else{if(this._isMouseDownOnRightIcon&&this._isInsideRightIcon(a)){this._addRightIconActiveState();this._isMouseInsideRightIcon=YES}else{if(this._isMouseDownOnRightIcon){this._removeRightIconActiveState();this._isMouseInsideRightIcon=NO}}}}}}return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchEntered:function(a){return this.mouseEntered(a)},touchExited:function(a){return this.mouseExited(a)},_addCheckboxActiveState:function(){if(this.get("isEnabled")){if(this._checkboxRenderDelegate){var a=this._checkboxRenderSource;a.set("isActive",YES);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").addClass("active")}}},_removeCheckboxActiveState:function(){if(this._checkboxRenderer){var a=this._checkboxRenderSource;a.set("isActive",NO);this._checkboxRenderDelegate.update(a,this.$(".sc-checkbox-view"))}else{this.$(".sc-checkbox-view").removeClass("active")}},_addDisclosureActiveState:function(){if(this.get("isEnabled")){if(this._disclosureRenderDelegate){var a=this._disclosureRenderSource;a.set("isActive",YES);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}}},_removeDisclosureActiveState:function(){if(this._disclosureRenderer){var a=this._disclosureRenderSource;a.set("isActive",NO);this._disclosureRenderDelegate.update(a,this.$(".sc-disclosure-view"))}else{this.$(".sc-disclosure-view").addClass("active")}},_addRightIconActiveState:function(){this.$("img.right-icon").setClass("active",YES)},_removeRightIconActiveState:function(){this.$("img.right-icon").removeClass("active")},contentHitTest:function(b){var a=this.displayDelegate;var c=this.getDelegateProperty("contentValueKey",a);if(!c){return NO}var e=this.$label()[0];if(!e){return NO}var f=b.target,d=this.get("layer");while(f&&(f!==d)&&(f!==window)){if(f===e){return YES}f=f.parentNode}return NO},beginEditing:function(d,c){var f=this.$label(),e=this.get("parentView");if(c&&this.scrollToVisible()){var b=this.get("owner"),a=this.get("contentIndex");this.invokeLast(function(){var g=b.itemViewForContentIndex(a);if(g&&g.beginEditing){g.beginEditing(NO)}});return YES}else{if(!e||!f||f.get("length")===0){return NO}else{return d()}}}.enhance(),inlineEditorWillBeginEditing:function(d,q,p){var r=this.get("content"),j=this.get("displayDelegate"),h=this.getDelegateProperty("contentValueKey",j),k=this.get("parentView"),a=this.$label(),e=this.get("validator"),t,m,g,b,n,c,o,u,s,w;m=(h&&r)?(r.get?r.get(h):r[h]):r;t=this.computeFrameWithParentFrame(null);c=this._oldLineHeight=a.css("lineHeight");b=a.css("fontSize");n=this.$().css("top");if(n){n=parseInt(n.substring(0,n.length-2),0)}else{n=0}u=0;if(b&&c){s=b*1.5;if(s<c){a.css({lineHeight:"1.5"});u=(c-s)/2}else{oldLineHeight=null}}a=a[0];g=SC.offset(a);t.x=g.x;t.y=g.y+n+u;t.height=a.offsetHeight;t.width=a.offsetWidth;o=this.get("escapeHTML");d.set({value:m,exampleFrame:t,exampleElement:a,multiline:NO,isCollection:YES,validator:e,escapeHTML:o})},inlineEditorShouldBeginEditing:function(a){return YES},inlineEditorDidBeginEditing:function(b,d,e,a){b(d,e,a);var c=this.$label();this._oldOpacity=c.css("opacity");c.css("opacity",0);if(this._oldLineHeight){c.css({lineHeight:this._oldLineHeight})}}.enhance(),inlineEditorDidCommitEditing:function(d,f,c){var e=this.get("content");var a=this.displayDelegate;var b=this.getDelegateProperty("contentValueKey",a);if(b&&e){if(e.set){e.set(b,f)}else{e[b]=f}}else{this.set("content",f)}this.displayDidChange();this._endEditing()},_endEditing:function(a){this.$label().css("opacity",this._oldOpacity);a()}.enhance(),render:function(c,a){var f=this.get("content"),o=this.displayDelegate,b=this.get("outlineLevel"),e=this.get("outlineIndent"),n,k,j,p=[];p.push((this.get("contentIndex")%2===0)?"even":"odd");c.setClass("disabled",!this.get("isEnabled"));j=c.begin("div").addClass("sc-outline");if(b>=0&&e>0){j.addStyle("left",e*(b+1))}k=this.get("disclosureState");if(k!==SC.LEAF_NODE){this.renderDisclosure(j,k);p.push("has-disclosure")}n=this.getDelegateProperty("contentCheckboxKey",o);if(n){k=f?(f.get?f.get(n):f[n]):NO;if(k!==null){this.renderCheckbox(j,k);p.push("has-checkbox")}}if(this.getDelegateProperty("hasContentIcon",o)){n=this.getDelegateProperty("contentIconKey",o);k=(n&&f)?(f.get?f.get(n):f[n]):null;this.renderIcon(j,k);p.push("has-icon")}else{if(this.get("icon")){k=this.get("icon");this.renderIcon(j,k);p.push("has-icon")}}n=this.getDelegateProperty("contentValueKey",o);k=(n&&f)?(f.get?f.get(n):f[n]):f;if(k&&SC.typeOf(k)!==SC.T_STRING){k=k.toString()}if(this.get("escapeHTML")){k=SC.RenderContext.escapeHTML(k)}this.renderLabel(j,k);if(this.getDelegateProperty("hasContentRightIcon",o)){n=this.getDelegateProperty("contentRightIconKey",o);k=(n&&f)?(f.get?f.get(n):f[n]):null;this.renderRightIcon(j,k);p.push("has-right-icon")}n=this.getDelegateProperty("contentUnreadCountKey",o);k=(n&&f)?(f.get?f.get(n):f[n]):null;if(!SC.none(k)&&(k!==0)){this.renderCount(j,k);var d=["zero","one","two","three","four","five"];var m=k.toString().length;var h=d.length;var g=(m<h)?d[m]:d[h-1];p.push("has-count "+g+"-digit")}n=this.getDelegateProperty("listItemActionProperty",o);k=(n&&f)?(f.get?f.get(n):f[n]):null;if(k){this.renderAction(j,k);p.push("has-action")}if(this.getDelegateProperty("hasContentBranch",o)){n=this.getDelegateProperty("contentIsBranchKey",o);k=(n&&f)?(f.get?f.get(n):f[n]):NO;this.renderBranch(j,k);p.push("has-branch")}c.addClass(p);c=j.end()},renderDisclosure:function(a,d){var c=this.get("theme").disclosureRenderDelegate;a=a.begin("div").addClass("sc-disclosure-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._disclosureRenderSource;if(!b){this._disclosureRenderSource=b=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",d===SC.BRANCH_OPEN).set("isEnabled",this.get("isEnabled")).set("title","");c.render(b,a);a=a.end();this._disclosureRenderDelegate=c},renderCheckbox:function(a,d){var c=this.get("theme").checkboxRenderDelegate;a=a.begin("div").addClass("sc-checkbox-view").addClass("sc-regular-size").addClass(this.get("theme").classNames).addClass(c.get("className"));var b=this._checkboxRenderSource;if(!b){b=this._checkboxRenderSource=SC.Object.create({renderState:{},theme:this.get("theme")})}b.set("isSelected",d&&(d!==SC.MIXED_STATE)).set("isEnabled",this.get("isEnabled")&&this.get("contentIsEditable")).set("isActive",this._checkboxIsActive).set("title","");c.render(b,a);a=a.end();this._checkboxRenderDelegate=c},renderIcon:function(c,e){var b=null,d=null,a=[];if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push(d,"icon");c.begin("img").addClass(a).attr("src",b).end()},renderLabel:function(b,a){b.push("<label>",a||"","</label>")},renderRightIcon:function(c,e){var b=null,d=null,a=[];if(e&&SC.ImageView.valueIsUrl(e)){b=e;d=""}else{d=e;b=SC.BLANK_IMAGE_URL}a.push("right-icon",d);c.begin("img").addClass(a).attr("src",b).end()},renderCount:function(a,b){a.push('<span class="count"><span class="inner">',b.toString(),"</span></span>")},renderAction:function(a,b){a.push('<img src="',SC.BLANK_IMAGE_URL,'" class="action" />')},renderBranch:function(c,b){var a=[];a.push("branch",b?"branch-visible":"branch-hidden");c.begin("span").addClass(a).push("&nbsp;").end()}});SC.ListItemView._deprecatedRenderWarningHasBeenIssued=false;sc_require("mixins/collection_view_delegate");sc_require("views/list_item");SC.DRAG_REORDER=16;SC.BENCHMARK_RELOAD=NO;SC.CollectionView=SC.View.extend(SC.CollectionViewDelegate,SC.CollectionContent,{classNames:["sc-collection-view"],displayProperties:["hasFirstResponder","isEnabled","isActive"],renderDelegateName:"collectionRenderDelegate",ACTION_DELAY:200,useFastPath:NO,content:null,contentBindingDefault:SC.Binding.multiple(),length:0,nowShowing:function(){return this.computeNowShowing()}.property("length","clippingFrame").cacheable(),selection:null,isSelectable:YES,isSelectableBindingDefault:SC.Binding.bool(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),isEditable:YES,isEditableBindingDefault:SC.Binding.bool(),canReorderContent:NO,canReorderContentBindingDefault:SC.Binding.bool(),canDeleteContent:NO,canDeleteContentBindingDefault:SC.Binding.bool(),canEditContent:NO,canEditContentBindingDefault:SC.Binding.bool(),isDropTarget:NO,useToggleSelection:NO,actOnSelect:NO,selectOnMouseDown:YES,exampleView:SC.ListItemView,contentExampleViewKey:null,groupExampleView:null,contentGroupExampleViewKey:null,action:null,target:null,contentValueKey:null,acceptsFirstResponder:NO,isActive:NO,calculatedHeight:0,calculatedWidth:0,computeLayout:function(){return null},layoutForContentIndex:function(a){return null},allContentIndexes:function(){return SC.IndexSet.create(0,this.get("length")).freeze()}.property("length").cacheable(),contentIndexesInRect:function(a){return null},computeNowShowing:function(){var c=this.contentIndexesInRect(this.get("clippingFrame"));if(!c){c=this.get("allContentIndexes")}else{var b=this.get("length"),a=c.get("max");if(a>b){c=c.copy().remove(b,a-b).freeze()}}return c},showInsertionPoint:function(a,b){},hideInsertionPoint:function(){},delegate:null,selectionDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionViewDelegate",a,b)}.property("delegate","content").cacheable(),contentDelegate:function(){var a=this.get("delegate"),b=this.get("content");return this.delegateFor("isCollectionContent",a,b)}.property("delegate","content").cacheable(),_contentGroupIndexes:function(){return this.get("contentDelegate").contentGroupIndexes(this,this.get("content"))}.property("contentDelegate","content").cacheable(),contentRangeDidChange:function(d,b,c,a){if(!b&&(c==="[]")){this.notifyPropertyChange("_contentGroupIndexes");this.reload(a)}else{this.contentPropertyDidChange(b,c,a)}},contentPropertyDidChange:function(c,b,a){},updateContentRangeObserver:function(){var d=this.get("nowShowing"),a=this._cv_contentRangeObserver,c=this.get("content");if(!c){return}if(a){c.updateRangeObserver(a,d)}else{var b=this.contentRangeDidChange;a=c.addRangeObserver(d,this,b,null);this._cv_contentRangeObserver=a}},removeContentRangeObserver:function(){var b=this.get("content"),a=this._cv_contentRangeObserver;if(a){if(b){b.removeRangeObserver(a)}this._cv_contentRangeObserver=null}},contentLengthDidChange:function(){var a=this.get("content");this.set("length",a?a.get("length"):0)},_cv_contentDidChange:function(){var b=this.get("content"),a=this.contentLengthDidChange;if(b===this._content){return}this.removeContentRangeObserver();if(this._content){this._content.removeObserver("length",this,a)}this._content=b;if(b){b.addObserver("length",this,a)}this.contentLengthDidChange();this.contentRangeDidChange(b,null,"[]",null)}.observes("content"),_invalidIndexes:NO,reload:function(a){var b=this._invalidIndexes;if(a&&b!==YES){if(b){b.add(a)}else{b=this._invalidIndexes=a.clone()}}else{this._invalidIndexes=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadIfNeeded)}return this},reloadIfNeeded:function(){var y=this._invalidIndexes;if(!y||!this.get("isVisibleInWindow")){return this}this._invalidIndexes=NO;var v=this.get("content"),w,x,o,A=this.computeLayout(),z=SC.BENCHMARK_RELOAD,c=this.get("nowShowing"),B=this._sc_itemViews,p=this.get("containerView")||this,a,s,u,t,m,q,h,r,e,n,k,C,d,b,g,j,f;if(y.isIndexSet&&y.contains(c)){y=YES}if(this.willReload){this.willReload(y===YES?null:y)}a=this.get("exampleView");u=a?a.isReusableInCollections:NO;s=this.get("groupExampleView");t=s?s.isReusableInCollections:NO;if(y.isIndexSet){if(z){SC.Benchmark.start(z="%@#reloadIfNeeded (Partial)".fmt(this),YES)}q=[];h=[];r=[];y.forEach(function(D){o=B?B[D]:null;if(c.contains(D)){if(o&&o.parentView===p){h.push(D)}else{r.push(D)}}else{if(o&&o.parentView===p){q.push(D)}}},this);for(w=0,x=q.length;w<x;++w){n=q[w];o=B?B[n]:null;delete B[n];g=this.get("contentDelegate");j=this.get("_contentGroupIndexes");f=j&&j.contains(n);if(f){f=g.contentIndexIsGroup(this,v,n)}m=f?t:u;if(m){b=f?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(o);o.destroyLayer()}C=o.get("layer");if(C&&C.parentNode){C.parentNode.removeChild(C)}p.removeChild(o);if(!m){o.destroy()}}for(w=0,x=h.length;w<x;++w){n=h[w];o=B?B[n]:null;k=this.itemViewForContentIndex(n,YES);o.destroyLayer();p.replaceChild(k,o)}for(w=0,x=r.length;w<x;++w){n=r[w];k=this.itemViewForContentIndex(n,YES);p.insertBefore(k,null)}if(z){SC.Benchmark.end(z)}}else{if(z){SC.Benchmark.start(z="%@#reloadIfNeeded (Full)".fmt(this),YES)}if(B){B.length=0}e=p.get("childViews");if(e){e=e.copy()}p.beginPropertyChanges();if(this.willRemoveAllChildren){this.willRemoveAllChildren()}p.destroyLayer().removeAllChildren();if(e){for(w=0,x=e.length;w<x;++w){k=e[w];f=k.get("isGroupView");m=f?t:u;if(m){b=f?this._GROUP_VIEW_POOL:this._VIEW_POOL;b.push(k);k.destroyLayer()}else{k.destroy()}}}e=[];c.forEach(function(D){e.push(this.itemViewForContentIndex(D,YES))},this);p.set("childViews",e);p.replaceLayer();p.endPropertyChanges();if(z){SC.Benchmark.end(z)}}if(A){this.adjust(A)}if(this.didReload){this.didReload(y===YES?null:y)}return this},_TMP_ATTRS:{},_COLLECTION_CLASS_NAMES:["sc-collection-item"],_GROUP_COLLECTION_CLASS_NAMES:["sc-collection-item","sc-group-item"],_VIEW_POOL:null,_GROUP_VIEW_POOL:null,itemViewForContentIndex:function(n,a){var x;var w=this._sc_itemViews;if(!w){w=this._sc_itemViews=[]}else{if(!a&&(x=w[n])){return x}}var p=this.get("content"),r=p.objectAt(n),h=this.get("contentDelegate"),k=this.get("_contentGroupIndexes"),j=NO,y,m,s,f,t,d,b,c,v,g,e,q,u;j=k&&k.contains(n);if(j){j=h.contentIndexIsGroup(this,p,n)}if(j){y=this.get("contentGroupExampleViewKey");if(y&&r){m=r.get(y)}if(!m){m=this.get("groupExampleView")||this.get("exampleView")}t="_GROUP_VIEW_POOL"}else{y=this.get("contentExampleViewKey");if(y&&r){m=r.get(y)}if(!m){m=this.get("exampleView")}t="_VIEW_POOL"}c=this.get("containerView")||this;f=this.layerIdFor(n);v=h.contentIndexIsEnabled(this,p,n);g=h.contentIndexIsSelected(this,p,n);e=h.contentIndexOutlineLevel(this,p,n);q=h.contentIndexDisclosureState(this,p,n);u=this.isVisibleInWindow;s=this.layoutForContentIndex(n);if(m&&m.isReusableInCollections){d=this[t];if(!d){d=this[t]=[]}if(d.length>0){x=d.pop();b=x.prepareForReuse;if(b){b.call(x)}x.beginPropertyChanges();x.set("contentIndex",n);x.set("layerId",f);x.set("isEnabled",v);x.set("isSelected",g);x.set("outlineLevel",e);x.set("disclosureState",q);x.set("isVisibleInWindow",u);x.set("parentView",c);SC.View.views[f]=x;if(s){x.set("layout",s)}else{x.set("layout",m.prototype.layout)}x.set("content",r);x.endPropertyChanges()}}if(!x){var o=this._TMP_ATTRS;o.contentIndex=n;o.content=r;o.owner=o.displayDelegate=this;o.parentView=c;o.page=this.page;o.layerId=f;o.isEnabled=v;o.isSelected=g;o.outlineLevel=e;o.disclosureState=q;o.isGroupView=j;o.isVisibleInWindow=u;if(j){o.classNames=this._GROUP_COLLECTION_CLASS_NAMES}else{o.classNames=this._COLLECTION_CLASS_NAMES}if(s){o.layout=s}else{delete o.layout}x=this.createItemView(m,n,o)}w[n]=x;return x},itemViewForContentObject:function(a){return this.itemViewForContentIndex(this.get("content").indexOf(a))},_TMP_LAYERID:[],createItemView:function(c,a,b){return c.create(b)},layerIdFor:function(a){var b=this._TMP_LAYERID;b[0]=SC.guidFor(this);b[1]=a;return b.join("-")},contentIndexForLayerId:function(c){if(!c||!(c=c.toString())){return null}var b=this._baseLayerId;if(!b){b=this._baseLayerId=SC.guidFor(this)+"-"}if((c.length<=b.length)||(c.indexOf(b)!==0)){return null}var a=Number(c.slice(c.lastIndexOf("-")+1));return isNaN(a)?null:a},itemViewForEvent:function(k){var d=this.getPath("pane.rootResponder");if(!d){return null}var c=SC.guidFor(this)+"-",a=c.length,e=k.target,g=this.get("layer"),f=null,b,j,h;while(e&&e!==document&&e!==g){b=e?SC.$(e).attr("id"):null;if(b&&(f=this.contentIndexForLayerId(b))!==null){break}e=e.parentNode}if(f===null||(e===g)){e=g=null;return null}if(f>=this.get("length")){throw"layout for item view %@ was found when item view does not exist (%@)".fmt(b,this)}return this.itemViewForContentIndex(f)},expand:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_CLOSED){a.contentIndexExpand(this,c,d)}},this);return this},collapse:function(b){if(!b){return this}var a=this.get("contentDelegate"),c=this.get("content");b.forEach(function(d){var e=a.contentIndexDisclosureState(this,c,d);if(e===SC.BRANCH_OPEN){a.contentIndexCollapse(this,c,d)}},this);return this},_cv_selectionDidChange:function(){var c=this.get("selection"),b=this._cv_selection,a=this._cv_selectionContentDidChange;if(c===b){return}if(b){b.removeObserver("[]",this,a)}if(c){c.addObserver("[]",this,a)}this._cv_selection=c;this._cv_selectionContentDidChange()}.observes("selection"),_cv_selectionContentDidChange:function(){var c=this.get("selection"),b=this._cv_selindexes,a=this.get("content"),d;this._cv_selindexes=c?c.frozenCopy():null;if(b){b=b.indexSetForSource(a)}if(c){c=c.indexSetForSource(a)}if(c&&b){d=c.without(b).add(b.without(c))}else{d=c||b}if(d&&d.get("length")>0){this.reloadSelectionIndexes(d)}},_invalidSelection:NO,reloadSelectionIndexes:function(a){var b=this._invalidSelection;if(a&&(b!==YES)){if(b){b.add(a)}else{b=this._invalidSelection=a.copy()}}else{this._invalidSelection=YES}if(this.get("isVisibleInWindow")){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}return this},reloadSelectionIndexesIfNeeded:function(){var e=this._invalidSelection;if(!e||!this.get("isVisibleInWindow")){return this}var d=this.get("nowShowing"),b=this._invalidIndexes,a=this.get("content"),c=this.get("selection");this._invalidSelection=NO;if(b===YES||!d){return this}if(e===YES){e=d}if(b&&b.isIndexSet){e=e.without(b)}e.forEach(function(f){if(!d.contains(f)){return}var g=this.itemViewForContentIndex(f,NO);if(g){g.set("isSelected",c?c.contains(a,f):NO)}},this);return this},select:function(c,f){var d=this.get("content"),a=this.get("selectionDelegate"),b=this.get("_contentGroupIndexes"),e;if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(SC.typeOf(c)===SC.T_NUMBER){c=SC.IndexSet.create(c,1)}if(c&&c.get("length")>0){if(b&&b.get("length")>0){c=c.copy().remove(b)}c=a.collectionViewShouldSelectIndexes(this,c,f);if(!c||c.get("length")===0){return this}}else{c=null}if(f&&(e=this.get("selection"))){e=e.copy()}else{e=SC.SelectionSet.create()}if(c&&c.get("length")>0){if(c.get("length")===1){e.addObject(d.objectAt(c.get("firstObject")))}else{e.add(d,c)}}e=a.collectionViewSelectionForProposedSelection(this,e);if(!e){e=SC.SelectionSet.create()}this._selectionAnchor=null;this.set("selection",e.freeze());return this},deselect:function(b){var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate");if(!this.get("isSelectable")||!this.get("isEnabled")){return this}if(!d||d.get("length")===0){return this}if(SC.typeOf(b)===SC.T_NUMBER){b=SC.IndexSet.create(b,1)}b=a.collectionViewShouldDeselectIndexes(this,b);if(!b||b.get("length")===0){return this}d=d.copy().remove(c,b);d=a.collectionViewSelectionForProposedSelection(this,d);if(!d){d=SC.SelectionSet.create()}this.set("selection",d.freeze());return this},_findNextSelectableItemFromIndex:function(h,a){var c=this.get("length"),d=SC.IndexSet.create(),e=this.get("content"),j=this.get("selectionDelegate"),g=this.get("_contentGroupIndexes"),f,b;if(!g&&(j.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return h}while(h<c){if(!g||!g.contains(h)){d.add(h);f=j.collectionViewShouldSelectIndexes(this,d);if(f&&f.get("length")>=1){return h}d.remove(h)}h++}if(a===undefined){b=this.get("selection");a=b?b.get("max"):-1}return a},_findPreviousSelectableItemFromIndex:function(b,h){var c=SC.IndexSet.create(),f=this.get("content"),a=this.get("selectionDelegate"),e=this.get("_contentGroupIndexes"),d;if(SC.none(b)){b=-1}if(!e&&(a.collectionViewShouldSelectIndexes===this.collectionViewShouldSelectIndexes)){return b}while(b>=0){if(!e||!e.contains(b)){c.add(b);d=a.collectionViewShouldSelectIndexes(this,c);if(d&&d.get("length")>=1){return b}c.remove(b)}b--}if(h===undefined){var g=this.get("selection");h=g?g.get("min"):-1}if(SC.none(h)){h=-1}return h},selectPreviousItem:function(h,b){if(SC.none(b)){b=1}if(SC.none(h)){h=false}var f=this.get("selection"),e=this.get("content");if(f){f=f.indexSetForSource(e)}var g=f?f.get("min"):-1,a=f?f.get("max")-1:-1,d=this._selectionAnchor;if(SC.none(d)){d=g}if(h){if(a>d){a=a-b}else{g=this._findPreviousSelectableItemFromIndex(g-b)}if(SC.none(g)||(g<0)){g=0}if(!e.objectAt(g)){g=f?f.get("min"):-1}if(a<g){a=g}}else{g=this._findPreviousSelectableItemFromIndex(g-b);if(SC.none(g)||(g<0)){g=0}if(!e.objectAt(g)){g=f?f.get("min"):-1}a=g;d=null}var c=g;f=SC.IndexSet.create(g,a+1-g);this.scrollToContentIndex(c);this.select(f);this._selectionAnchor=d;return this},selectNextItem:function(h,j){if(SC.none(j)){j=1}if(SC.none(h)){h=false}var b=this.get("selection"),g=this.get("content");if(b){b=b.indexSetForSource(g)}var a=b?b.get("min"):-1,d=b?b.get("max")-1:-1,e=this._selectionAnchor,c=this.get("length");if(SC.none(e)){e=a}if(h){if(a<e){a=a+j}else{d=this._findNextSelectableItemFromIndex(d+j,d)}if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}if(a>d){a=d}}else{d=this._findNextSelectableItemFromIndex(d+j,d);if(d>=c){d=c-1}if(!g.objectAt(d)){d=b?b.get("max")-1:-1}a=d;e=null}var f=d;b=SC.IndexSet.create(a,d-a+1);this.scrollToContentIndex(f);this.select(b);this._selectionAnchor=e;return this},deleteSelection:function(){if(!this.get("canDeleteContent")){return NO}var d=this.get("selection"),c=this.get("content"),a=this.get("selectionDelegate"),b=d&&c?d.indexSetForSource(c):null;if(!c||!b||b.get("length")===0){return NO}b=a.collectionViewShouldDeleteIndexes(this,b);if(!b||b.get("length")===0){return NO}a.collectionViewDeleteContent(this,this.get("content"),b);return YES},scrollToContentIndex:function(b){var a=this.itemViewForContentIndex(b);if(a){this.scrollToItemView(a)}return this},scrollToItemView:function(a){if(a){a.scrollToVisible()}return this},keyDown:function(a){var b=this.interpretKeyEvents(a);return !b?NO:b},keyUp:function(){return true},insertText:function(b,a){if(b===" "){var c=this.get("selection");if(c&&c.get("length")>0){this.invokeLater(this._cv_action,0,null,a)}return YES}else{return NO}},selectAll:function(a){var b=this.get("content"),c=b?SC.IndexSet.create(0,b.get("length")):null;this.select(c,NO);return YES},deselectAll:function(){var a=this.get("content"),b=a?SC.IndexSet.create(0,a.get("length")):null;this.deselect(b,NO);return YES},deleteBackward:function(a){return this.deleteSelection()},deleteForward:function(a){return this.deleteSelection()},moveDown:function(b,a){this.selectNextItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUp:function(b,a){this.selectPreviousItem(false,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeft:function(m){if(m.ctrlKey||m.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(false,1);this._cv_performSelectAction(null,m,this.ACTION_DELAY)}else{var c=this.get("selection"),j=this.get("content"),g=c?c.indexSetForSource(j):null;if(g){var n=undefined,f=false,h=undefined;if(g.get("length")===1){h=g.get("firstObject");n=this.get("contentDelegate");var b=n.contentIndexDisclosureState(this,j,h);if(b!==SC.BRANCH_OPEN){f=true}}if(f){var a=n.contentIndexOutlineLevel(this,j,h)-1;if(a>=0){var e=-1;while(e<0){var d=this._findPreviousSelectableItemFromIndex(h-1);if(d<0){return false}h=d;var k=n.contentIndexOutlineLevel(this,j,h);if(k===a){e=d}}if(e!==-1){this.select(h)}}}else{this.collapse(g)}}}return true},moveRight:function(a){if(a.ctrlKey||a.metaKey){return NO}if((this.get("itemsPerRow")||1)>1){this.selectNextItem(false,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}else{var d=this.get("selection"),c=this.get("content"),b=d?d.indexSetForSource(c):null;if(b){this.expand(b)}}return true},moveDownAndModifySelection:function(b,a){this.selectNextItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveUpAndModifySelection:function(b,a){this.selectPreviousItem(true,this.get("itemsPerRow")||1);this._cv_performSelectAction(null,a,this.ACTION_DELAY);return true},moveLeftAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectPreviousItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},moveRightAndModifySelection:function(b,a){if((this.get("itemsPerRow")||1)>1){this.selectNextItem(true,1);this._cv_performSelectAction(null,a,this.ACTION_DELAY)}return true},insertNewline:function(d,c){var b=this.get("isEditable")&&this.get("canEditContent"),g,f,h,a,e;if(b){g=this.get("selection");f=this.get("content");if(g&&g.get("length")===1){h=g.indexSetForSource(f);a=h?h.get("min"):-1;b=a>=0}}if(b){e=this.itemViewForContentIndex(a);b=e&&SC.typeOf(e.beginEditing)===SC.T_FUNCTION}if(b){this.scrollToContentIndex(a);e=this.itemViewForContentIndex(a);e.beginEditing()}else{this.invokeLater(this._cv_action,0,e,null)}return YES},insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},mouseDown:function(k){var h=this.itemViewForEvent(k),g=this.get("content"),e=h?h.get("contentIndex"):-1,c,d,b,a,m,f=NO,j=g.get("allowsMultipleSelection");if(!this.get("isEnabled")){return e>-1}if(!this.get("isSelectable")){return NO}this.becomeFirstResponder();if(this.get("useToggleSelection")){if(this.get("selectOnMouseDown")){if(!h){return}b=this.get("selection");a=b&&b.containsObject(h.get("content"));if(a){this.deselect(e)}else{if(!j){this.select(e,NO);f=YES}else{this.select(e,YES);f=YES}}if(f&&this.get("actOnSelect")){this._cv_performSelectAction(h,k)}}return YES}if(!h){if(this.get("allowDeselectAll")){this.select(null,false)}return YES}b=this.get("selection");if(b){b=b.indexSetForSource(g)}c=this.mouseDownInfo={event:k,itemView:h,contentIndex:e,at:Date.now()};a=b?b.contains(e):NO;c.modifierKeyPressed=m=k.ctrlKey||k.metaKey;if(m&&a){c.shouldDeselect=e>=0}else{if(k.shiftKey&&b&&b.get("length")>0&&j){b=this._findSelectionExtendedByShift(b,e);d=this._selectionAnchor;this.select(b);this._selectionAnchor=d}else{if(!m&&a){c.shouldReselect=e>=0}else{if((k.shiftKey||m)&&!j){this.select(null,false)}if(this.get("selectOnMouseDown")){this.select(e,m)}else{c.shouldSelect=e>=0}}}}c.previousContentIndex=e;return YES},mouseUp:function(j){var k=this.itemViewForEvent(j),d=this.mouseDownInfo,f=this.get("content"),e=k?k.get("contentIndex"):-1,c,a,b,g,m,h=f.get("allowsMultipleSelection");if(!this.get("isEnabled")){return e>-1}if(!this.get("isSelectable")){return NO}if(this.get("useToggleSelection")){if(!k||this.get("selectOnMouseDown")){return NO}c=this.get("selection");a=c&&c.containsObject(k.get("content"));if(a){this.deselect(e)}else{if(!h){this.select(e,NO)}else{this.select(e,YES)}}}else{if(d){m=d.contentIndex;e=(k)?k.get("contentIndex"):-1;if(d.shouldSelect){this.select(m,d.modifierKeyPressed)}if(d.shouldDeselect){this.deselect(m)}if(d.shouldReselect){b=this.get("isEditable")&&this.get("canEditContent");if(b){c=this.get("selection");b=c&&(c.get("length")===1)}if(b){g=this.itemViewForContentIndex(m);b=g&&(!g.contentHitTest||g.contentHitTest(j));b=(b&&g.beginEditing)?g.beginEditing():NO}if(!b){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}this._cv_reselectTimer=this.invokeLater(this.select,300,m,false)}}this._cleanupMouseDown()}}this._cv_performSelectAction(k,j,0,j.clickCount);return NO},_cleanupMouseDown:function(){var b=this.mouseDownInfo,a;if(b){for(a in b){if(!b.hasOwnProperty(a)){continue}delete b[a]}}this.mouseDownInfo=null},mouseMoved:function(c){var a=this.itemViewForEvent(c),b=this._lastHoveredItem;if(a!==b){if(b&&b.mouseExited){b.mouseExited(c)}if(a&&a.mouseEntered){a.mouseEntered(c)}}this._lastHoveredItem=a;if(a&&a.mouseMoved){a.mouseMoved(c)}return YES},mouseExited:function(b){var a=this._lastHoveredItem;this._lastHoveredItem=null;if(a&&a.mouseExited){a.mouseExited(b)}return YES},touchStart:function(d,a){var b=this.itemViewForEvent(d),c=b?b.get("contentIndex"):-1;if(!this.get("isEnabled")){return c>-1}this.becomeFirstResponder();this._touchSelectedView=b;if(!this.get("useToggleSelection")){if(b&&!b.get("isSelected")){b.set("isSelected",YES)}}return YES},touchesDragged:function(a,b){b.forEach(function(c){if(Math.abs(c.pageX-c.startX)>5||Math.abs(c.pageY-c.startY)>5){c.makeTouchResponder(c.nextTouchResponder)}},this)},touchEnd:function(e){var b=this._touchSelectedView,d=b?b.get("contentIndex"):-1,a=NO,c;if(!this.get("isEnabled")){return d>-1}if(b){b.set("isSelected",NO)}if(d>-1){if(this.get("useToggleSelection")){c=this.get("selection");a=c&&c.containsObject(b.get("content"))}if(a){this.deselect(d)}else{this.select(d,NO);this._cv_performSelectAction(b,e,0)}}this._touchSelectedView=null},touchCancelled:function(a){if(this._touchSelectedView){this._touchSelectedView.set("isSelected",NO);this._touchSelectedView=null}},_findSelectionExtendedByShift:function(e,h){if(!e||e.get("length")===0){return SC.IndexSet.create(h)}var d=this.get("content"),g=d.get("length")-1,c=e.get("min"),a=e.get("max")-1,f=this.mouseDownInfo,b=this._selectionAnchor;if(SC.none(b)){b=-1}if(h<c){c=h;if(b<0){this._selectionAnchor=b=a}}else{if(h>a){a=h;if(b<0){this._selectionAnchor=b=c}}else{if(h>=c&&h<=a){if(b<0){this._selectionAnchor=b=c}if(h===b){c=a=h}else{if(h>b){c=b;a=h}else{if(h<b){c=h;a=b}}}}}}return SC.IndexSet.create(c,a-c+1)},reorderDataType:function(){return"SC.CollectionView.Reorder."+SC.guidFor(this)}.property().cacheable(),dragContent:null,proposedInsertionIndex:null,proposedDropOperation:null,mouseDragged:function(h){var j=this.get("selectionDelegate"),e=this.get("content"),a=this.get("selection"),c=this.mouseDownInfo,f=this.get("_contentGroupIndexes"),d,b,g;if(!c||c.contentIndex<0){return YES}if((Date.now()-c.at)<123){return YES}if(j.collectionViewShouldBeginDrag(this)){if(!this.get("selectOnMouseDown")){d=SC.IndexSet.create(c.contentIndex)}else{d=a?a.indexSetForSource(e):null}if(d&&f&&f.get("length")>0){d=d.copy().remove(f);if(d.get("length")===0){d=null}else{d.freeze()}}if(!d){return YES}else{d=d.frozenCopy()}d={content:e,indexes:d};this.set("dragContent",d);b=this.get("dragDataTypes");if(b&&b.get("length")>0){g=j.collectionViewDragViewFor(this,d.indexes);if(!g){g=this._cv_dragViewFor(d.indexes)}g.createLayer();SC.Drag.start({event:c.event,source:this,dragView:g,ghost:NO,ghostActsLikeCursor:j.ghostActsLikeCursor,slideBack:YES,dataSource:this});this._cleanupMouseDown();this._lastInsertionIndex=null}else{this.set("dragContent",null)}return YES}},_cv_dragViewFor:function(f){var c=this.get("nowShowing").without(f),d=this.get("layer").cloneNode(false),b=SC.View.create({layer:d,parentView:this}),a=0,e;c=this.get("nowShowing").without(c);SC.$(d).css("backgroundColor","transparent").css("border","none").css("top",0).css("left",0);c.forEach(function(j){var k=this.itemViewForContentIndex(j),g,h;if(k){g=k.get("isSelected");k.set("isSelected",NO);k.updateLayerIfNeeded();h=k.get("layer");if(h){h=h.cloneNode(true)}k.set("isSelected",g);k.updateLayerIfNeeded()}if(h){d.appendChild(h);e=k.get("layout");if(e.height+e.top>a){a=e.height+e.top}}h=null},this);b.set("layout",{height:a});d=null;return b},dragDataTypes:function(){var a=this.get("selectionDelegate"),b=a.collectionViewDragDataTypes(this),c;if(this.get("canReorderContent")){b=b?b.copy():[];c=this.get("reorderDataType");if(b.indexOf(c)<0){b.push(c)}}return b?b:[]}.property(),dragDataForType:function(c,b){if(this.get("canReorderContent")){if(b===this.get("reorderDataType")){return this.get("dragContent")}}var a=this.get("selectionDelegate");return a.collectionViewDragDataForType(this,c,b)},computeDragOperations:function(c,b){var d=SC.DRAG_NONE,a=this.get("selectionDelegate");if(this.get("canReorderContent")){if(c.get("dataTypes").indexOf(this.get("reorderDataType"))>=0){d=SC.DRAG_REORDER}}d=a.collectionViewComputeDragOperations(this,c,d);if(d&SC.DRAG_REORDER){d=SC.DRAG_MOVE}return d},_computeDropOperationState:function(c,n,e){var g=this.convertFrameFromView(c.get("location"),null),m=SC.DROP_BEFORE,o=this.get("selectionDelegate"),d=this.get("canReorderContent"),p,h,a,j,f,b;var k=this.insertionIndexForLocation(g,SC.DROP_ON);if(SC.typeOf(k)===SC.T_ARRAY){m=k[1];k=k[0]}if(m===SC.DROP_ON){this.set("proposedInsertionIndex",k);this.set("proposedDropOperation",m);b=o.collectionViewValidateDragOperation(this,c,e,k,m);k=this.get("proposedInsertionIndex");m=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;if(b!==SC.DRAG_NONE){return[k,m,b]}else{m=SC.DROP_BEFORE;k=this.insertionIndexForLocation(g,SC.DROP_BEFORE);if(SC.typeOf(k)===SC.T_ARRAY){m=k[1];k=k[0]}}}if((k>=0)&&d&&(m!==SC.DROP_ON)){p=c.dataForType(this.get("reorderDataType"));if(p){h=this.get("content");if(m===SC.DROP_BEFORE){a=p.indexes.contains(k-1);j=p.indexes.contains(k)}else{a=p.indexes.contains(k);j=p.indexes.contains(k-1)}if(a&&j){if(SC.none(this._lastInsertionIndex)){if(m===SC.DROP_BEFORE){while((k>=0)&&p.indexes.contains(k)){k--}}else{f=h?h.get("length"):0;while((k<f)&&p.indexes.contains(k)){k++}}}else{k=this._lastInsertionIndex}}if(k>=0){e=SC.DRAG_REORDER}}}this.set("proposedInsertionIndex",k);this.set("proposedDropOperation",m);e=o.collectionViewValidateDragOperation(this,c,e,k,m);k=this.get("proposedInsertionIndex");m=this.get("proposedDropOperation");this._dropInsertionIndex=this._dropOperation=null;return[k,m,e]},dragUpdated:function(f,b){var h=f.get("allowedDragOperations"),g=this._computeDropOperationState(f,b,h),a=g[0],c=g[1],e=g[2];if(e!==SC.DRAG_NONE){if((this._lastInsertionIndex!==a)||(this._lastDropOperation!==c)){var d=this.itemViewForContentIndex(a);this.showInsertionPoint(d,c)}this._lastInsertionIndex=a;this._lastDropOperation=c}else{this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null}return(e&SC.DRAG_REORDER)?SC.DRAG_MOVE:e},dragExited:function(){this.hideInsertionPoint();this._lastInsertionIndex=this._lastDropOperation=null},acceptDragOperation:function(a,b){return YES},performDragOperation:function(e,g){var a=this._computeDropOperationState(e,null,g),m=a[0],k=a[1],h=a[2],n=this.get("selectionDelegate"),c,o,d,j,b,f;if(h&SC.DRAG_REORDER){g=(g&SC.DRAG_MOVE)?SC.DRAG_REORDER:SC.DRAG_NONE}else{g=g&h}if(g===SC.DRAG_NONE){return g}c=n.collectionViewPerformDragOperation(this,e,g,m,k);if((c===SC.DRAG_NONE)&&(g&SC.DRAG_REORDER)){d=e.dataForType(this.get("reorderDataType"));if(!d){return SC.DRAG_NONE}j=this.get("content");f=d.indexes;if(f.get("length")===1){if(((k===SC.DROP_BEFORE)||(k===SC.DROP_AFTER))&&(f.get("min")===m)){return SC.DRAG_MOVE}}j.beginPropertyChanges();o=[];b=0;d.indexes.forEach(function(p){o.push(j.objectAt(p-b));j.removeAt(p-b);b++;if(p<m){m--}},this);if(k===SC.DROP_AFTER){m++}j.replace(m,0,o,k);this.select(SC.IndexSet.create(m,o.length));j.endPropertyChanges();g=SC.DRAG_MOVE}return g},collectionViewShouldBeginDrag:function(a){return this.get("canReorderContent")},insertionIndexForLocation:function(a,b){return -1},_cv_isVisibleInWindowDidChange:function(){if(this.get("isVisibleInWindow")){if(this._invalidIndexes){this.invokeOnce(this.reloadIfNeeded)}if(this._invalidSelection){this.invokeOnce(this.reloadSelectionIndexesIfNeeded)}}}.observes("isVisibleInWindow"),collectionViewShouldSelectItem:function(a,b){return this.get("isSelectable")},_TMP_DIFF1:SC.IndexSet.create(),_TMP_DIFF2:SC.IndexSet.create(),_cv_nowShowingDidChange:function(){var b=this.get("nowShowing"),a=this._sccv_lastNowShowing,d,e,c;if(a!==b){if(a&&b){e=this._TMP_DIFF1.add(a).remove(b);c=this._TMP_DIFF2.add(b).remove(a);d=e.add(c)}else{d=a||b}}if(d&&d.get("length")>0){this._sccv_lastNowShowing=b?b.frozenCopy():null;this.updateContentRangeObserver();this.reload(d)}if(e){e.clear()}if(c){c.clear()}}.observes("nowShowing"),init:function(){arguments.callee.base.apply(this,arguments);if(this.useFastPath){this.mixin(SC.CollectionFastPath)}if(this.get("canReorderContent")){this._cv_canReorderContentDidChange()}this._sccv_lastNowShowing=this.get("nowShowing").clone();if(this.content){this._cv_contentDidChange()}if(this.selection){this._cv_selectionDidChange()}},_cv_canReorderContentDidChange:function(){if(this.get("canReorderContent")){if(!this.get("isDropTarget")){this.set("isDropTarget",YES)}SC.Drag.addDropTarget(this)}}.observes("canReorderContent"),_cv_performSelectAction:function(b,d,c,a){var e;if(c===undefined){c=0}if(a===undefined){a=1}if((a>1)||this.get("actOnSelect")){if(this._cv_reselectTimer){this._cv_reselectTimer.invalidate()}e=this.get("selection");e=e?e.toArray():[];if(this._cv_actionTimer){this._cv_actionTimer.invalidate()}this._cv_actionTimer=this.invokeLater(this._cv_action,c,b,d,e)}},_cv_action:function(b,a,c){var d=this.get("action");var e=this.get("target")||null;this._cv_actionTimer=null;if(d){if(SC.typeOf(d)===SC.T_FUNCTION){return this.action(b,a)}var f=this.get("pane");if(f){f.rootResponder.sendAction(d,e,this,f,c)}}else{if(!b){return}else{if(SC.typeOf(b._action)==SC.T_FUNCTION){return b._action(a)}else{if(SC.typeOf(b.action)==SC.T_FUNCTION){return b.action(a)}}}}}});SC.DateFieldView=SC.TextFieldView.extend({value:null,showDate:YES,showTime:NO,formatTime:"%I:%M %p",formatDate:"%d/%m/%Y",formatDateTime:"%d/%m/%Y %I:%M %p",_dtConstants:["%a","%b","%d","%H","%I","%j","%m","%M","%p","%S","%U","%W","%y","%Y"],_wtConstants:[3,3,2,2,2,3,2,2,2,2,2,2,2,4],activeSelection:0,format:function(){var a=this.get("showTime");var b=this.get("showDate");if(a===YES&&b===YES){return this.get("formatDateTime")}if(a===YES){return this.get("formatTime")}return this.get("formatDate")}.property("showTime","showDate").cacheable(),validator:function(){return SC.Validator.DateTime.extend({format:this.get("format")})}.property("format").cacheable(),tabsSelections:function(){var f=[];var d=this.get("format");var j=this.get("_dtConstants");var b=this.get("_wtConstants");if(SC.empty(d)){throw"The format string is empty, and must be a valid string."}var g,k,c,e=0,a=0,h=0;while(e<d.length&&d.indexOf("%",e)!==-1){g=d.indexOf("%",e);k=d.substring(g,g+2);e=g+2;c=j.indexOf(k);if(c===-1){throw"SC.DateFieldView: The format's key '%@' is not supported.".fmt(k)}a=a+g-h;f.push(SC.Object.create({key:k,textSelection:SC.TextSelection.create({start:a,end:a+b[c]})}));a=a+b[c];h=e}g=k=c=null;return f}.property("format").cacheable(),updateTextSelectionObserver:function(){var a=this.get("activeSelection");var b=this.get("tabsSelections");if(this.get("isEditing")){this.selection(null,b[a].get("textSelection"))}}.observes("activeSelection","value"),updateValue:function(b,c){var e=(c===0)?-1:1;var d=this.get("value"),a;switch(b){case"%a":case"%d":case"%j":this.set("value",d.advance({day:e}));break;case"%b":case"%m":this.set("value",d.advance({month:e}));break;case"%H":case"%I":this.set("value",d.advance({hour:e}));break;case"%M":this.set("value",d.advance({minute:e}));break;case"%p":a=d.get("hour")>=12?-12:12;this.set("value",d.advance({hour:a}));break;case"%S":this.set("value",d.advance({second:e}));break;case"%U":this.set("value",d.advance({week1:e}));break;case"%W":this.set("value",d.advance({week0:e}));break;case"%y":case"%Y":this.set("value",d.advance({year:e}));break}},_selectRootElement:function(){},keyDown:function(a){if(this.interpretKeyEvents(a)){a.stop();return YES}return arguments.callee.base.apply(this,arguments)},ctrl_a:function(){return YES},moveUp:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),1);return YES},moveDown:function(b){var a=this.get("activeSelection");var c=this.get("tabsSelections");this.updateValue(c[a].get("key"),0);return YES},insertText:function(a){return YES},moveRight:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b===c.length){b=0}this.set("activeSelection",b);return YES},moveLeft:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")-1;if(b===-1){b=c.length-1}this.set("activeSelection",b);return YES},insertTab:function(a){var c=this.get("tabsSelections");var b=this.get("activeSelection")+1;if(b<c.length){this.set("activeSelection",b);return YES}return NO},insertBacktab:function(a){var b=this.get("activeSelection")-1;if(b!==-1){this.set("activeSelection",b);return YES}return NO},mouseUp:function(b){var c=arguments.callee.base.apply(this,arguments);var e=this.get("selection");if(SC.none(e)){this.set("activeSelection",0)}else{var h=e.get("start");var g=this.get("tabsSelections");var a=g.length,f;for(var d=0;d<a;d++){f=g[d].get("textSelection");if(h>=f.get("start")&&h<=f.get("end")){this.set("activeSelection",d)}}}return c},deleteBackward:function(a){return YES},deleteForward:function(a){return YES}});SC.DisclosureView=SC.ButtonView.extend({classNames:["sc-disclosure-view"],renderDelegateName:"disclosureRenderDelegate",buttonBehavior:SC.TOGGLE_BEHAVIOR,toggleOnValue:YES,toggleOffValue:NO,valueBindingDefault:SC.Binding.bool(),keyDown:function(a){if(a.which===37||a.which===38){this.set("value",this.get("toggleOffValue"));return YES}if(a.which===39||a.which===40){this.set("value",this.get("toggleOnValue"));return YES}arguments.callee.base.apply(this,arguments)}});sc_require("views/collection");sc_require("mixins/collection_row_delegate");SC.ListView=SC.CollectionView.extend(SC.CollectionRowDelegate,{classNames:["sc-list-view"],acceptsFirstResponder:YES,showAlternatingRows:NO,render:function(a,b){a.setClass("alternating",this.get("showAlternatingRows"));return arguments.callee.base.apply(this,arguments)},rowDelegate:function(){var a=this.delegate,b=this.get("content");return this.delegateFor("isCollectionRowDelegate",a,b)}.property("delegate","content").cacheable(),_sclv_rowDelegateDidChange:function(){var d=this._sclv_rowDelegate,b=this.get("rowDelegate"),c=this._sclv_rowHeightDidChange,a=this._sclv_customRowHeightIndexesDidChange;if(d===b){return this}this._sclv_rowDelegate=b;if(d){d.removeObserver("rowHeight",this,c);d.removeObserver("customRowHeightIndexes",this,a)}if(!b){throw"Internal Inconsistancy: ListView must always have CollectionRowDelegate"}b.addObserver("rowHeight",this,c);b.addObserver("customRowHeightIndexes",this,a);this._sclv_rowHeightDidChange()._sclv_customRowHeightIndexesDidChange();return this}.observes("rowDelegate"),_sclv_rowHeightDidChange:function(){var b=this.get("rowDelegate"),a=b.get("rowHeight"),c;if(a===this._sclv_rowHeight){return this}this._sclv_rowHeight=a;c=SC.IndexSet.create(0,this.get("length"));this.rowHeightDidChangeForIndexes(c);return this},_sclv_customRowHeightIndexesDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),d=this._sclv_customRowHeightIndexes,c=this._sclv_customRowHeightIndexesContentDidChange;if((b===d)||(d&&d.isEqual(b))){return this}if(d&&this._sclv_isObservingCustomRowHeightIndexes){d.removeObserver("[]",this,c)}if(this._sclv_isObservingCustomRowHeightIndexes=b&&!b.get("isFrozen")){b.addObserver("[]",this,c)}this._sclv_customRowHeightIndexesContentDidChange();return this},_sclv_customRowHeightIndexesContentDidChange:function(){var a=this.get("rowDelegate"),b=a.get("customRowHeightIndexes"),c=this._sclv_customRowHeightIndexes,d;if(b&&c){d=b.copy().add(c)}else{d=b||c}this._sclv_customRowHeightIndexes=b?b.frozenCopy():null;this.rowHeightDidChangeForIndexes(d);return this},rowOffsetForContentIndex:function(h){if(h===0){return 0}var k=this.get("rowDelegate"),a=k.get("rowHeight"),f,e,c,b,j,g,d;e=h*a;f=this.get("rowSpacing");if(f){e+=h*f}if(k.customRowHeightIndexes&&(c=k.get("customRowHeightIndexes"))){b=this._sclv_offsetCache;if(!b){b=[];j=g=0;c.forEach(function(m){j+=this.rowHeightForContentIndex(m)-a;b[m+1]=j;g=m},this);this._sclv_max=g+1;this._sclv_offsetCache=b}j=b[h];if(j===undefined){j=b[h]=b[h-1];if(j===undefined){g=this._sclv_max;if(h<g){g=c.indexBefore(h)+1}j=b[h]=b[g]||0}}e+=j}return e},rowHeightForContentIndex:function(a){var b=this.get("rowDelegate"),e,c,f,d;if(b.customRowHeightIndexes&&(d=b.get("customRowHeightIndexes"))){c=this._sclv_heightCache;if(!c){c=[];f=this.get("content");d.forEach(function(g){c[g]=b.contentIndexRowHeight(this,f,g)},this);this._sclv_heightCache=c}e=c[a];if(e===undefined){e=b.get("rowHeight")}}else{e=b.get("rowHeight")}return e},rowHeightDidChangeForIndexes:function(b){var a=this.get("length");this._sclv_heightCache=this._sclv_offsetCache=null;if(b&&b.isIndexSet){b=b.get("min")}this.reload(SC.IndexSet.create(b,a-b));return this},_sclv_lengthDidChange:function(){this.adjust(this.computeLayout())}.observes("length"),computeLayout:function(){var a=this._sclv_layout;if(!a){a=this._sclv_layout={}}a.minHeight=this.rowOffsetForContentIndex(this.get("length"));this.set("calculatedHeight",a.minHeight);return a},layoutForContentIndex:function(b){var a=this.get("rowDelegate");return{top:this.rowOffsetForContentIndex(b),height:this.rowHeightForContentIndex(b)-a.get("rowPadding")*2,left:0,right:0}},contentIndexesInRect:function(h){var a=this.get("rowDelegate").get("rowHeight"),g=SC.minY(h),b=SC.maxY(h),j=h.height||0,f=this.get("length"),e,c,d;c=(g-(g%a))/a;e=this.rowOffsetForContentIndex(c);while(c>0&&e>g){c--;e-=this.rowHeightForContentIndex(c)}e+=this.rowHeightForContentIndex(c);while(c<f&&e<=g){c++;e+=this.rowHeightForContentIndex(c)}if(c<0){c=0}if(c>=f){c=f}d=c+((j-(j%a))/a);if(d>f){d=f}e=this.rowOffsetForContentIndex(d);while(d>=c&&e>=b){d--;e-=this.rowHeightForContentIndex(d)}e+=this.rowHeightForContentIndex(d);while(d<f&&e<b){d++;e+=this.rowHeightForContentIndex(d)}d++;if(d<c){d=c}if(d>f){d=f}return SC.IndexSet.create(c,d-c)},insertionPointView:SC.View.extend({classNames:"sc-list-insertion-point",render:function(a,b){if(b){a.push('<div class="anchor"></div>')}}}),showInsertionPoint:function(g,f){var h=this._insertionPointView;if(!h){h=this._insertionPointView=this.get("insertionPointView").create()}var d=g.get("contentIndex"),e=this.get("length"),c=SC.clone(g.get("layout")),a=g.get("outlineLevel"),b=g.get("outlineIndent")||0,j;if((d>=e)&&d>0){j=this.itemViewForContentIndex(e-1);if(j.get("isGroupView")){a=1;b=j.get("outlineIndent")}}if(SC.none(a)){a=-1}if(f&SC.DROP_ON){this.hideInsertionPoint();g.set("isSelected",YES);this._lastDropOnView=g}else{if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);this._lastDropOnView=null}if(f&SC.DROP_AFTER){c.top+=c.height}c.height=2;c.right=0;c.left=((a+1)*b)+12;delete c.width;h.set("layout",c);this.appendChild(h)}},hideInsertionPoint:function(){if(this._lastDropOnView){this._lastDropOnView.set("isSelected",NO);this._lastDropOnView=null}var a=this._insertionPointView;if(a){a.removeFromParent().destroy()}this._insertionPointView=null},insertionIndexForLocation:function(g,m){var b={x:g.x,y:g.y,width:1,height:1},f=this.contentIndexesInRect(b),h=f.get("min"),j=this.get("length"),c,n,o,e,q,d,p,k,a;if(SC.none(h)||h<0){if((j===0)||(g.y<=this.rowOffsetForContentIndex(0))){h=0}else{if(g.y>=this.rowOffsetForContentIndex(j)){h=j}}}c=this.rowOffsetForContentIndex(h);n=c+this.rowHeightForContentIndex(h);if(m==SC.DROP_ON){if(this.get("isEditable")){o=Math.min(Math.floor((n-c)*0.2),5)}else{o=0}if(g.y>=(c+o)||g.y<=(n+o)){return[h,SC.DROP_ON]}}if(h>0){k=this.itemViewForContentIndex(h-1);p=(k?k.get("outlineIndent"):0)||0;d=k?k.get("outlineLevel"):0;if(h<j){k=this.itemViewForContentIndex(h);e=k?k.get("outlineLevel"):0;q=(k?k.get("outlineIndent"):0)||0;q*=e}else{e=k.get("isGroupView")?1:0;q=p*e}p*=d;if((e!==d)&&(q!==p)){if(p>q){h--;m=SC.DROP_AFTER}}}if(m===SC.DROP_BEFORE){k=(h<j)?this.itemViewForContentIndex(h):null;if(!k||k.get("isGroupView")){if(h>0){k=this.itemViewForContentIndex(h-1);if(!k.get("isGroupView")||(k.get("disclosureState")===SC.BRANCH_OPEN)){h=h-1;m=SC.DROP_AFTER}else{h=-1}}else{h=-1}}if(h<0){m=SC.DRAG_NONE}}return[h,m]},mouseWheel:function(a){var b=SC.InlineTextFieldView.editor;if(b&&b.get("isEditing")){if(b.get("delegate").get("displayDelegate")===this){SC.InlineTextFieldView.commitEditing()}}return NO},init:function(){arguments.callee.base.apply(this,arguments);this._sclv_rowDelegateDidChange()}});sc_require("views/list");SC.GridView=SC.ListView.extend({classNames:["sc-grid-view"],layout:{left:0,right:0,top:0,bottom:0},rowHeight:48,columnWidth:64,exampleView:SC.LabelView,insertionOrientation:SC.HORIZONTAL_ORIENTATION,itemsPerRow:function(){var b=this.get("frame"),a=this.get("columnWidth")||0;return(a<=0)?1:Math.floor(b.width/a)}.property("clippingFrame","columnWidth").cacheable(),contentIndexesInRect:function(e){var d=this.get("rowHeight")||48,b=this.get("itemsPerRow"),c=Math.floor(SC.minY(e)/d)*b,a=Math.ceil(SC.maxY(e)/d)*b;return SC.IndexSet.create(c,a-c)},layoutForContentIndex:function(g){var d=this.get("rowHeight")||48,a=this.get("clippingFrame").width,b=this.get("itemsPerRow"),e=Math.floor(a/b),f=Math.floor(g/b),c=g-(b*f);return{left:c*e,top:f*d,height:d,width:e}},computeLayout:function(){var e=this.get("content"),d=(e)?e.get("length"):0,c=this.get("rowHeight")||48,a=this.get("itemsPerRow"),f=Math.ceil(d/a);var b=this._cachedLayoutHash;if(!b){b=this._cachedLayoutHash={}}b.minHeight=f*c;this.calculatedHeight=b.minHeight;return b},insertionPointClass:SC.View.extend({classNames:["grid-insertion-point"],render:function(a,b){if(b){a.push('<span class="anchor"></span>')}}}),showInsertionPoint:function(c,e){if(!c){return}if(e===SC.DROP_ON){if(c!==this._dropOnInsertionPoint){this.hideInsertionPoint();this._dropOnInsertionPoint=c}}else{if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}if(!this._insertionPointView){this._insertionPointView=this.insertionPointClass.create()}var b=this._insertionPointView;var a=c.get("frame");var d={height:a.height-6,x:a.x,y:a.y+6,width:0};if(!SC.rectsEqual(b.get("frame"),d)){b.set("frame",d)}if(b.parentNode!==c.parentNode){c.parentNode.appendChild(b)}}},hideInsertionPoint:function(){var a=this._insertionPointView;if(a){a.removeFromParent()}if(this._dropOnInsertionPoint){this._dropOnInsertionPoint=null}},insertionIndexForLocation:function(d,k){var e=this.get("frame"),g=this.get("clippingFrame"),m=this.get("itemsPerRow"),a=Math.floor(e.width/m),o=Math.floor((d.y-e.y-g.y)/this.get("rowHeight"));var j=SC.DROP_BEFORE,c=(d.x-e.x-g.x),b=Math.floor(c/a),n=(c/a)-b;if(k===SC.DROP_ON){if(n>0.8){b++}if((n>=0.2)&&(n<=0.8)){j=SC.DROP_ON}}else{if(n>0.45){b++}}var h=(o*m)+b;return[h,j]},_gv_clippingFrameDidChange:function(){var d=this.get("nowShowing"),c,b,a;this.notifyPropertyChange("itemsPerRow");a=d.get("length");for(b=0;b<a;b++){c=this.itemViewForContentIndex(b);c.adjust(this.layoutForContentIndex(b))}}.observes("clippingFrame")});SC.ImageButtonView=SC.ButtonView.extend({classNames:["sc-image-button-view"],themeName:null,renderDelegateName:"imageButtonRenderDelegate",displayProperties:["image"],image:null});SC.ANCHOR_TOP={top:0};SC.ANCHOR_LEFT={left:0};SC.ANCHOR_TOP_LEFT={top:0,left:0};SC.ANCHOR_BOTTOM={bottom:0};SC.ANCHOR_RIGHT={right:0};SC.ANCHOR_BOTTOM_RIGHT={bottom:0,right:0};SC.ToolbarView=SC.View.extend({classNames:["sc-toolbar-view"],ariaRole:"toolbar",renderDelegateName:"toolbarRenderDelegate",anchorLocation:null,layout:{left:0,height:32,right:0},init:function(){if(this.anchorLocation){this.layout=SC.merge(this.layout,this.anchorLocation)}arguments.callee.base.apply(this,arguments)}});sc_require("views/toolbar");SC.WorkspaceView=SC.View.extend({classNames:["sc-workspace-view"],displayProperties:["hasTopToolbar","hasBottomToolbar"],renderDelegateName:"workspaceRenderDelegate",topToolbar:SC.ToolbarView.extend(),bottomToolbar:null,contentView:SC.View.extend(),autoResizeToolbars:NO,defaultToolbarSize:44,largeToolbarSize:44,smallToolbarSize:30,toolbarSize:function(){if(!this.get("autoResizeToolbars")){return this.get("defaultToolbarSize")}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return this.get("smallToolbarSize")}return this.get("largeToolbarSize")}.property("autoHideMaster","orientation"),orientation:function(){var a=this.get("frame");if(a.width>a.height){return SC.HORIZONTAL_ORIENTATION}else{return SC.VERTICAL_ORIENTATION}}.property("frame").cacheable(),masterIsHidden:NO,masterIsHiddenDidChange:function(){var a,b=this.get("masterIsHidden");if(a=this.get("topToolbar")){a.set("masterIsHidden",b)}if(a=this.get("bottomToolbar")){a.set("masterIsHidden",b)}}.observes("masterIsHidden"),_scmd_tilePropertyDidChange:function(){this.invokeOnce("_scws_tile")}.observes("toolbarSize"),createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("topToolbar");if(a){a=this.topToolbar=this.activeTopToolbar=this.createChildView(a);this.appendChild(a)}var c=this.get("bottomToolbar");if(c){c=this.bottomToolbar=this.activeBottomToolbar=this.createChildView(c);this.appendChild(c)}var b=this.get("contentView");b=this.contentView=this.activeContentView=this.createChildView(b);this.appendChild(b);this.invokeOnce("_scws_tile")},_scws_tile:function(){var b=0,e=0,a=this.get("topToolbar"),f=this.get("bottomToolbar"),d=this.get("contentView"),c=this.get("toolbarSize");if(a){a.set("layout",{left:0,right:0,top:0,height:c});b+=c}if(f){f.set("layout",{left:0,right:0,bottom:0,height:c});e+=c}this.contentView.set("layout",{left:0,right:0,top:b,bottom:e})},hasTopToolbar:function(){if(this.get("topToolbar")){return YES}return NO}.property("topToolbar").cacheable(),hasBottomToolbar:function(){if(this.get("bottomToolbar")){return YES}return NO}.property("bottomToolbar").cacheable(),childDidChange:function(){this._scws_tile()},activeTopToolbar:null,activeBottomToolbar:null,activeContentView:null,topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeTopToolbar=a;this.invokeLast("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeBottomToolbar=a;this.invokeLast("childDidChange")}.observes("bottomToolbar"),contentViewDidChange:function(){var b=this.activeContentView,a=this.get("contentView");if(b){this.removeChild(b)}if(a){this.appendChild(a)}this.activeContentView=a;this.invokeLast("childDidChange")}.observes("contentView")});sc_require("views/workspace");sc_require("views/toolbar");SC.MasterDetailView=SC.View.extend({classNames:["sc-master-detail-view"],renderDelegateName:"masterDetailRenderDelegate",masterView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({}),contentView:SC.View.extend({backgroundColor:"white"})}),detailView:SC.WorkspaceView.extend({topToolbar:SC.ToolbarView.extend({childViews:["showHidePicker"],showHidePicker:SC.ButtonView.extend({layout:{left:7,centerY:0,height:30,width:100},controlSize:SC.AUTO_CONTROL_SIZE,title:"Picker",action:"toggleMasterPicker",isVisible:NO,isVisibleBinding:".parentView.masterIsHidden"})})}),autoHideMaster:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),masterWidth:250,dividerWidth:SC.propertyFromRenderDelegate("dividerWidth",1),masterIsHidden:function(){if(!this.get("autoHideMaster")){return NO}if(this.get("orientation")===SC.HORIZONTAL_ORIENTATION){return NO}return YES}.property("autoHideMaster","orientation"),orientation:SC.VERTICAL_ORIENTATION,_scmd_frameDidChange:function(){var b=this.get("frame"),a;if(b.width>b.height){a=SC.HORIZONTAL_ORIENTATION}else{a=SC.VERTICAL_ORIENTATION}this.setIfChanged("orientation",a)}.observes("frame"),init:function(){arguments.callee.base.apply(this,arguments);this._scmd_frameDidChange();this._scmd_masterIsHiddenDidChange()},toggleMasterPicker:function(a){if(!this.get("masterIsHidden")){return}if(this._picker&&this._picker.get("isVisibleInWindow")){this.hideMasterPicker()}else{this.showMasterPicker(a)}},showMasterPicker:function(b){if(this._picker&&this._picker.get("isVisibleInWindow")){return}if(!this._picker){var a=this.get("pickerPane");this._picker=a.create({})}this._picker.set("contentView",this.get("masterView"));this._picker.set("extraRightOffset",this.get("pointerDistanceFromEdge"));this.showPicker(this._picker,b)},hideMasterPicker:function(){if(this._picker&&this._picker.get("isVisibleInWindow")){this.hidePicker(this._picker)}},showPicker:function(b,a){b.popup(a,SC.PICKER_POINTER,[3,0,1,2,3],[9,-9,-18,18])},hidePicker:function(a){a.remove()},pickerPane:SC.PickerPane.extend({layout:{width:250,height:480},themeName:"popover"}),_picker:null,pointerDistanceFromEdge:46,_scmd_masterIsHiddenDidChange:function(){var a=this.get("masterIsHidden");this.get("masterView").set("masterIsHidden",a);this.get("detailView").set("masterIsHidden",a)}.observes("masterIsHidden"),_scmd_orientationDidChange:function(){this.invokeOnce("_scmd_tile")}.observes("orientation"),_scmd_retileProperties:function(){this.invokeOnce("_scmd_tile")}.observes("masterIsHidden","masterWidth"),createChildViews:function(){var b=this.get("masterView");b=this.masterView=this.createChildView(b);var a=this.get("detailView");a=this.detailView=this.createChildView(a);this.appendChild(a);this.invokeOnce("_scmd_tile")},_masterIsDrawn:NO,_scmd_tile:function(){var b=!this.get("masterIsHidden");var e=this.get("masterWidth"),d=this.get("masterView"),c=this.get("detailView");if(b){this.hideMasterPicker();if(!this._masterIsDrawn){if(this._picker){this._picker.set("contentView",null)}this.appendChild(d);this._masterIsDrawn=YES}d.set("layout",{left:0,top:0,bottom:0,width:e});var a=this.get("dividerWidth");c.set("layout",{left:e+a,right:0,top:0,bottom:0})}else{if(this._masterIsDrawn){this.removeChild(d);this._masterIsDrawn=NO}c.set("layout",{left:0,right:0,top:0,bottom:0})}}});SC.ScrollerView=SC.View.extend({classNames:["sc-scroller-view"],displayProperties:["thumbPosition","thumbLength","isEnabled","controlsHidden"],ariaRole:"scrollbar",shouldScrollToClick:NO,_touchScrollValue:NO,value:function(a,c){var b=this.get("minimum");if(c!==undefined){this._scs_value=c}c=this._scs_value||b;return Math.max(Math.min(c,this.get("maximum")),b)}.property("maximum","minimum").cacheable(),displayValue:function(){var a;if(this.get("_touchScrollValue")){a=this.get("_touchScrollValue")}else{a=this.get("value")}return a}.property("value","_touchScrollValue").cacheable(),proportion:0,maximum:100,minimum:0,isEnabled:function(a,b){if(b!==undefined){this._scsv_isEnabled=b}if(this._scsv_isEnabled!==undefined){return this._scsv_isEnabled}return this.get("proportion")<1}.property("proportion").cacheable(),_scsv_isEnabled:undefined,layoutDirection:SC.LAYOUT_VERTICAL,hasButtons:YES,scrollbarThickness:14,capLength:18,capOverlap:14,buttonLength:41,buttonOverlap:11,minimumThumbLength:20,render:function(c,a){var b={},k="",q=this.get("parentView"),h=this.get("layoutDirection"),e,n,g,f,o,m,j,d,p;switch(h){case SC.LAYOUT_VERTICAL:b["sc-vertical"]=YES;break;case SC.LAYOUT_HORIZONTAL:b["sc-horizontal"]=YES;break}b.disabled=!this.get("isEnabled");b["controls-hidden"]=this.get("controlsHidden");c.setClass(b);n=this.get("thumbLength");e=this.get("thumbPosition");if(a){c.push('<div class="track"></div>','<div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,h,n,e);c.attr("aria-orientation","vertical");c.attr("aria-valuemax",this.get("maximum"));c.attr("aria-valuemin",this.get("minimum"));c.attr("aria-valuenow",this.get("value"));c.attr("aria-controls",q.getPath("contentView.layerId"))}else{if(this.get("controlsHidden")){return}f=this.$(".thumb");this.adjustThumb(f,e,n);c.attr("aria-valuenow",this.get("value"))}},renderThumb:function(d,e,b,c){var a;if(e===SC.LAYOUT_HORIZONTAL){a="width: "+b+"px; left: "+c+"px;"}else{a="height: "+b+"px; top: "+c+"px;"}d.push('<div class="thumb" style=%@>'.fmt(a),'<div class="thumb-center"></div>','<div class="thumb-top"></div>','<div class="thumb-bottom"></div></div>')},renderButtons:function(b,a){if(a){b.push('<div class="button-bottom"></div><div class="button-top"></div>')}else{b.push('<div class="endcap"></div>')}},touchScrollDidStart:function(a){this.set("_touchScrollValue",a)},touchScrollDidEnd:function(a){this.set("_touchScrollValue",NO)},touchScrollDidChange:function(a){this.set("_touchScrollValue",a)},adjustThumb:function(b,a,c){this.adjustThumbPosition(b,a);this.adjustThumbSize(b,c)},adjustThumbPosition:function(b,a){if(this._thumbPosition===a){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.css("top",a);break;case SC.LAYOUT_HORIZONTAL:b.css("left",a);break}this._thumbPosition=a},adjustThumbSize:function(a,b){if(this._thumbSize===b){return}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a.css("height",Math.max(b,this.get("minimumThumbLength")));break;case SC.LAYOUT_HORIZONTAL:a.css("width",Math.max(b,this.get("minimumThumbLength")));break}this._thumbSize=b},trackLength:function(){var a=this.get("scrollerLength");a-=this.capLength-this.capOverlap;a-=this.buttonLength-this.buttonOverlap;return a}.property("scrollerLength").cacheable(),scrollerLength:function(){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:return this.get("frame").height;case SC.LAYOUT_HORIZONTAL:return this.get("frame").width}return 0}.property("frame").cacheable(),thumbLength:function(){var a;a=Math.floor(this.get("trackLength")*this.get("proportion"));a=isNaN(a)?0:a;return Math.max(a,this.get("minimumThumbLength"))}.property("trackLength","proportion").cacheable(),thumbPosition:function(){var g=this.get("displayValue"),c=this.get("maximum"),b=this.get("trackLength"),d=this.get("thumbLength"),f=this.get("capLength"),e=this.get("capOverlap"),a;a=(g/c)*(b-d);a+=f-e;return Math.floor(isNaN(a)?0:a)}.property("displayValue","maximum","trackLength","thumbLength").cacheable(),controlsHidden:function(){return this.get("proportion")>=1}.property("proportion").cacheable(),valueForPosition:function(g){var b=this.get("maximum"),a=this.get("trackLength"),c=this.get("thumbLength"),f=this.get("capLength"),d=this.get("capOverlap"),e;e=g-(f-d);e=e/(a-c);e=e*b;return e},mouseDown:function(k){if(!this.get("isEnabled")){return NO}this._altIsDown=k.altKey;this._shiftIsDown=k.shiftKey;var e=k.target,c=this.get("thumbPosition"),j,d,g,f=this.get("scrollerLength");if(e.className.indexOf("thumb")>=0){d=this.convertFrameFromView({x:k.pageX,y:k.pageY});d.x-=c;d.y-=c;this._thumbDragging=YES;this._thumbOffset=d;this._mouseDownLocation={x:k.pageX,y:k.pageY};this._thumbPositionAtDragStart=this.get("thumbPosition");this._valueAtDragStart=this.get("value")}else{if(e.className.indexOf("button-top")>=0){this.decrementProperty("value",(this._altIsDown?f:30));this.makeButtonActive(".button-top");this.startMouseDownTimer("scrollUp");this._isScrollingUp=YES}else{if(e.className.indexOf("button-bottom")>=0){this.incrementProperty("value",(this._altIsDown?f:30));this.makeButtonActive(".button-bottom");this.startMouseDownTimer("scrollDown");this._isScrollingDown=YES}else{var n=this.get("shouldScrollToClick");if(k.altKey){n=!n}var a=this.get("trackLength"),h=this.get("thumbLength"),b=this.convertFrameFromView({x:k.pageX,y:k.pageY}),m;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:this._mouseDownLocation=m=b.y;break;case SC.LAYOUT_HORIZONTAL:this._mouseDownLocation=m=b.x;break}if(n){this.set("value",this.valueForPosition(m-(h/2)));c=this.get("thumbPosition");this._thumbDragging=YES;this._thumbOffset={x:b.x-c,y:b.y-c};this._mouseDownLocation={x:k.pageX,y:k.pageY};this._thumbPositionAtDragStart=c;this._valueAtDragStart=this.get("value")}else{if(m<c){this.decrementProperty("value",f);this.startMouseDownTimer("page")}else{this.incrementProperty("value",f);this.startMouseDownTimer("page")}}}}}return YES},mouseUp:function(a){var c=this._scs_buttonActive,b=NO,d;if(c){c.removeClass("active");b=YES}d=this._mouseDownTimer;if(d){d.invalidate();this._mouseDownTimer=null}this._thumbDragging=NO;this._isScrollingDown=NO;this._isScrollingUp=NO;return b},mouseDragged:function(o){var m,b,n,c,j=o.target,e=this._thumbPositionAtDragStart,g=this._isScrollingUp,q=this._isScrollingDown,d=this._scs_buttonActive,a;if(this._thumbDragging){switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:n=(o.pageY-this._mouseDownLocation.y);break;case SC.LAYOUT_HORIZONTAL:n=(o.pageX-this._mouseDownLocation.x);break}if(o.altKey){if(!this._altIsDown||(this._shiftIsDown!==o.shiftKey)){e=this._thumbPositionAtDragStart=e+n;n=0;this._mouseDownLocation={x:o.pageX,y:o.pageY};this._valueAtDragStart=this.get("value")}if(o.shiftKey){n=-n}this.set("value",Math.round(this._valueAtDragStart+n*2))}else{c=e+n;b=this.get("trackLength")-this.get("thumbLength");this.set("value",Math.round((c/b)*this.get("maximum")))}}else{if(g||q){var p=NO,f=NO;var k=this.$(".button-top")[0].getBoundingClientRect();var h=this.$(".button-bottom")[0].getBoundingClientRect();switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(o.clientY<k.bottom){p=YES}else{f=YES}break;case SC.LAYOUT_HORIZONTAL:if(o.clientX<k.right){p=YES}else{f=YES}break}if((p||f)&&p!==g){if(d){d.removeClass("active")}this._mouseDownTimerAction=p?"scrollUp":"scrollDown";if(p){this.makeButtonActive(".button-top")}else{if(f){this.makeButtonActive(".button-bottom")}}this._isScrollingUp=p;this._isScrollingDown=f}}}this._altIsDown=o.altKey;this._shiftIsDown=o.shiftKey;return YES},startMouseDownTimer:function(b,a){var c;this._mouseDownTimerAction=b;this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:a?0:300})},mouseDownTimerDidFire:function(){var d=this.get("scrollerLength"),a=SC.device.get("mouseLocation"),c=this.get("thumbPosition"),b=this.get("thumbLength"),e=50;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:a=this.convertFrameFromView(a).y;break;case SC.LAYOUT_HORIZONTAL:a=this.convertFrameFromView(a).x;break}switch(this._mouseDownTimerAction){case"scrollDown":this.incrementProperty("value",this._altIsDown?d:30);break;case"scrollUp":this.decrementProperty("value",this._altIsDown?d:30);break;case"page":e=150;if(a<c){this.decrementProperty("value",d)}else{if(a>c+b){this.incrementProperty("value",d)}}}this._mouseDownTimer=SC.Timer.schedule({target:this,action:this.mouseDownTimerDidFire,interval:e})},makeButtonActive:function(a){this._scs_buttonActive=this.$(a).addClass("active")}});SC.TouchScrollerView=SC.ScrollerView.extend({classNames:["sc-touch-scroller-view"],scrollbarThickness:12,capLength:5,capOverlap:0,hasButtons:NO,buttonOverlap:36,adjustThumb:function(d,b,f){var c=this.$(".thumb-inner");var a=this.get("scrollerLength")-this.capLength,e=this.get("minimum")+this.capLength;if(b+f>a){b=Math.min(a-20,b);f=a-b}if(b<e){f-=e-b;b=e}switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:if(this._thumbPosition!==b){d.css("-webkit-transform","translate3d(0px,"+b+"px,0px)")}if(this._thumbSize!==f){c.css("-webkit-transform","translate3d(0px,"+Math.round(f-1044)+"px,0px)")}break;case SC.LAYOUT_HORIZONTAL:if(this._thumbPosition!==b){d.css("-webkit-transform","translate3d("+b+"px,0px,0px)")}if(this._thumbSize!==f){c.css("-webkit-transform","translate3d("+Math.round(f-1044)+"px,0px,0px)")}break}this._thumbPosition=b;this._thumbSize=f},render:function(c,a){var b=[],e,k,g,f,m,j,h,d,n;switch(this.get("layoutDirection")){case SC.LAYOUT_VERTICAL:b.push("sc-vertical");break;case SC.LAYOUT_HORIZONTAL:b.push("sc-horizontal");break}if(!this.get("isEnabled")){b.push("disabled")}if(this.get("controlsHidden")){b.push("controls-hidden")}c.addClass(b);k=this.get("thumbLength");e=this.get("thumbPosition");if(a){c.push('<div class="track"></div><div class="cap"></div>');this.renderButtons(c,this.get("hasButtons"));this.renderThumb(c,this.get("layoutDirection"),k)}else{if(this.get("controlsHidden")){return}f=this.$(".thumb");this.adjustThumb(f,e,k)}},renderThumb:function(b,c,a){a-=1044;c=(c===SC.LAYOUT_HORIZONTAL?"X":"Y");b.push('<div class="thumb"><div class="thumb-top"></div><div class="thumb-clip">'+'<div class="thumb-inner" style="-webkit-transform: translate%@(%@px);">'.fmt(c,a)+'<div class="thumb-center"></div><div class="thumb-bottom"></div></div></div></div>')}});sc_require("views/scroller");SC.NORMAL_SCROLL_DECELERATION=0.95;SC.FAST_SCROLL_DECELERATION=0.85;SC.ScrollView=SC.View.extend({classNames:["sc-scroll-view"],isScrollable:YES,contentView:null,horizontalAlign:SC.ALIGN_LEFT,verticalAlign:SC.ALIGN_TOP,horizontalScrollOffset:function(b,d){if(d!==undefined){var c=this.minimumHorizontalScrollOffset(),a=this.get("maximumHorizontalScrollOffset");this._scroll_horizontalScrollOffset=Math.max(c,Math.min(a,d))}return this._scroll_horizontalScrollOffset||0}.property().cacheable(),verticalScrollOffset:function(b,d){if(d!==undefined){var c=this.get("minimumVerticalScrollOffset"),a=this.get("maximumVerticalScrollOffset");this._scroll_verticalScrollOffset=Math.max(c,Math.min(a,d))}return this._scroll_verticalScrollOffset||0}.property().cacheable(),maximumScrollOffset:function(b,a,c){if(b>=a){return b-a}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},minimumScrollOffset:function(b,a,c){if(b>a){return 0}if(c===SC.ALIGN_LEFT||c===SC.ALIGN_TOP){return 0}else{if(c===SC.ALIGN_MIDDLE||c===SC.ALIGN_CENTER){return 0-Math.round((a-b)/2)}else{return 0-(a-b)}}},maximumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=c.calculatedWidth}b*=this._scale;var d=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,d)}return this.maximumScrollOffset(b,d,this.get("horizontalAlign"))}.property(),maximumVerticalScrollOffset:function(){var a=this.get("contentView"),c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=b}c*=this._scale;var d=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,d)}return this.maximumScrollOffset(c,d,this.get("verticalAlign"))}.property(),minimumHorizontalScrollOffset:function(){var c=this.get("contentView");var b=c?c.get("frame").width:0,a=c?c.get("calculatedWidth"):0;if(a){b=a}b*=this._scale;var d=this.get("containerView").get("frame").width;if(!this.get("canScrollHorizontal")){b=Math.min(b,d)}return this.minimumScrollOffset(b,d,this.get("horizontalAlign"))}.property(),minimumVerticalScrollOffset:function(){var a=this.get("contentView");var c=(a&&a.get("frame"))?a.get("frame").height:0,b=a?a.get("calculatedHeight"):0;if(b){c=a.calculatedHeight}c*=this._scale;var d=this.get("containerView").get("frame").height;if(!this.get("canScrollVertical")){c=Math.min(c,d)}return this.minimumScrollOffset(c,d,this.get("verticalAlign"))}.property(),verticalLineScroll:20,horizontalLineScroll:20,verticalPageScroll:function(){return this.get("frame").height}.property("frame"),horizontalPageScroll:function(){return this.get("frame").width}.property("frame"),hasHorizontalScroller:YES,horizontalScrollerView:SC.ScrollerView,horizontalTouchScrollerView:SC.TouchScrollerView,isHorizontalScrollerVisible:YES,canScrollHorizontal:function(){return !!(this.get("hasHorizontalScroller")&&this.get("horizontalScrollerView")&&this.get("isHorizontalScrollerVisible"))}.property("isHorizontalScrollerVisible").cacheable(),autohidesHorizontalScroller:YES,hasVerticalScroller:YES,verticalScrollerView:SC.ScrollerView,verticalTouchScrollerView:SC.TouchScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:function(){return !!(this.get("hasVerticalScroller")&&this.get("verticalScrollerView")&&this.get("isVerticalScrollerVisible"))}.property("isVerticalScrollerVisible").cacheable(),autohidesVerticalScroller:YES,verticalScrollerBottom:0,verticalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),horizontalOverlay:function(){if(SC.platform.touch){return YES}return NO}.property().cacheable(),verticalScrollerLayout:null,horizontalScrollerLayout:null,containerView:SC.ContainerView.extend({}),scrollTo:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}if(!SC.none(a)){this.set("horizontalScrollOffset",a)}if(!SC.none(b)){this.set("verticalScrollOffset",b)}return this},scrollBy:function(a,b){if(b===undefined&&SC.typeOf(a)===SC.T_HASH){b=a.y;a=a.x}a=(a)?this.get("horizontalScrollOffset")+a:null;b=(b)?this.get("verticalScrollOffset")+b:null;return this.scrollTo(a,b)},scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var c=this.get("contentView");if(!c){return NO}var a=b.get("frame");if(!a){return NO}a=c.convertFrameFromView(a,b.get("parentView"));return this.scrollToRect(a)},scrollToRect:function(b){var a=SC.cloneRect(this.get("containerView").get("frame"));a.x=this.get("horizontalScrollOffset");a.y=this.get("verticalScrollOffset");var d=a.x,c=a.y;a.y-=Math.max(0,SC.minY(a)-SC.minY(b));a.x-=Math.max(0,SC.minX(a)-SC.minX(b));a.y+=Math.max(0,SC.maxY(b)-SC.maxY(a));a.x+=Math.max(0,SC.maxX(b)-SC.maxX(a));if((d!==a.x)||(c!==a.y)){this.scrollTo(a.x,a.y);return YES}else{return NO}},scrollDownLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalLineScroll")*a)},scrollUpLine:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-this.get("verticalLineScroll")*a)},scrollRightLine:function(a){if(a===undefined){a=1}return this.scrollTo(this.get("horizontalLineScroll")*a,null)},scrollLeftLine:function(a){if(a===undefined){a=1}return this.scrollTo(0-this.get("horizontalLineScroll")*a,null)},scrollDownPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,this.get("verticalPageScroll")*a)},scrollUpPage:function(a){if(a===undefined){a=1}return this.scrollBy(null,0-(this.get("verticalPageScroll")*a))},scrollRightPage:function(a){if(a===undefined){a=1}return this.scrollBy(this.get("horizontalPageScroll")*a,null)},scrollLeftPage:function(a){if(a===undefined){a=1}return this.scrollBy(0-(this.get("horizontalPageScroll")*a),null)},tile:function(){var c=this.get("hasHorizontalScroller")?this.get("horizontalScrollerView"):null;var h=c&&this.get("isHorizontalScrollerVisible");var k=this.get("hasVerticalScroller")?this.get("verticalScrollerView"):null;var f=k&&this.get("isVerticalScrollerVisible");var e=this.get("containerView");var o={left:0,top:0};var n,g,b,p,d,a;var j=((h)?c.get("scrollbarThickness"):0);var m=(f)?k.get("scrollbarThickness"):0;if(h){a=this.get("horizontalScrollerLayout");g={left:(a?a.left:0),bottom:(a?a.bottom:0),right:(a?a.right+m-1:m-1),height:j};c.set("layout",g);p=this.get("horizontalOverlay");o.bottom=p?0:(g.bottom+j)}else{o.bottom=0}if(c){c.set("isVisible",h)}if(f){j=j+this.get("verticalScrollerBottom");d=this.get("verticalScrollerLayout");g={top:(d?d.top:0),bottom:(d?d.bottom+j:j),right:(d?d.right:0),width:m};k.set("layout",g);b=this.get("verticalOverlay");o.right=b?0:(g.right+m)}else{o.right=0}if(k){k.set("isVisible",f)}e.adjust(o)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible"),_scroll_wheelDeltaX:0,_scroll_wheelDeltaY:0,mouseWheel:function(a){this._scroll_wheelDeltaX+=a.wheelDeltaX;this._scroll_wheelDeltaY+=a.wheelDeltaY;this.invokeLater(this._scroll_mouseWheel,10);return this.get("canScrollHorizontal")||this.get("canScrollVertical")},_scroll_mouseWheel:function(){this.scrollBy(this._scroll_wheelDeltaX,this._scroll_wheelDeltaY);if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY>0){this._scroll_wheelDeltaY=Math.floor(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.max(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{if(SC.WHEEL_MOMENTUM&&this._scroll_wheelDeltaY<0){this._scroll_wheelDeltaY=Math.ceil(this._scroll_wheelDeltaY*0.95);this._scroll_wheelDeltaY=Math.min(this._scroll_wheelDeltaY,0);this.invokeLater(this._scroll_mouseWheel,10)}else{this._scroll_wheelDeltaY=0;this._scroll_wheelDeltaX=0}}},canScale:NO,_scale:1,scale:function(a,b){if(b!==undefined){this._scale=Math.min(Math.max(this.get("minimumScale"),b),this.get("maximumScale"))}return this._scale}.property().cacheable(),minimumScale:0.25,maximumScale:2,autoScaleRange:NO,_scale_css:"",updateScale:function(b){var a=this.get("contentView");if(!a){return}if(a.isScalable){this.get("contentView").applyScale(b);this._scale_css=""}else{this._scale_css="scale3d("+b+", "+b+", 1)"}},acceptsMultitouch:YES,decelerationRate:SC.NORMAL_SCROLL_DECELERATION,alwaysBounceHorizontal:NO,alwaysBounceVertical:YES,delaysContentTouches:YES,_touchScrollDidChange:function(){if(this.get("contentView").touchScrollDidChange){this.get("contentView").touchScrollDidChange(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidChange){this.verticalScrollerView.touchScrollDidChange(this._scroll_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidChange){this.horizontalScrollerView.touchScrollDidChange(this._scroll_horizontalScrollOffset)}},_touchScrollDidStart:function(){if(this.get("contentView").touchScrollDidStart){this.get("contentView").touchScrollDidStart(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidStart){this.verticalScrollerView.touchScrollDidStart(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidStart){this.horizontalScrollerView.touchScrollDidStart(this._touch_horizontalScrollOffset)}},_touchScrollDidEnd:function(){if(this.get("contentView").touchScrollDidEnd){this.get("contentView").touchScrollDidEnd(this._scroll_horizontalScrollOffset,this._scroll_verticalScrollOffset)}if(this.verticalScrollerView&&this.verticalScrollerView.touchScrollDidEnd){this.verticalScrollerView.touchScrollDidEnd(this._touch_verticalScrollOffset)}if(this.horizontalScrollerView&&this.horizontalScrollerView.touchScrollDidEnd){this.horizontalScrollerView.touchScrollDidEnd(this._touch_horizontalScrollOffset)}},_applyCSSTransforms:function(b){var a="";this.updateScale(this._scale);a+="translate3d("+-this._scroll_horizontalScrollOffset+"px, "+-Math.round(this._scroll_verticalScrollOffset)+"px,0) ";a+=this._scale_css;if(b){var c=b.style;c.webkitTransform=a;c.webkitTransformOrigin="top left"}},captureTouch:function(a){return YES},touchGeneration:0,touchStart:function(b){var a=++this.touchGeneration;if(!this.tracking&&this.get("delaysContentTouches")){this.invokeLater(this.beginTouchesInContent,150,a)}else{if(!this.tracking){this.invokeLater(this.beginTouchesInContent,1,a)}}this.beginTouchTracking(b,YES);return YES},beginTouchesInContent:function(b){if(b!==this.touchGeneration){return}var c=this.touch,a;if(c&&this.tracking&&!this.dragging&&!c.touch.scrollHasEnded){c.touch.captureTouch(this,YES);if(!c.touch.touchResponder){c.touch.makeTouchResponder(this)}else{if(c.needsScrollEnd){this._touchScrollDidEnd()}}}},beginTouchTracking:function(f,s){var r=f.averagedTouchesForView(this,s);var k=this._scroll_verticalScrollOffset||0,a=this._scroll_horizontalScrollOffset||0,n=a,m=k,e=NO,q=0,t=0,p,j;if(this.touch&&this.touch.timeout){clearTimeout(this.touch.timeout);this.touch.timeout=null;n=this.touch.startClipOffset.x;m=this.touch.startClipOffset.y;e=YES}j=this.get("contentView");if(j){p=j.get("frame");q=p.width;t=p.height}if(j.calculatedWidth&&j.calculatedWidth!==0){q=j.calculatedWidth}if(j.calculatedHeight&&j.calculatedHeight!==0){t=j.calculatedHeight}var g=this.get("containerView").get("frame"),h=g.width,o=g.height;var b=this.convertFrameToView(this.get("frame"),null),d=(a+(r.x-b.x))/this._scale,c=(k+(r.y-b.y))/this._scale;this.touch={startTime:f.timeStamp,notCalculated:YES,enableScrolling:{x:q*this._scale>h||this.get("alwaysBounceHorizontal"),y:t*this._scale>o||this.get("alwaysBounceVertical")},scrolling:{x:NO,y:NO},enableBouncing:SC.platform.bounceOnScroll,startClipOffset:{x:n,y:m},lastScrollOffset:{x:a,y:k},startTouchOffset:{x:r.x,y:r.y},scrollVelocity:{x:0,y:0},startTouchOffsetInContent:{x:d,y:c},containerSize:{width:h,height:o},contentSize:{width:q,height:t},startScale:this._scale,startDistance:r.d,canScale:this.get("canScale")&&SC.platform.pinchToZoom,minimumScale:this.get("minimumScale"),maximumScale:this.get("maximumScale"),globalFrame:b,layer:j.get("layer"),resistanceCoefficient:0.998,resistanceAsymptote:320,decelerationFromEdge:0.05,accelerationToEdge:0.1,scrollTolerance:{x:15,y:15},scaleTolerance:5,secondaryScrollTolerance:30,scrollLock:500,decelerationRate:this.get("decelerationRate"),lastEventTime:f.timeStamp,touch:(s?f:(this.touch?this.touch.touch:null)),needsScrollEnd:e};if(!this.tracking){this.tracking=YES;this.dragging=NO}},_adjustForEdgeResistance:function(f,d,b,c,a){var e;if(f<d){e=f-d}else{if(f>b){e=b-f}else{return f}}e=Math.pow(c,Math.abs(e))*a;if(f<d){e=e-a}else{e=-e+a}return Math.min(Math.max(d,f),b)+e},touchesDragged:function(a,c){var b=a.averagedTouchesForView(this);this.updateTouchScroll(b.x,b.y,b.d,a.timeStamp)},updateTouchScroll:function(m,k,e,h){var g=this.touch,a=m-g.globalFrame.x,o=k-g.globalFrame.y,x,p,y,q,E,C,c=g.scrolling,t=this.get("horizontalAlign"),n=this.get("verticalAlign");var d=((this._scroll_horizontalScrollOffset||0)+a)/this._scale,b=((this._scroll_verticalScrollOffset||0)+o)/this._scale;var B=d-g.startTouchOffset.x,A=b-g.startTouchOffset.y;var j=g.dragging;if(!c.x&&Math.abs(B)>g.scrollTolerance.x&&g.enableScrolling.x){j=YES;c.x=YES;g.scrollTolerance.y=g.secondaryScrollTolerance;g.startTouchOffset.x=m;B=0}if(!c.y&&Math.abs(A)>g.scrollTolerance.y&&g.enableScrolling.y){j=YES;c.y=YES;g.scrollTolerance.x=g.secondaryScrollTolerance;g.startTouchOffset.y=k;A=0}if(j&&!g.dragging){g.dragging=YES;this.dragging=YES;this._touchScrollDidStart()}if(!c.x&&!c.y&&!g.canScale){return}if(c.x&&!c.y){if(B>g.scrollLock&&!c.y){g.enableScrolling.y=NO}}if(c.y&&!c.x){if(A>g.scrollLock&&!c.x){g.enableScrolling.x=NO}}if(g.canScale){var s=g.startDistance,z=e-s;if(Math.abs(z)>g.scaleTolerance){c.y=YES;c.x=YES;var D=g.startScale*(e/Math.max(s,50));var u=this._adjustForEdgeResistance(D,g.minimumScale,g.maximumScale,g.resistanceCoefficient,g.resistanceAsymptote);this.dragging=YES;this._scale=u;var w=d*this._scale,v=b*this._scale}}E=this.minimumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,t);C=this.minimumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,n);q=this.maximumScrollOffset(g.contentSize.width*this._scale,g.containerSize.width,t);p=this.maximumScrollOffset(g.contentSize.height*this._scale,g.containerSize.height,n);y=g.startTouchOffsetInContent.x*this._scale-a;x=g.startTouchOffsetInContent.y*this._scale-o;if(g.enableBouncing){y=this._adjustForEdgeResistance(y,E,q,g.resistanceCoefficient,g.resistanceAsymptote);x=this._adjustForEdgeResistance(x,C,p,g.resistanceCoefficient,g.resistanceAsymptote)}else{y=Math.max(E,Math.min(q,y));x=Math.max(C,Math.min(p,x))}if(c.x){this._scroll_horizontalScrollOffset=y}if(c.y){this._scroll_verticalScrollOffset=x}this._applyCSSTransforms(g.layer);this._touchScrollDidChange();if(h-g.lastEventTime>=1||g.notCalculated){g.notCalculated=NO;var f=this._scroll_horizontalScrollOffset;var r=this._scroll_verticalScrollOffset;g.scrollVelocity.x=((f-g.lastScrollOffset.x)/Math.max(1,h-g.lastEventTime));g.scrollVelocity.y=((r-g.lastScrollOffset.y)/Math.max(1,h-g.lastEventTime));g.lastScrollOffset.x=f;g.lastScrollOffset.y=r;g.lastEventTime=h}},touchEnd:function(c){var a=this.touch,b=c.averagedTouchesForView(this);c.scrollHasEnded=YES;if(b.touchCount>0){this.beginTouchTracking(c,NO)}else{if(this.dragging){a.dragging=NO;a.lastEventTime=c.timeStamp;this.startDecelerationAnimation()}else{if(a.needsScrollEnd){this._touchScrollDidEnd()}c.captureTouch(this,YES);if(c.touchResponder&&c.touchResponder!==this){c.end()}else{if(!c.touchResponder||c.touchResponder===this){if(c.nextTouchResponder){c.makeTouchResponder(c.nextTouchResponder)}}else{}}this.touch=null}this.tracking=NO;this.dragging=NO}},touchCancelled:function(c){var a=this.touch,b=c.averagedTouchesForView(this);if(!this.touch||!this.touch.timeout){this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();this.tracking=NO;if(this.dragging){this._touchScrollDidEnd()}this.dragging=NO;this.touch=null}},startDecelerationAnimation:function(a){var b=this.touch;b.decelerationVelocity={x:b.scrollVelocity.x*10,y:b.scrollVelocity.y*10};this.decelerateAnimation()},bouncyBounce:function(c,e,d,f,g,b,a){if(e<d){if(c<0){c=c+((d-e)*g)}else{c=Math.min((d-e)*b+a,d-e-0.01)}}else{if(e>f){if(c>0){c=c-((e-f)*g)}else{c=-Math.min((e-f)*b+a,e-f-0.01)}}}return c},decelerateAnimation:function(){var c=this.touch,A=this._scale,p=c.contentSize,q=c.containerSize,o=this.get("horizontalAlign"),e=this.get("verticalAlign"),z=this.minimumScrollOffset(p.width*this._scale,q.width,o),y=this.minimumScrollOffset(p.height*this._scale,q.height,e),j=this.maximumScrollOffset(p.width*this._scale,q.width,o),h=this.maximumScrollOffset(p.height*this._scale,q.height,e),a=Date.now(),f=Math.max(a-c.lastEventTime,1),v=this._scroll_horizontalScrollOffset+c.decelerationVelocity.x*(f/10),s=this._scroll_verticalScrollOffset+c.decelerationVelocity.y*(f/10);var u=c.decelerationFromEdge,w=c.accelerationToEdge;var n=!c.enableBouncing,m=!c.enableBouncing;if(v>=z&&v<=j){n=YES}if(s>=y&&s<=h){m=YES}v/=this._scale;s/=this._scale;var k=0;k=this.bouncyBounce(k,A,c.minimumScale,c.maximumScale,u,w,0);this._scale=A=A+k;v*=this._scale;s*=this._scale;z=this.minimumScrollOffset(p.width*this._scale,q.width,o);y=this.minimumScrollOffset(p.height*this._scale,q.height,e);j=this.maximumScrollOffset(p.width*this._scale,q.width,o);h=this.maximumScrollOffset(p.height*this._scale,q.height,e);if(n&&(v<z||v>j)){v=Math.max(z,Math.min(v,j));c.decelerationVelocity.x=0}if(m&&(s<y||s>h)){s=Math.max(y,Math.min(s,h));c.decelerationVelocity.y=0}this._scroll_horizontalScrollOffset=v;this._scroll_verticalScrollOffset=s;this._applyCSSTransforms(c.layer);this._touchScrollDidChange();var x=c.decelerationRate,b=Math.pow(x,(f/10));c.decelerationVelocity.y*=b;c.decelerationVelocity.x*=b;c.decelerationVelocity.x=this.bouncyBounce(c.decelerationVelocity.x,v,z,j,u,w,0.3);c.decelerationVelocity.y=this.bouncyBounce(c.decelerationVelocity.y,s,y,h,u,w,0.3);var r=Math.abs(c.decelerationVelocity.x),d=Math.abs(c.decelerationVelocity.y);if(d<0.05&&r<0.05&&Math.abs(k)<0.05){c.timeout=null;this.touch=null;this._touchScrollDidEnd();this.beginPropertyChanges();this.set("scale",this._scale);this.set("verticalScrollOffset",this._scroll_verticalScrollOffset);this.set("horizontalScrollOffset",this._scroll_horizontalScrollOffset);this.endPropertyChanges();return}var g=this;c.lastEventTime=Date.now();this.touch.timeout=setTimeout(function(){SC.run(g.decelerateAnimation(),g)},30)},createChildViews:function(){var b=[],a;if(SC.none(a=this.containerView)){a=SC.ContainerView}b.push(this.containerView=this.createChildView(a,{contentView:this.contentView,isScrollContainer:YES}));this.contentView=this.containerView.get("contentView");a=SC.platform.touch?this.get("horizontalTouchScrollerView"):this.get("horizontalScrollerView");if(a){if(this.get("hasHorizontalScroller")){a=this.horizontalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_HORIZONTAL,valueBinding:"*owner.horizontalScrollOffset"});b.push(a)}else{this.horizontalScrollerView=null}}a=SC.platform.touch?this.get("verticalTouchScrollerView"):this.get("verticalScrollerView");if(a){if(this.get("hasVerticalScroller")){a=this.verticalScrollerView=this.createChildView(a,{layoutDirection:SC.LAYOUT_VERTICAL,valueBinding:"*owner.verticalScrollOffset"});b.push(a)}else{this.verticalScrollerView=null}}this.childViews=b;this.contentViewDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange);a.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.addObserver("calculatedHeight",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewDidChange:function(){var d=this.get("contentView"),a=this._scroll_contentView,b=this.contentViewFrameDidChange,c=this.contentViewLayerDidChange;if(d!==a){if(a){a.removeObserver("calculatedWidth",this,this.contentViewFrameDidChange);a.removeObserver("calculatedHeight",this,this.contentViewFrameDidChange);a.removeObserver("frame",this,b);a.removeObserver("layer",this,c)}this._scroll_contentView=d;if(d){d.addObserver("frame",this,b);d.addObserver("calculatedWidth",this,this.contentViewFrameDidChange);d.addObserver("calculatedHeight",this,this.contentViewFrameDidChange);d.addObserver("layer",this,c)}this.containerView.set("contentView",d);this.contentViewFrameDidChange()}}.observes("contentView"),render:function(a,b){this.invokeLast(this.adjustElementScroll);if(b){a.push('<div class="corner"></div>')}return arguments.callee.base.apply(this,arguments)},oldMaxHOffset:0,oldMaxVOffset:0,contentViewFrameDidChange:function(b){var q=this.get("contentView"),n=(q)?q.get("frame"):null,h=this._scale,c=0,s=0,k,j,o,t,p;if(!q||!n){return}c=q.get("calculatedWidth")||n.width||0;s=q.get("calculatedHeight")||n.height||0;c*=h;s*=h;if(!b&&(c===this._scroll_contentWidth)&&(s===this._scroll_contentHeight)){return}this._scroll_contentWidth=c;this._scroll_contentHeight=s;k=this.getPath("containerView.frame");j=k.width;o=k.height;if(this.get("hasHorizontalScroller")&&(q=this.get("horizontalScrollerView"))){if(this.get("autohidesHorizontalScroller")){this.set("isHorizontalScrollerVisible",c>j)}q.setIfChanged("maximum",c-j);q.setIfChanged("proportion",j/c)}if(this.get("hasVerticalScroller")&&(q=this.get("verticalScrollerView"))){if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",s>o)}q.setIfChanged("maximum",s-o);q.setIfChanged("proportion",o/s)}if(!this.get("isVerticalScrollerVisible")&&(this.get("verticalScrollOffset")!==0)&&this.get("autohidesVerticalScroller")){this.set("verticalScrollOffset",0)}if(!this.get("isHorizontalScrollerVisible")&&(this.get("horizontalScrollOffset")!==0)&&this.get("autohidesHorizontalScroller")){this.set("horizontalScrollOffset",0)}var r=this.get("maximumVerticalScrollOffset"),m=this.get("verticalScrollOffset"),g=this.get("maximumHorizontalScrollOffset"),a=this.get("horizontalScrollOffset"),e=r<m,d=g<a;if(e||d){this.forceDimensionsRecalculation(d,e,m,a)}this.notifyPropertyChange("maximumVerticalScrollOffset");this.notifyPropertyChange("maximumHorizontalScrollOffset")},frameDidChange:function(){this.contentViewFrameDidChange(YES)}.observes("frame"),contentViewLayerDidChange:function(){if(this._verticalScrollOffset!==0){this._verticalScrollOffset=-1}if(this._horizontalScrollOffset!==0){this._horizontalScrollOffset=-1}this.invokeLast(this.adjustElementScroll)},_scroll_horizontalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("horizontalScrollOffset"),_scroll_verticalScrollOffsetDidChange:function(){this.invokeLast(this.adjustElementScroll)}.observes("verticalScrollOffset"),adjustElementScroll:function(){var a=this.get("containerView"),d=this.get("contentView"),c=this.get("verticalScrollOffset"),b=this.get("horizontalScrollOffset");if(d){if(SC.platform.touch){this._applyCSSTransforms(d.get("layer"))}if(d._viewFrameDidChange){d._viewFrameDidChange()}}if(a&&!SC.platform.touch){a=a.$()[0];if(a){if(c!==this._verticalScrollOffset){a.scrollTop=c;this._verticalScrollOffset=c}if(b!==this._horizontalScrollOffset){a.scrollLeft=b;this._horizontalScrollOffset=b}}}},forceDimensionsRecalculation:function(b,c,e,a){var f=a;var d=e;this.scrollTo(0,0);if(b&&c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),this.get("maximumVerticalScrollOffset"))}if(b&&!c){this.scrollTo(this.get("maximumHorizontalScrollOffset"),d)}if(!b&&c){this.scrollTo(f,this.get("maximumVerticalScrollOffset"))}},_scroll_verticalScrollOffset:0,_scroll_horizontalScrollOffset:0});sc_require("views/scroll");SC.MenuScrollerView=SC.ScrollerView.extend({classNames:["sc-menu-scroller-view"],scrollDown:NO,value:function(a,c){if(c!==undefined){this._value=c}else{var b=this._value||0;return Math.min(b,this.get("maximum"))}}.property("maximum").cacheable(),maximum:0,isEnabled:YES,layoutDirection:SC.LAYOUT_VERTICAL,verticalLineScroll:20,ownerScrollValueKey:function(){return"verticalScrollOffset"}.property("layoutDirection").cacheable(),init:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.TINY_SCROLLER_THICKNESS);break;case SC.SMALL_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS);break;case SC.REGULAR_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS);break;case SC.LARGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS);break;case SC.HUGE_CONTROL_SIZE:this.set("scrollerThickness",SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS);break}return arguments.callee.base.apply(this,arguments)},render:function(a,c){a.addClass("sc-vertical");a.addClass(this.get("controlSize"));if(c){var b=this.get("scrollDown")?"arrowDown":"arrowUp";a.push('<span class="scrollArrow '+b+'">&nbsp;</span>')}a.setClass("disabled",!this.get("isEnabled"))},didCreateLayer:function(){},willDestroyLayer:function(){var a=this._sc_scroller_scrollDidChange;SC.Event.remove(this.$(),"scroll",this,a)},mouseEntered:function(a){this.set("isMouseOver",YES);this._invokeScrollOnMouseOver()},mouseExited:function(a){this.set("isMouseOver",NO)},_sc_scroller_valueDidChange:function(){}.observes("value"),_sc_scroller_armScrollTimer:function(){if(!this._sc_scrollTimer){SC.RunLoop.begin();var a=this._sc_scroller_scrollDidChange;this._sc_scrollTimer=this.invokeLater(a,50);SC.RunLoop.end()}},_sc_scroller_scrollDidChange:function(){var b=Date.now(),d=this._sc_lastScroll,c=this.get("layer"),a=0;if(d&&(b-d)<50){return this._sc_scroller_armScrollTimer()}this._sc_scrollTimer=null;this._sc_lastScroll=b;SC.RunLoop.begin();if(!this.get("isEnabled")){return}this._sc_scrollValue=a=c.scrollTop;this.set("value",a);SC.RunLoop.end()},_scrollMenu:function(){var b=this.get("value"),a;if(this.get("scrollDown")){a=b+this.verticalLineScroll;if(a<=this.get("maximum")){this.set("value",a)}}else{a=b-this.verticalLineScroll;if(a>=0){this.set("value",a)}else{if(b<=this.verticalLineScroll&&b>0){this.set("value",0)}}}return YES},_invokeScrollOnMouseOver:function(){this._scrollMenu();if(this.get("isMouseOver")){this.invokeLater(this._invokeScrollOnMouseOver,50)}}});SC.MenuScrollerView.REGULAR_SCROLLER_THICKNESS=18;SC.MenuScrollerView.TINY_SCROLLER_THICKNESS=10;SC.MenuScrollerView.SMALL_SCROLLER_THICKNESS=14;SC.MenuScrollerView.LARGE_SCROLLER_THICKNESS=23;SC.MenuScrollerView.HUGE_SCROLLER_THICKNESS=26;SC.MenuScrollView=SC.ScrollView.extend({classNames:["sc-menu-scroll-view"],maximumHorizontalScrollOffset:0,hasHorizontalScroller:NO,horizontalScrollerView:SC.MenuScrollerView,isHorizontalScrollerVisible:NO,canScrollHorizontal:NO,autohidesHorizontalScroller:NO,hasVerticalScroller:YES,verticalScrollerView:SC.MenuScrollerView,verticalScrollerView2:SC.MenuScrollerView,isVerticalScrollerVisible:YES,canScrollVertical:YES,autohidesVerticalScroller:YES,verticalScrollerBottom:0,controlSize:SC.REGULAR_CONTROL_SIZE,containerView:SC.ContainerView,scrollToVisible:function(b){if(arguments.length===0){return arguments.callee.base.apply(this,arguments)}var e=this.get("contentView");if(!e){return NO}var a=b.get("frame");if(!a){return NO}a=e.convertFrameFromView(a,b.get("parentView"));var c=this.get("verticalScrollerView2");if(c&&c.get("isVisible")){a.height+=c.get("frame").height}var d=this.get("verticalScrollerView");if(d&&d.get("isVisible")){a.top-=d.get("frame").height}return this.scrollToRect(a)},tile:function(){var g,u,h,b,s,j,c;g=this.get("hasVerticalScroller");u=g?this.get("verticalScrollerView"):null;h=g?this.get("verticalScrollerView2"):null;b=u&&this.get("isVerticalScrollerVisible");s=this.get("containerView");j={left:0,top:0};if(b){c=0;var a=u.get("scrollerThickness")||h.get("scrollerThickness");var k=this.get("contentView"),q,r=(k)?k.get("frame"):null,m=(r)?r.height:0,t=this.containerView.$()[0],n=this.get("verticalScrollOffset"),e={height:0,top:0,right:0,left:0},p={height:a,top:0,right:0,left:0},d={height:a,bottom:0,right:0,left:0},o={height:0,bottom:0,right:0,left:0};if(t){c=t.offsetHeight}if(n===0){j.top=0;j.bottom=a;u.set("layout",e);h.set("layout",d)}else{if(n>=(m-c-a)){j.top=a;j.bottom=0;u.set("layout",p);h.set("layout",o)}else{j.top=a;j.bottom=a;u.set("layout",p);h.set("layout",d)}}}if(u){u.set("isVisible",b);h.set("isVisible",b)}s.set("layout",j)},scrollerVisibilityDidChange:function(){this.tile()}.observes("isVerticalScrollerVisible","isHorizontalScrollerVisible","verticalScrollOffset"),createChildViews:function(){var c=[],b,a,d=this.get("controlSize");if(SC.none(b=this.containerView)){b=SC.ContainerView}c.push(this.containerView=this.createChildView(b,{contentView:this.contentView}));this.contentView=this.containerView.get("contentView");if((b=this.verticalScrollerView)&&(a=this.verticalScrollerView2)){if(this.get("hasVerticalScroller")){b=this.verticalScrollerView=this.createChildView(b,{layout:{top:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});c.push(b);a=this.verticalScrollerView2=this.createChildView(a,{scrollDown:YES,layout:{bottom:0,left:0,right:0},controlSize:d,valueBinding:"*owner.verticalScrollOffset"});c.push(a)}else{this.verticalScrollerView=null;this.verticalScrollerView2=null}}this.childViews=c;this.contentViewFrameDidChange();this.tile()},init:function(){arguments.callee.base.apply(this,arguments);this._scroll_contentView=this.get("contentView");var a=this._scroll_contentView;if(a){a.addObserver("frame",this,this.contentViewFrameDidChange)}if(this.get("isVisibleInWindow")){this._scsv_registerAutoscroll()}},_scsv_registerAutoscroll:function(){if(this.get("isVisibleInWindow")){SC.Drag.addScrollableView(this)}else{SC.Drag.removeScrollableView(this)}}.observes("isVisibleInWindow"),contentViewFrameDidChange:function(){var c=this.get("contentView"),b,h=(c)?c.get("frame"):null,e=(h)?h.width:0,a=(h)?h.height:0,j=this.get("frame"),d,g;this._scroll_contentWidth=e;this._scroll_contentHeight=a;if(this.get("hasVerticalScroller")&&(c=this.get("verticalScrollerView"))&&(b=this.get("verticalScrollerView2"))){a-=1;if(this.get("autohidesVerticalScroller")){this.set("isVerticalScrollerVisible",a>j.height)}a-=this.get("verticalScrollerBottom");d=0;g=this.containerView.$()[0];if(g){d=g.offsetHeight}a=a-d;c.setIfChanged("maximum",a);b.setIfChanged("maximum",a)}},_scroll_horizontalScrollOffsetDidChange:function(){},_scroll_verticalScrollOffsetDidChange:function(){var b=this.get("verticalScrollOffset");var a=this.get("contentView");if(a){a.$().css("top",(0-b)+"px")}}.observes("verticalScrollOffset")});sc_require("views/workspace");SC.TO_LEFT="TOLEFT";SC.TO_RIGHT="TORIGHT";SC.NavigationView=SC.WorkspaceView.extend({_views:null,_current:null,navigationContentView:SC.View,init:function(){arguments.callee.base.apply(this,arguments);this._views=[]},createChildViews:function(){arguments.callee.base.apply(this,arguments);var a=this.get("navigationContentView");if(a.isClass){a=this.createChildView(a)}this._defaultContent=this.navigationContentView=a;this.contentView.appendChild(a)},changeNavigationContent:function(a){var c=null,b=null;if(a){c=a.get("topToolbar");b=a.get("bottomToolbar")}if(c&&c.isClass){a.set("topToolbar",c=c.create())}if(b&&b.isClass){a.set("bottomToolbar",b=b.create())}this.beginPropertyChanges();this._current=a;this.set("navigationContentView",a?a:this._defaultContent);this.set("topToolbar",c);this.set("bottomToolbar",b);this.endPropertyChanges()},push:function(a){this._currentDirection=this._current?SC.TO_LEFT:null;if(this._current){this._views.push(this._current)}this.changeNavigationContent(a)},pop:function(){this._currentDirection=SC.TO_RIGHT;var a=this._views.pop();this.changeNavigationContent(a)},popToView:function(b){this._currentDirection=SC.TO_RIGHT;var d=this._views,a=d.length-1,c=d[a];while(c&&c!==b){this._views.pop();a--;c=d[a]}this.changeNavigationContent(c)},topToolbarDidChange:function(){var b=this.activeTopToolbar,a=this.get("topToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeTopToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),bottomToolbarDidChange:function(){var b=this.activeBottomToolbar,a=this.get("bottomToolbar");if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.buildOutChild(b)}else{this.removeChild(b)}}if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.buildInChild(a)}else{this.appendChild(a)}}this.activeBottomToolbar=a;this.invokeOnce("childDidChange")}.observes("topToolbar"),contentViewDidChange:function(){var b=this.activeNavigationContentView,a=this.get("navigationContentView");if(!a.isNavigationBuilder){a.mixin(SC.NavigationBuilder)}this._pendingBuildOut=b;this._pendingBuildIn=a;this.activeNavigationContentView=a;this.invokeOnce("childDidChange")}.observes("navigationContentView"),childDidChange:function(){var a=this._pendingBuildIn,b=this._pendingBuildOut;if(b){if(this._currentDirection!==null){b.set("buildDirection",this._currentDirection);this.contentView.buildOutChild(b)}else{this.contentView.removeChild(b)}}this._scws_tile();if(a){if(this._currentDirection!==null){a.set("buildDirection",this._currentDirection);this.contentView.buildInChild(a)}else{this.contentView.appendChild(a)}}}});sc_require("views/toolbar");SC.NavigationBarView=SC.ToolbarView.extend(SC.Gesturable,{init:function(){arguments.callee.base.apply(this,arguments);if(!SC.Animatable){SC.Logger.error("NavigationBarView requires SC.Animatable. Please make your app or framework require the animation framework. CRASH.")}},mixinAnimatable:function(){this.mixin(SC.Animatable);this.transitions=this.navigationTransitions},navigationTransitions:{opacity:{duration:0.25,action:"didFinishTransition"}},style:{opacity:1},gestures:["swipeGesture"],swipeGesture:SC.SwipeGesture,swipe:function(d,h,f){var e=(f===SC.SWIPE_LEFT)?"isSwipeLeft":"isSwipeRight",c=this.get("childViews"),g,b,a=c.get("length");for(b=0;b<a;b++){g=c[b];if(g.get(e)){h.makeTouchResponder(g);h.end();return}}},resetBuild:function(){if(!this.isAnimatable){this.mixinAnimatable()}},didFinishTransition:function(){if(this.isBuildingIn){this.buildInDidFinish()}else{if(this.isBuildingOut){this.buildOutDidFinish()}}},preBuildIn:function(){this.disableAnimation();this.adjust("opacity",0).updateLayout();this.enableAnimation();var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}if(!d._nv_mixedIn){this.mixinNavigationChild(d)}d.disableAnimation();d.transform(this.buildDirection===SC.TO_LEFT?100:-100);d.enableAnimation()}},buildIn:function(){this.preBuildIn();this.invokeLater("startBuildIn",10)},startBuildIn:function(){this.adjust("opacity",1);var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}d.transform(0)}},buildOut:function(){this.adjust("opacity",0);var c=this.get("childViews"),d,b,a=c.get("length");for(b=0;b<a;b++){d=c[b];if(d.disableNavigationTransition){continue}if(!d._nv_mixedIn){this.mixinNavigationChild(d)}d.transform(this.buildDirection===SC.TO_LEFT?-100:100)}},mixinNavigationChild:function(a){if(a.isAnimatable){return}a.mixin(SC.Animatable);a.mixin({transitions:{transform:{timing:SC.Animatable.TRANSITION_EASE_IN_OUT,duration:0.25}},naturalLayout:a.get("layout"),transform:function(b){if(SC.platform.supportsCSS3DTransforms){this.adjust("transform","translate3d("+b+"px,0px,0px)")}else{this.adjust("transform","translate("+b+"px,0px)")}}});a._nv_mixedIn=YES}});sc_require("views/button");SC.PopupButtonView=SC.ButtonView.extend({classNames:["sc-popup-button"],renderDelegateName:"popupButtonRenderDelegate",preferMatrix:null,menu:null,shouldLoadInBackground:NO,init:function(){arguments.callee.base.apply(this,arguments);this._setupMenu();if(this.get("shouldLoadInBackground")){SC.backgroundTaskQueue.push(SC.PopupButtonMenuLoader.create({popupButton:this}))}},_setupMenu:function(){var a=this.get("instantiatedMenu");if(this.isActiveBinding){this.isActiveBinding.disconnect()}this.isActiveBinding=null;if(a&&!a.isClass){this.isActiveBinding=this.bind("isActive",a,"isVisibleInWindow")}},_popup_menuDidChange:function(){this._setupMenu()}.observes("menu"),isActive:NO,_instantiateMenu:function(){var a=this.get("menu");if(!a||!a.isClass){return}this.menu=a.create();this._setupMenu()},instantiatedMenu:function(){var a=this.get("menu");if(a&&a.isClass){this._instantiateMenu();a=this.get("menu")}return a}.property("menu").cacheable(),action:function(a){var b=this.get("instantiatedMenu");if(!b){return NO}b.popup(this,this.get("preferMatrix"));return YES},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this._isMouseDown=YES;this._action();this._menuRenderedTimestamp=0;var b=this;setTimeout(function(){SC.run(function(){b._menuRenderedTimestamp=Date.now()})},1);this.becomeFirstResponder();return YES},mouseUp:function(b){var d=new Date().getTime(),c=this._menuRenderedTimestamp,e=this.get("instantiatedMenu"),f=SC.platform.touch,a;if(c===0){c=Date.now()}if(e){a=e.getPath("rootMenu.targetMenuItem");if(a){if(!a.performAction()){e.remove()}}else{if(!f&&(d-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){e.remove()}}}this._isMouseDown=NO;arguments.callee.base.apply(this,arguments);return YES},mouseExited:function(a){return YES},performKeyEquivalent:function(b,a){if(!this.get("isEnabled")){return NO}var c=this.get("instantiatedMenu");return(!!c&&c.performKeyEquivalent(b,a,YES))}});SC.PopupButtonMenuLoader=SC.Task.extend({popupButton:null,run:function(){if(this.popupButton){this.popupButton._instantiateMenu()}}});SC.ProgressView=SC.View.extend(SC.Control,{classNames:["sc-progress-view"],displayProperties:["displayValue","ariaValue","minimum","maximum","isRunning","isEnabled","isIndeterminate","animatedBackgroundMatrix","offsetRange"],renderDelegateName:"progressRenderDelegate",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),displayValue:function(){var b=this.get("minimum")||0,c=this.get("maximum")||1,a=this.get("value")||0;a=(a-b)/(c-b);if(a>1){a=1}if(isNaN(a)){a=0}if(a<b){a=0}if(a>c){a=1}return a}.property("value","maximum","minimum").cacheable(),ariaRole:"progressbar",ariaValue:function(){return this.get("value")}.property("value").cacheable(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),offsetRange:undefined,contentMaximumKey:null,isIndeterminate:NO,isIndeterminateBindingDefault:SC.Binding.bool(),isRunning:NO,isRunningBindingDefault:SC.Binding.bool(),animatedBackgroundMatrix:null,contentIsIndeterminateKey:null,_backgroundOffset:0,_currentBackground:1,_nextBackground:1,init:function(){arguments.callee.base.apply(this,arguments);this.animateProgressBar()},animateProgressBar:function(){if(this.get("isRunning")&&this.get("isVisibleInWindow")){this._animateProgressBar(500)}}.observes("isRunning","isVisibleInWindow"),_animateProgressBar:function(a){if(a===0){a=1000/30}if(this.get("isRunning")&&this.get("isVisibleInWindow")){this.displayDidChange();this.invokeLater(this._animateProgressBar,a,600)}},contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()}});SC.RadioView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),classNames:["sc-radio-view"],ariaRole:"radiogroup",displayProperties:["displayItems","isEnabled","layoutDirection"],renderDelegateName:"radioGroupRenderDelegate",itemAriaLabeledByKey:null,itemAriaLabelKey:null,value:null,layoutDirection:SC.LAYOUT_VERTICAL,escapeHTML:YES,items:[],itemTitleKey:null,itemWidthKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemsDidChange:function(){if(this._items){this._items.removeObserver("[]",this,this.itemContentDidChange)}this._items=this.get("items");if(this._items){this._items.addObserver("[]",this,this.itemContentDidChange)}this.itemContentDidChange()}.observes("items"),itemContentDidChange:function(){this._renderAsFirstTime=YES;this.notifyPropertyChange("displayItems")},displayItems:function(){var m=this.get("items"),r=this.get("value"),h=SC.isArray(r),f=this.get("localize"),d=this.get("itemTitleKey"),e=this.get("itemValueKey"),q=this.get("itemWidthKey"),c=this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL,k=this.get("itemIsEnabledKey"),y=this.get("itemIconKey"),g=this.get("itemAriaLabeledByKey"),A=this.get("itemAriaLabelKey"),x=this._displayItems||[],s=(m)?m.get("length"):0,v,z,n,o,j,w,u,p,b,a,t;for(j=0;j<s;j++){v=m.objectAt(j);if(SC.typeOf(v)===SC.T_ARRAY){z=v[0];o=v[1]}else{if(v){if(d){z=v.get?v.get(d):v[d]}else{z=(v.toString)?v.toString():null}if(q&&c){n=v.get?v.get(q):v[q]}if(e){o=v.get?v.get(e):v[e]}else{o=v}if(k){w=v.get?v.get(k):v[k]}else{w=YES}if(y){u=v.get?v.get(y):v[y]}else{u=null}if(g){a=v.get?v.get(g):v[g]}else{a=null}if(A){t=v.get?v.get(A):v[A]}else{t=null}}else{z=o=u=null;w=NO}}w=w&&this.get("isEnabled");if(v){p=(h)?(r.indexOf(o)>=0):(r===o)}else{p=NO}if(f){z=SC.String.loc(z)}x.push(SC.Object.create({title:z,icon:u,width:n,value:o,isEnabled:w,isSelected:(h&&r.indexOf(o)>=0&&r.length===1)||(r===o),isMixed:(h&&r.indexOf(o)>=0),isActive:this._activeRadioButton===j,theme:this.get("theme"),renderState:{}}))}return x}.property("isEnabled","value","items","itemTitleKey","itemWidthKey","itemValueKey","itemIsEnabledKey","localize","itemIconKey","itemAriaLabeledByKey","itemAriaLabelKey").cacheable(),mouseDown:function(a){if(!this.get("isEnabled")){return YES}var d=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),e=this.$(),b=d.indexForEvent(c,e,a);this._activeRadioButton=b;if(b!==undefined){this.get("displayItems")[b].set("isActive",YES);d.updateRadioAtIndex(c,e,b)}a.allowDefault();return YES},mouseUp:function(a){if(!this.get("isEnabled")){return YES}var d=this.get("renderDelegate"),c=this.get("renderDelegateProxy"),e=this.$(),f=this.get("displayItems"),b=d.indexForEvent(c,e,a);if(this._activeRadioButton!==undefined&&b!==this._activeRadioButton){f[this._activeRadioButton].set("isActive",NO);d.updateRadioAtIndex(c,e,this._activeRadioButton)}this._activeRadioButton=undefined;if(b!==undefined){f[b].set("isActive",NO);d.updateRadioAtIndex(c,e,b);this.set("value",f[b].value)}a.allowDefault();return YES},keyDown:function(j){if(!this.get("isEnabled")){return YES}if(j.which===9||j.keyCode===9){var h=j.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(h){h.becomeFirstResponder()}else{j.allowDefault()}return YES}if(j.which>=37&&j.which<=40){var g=this.get("renderDelegate"),f=this.get("renderDelegateProxy"),c=this.$(),e=this.get("displayItems"),b=this.get("value");for(var d=0,a=e.length;d<a;d++){if(b===e[d].value){break}}if(j.which===37||j.which===38){if(d<=0){d=e.length-1}else{d--}}if(j.which===39||j.which===40){if(d>=e.length-1){d=0}else{d++}}g.updateRadioAtIndex(f,c,d);this.set("value",e[d].value)}j.allowDefault();return NO},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)}});SC.SceneView=SC.ContainerView.extend({scenes:["master","detail"],nowShowing:null,transitionDuration:200,_state:"NO_VIEW",replaceContent:function(a){if(a&&this._state===this.READY){this.animateScene(a)}else{this.replaceScene(a)}return this},replaceScene:function(c){var d=this._targetView,e=this.STANDARD_LAYOUT,b=this.get("scenes"),a=b?b.indexOf(this.get("nowShowing")):-1;this._targetView=c;this._targetIndex=a;if(this._timer){this._timer.invalidate()}this._leftView=this._rightView=this._start=this._end=null;this._timer=null;this.removeAllChildren();if(d){d.set("layout",e)}if(c){c.set("layout",e)}if(c){this.appendChild(c)}this._state=c?this.READY:this.NO_VIEW},animateScene:function(b){var c=this._targetView,f=this._targetIndex,a=this.get("scenes"),e=a?a.indexOf(this.get("nowShowing")):-1,d;if(f<0||e<0||f===e){return this.replaceScene(b)}this._targetView=b;this._targetIndex=e;if(e>f){this._leftView=c;this._rightView=b;this._target=-1}else{this._leftView=b;this._rightView=c;this._target=1}this.removeAllChildren();if(c){this.appendChild(c)}if(b){this.appendChild(b)}this._start=Date.now();this._end=this._start+this.get("transitionDuration");this._state=this.ANIMATING;this.tick()},tick:function(){this._timer=null;var a=Date.now(),d=(a-this._start)/(this._end-this._start),g=this._target,f=this._leftView,b=this._rightView,c,e;if(d<0){d=0}if(!this.get("isVisibleInWindow")||(d>=1)){return this.replaceScene(this._targetView)}c=SC.clone(this.get("frame"));e=Math.floor(c.width*d);if(g>0){c.left=0-(c.width-e);f.set("layout",c);c=SC.clone(c);c.left=e;b.set("layout",c)}else{c.left=0-e;f.set("layout",c);c=SC.clone(c);c.left=c.width-e;b.set("layout",c)}this._timer=this.invokeLater(this.tick,20);return this},NO_VIEW:"NO_VIEW",ANIMATING:"ANIMATING",READY:"READY",STANDARD_LAYOUT:{top:0,left:0,bottom:0,right:0}});SC.SegmentView=SC.View.extend(SC.Control,{ariaRole:"tab",isSegment:YES,classNames:["sc-segment-view"],toolTip:null,isEnabled:YES,isActive:NO,isSelected:NO,controlSize:null,supportFocusRing:NO,displayProperties:["icon","displayTitle","value","displayToolTip","isDefault","isCancel","width","isSegment","isFirstSegment","isMiddleSegment","isLastSegment","isOverflowSegment","index"],renderDelegateName:"segmentRenderDelegate",useStaticLayout:YES,title:"",value:null,icon:null,localize:NO,keyEquivalent:null,escapeHTML:YES,needsEllipsis:YES,displayTitle:function(){var a=this.get("title");if(this.get("localize")){a=SC.String.loc(a)}return a}.property("title","localize").cacheable(),width:null,localItem:null,widthDidChange:function(){this.adjust("width",this.get("width"))}.observes("width"),updateItem:function(d,c){var g=d.get("itemKeys"),f,a=d.get("viewKeys"),e,b;for(b=g.get("length")-1;b>=0;b--){f=d.get(g.objectAt(b));e=a.objectAt(b);if(!SC.none(c.get(f))){this.set(e,c.get(f))}}this.set("localItem",c)}});sc_require("views/segment");SC.SegmentedView=SC.View.extend(SC.Control,{acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled").cacheable(),ariaRole:"tablist",classNames:["sc-segmented-view"],theme:"square",value:null,isEnabled:YES,allowsEmptySelection:NO,allowsMultipleSelection:NO,selectSegmentWhenTriggeringAction:NO,localize:YES,align:SC.ALIGN_CENTER,layoutDirection:SC.LAYOUT_HORIZONTAL,items:null,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemActionKey:null,itemTargetKey:null,itemLayerIdKey:null,itemKeyEquivalentKey:null,shouldHandleOverflow:YES,overflowTitle:"&raquo;",overflowToolTip:"More&hellip;",overflowIcon:null,segmentViewClass:SC.SegmentView,itemKeys:["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemKeyEquivalentKey","itemLayerIdKey"],viewKeys:["title","value","isEnabled","icon","width","toolTip","keyEquivalent","layerId"],init:function(){arguments.callee.base.apply(this,arguments);var d=this.get("overflowTitle"),a=this.get("overflowToolTip"),b=this.get("overflowIcon"),c;c=this.get("segmentViewClass").create({controlSize:this.get("controlSize"),localize:this.get("localize"),title:d,toolTip:a,icon:b,isLastSegment:YES,isOverflowSegment:YES,isVisible:this.get("shouldHandleOverflow")});this.set("overflowView",c);this.appendChild(c);this.itemsDidChange()},shouldHandleOverflowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}else{this.get("overflowView").set("isVisible",NO)}}.observes("shouldHandleOverflow"),itemsDidChange:function(){var m=this.get("items")||[],r,c,o=this.get("childViews"),h,d=o.lastObject(),p=this.get("value"),b,q=this.get("itemKeys"),a,n=this.get("viewKeys"),f,k=this.get("segmentViewClass"),g,e;if(o.get("length")-1>m.get("length")){for(g=o.get("length")-2;g>=m.get("length");g--){h=o.objectAt(g);if(SC.isArray(p)){p.removeObject(h.get("value"))}else{if(p===h.get("value")){p=null}}this.removeChild(h)}this.set("value",p)}else{if(o.get("length")-1<m.get("length")){for(g=o.get("length")-1;g<m.get("length");g++){h=k.create({controlSize:this.get("controlSize"),localize:this.get("localize")});this.insertBefore(h,d)}}}o=this.get("childViews");for(g=0;g<m.get("length");g++){c=m.objectAt(g);h=o.objectAt(g);if(SC.none(c)){continue}if(SC.typeOf(c)===SC.T_STRING){c=SC.Object.create({title:c.humanize().titleize(),value:c});this.set("itemTitleKey","title");this.set("itemValueKey","value")}else{if(SC.typeOf(c)===SC.T_HASH){c=SC.Object.create(c)}else{if(c instanceof SC.Object){for(e=q.get("length")-1;e>=0;e--){a=this.get(q.objectAt(e));if(a){c.removeObserver(a,this,this.itemContentDidChange);c.addObserver(a,this,this.itemContentDidChange,g)}}}else{SC.Logger.error("SC.SegmentedView items may be Strings, Objects (ie. Hashes) or SC.Objects only")}}}b=NO;if(SC.isArray(p)?p.indexOf(c.get(this.get("itemValueKey")))>=0:p===c.get(this.get("itemValueKey"))){b=YES}h.set("isSelected",b);h.set("index",g);h.set("isFirstSegment",g===0);h.set("isMiddleSegment",g<m.get("length")-1&&g>0);h.set("isLastSegment",g===m.get("length")-1);h.updateItem(this,c)}if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("*items.[]"),itemContentDidChange:function(e,d,b,c){var a=this.get("items"),f=this.get("childViews"),g;g=f.objectAt(c);if(g){g.updateItem(this,e)}else{SC.Logger.warn("Item content change was observed on item without matching segment child view.")}if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}},viewDidResize:function(){var a=this.$().width();if(this.get("shouldHandleOverflow")&&(this.isOverflowing||a<=this.cachedMinimumWidth)){this.adjustOverflow()}},isVisibleInWindowDidChange:function(){if(this.get("shouldHandleOverflow")){this.invokeLast(this.remeasure)}}.observes("isVisibleInWindow"),remeasure:function(){if(!this.get("shouldHandleOverflow")){return}var a=this.get("renderDelegate"),d=this.get("childViews"),c;if(this.get("isVisibleInWindow")){c=d.lastObject();c.set("isVisible",YES);for(var b=d.get("length")-1;b>=0;b--){d.objectAt(b).set("isVisible",YES)}this.cachedWidths=a.segmentWidths(this);this.cachedOverflowWidth=a.overflowSegmentWidth(this);this.adjustOverflow()}},adjustOverflow:function(){if(!this.get("shouldHandleOverflow")){return}var h=this.get("childViews"),f,j=this.get("value"),b=h.lastObject(),e=this.$().width(),d=0,g,a,c;this.isOverflowing=NO;b.set("isSelected",NO);this.overflowItems=[];a=this.cachedWidths.length;for(c=0;c<a;c++){f=h.objectAt(c);d+=this.cachedWidths[c];g=(c===a-1)?d:d+this.cachedOverflowWidth;if(g>e){this.overflowItems.pushObject(f.get("localItem"));this.isOverflowing=YES;f.set("isVisible",NO);if(c===0){b.set("isFirstSegment",YES)}if(SC.isArray(j)?j.indexOf(f.get("value"))>=0:j===f.get("value")){b.set("isSelected",YES)}}else{f.set("isVisible",YES);if(c===0){b.set("isFirstSegment",NO)}}}if(this.isOverflowing){b.set("isVisible",YES)}else{b.set("isVisible",NO)}this.cachedMinimumWidth=d+this.cachedOverflowWidth},displayProperties:["align"],renderDelegateName:"segmentedRenderDelegate",displayItemIndexForEvent:function(a){var b=this.get("renderDelegate");if(b&&b.indexForClientPosition){return b.indexForClientPosition(this,a.clientX,a.clientY)}},keyDown:function(c){var g,h,d,e,f,b;if(c.which===9||c.keyCode===9){var a=c.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{c.allowDefault()}return YES}if(!this.get("allowsMultipleSelection")){g=this.get("childViews");e=g.get("length");f=this.get("value");b=SC.isArray(f);if(c.which===39||c.which===40){if(f){for(d=0;d<e-2;d++){h=g.objectAt(d);if(b?(f.indexOf(h.get("value"))>=0):(h.get("value")===f)){this.triggerItemAtIndex(d+1)}}}else{this.triggerItemAtIndex(0)}return YES}else{if(c.which===37||c.which===38){if(f){for(d=1;d<e-1;d++){h=g.objectAt(d);if(b?(f.indexOf(h.get("value"))>=0):(h.get("value")===f)){this.triggerItemAtIndex(d-1)}}}else{this.triggerItemAtIndex(e-2)}return YES}}}return NO},mouseDown:function(a){var c=this.get("childViews"),e,d=c.get("length")-1,b;if(!this.get("isEnabled")){return YES}b=this.displayItemIndexForEvent(a);if(b>=0){e=c.objectAt(b);e.set("isActive",YES);this.activeChildView=e;if(b===d){this.showOverflowMenu()}else{this._isMouseDown=YES}}return YES},mouseUp:function(a){var c,b;b=this.displayItemIndexForEvent(a);if(this._isMouseDown&&(b>=0)){this.triggerItemAtIndex(b);c=this.activeChildView;c.set("isActive",NO);this.activeChildView=null}this._isMouseDown=NO;return YES},mouseMoved:function(a){var d=this.get("childViews"),e=d.get("length")-1,c,f,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);c=this.activeChildView;f=d.objectAt(b);if(f&&f!==c){if(c){c.set("isActive",NO)}f.set("isActive",YES);this.activeChildView=f;if(b===e){this.showOverflowMenu();this._isMouseDown=NO}}}return YES},mouseEntered:function(a){var c=this.get("childViews"),e,d=c.get("length")-1,b;if(this._isMouseDown){b=this.displayItemIndexForEvent(a);if(b===d){this.showOverflowMenu();this._isMouseDown=NO}else{if(b>=0){e=c.objectAt(b);e.set("isActive",YES);this.activeChildView=e}}}return YES},mouseExited:function(a){var b;if(this._isMouseDown){b=this.activeChildView;if(b){b.set("isActive",NO)}this.activeChildView=null}return YES},touchStart:function(e){var b=this.get("childViews"),d,c=b.get("length")-1,a;if(!this.get("isEnabled")){return YES}a=this.displayItemIndexForEvent(e);if(a>=0){d=b.objectAt(a);d.set("isActive",YES);this.activeChildView=d;if(a===c){this.showOverflowMenu()}else{this._isTouching=YES}}return YES},touchEnd:function(c){var b,a;a=this.displayItemIndexForEvent(c);if(this._isTouching&&(a>=0)){this.triggerItemAtIndex(a);b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null;this._isTouching=NO}return YES},touchesDragged:function(a,e){var h=this.touchIsInBoundary(a),d=this.get("childViews"),f=d.get("length")-1,c,g,b;if(h){if(!this._isTouching){this._touchDidEnter(a)}b=this.displayItemIndexForEvent(a);c=this.activeChildView;g=d[b];if(g&&g!==c){if(c){c.set("isActive",NO)}g.set("isActive",YES);this.activeChildView=g;if(b===f){this.showOverflowMenu();this._isMouseDown=NO}}}else{if(this._isTouching){this._touchDidExit(a)}}this._isTouching=h;return YES},_touchDidExit:function(a){var b;if(this.isTouching){b=this.activeChildView;b.set("isActive",NO);this.activeChildView=null}return YES},_touchDidEnter:function(a){var c=this.get("childViews"),e,d=c.get("length")-1,b;b=this.displayItemIndexForEvent(a);if(b===d){this.showOverflowMenu();this._isTouching=NO}else{if(b>=0){e=c.objectAt(b);e.set("isActive",YES);this.activeChildView=e}}return YES},triggerItemAtIndex:function(j){var m=this.get("childViews"),g,b,n,c,h,f;g=m.objectAt(j);if(!g.get("isEnabled")){return this}h=this.get("allowsEmptySelection");f=this.get("allowsMultipleSelection");b=g.get("value");n=c=this.get("value");if(SC.empty(n)){n=[]}else{if(!SC.isArray(n)){n=[n]}}if(!f){if(h&&(n.get("length")===1)&&(n.objectAt(0)===b)){n=[]}else{n=[b]}}else{if(n.indexOf(b)>=0){if(n.get("length")>1||(n.objectAt(0)!==b)||h){n=n.without(b)}}else{n=n.concat([b])}}switch(n.get("length")){case 0:n=null;break;case 1:n=n.objectAt(0);break;default:break}var p=this.get("itemActionKey"),a=this.get("itemTargetKey"),e,k=null,d=this.getPath("pane.rootResponder"),o;if(p&&(o=this.get("items").objectAt(j))){e=o.get?o.get(p):o[p];if(a){k=o.get?o.get(a):o[a]}if(d){d.sendAction(e,k,this,this.get("pane"))}}if(c!==undefined&&(!e||this.get("selectSegmentWhenTriggeringAction"))){this.set("value",n)}e=this.get("action");if(e&&d){d.sendAction(e,this.get("target"),this,this.get("pane"))}},selectOverflowItem:function(b){var a=b.get("selectedItem");this.triggerItemAtIndex(a.get("index"));b.removeObserver("selectedItem",this,"selectOverflowItem");this.activeChildView.set("isActive",NO);this.activeChildView=null},showOverflowMenu:function(){var f=this.get("childViews"),b=f.get("length")-1,p=this.overflowItems,k,j,e,h;k=p.get("length");j=f.get("length")-1-k;h=this.get("value");e=SC.isArray(h);for(var c=0;c<k;c++){var o=p.objectAt(c),m=this.get("itemValueKey");if(e?h.indexOf(o.get(m))>=0:h===o.get(m)){o.set("isChecked",YES)}else{o.set("isChecked",NO)}o.set("index",j+c)}var n=this;var a=SC.MenuPane.create({layout:{width:200},items:p,itemTitleKey:this.get("itemTitleKey"),itemIconKey:this.get("itemIconKey"),itemIsEnabledKey:this.get("itemIsEnabledKey"),itemKeyEquivalentKey:this.get("itemKeyEquivalentKey"),itemCheckboxKey:"isChecked",modalPaneDidClick:function(){arguments.callee.base.apply(this,arguments);this.removeObserver("selectedItem",n,"selectOverflowItem");n.activeChildView.set("isActive",NO);n.activeChildView=null}});var d=this.get("layer");var g=d.childNodes[d.childNodes.length-1];a.popup(g);a.addObserver("selectedItem",this,"selectOverflowItem")},valueDidChange:function(){var d=this.get("value"),c,f=this.get("childViews"),g=Infinity,e=f.lastObject(),h,a;if(this.overflowItems){c=this.overflowItems.get("length");g=f.get("length")-1-c;e.set("isSelected",NO)}for(var b=f.get("length")-2;b>=0;b--){h=f.objectAt(b);if(SC.isArray(d)?d.indexOf(h.get("value"))>=0:d===h.get("value")){h.set("isSelected",YES);if(b>=g){e.set("isSelected",YES)}}else{h.set("isSelected",NO)}}}.observes("value")});sc_require("views/button");SC.SelectView=SC.ButtonView.extend({acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),items:[],itemsBindingDefault:SC.Binding.multiple(),itemTitleKey:null,itemSortKey:null,itemValueKey:null,itemIconKey:null,itemSeparatorKey:"separator",itemIsEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["sc-select-view"],menu:null,_itemList:[],_itemIdx:null,value:null,checkboxEnabled:YES,showCheckbox:YES,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","items"],preferMatrix:null,CUSTOM_MENU_ITEM_HEIGHT:20,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,exampleView:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,menuItemPadding:35,isContextMenuEnabled:NO,supportFocusRing:YES,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("itemSortKey")||this.get("itemTitleKey");b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)})}return b},render:function(b,f){arguments.callee.base.apply(this,arguments);var c,m,r,t,w,g,e,v,h,p,a,o,d,k,x,s,q,u,n,j;m=this.get("items");m=this.sortObjects(m);r=m.length;t=this.get("itemTitleKey");w=this.get("itemIconKey");g=this.get("itemValueKey");e=this.get("itemSeparatorKey");v=this.get("showCheckbox");j=this.get("isEnabledKey");h=this.get("value");p=this.get("localize");o=[];d=YES;k=0;m.forEach(function(y){if(y||y===0){x=t?(y.get?y.get(t):y[t]):y.toString();x=p?SC.String.loc(x):x;s=w?(y.get?y.get(w):y[w]):null;if(SC.none(y[w])){s=null}q=(g)?(y.get?y.get(g):y[g]):y;if(!SC.none(h)&&!SC.none(q)){if(h===q){this.set("title",x);this.set("icon",s)}}if(q===this.get("value")){this.set("_itemIdx",k);d=!v?NO:YES}else{d=NO}n=(y.get?y.get(j):y[j]);if(NO!==n){n=YES}a=e?(y.get?y.get(e):y[e]):NO;if(k===0){this._defaultVal=q;this._defaultTitle=x;this._defaultIcon=s}var z=SC.Object.create({separator:a,title:x,icon:s,value:q,isEnabled:n,checkbox:d,target:this,action:"displaySelectedItem"});o.push(z)}k+=1;this.set("_itemList",o)},this);if(f){this.invokeLast(function(){var y=this.get("value");if(SC.none(y)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}})}this.changeSelectPreferMatrix(this.get("_itemIdx"))},_action:function(n){var j,a,k,m,s,p,z,e,y,c,o,t,q,w,f,g,b,x,h;j=this.$(".sc-button-label")[0];var A=SC.SelectView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:A+=SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:A+=SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:A+=SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:A+=SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:A+=SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+A;a=this.get("layer").offsetWidth;k=j.scrollWidth;m=this.get("lastMenuWidth");if(k){s=j.offsetWidth;if(k&&s){a=a+k-s}}if(!m||(a>m)){m=a}p=this.get("_itemList");var u=this.get("customViewClassName");var r=this.get("customViewMenuOffsetWidth");var d="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button sc-scroll-view sc-menu-scroll-view sc-container-view menuContainer sc-button-view sc-menu-item sc-regular-size";d=u?(d+" "+u):d;SC.prepareStringMeasurement("",d);for(o=0,x=p.length;o<x;++o){y=p.objectAt(o);z=SC.measureString(y.title).width;if(!e||(z>e)){e=z}}SC.teardownStringMeasurement();m=(e+this.menuItemPadding>m)?e+this.menuItemPadding:m;var v=SC.RootResponder.responder.get("currentWindowSize").width;if(m>v){m=(v-25)}this.set("lastMenuWidth",m);t=this.get("value");q=this.get("_itemList");w=this.get("controlSize");f=this.get("menuPaneHeightPadding");g=this.get("exampleView")||SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:q,exampleView:g,isEnabled:YES,menuHeightPadding:f,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:m},controlSize:w,itemWidth:m});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);h=this._itemIdx;if(!SC.empty(h)&&h>-1){g=b.menuItemViewForContentIndex(h);if(g){g.becomeFirstResponder()}}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=a.get("selectedItem");this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("_itemIdx",b.get("contentIndex"))},changeSelectPreferMatrix:function(){var c=0,g=0;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:c=SC.SelectView.TINY_OFFSET_Y;g=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:c=SC.SelectView.SMALL_OFFSET_Y;g=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:c=SC.SelectView.REGULAR_OFFSET_Y;g=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:c=SC.SelectView.LARGE_OFFSET_Y;g=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:c=SC.SelectView.HUGE_OFFSET_Y;g=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;break}var e=c,b=this.get("_itemIdx"),a=this.get("leftAlign"),f,d;if(this.get("isDefaultPosition")){f=[1,0,3];this.set("preferMatrix",f)}else{if(b){e=b*g+c}d=[a,-e,2];this.set("preferMatrix",d)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();return YES},mouseUp:function(b){var d=this.get("menu"),a,c;if(d){a=d.getPath("rootMenu.targetMenuItem");if(a&&d.get("mouseHasEntered")){if(!a.performAction()){d.remove()}}else{if(b.timeStamp-this._mouseDownTimestamp>400){d.remove()}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},_button_isSelectedDidChange:function(){}.observes("isSelected")});SC.SelectView.TINY_OFFSET_X=0;SC.SelectView.TINY_OFFSET_Y=0;SC.SelectView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.SMALL_OFFSET_X=-18;SC.SelectView.SMALL_OFFSET_Y=3;SC.SelectView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectView.REGULAR_OFFSET_X=-17;SC.SelectView.REGULAR_OFFSET_Y=1;SC.SelectView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectView.LARGE_OFFSET_X=-17;SC.SelectView.LARGE_OFFSET_Y=6;SC.SelectView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectView.HUGE_OFFSET_X=0;SC.SelectView.HUGE_OFFSET_Y=0;SC.SelectView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectView.MENU_WIDTH_OFFSET=-2;sc_require("views/button");SC.SelectButtonView=SC.ButtonView.extend({init:function(){arguments.callee.base.apply(this,arguments)},escapeHTML:YES,objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,iconKey:null,isEnabledKey:"isEnabled",localize:YES,disableSort:YES,classNames:["select-button"],menu:null,itemList:[],itemIdx:null,value:null,checkboxEnabled:YES,separatorPosition:null,_defaultVal:null,_defaultTitle:null,_defaultIcon:null,theme:"popup",displayProperties:["icon","value","controlSize","objects","objects.[]"],preferMatrix:null,SELECT_BUTTON_SPRITE_WIDTH:28,isActiveBinding:"*menu.isVisibleInWindow",isDefaultPosition:NO,lastMenuWidth:null,customView:null,customViewClassName:null,customViewMenuOffsetWidth:0,needsEllipsis:YES,menuPaneHeightPadding:0,supportFocusRing:YES,isContextMenuEnabled:NO,leftAlign:function(){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:return SC.SelectButtonView.TINY_OFFSET_X;case SC.SMALL_CONTROL_SIZE:return SC.SelectButtonView.SMALL_OFFSET_X;case SC.REGULAR_CONTROL_SIZE:return SC.SelectButtonView.REGULAR_OFFSET_X;case SC.LARGE_CONTROL_SIZE:return SC.SelectButtonView.LARGE_OFFSET_X;case SC.HUGE_CONTROL_SIZE:return SC.SelectButtonView.HUGE_OFFSET_X}return 0}.property("controlSize"),sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)})}return b},render:function(b,e){arguments.callee.base.apply(this,arguments);var c,a,p,r,v,f,t,g,n,u,m,d,j,w,q,o,s,k,h;c=this.layout.width;if(e&&c){this.adjust({width:c-this.SELECT_BUTTON_SPRITE_WIDTH})}a=this.get("objects");a=this.sortObjects(a);p=a.length;r=this.get("nameKey");v=this.get("iconKey");f=this.get("valueKey");h=this.get("isEnabledKey");t=this.get("checkboxEnabled");g=this.get("value");n=this.get("localize");u=this.get("separatorPosition");m=[];d=YES;j=0;a.forEach(function(x){if(x){w=r?(x.get?x.get(r):x[r]):x.toString();w=n?SC.String.loc(w):w;q=v?(x.get?x.get(v):x[v]):null;if(SC.none(x[v])){q=null}o=(f)?(x.get?x.get(f):x[f]):x;if(!SC.none(g)&&!SC.none(o)){if(this._equals(g,o)){this.set("title",w);this.set("icon",q)}}if(this._equals(o,this.get("value"))){if(u>0&&u<p&&j>=p-u){j++}this.set("itemIdx",j);d=!t?NO:YES}else{d=NO}k=(h)?(x.get?x.get(h):x[h]):x;if(NO!==k){k=YES}if(j===0){this._defaultVal=o;this._defaultTitle=w;this._defaultIcon=q}var y=SC.Object.create({title:w,icon:q,value:o,isEnabled:k,checkbox:d,target:this,action:"displaySelectedItem"});m.push(y)}j+=1;if(u&&j===(p-u)){var z=SC.Object.create({separator:YES});m.push(z)}this.set("itemList",m)},this);if(e){this.invokeLast(function(){var x=this.get("value");if(SC.none(x)){this.set("value",this._defaultVal);this.set("title",this._defaultTitle);this.set("icon",this._defaultIcon)}})}this.changeSelectButtonPreferMatrix(this.itemIdx)},_equals:function(b,a){var c=YES;if(b&&SC.typeOf(b)===SC.T_HASH&&a&&SC.typeOf(a)===SC.T_HASH){for(var d in b){if(b[d]!==a[d]){c=NO}}}else{c=(b===a)}return c},_action:function(q){var j,a,n,o,v,s,C,e,B,c,r,w,t,z,f,g,p,b,A,h,m,D,k;j=this.$(".sc-button-label")[0];D=SC.SelectButtonView.MENU_WIDTH_OFFSET;if(!this.get("isDefaultPosition")){switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:D+=SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET;break;case SC.SMALL_CONTROL_SIZE:D+=SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET;break;case SC.REGULAR_CONTROL_SIZE:D+=SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET;break;case SC.LARGE_CONTROL_SIZE:D+=SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET;break;case SC.HUGE_CONTROL_SIZE:D+=SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET;break}}a=this.get("layer").offsetWidth+D;n=j.scrollWidth;o=this.get("lastMenuWidth");if(n){v=j.offsetWidth;if(n&&v){a=a+n-v}}if(!o||(a>o)){o=a}s=this.get("itemList");var x=this.get("customViewClassName"),u=this.get("customViewMenuOffsetWidth"),d="sc-view sc-pane sc-panel sc-palette sc-picker sc-menu select-button menu sc-scroll-view sc-menu-scroll-view sc-container-view sc-menu-item menu-item value sc-regular-size";d=x?(d+" "+x):d;h=(this.get("customView")||SC.MenuItemView).create();m=h.get("escapeHTML");k=document.body;for(r=0,A=s.length;r<A;++r){B=s.objectAt(r);c=document.createElement("div");c.style.cssText="top:-10000px; left: -10000px;  position: absolute;";c.className=d;c.innerHTML=m?SC.RenderContext.escapeHTML(B.title):B.title;k.appendChild(c);C=c.offsetWidth+u;if(!e||(C>e)){e=C}k.removeChild(c)}e=(e>o)?e:o;var y=SC.RootResponder.responder.get("currentWindowSize").width;if(e>y){e=(y-25)}this.set("lastMenuWidth",o);w=this.get("value");t=this.get("itemList");z=this.get("controlSize");g=this.get("customView");p=g?g:SC.MenuItemView;b=SC.MenuPane.create({classNames:["select-button"],items:t,exampleView:p,isEnabled:YES,preferType:SC.PICKER_MENU,itemHeightKey:"height",layout:{width:e},controlSize:z,itemWidth:o,performKeyEquivalent:function(F,E){switch(F){case"tab":case"shift_tab":return YES;default:return arguments.callee.base.apply(this,arguments)}}});if(!b){return NO}b.popup(this,this.preferMatrix);this.set("menu",b);g=b.menuItemViewForContentIndex(this.get("itemIdx"));b.set("currentMenuItem",g);if(g){g.becomeFirstResponder()}this.set("isActive",YES);return YES},displaySelectedItem:function(a){var b=this.getPath("menu.selectedItem");if(!b){return NO}this.set("value",b.get("value"));this.set("title",b.get("title"));this.set("itemIdx",b.get("contentIndex"));return YES},changeSelectButtonPreferMatrix:function(){var b=0,h=0,d=0,e=0,j,f;switch(this.get("controlSize")){case SC.TINY_CONTROL_SIZE:b=SC.SelectButtonView.TINY_OFFSET_Y;h=SC.MenuPane.TINY_MENU_ITEM_HEIGHT;d=SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.SMALL_CONTROL_SIZE:b=SC.SelectButtonView.SMALL_OFFSET_Y;h=SC.MenuPane.SMALL_MENU_ITEM_HEIGHT;d=SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.REGULAR_CONTROL_SIZE:b=SC.SelectButtonView.REGULAR_OFFSET_Y;h=SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT;d=SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.LARGE_CONTROL_SIZE:b=SC.SelectButtonView.LARGE_OFFSET_Y;h=SC.MenuPane.LARGE_MENU_ITEM_HEIGHT;d=SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT;break;case SC.HUGE_CONTROL_SIZE:b=SC.SelectButtonView.HUGE_OFFSET_Y;h=SC.MenuPane.HUGE_MENU_ITEM_HEIGHT;d=SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT;break}var g=b,a=this.get("itemIdx"),m=this.get("leftAlign"),k,c;if(this.get("isDefaultPosition")){k=[1,0,3];this.set("preferMatrix",k)}else{if(a){g=a*h+b;j=this.get("separatorPosition");f=this.get("objects").length;if(j>0&&j<f&&a>=f-j){e=h-d;g-=e}}c=[m,-g,2];this.set("preferMatrix",c)}},mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;this.becomeFirstResponder();this._action();this._menuRenderedTimestamp=0;var b=this;setTimeout(function(){SC.run(function(){b._menuRenderedTimestamp=Date.now()})},1);return YES},_recordMouseDownTimestamp:function(){this._menuRenderedTimestamp=new Date().getTime()},mouseUp:function(b){var d=new Date().getTime(),c=this._menuRenderedTimestamp,e=this.get("menu"),f=SC.platform.touch,a;if(c===0){c=Date.now()}if(e){a=e.getPath("rootMenu.targetMenuItem");if(a&&a.get("mouseHasEntered")){if(!a.performAction()){e.remove()}}else{if(!f&&(d-c>SC.ButtonView.CLICK_AND_HOLD_DELAY)){if(!e.get("mouseHasEntered")&&!this.get("isDefaultPosition")){a=e.get("currentMenuItem");if(a&&!a.performAction()){e.remove()}}else{e.remove()}}}}this._isMouseDown=NO;this.set("isActive",NO);return YES},mouseExited:function(){return YES},keyDown:function(a){if(this.interpretKeyEvents(a)){return YES}else{return arguments.callee.base.apply(this,arguments)}},interpretKeyEvents:function(a){if(a){if((a.keyCode===38||a.keyCode===40)){this._action()}else{if(a.keyCode===27){this.resignFirstResponder()}}}return arguments.callee.base.apply(this,arguments)},acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),insertTab:function(b){var a=this.get("nextValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},insertBacktab:function(b){var a=this.get("previousValidKeyView");if(a){a.becomeFirstResponder()}else{b.allowDefault()}return YES},_button_isSelectedDidChange:function(){}.observes("isSelected"),didAppendToDocument:function(){}});SC.SelectButtonView.TINY_OFFSET_X=0;SC.SelectButtonView.TINY_OFFSET_Y=0;SC.SelectButtonView.TINY_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.SMALL_OFFSET_X=-18;SC.SelectButtonView.SMALL_OFFSET_Y=3;SC.SelectButtonView.SMALL_POPUP_MENU_WIDTH_OFFSET=7;SC.SelectButtonView.REGULAR_OFFSET_X=-17;SC.SelectButtonView.REGULAR_OFFSET_Y=3;SC.SelectButtonView.REGULAR_POPUP_MENU_WIDTH_OFFSET=4;SC.SelectButtonView.LARGE_OFFSET_X=-17;SC.SelectButtonView.LARGE_OFFSET_Y=6;SC.SelectButtonView.LARGE_POPUP_MENU_WIDTH_OFFSET=3;SC.SelectButtonView.HUGE_OFFSET_X=0;SC.SelectButtonView.HUGE_OFFSET_Y=0;SC.SelectButtonView.HUGE_POPUP_MENU_WIDTH_OFFSET=0;SC.SelectButtonView.MENU_WIDTH_OFFSET=-2;SC.MenuPane.TINY_MENU_ITEM_HEIGHT=10;SC.MenuPane.TINY_MENU_ITEM_SEPARATOR_HEIGHT=2;SC.MenuPane.TINY_MENU_HEIGHT_PADDING=2;SC.MenuPane.TINY_SUBMENU_OFFSET_X=0;SC.MenuPane.SMALL_MENU_ITEM_HEIGHT=16;SC.MenuPane.SMALL_MENU_ITEM_SEPARATOR_HEIGHT=7;SC.MenuPane.SMALL_MENU_HEIGHT_PADDING=4;SC.MenuPane.SMALL_SUBMENU_OFFSET_X=2;SC.MenuPane.REGULAR_MENU_ITEM_HEIGHT=22;SC.MenuPane.REGULAR_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.REGULAR_MENU_HEIGHT_PADDING=6;SC.MenuPane.REGULAR_SUBMENU_OFFSET_X=2;SC.MenuPane.LARGE_MENU_ITEM_HEIGHT=31;SC.MenuPane.LARGE_MENU_ITEM_SEPARATOR_HEIGHT=20;SC.MenuPane.LARGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.LARGE_SUBMENU_OFFSET_X=4;SC.MenuPane.HUGE_MENU_ITEM_HEIGHT=20;SC.MenuPane.HUGE_MENU_ITEM_SEPARATOR_HEIGHT=9;SC.MenuPane.HUGE_MENU_HEIGHT_PADDING=0;SC.MenuPane.HUGE_SUBMENU_OFFSET_X=0;SC.SelectFieldView=SC.FieldView.extend({displayProperties:["objects","nameKey","valueKey","isEnabled"],acceptsFirstResponder:function(){return this.get("isEnabled")}.property("isEnabled"),tagName:"select",classNames:["sc-select-field-view"],objects:[],objectsBindingDefault:SC.Binding.multiple(),nameKey:null,sortKey:null,valueKey:null,emptyName:null,localize:NO,cpDidChange:YES,disableSort:NO,validateMenuItem:function(b,a){return YES},sortObjects:function(b){if(!this.get("disableSort")){var a=this.get("sortKey")||this.get("nameKey");if(a){b=b.sortProperty(a)}else{b=b.sort(function(d,c){if(a){d=d.get?d.get(a):d[a];c=c.get?c.get(a):c[a]}return(d<c)?-1:((d>c)?1:0)})}}return b},render:function(c,a){if(a||this.get("cpDidChange")){this.set("cpDidChange",NO);var f=this.get("nameKey");var k=this.get("valueKey");var j=this.get("objects");var b=this.get("value");var d,g;if(!this.get("isEnabled")){c.attr("disabled","disabled")}var h=this.get("localize");if(!k&&b){b=SC.guidFor(b)}if((b===null)||(b==="")){b="***"}if(j){j=this.sortObjects(j);if(!a){g=this.$input()[0];if(!g){return}g.innerHTML=""}var e=this.get("emptyName");if(e){if(h){e=SC.String.loc(e)}if(a){c.push('<option value="***">'+e+"</option>",'<option disabled="disabled"></option>')}else{d=document.createElement("option");d.value="***";d.innerHTML=e;g.appendChild(d);d=document.createElement("option");d.disabled="disabled";g.appendChild(d)}}j.forEach(function(p,o){if(p){var n=f?(p.get?p.get(f):p[f]):p.toString();if(h){n=SC.String.loc(n)}var q=(k)?(p.get?p.get(k):p[k]):p;if(!e&&o===0&&b==="***"){this.set("value",q)}if(q!==null&&q!==undefined){q=(SC.guidFor(q))?SC.guidFor(q):q.toString()}var m=(this.validateMenuItem&&this.validateMenuItem(q,n))?"":'disabled="disabled" ';if(a){c.push("<option "+m+'value="'+q+'">'+n+"</option>")}else{d=document.createElement("option");d.value=q;d.innerHTML=n;if(m.length>0){d.disable="disabled"}g.appendChild(d)}}else{if(a){c.push('<option disabled="disabled"></option>')}else{d=document.createElement("option");d.disabled="disabled";g.appendChild(d)}}},this);this.setFieldValue(b)}else{this.set("value",null)}}else{this.$().prop("disabled",!this.get("isEnabled"))}},_objectsObserver:function(){this.set("cpDidChange",YES)}.observes("objects"),_objectArrayObserver:function(){this.set("cpDidChange",YES);this.propertyDidChange("objects")}.observes("*objects.[]"),_nameKeyObserver:function(){this.set("cpDidChange",YES)}.observes("nameKey"),_valueKeyObserver:function(){this.set("cpDidChange",YES)}.observes("valueKey"),_isEnabledObserver:function(){this.set("cpDidChange",YES)}.observes("isEnabled"),$input:function(){return this.$()},mouseDown:function(a){if(!this.get("isEnabled")){a.stop();return YES}else{return arguments.callee.base.apply(this,arguments)}},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},getFieldValue:function(){var f=arguments.callee.base.apply(this,arguments);var c=this.get("valueKey");var e=this.get("objects");var d=null;var a;if(f=="***"){f=null}else{if(f&&e){var g=(SC.typeOf(e.length)===SC.T_FUNCTION)?e.length():e.length;while(!d&&(--g>=0)){a=e.objectAt?e.objectAt(g):e[g];if(a===null||a===undefined){continue}if(c){a=(a.get)?a.get(c):a[c]}var b=(a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null;if(f==b){d=a}}}}return(c||d)?d:f},setFieldValue:function(a){if(SC.none(a)){a="***"}else{a=((a!==null&&a!==undefined)?(SC.guidFor(a)?SC.guidFor(a):a.toString()):null)}this.$input().val(a);return this},fieldDidFocus:function(){var a=this.get("isFocused");if(!a){this.set("isFocused",true)}},fieldDidBlur:function(){var a=this.get("isFocused");if(a){this.set("isFocused",false)}},_isFocusedObserver:function(){this.$().setClass("focus",this.get("isFocused"))}.observes("isFocused"),didCreateLayer:function(){var a=this.$input();if(this.get("isEnabled")===false){this.$()[0].disabled=true}SC.Event.add(a,"blur",this,this.fieldDidBlur);SC.Event.add(a,"focus",this,this.fieldDidFocus);SC.Event.add(a,"change",this,this._field_fieldValueDidChange)},willDestroyLayer:function(){var a=this.$input();SC.Event.remove(a,"focus",this,this.fieldDidFocus);SC.Event.remove(a,"blur",this,this.fieldDidBlur);SC.Event.remove(a,"change",this,this._field_fieldValueDidChange)}});SC.SliderView=SC.View.extend(SC.Control,{classNames:"sc-slider-view",ariaRole:"slider",value:0.5,valueBindingDefault:SC.Binding.single().notEmpty(),minimum:0,minimumBindingDefault:SC.Binding.single().notEmpty(),contentMinimumKey:null,maximum:1,maximumBindingDefault:SC.Binding.single().notEmpty(),contentMaximumKey:null,step:0.1,displayProperties:["displayValue","ariaValue","minimum","maximum","step","frame"],ariaValue:function(){return this.get("value")}.property("value").cacheable(),renderDelegateName:"sliderRenderDelegate",displayValue:function(){var b=this.get("minimum"),a=this.get("maximum"),d=this.get("value"),c=this.get("step");d=Math.min(Math.max(d,b),a);if(!SC.none(c)&&c!==0){d=Math.round(d/c)*c}if(d!==0){d=Math.floor((d-b)/(a-b)*100)}return d}.property("value","minimum","maximum","step").cacheable(),_isMouseDown:NO,mouseDown:function(a){if(!this.get("isEnabled")){return YES}this.set("isActive",YES);this._isMouseDown=YES;return this._triggerHandle(a,YES)},mouseDragged:function(a){return this._isMouseDown?this._triggerHandle(a):YES},mouseUp:function(a){if(this._isMouseDown){this.set("isActive",NO)}var b=this._isMouseDown?this._triggerHandle(a):YES;this._isMouseDown=NO;return b},mouseWheel:function(b){if(!this.get("isEnabled")){return YES}var d=this.get("minimum"),a=this.get("maximum"),c=this.get("value")+((b.wheelDeltaX+b.wheelDeltaY)*0.1),e=this.get("step"),f=Math.round(c/e)*e;if(c<d){this.setIfChanged("value",d)}else{if(c>a){this.setIfChanged("value",a)}else{this.setIfChanged("value",c)}}return YES},touchStart:function(a){return this.mouseDown(a)},touchEnd:function(a){return this.mouseUp(a)},touchesDragged:function(a){return this.mouseDragged(a)},_triggerHandle:function(j,e){var a=this.get("frame").width,c=this.get("minimum"),f=this.get("maximum"),b=this.get("step"),h=this.get("value"),d;if(e){d=this.convertFrameFromView({x:j.pageX}).x;this._evtDiff=j.pageX-d}else{d=j.pageX-this._evtDiff}d=Math.max(0,Math.min(d/a,1));if(e){var g=this.get("value");g=(g-c)/(f-c);if(Math.abs(g*a-d*a)<16){this._offset=g-d}else{this._offset=0}}d=Math.max(0,Math.min(d+this._offset,1));d=c+((f-c)*d);if(b!==0){d=Math.round(d/b)*b}if(Math.abs(h-d)>=0.01){this.set("value",d)}return YES},acceptsFirstResponder:function(){if(SC.FOCUS_ALL_CONTROLS){return this.get("isEnabled")}return NO}.property("isEnabled"),keyDown:function(h){if(h.which===9||h.keyCode===9){var f=h.shiftKey?this.get("previousValidKeyView"):this.get("nextValidKeyView");if(f){f.becomeFirstResponder()}else{h.allowDefault()}return YES}if(h.which>=33&&h.which<=40){var d=this.get("minimum"),g=this.get("maximum"),b=this.get("step"),j=g-d,a=0,c,e=this.get("value");if(h.which===37||h.which===38||h.which===34){if(b===0){if(j<100){a=e-1}else{c=Math.abs(j/100);if(c<2){c=2}a=e-c}}else{a=e-b}}if(h.which===39||h.which===40||h.which===33){if(b===0){if(j<100){a=e+2}else{c=Math.abs(j/100);if(c<2){c=2}a=e+c}}else{a=e+b}}if(h.which===36){a=g}if(h.which===35){a=d}if(a>=d&&a<=g){this.set("value",a)}}else{h.allowDefault();return NO}return YES},contentPropertyDidChange:function(c,a){var b=this.get("content");this.beginPropertyChanges().updatePropertyFromContent("value",a,"contentValueKey",b).updatePropertyFromContent("minimum",a,"contentMinimumKey",b).updatePropertyFromContent("maximum",a,"contentMaximumKey",b).updatePropertyFromContent("isIndeterminate",a,"contentIsIndeterminateKey",b).endPropertyChanges()}});sc_require("mixins/collection_group");sc_require("views/disclosure");SC.SourceListGroupView=SC.View.extend(SC.Control,SC.CollectionGroup,{classNames:["sc-source-list-group"],content:null,isGroupVisible:YES,hasGroupTitle:YES,groupTitleKey:null,groupVisibleKey:null,render:function(a,b){a.push('<div role="button" class="sc-source-list-label sc-disclosure-view sc-button-view button disclosure no-disclosure">','<img src="'+SC.BLANK_IMAGE_URL+'" class="button" />','<span class="label"></span></div>')},createChildViews:function(){},contentPropertyDidChange:function(f,c){var e=this.get("content");var h=this.outlet("labelView");if(e===null){h.setIfChanged("isVisible",NO);this.setIfChanged("hasGroupTitle",NO);return}else{h.setIfChanged("isVisible",YES);this.setIfChanged("hasGroupTitle",YES)}var b=this.getDelegateProperty("groupTitleKey",this.displayDelegate);if((c=="*")||(b&&(c==b))){var g=(e&&e.get&&b)?e.get(b):e;if(g!=this._title){this._title=g;if(g){g=g.capitalize()}h.set("title",g)}}var d=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if((c=="*")||(d&&(c==d))){if(d){h.removeClassName("no-disclosure");var a=(e&&e.get)?!!e.get(d):YES;if(a!=this.get("isGroupVisible")){this.set("isGroupVisible",a);h.set("value",a)}}else{h.addClassName("no-disclosure")}}},disclosureValueDidChange:function(c){if(c==this.get("isGroupVisible")){return}var b=this.get("content");var a=this.getDelegateProperty("groupVisibleKey",this.displayDelegate);if(b&&b.set&&a){b.set(a,c)}this.set("isGroupVisible",c);if(this.owner&&this.owner.updateChildren){this.owner.updateChildren(true)}},labelView:SC.DisclosureView.extend({value:YES,_valueObserver:function(){if(this.owner){this.owner.disclosureValueDidChange(this.get("value"))}}.observes("value")})});sc_require("views/list");sc_require("views/source_list_group");SC.SourceListView=SC.ListView.extend({theme:"source-list",classNames:["sc-source-list"],rowHeight:32,selectOnMouseDown:NO,actOnSelect:YES});SC.SplitDividerView=SC.View.extend({classNames:["sc-split-divider-view"],mouseDown:function(a){var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},doubleClick:function(a){var b=this.get("splitView");return(b)?b.doubleClickInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});sc_require("views/split_divider");SC.RESIZE_BOTH="resize-both";SC.RESIZE_TOP_LEFT="resize-top-left";SC.RESIZE_BOTTOM_RIGHT="resize-bottom-right";SC.SplitView=SC.View.extend({classNames:["sc-split-view"],displayProperties:["layoutDirection"],delegate:null,layoutDirection:SC.LAYOUT_HORIZONTAL,canCollapseViews:YES,autoresizeBehavior:SC.RESIZE_BOTTOM_RIGHT,defaultThickness:0.5,topLeftMinThickness:null,topLeftMaxThickness:null,bottomRightMinThickness:null,bottomRightMaxThickness:null,dividerThickness:null,isSplitView:YES,topLeftView:SC.View,dividerView:SC.SplitDividerView,bottomRightView:SC.View,topLeftThickness:function(){var a=this.get("topLeftView");return a?this.thicknessForView(a):0}.property("topLeftView").cacheable(),bottomRightThickness:function(){var a=this.get("bottomRightView");return a?this.thicknessForView(a):0}.property("bottomRightView").cacheable(),thumbViewCursor:null,canCollapseView:function(a){return this.invokeDelegateMethod(this.delegate,"splitViewCanCollapse",this,a)},thicknessForView:function(a){var c=this.get("layoutDirection"),b=a.get("frame");return(c===SC.LAYOUT_HORIZONTAL)?b.width:b.height},createChildViews:function(){var e=[],c=["topLeftView","dividerView","bottomRightView"],b=c.length,a,d;for(d=0;d<b;++d){if(a=this.get(c[d])){a=this[c[d]]=this.createChildView(a,{layoutView:this,rootElementPath:[d]});e.push(a)}}this.set("childViews",e);return this},updateChildLayout:function(){var b=this.get("topLeftView"),c=this.get("bottomRightView"),j=this.get("dividerView"),e=this.get("autoresizeBehavior"),k=this.get("layoutDirection"),a=this.get("frame"),d=this._desiredTopLeftThickness,m=this.get("dividerThickness"),h=(k===SC.LAYOUT_HORIZONTAL)?a.width:a.height,n=h-m-d,g,f;m=(!SC.none(m))?m:7;f=b.get("isCollapsed")||NO;b.setIfChanged("isVisible",!f);g=SC.clone(b.get("layout"));if(k===SC.LAYOUT_HORIZONTAL){g.top=0;g.left=0;g.bottom=0;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:g.right=n+m;delete g.width;break;case SC.RESIZE_BOTTOM_RIGHT:delete g.right;delete g.height;g.width=d;break}}else{g.top=0;g.left=0;g.right=0;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:g.bottom=n+m;delete g.height;break;case SC.RESIZE_BOTTOM_RIGHT:g.height=d;delete g.bottom;delete g.width;break}}b.set("layout",g);if(j){g=SC.clone(j.get("layout"));if(k===SC.LAYOUT_HORIZONTAL){g.width=m;g.top=0;g.bottom=0;delete g.height;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:g.right=n;delete g.left;delete g.centerX;delete g.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:g.left=d;delete g.right;delete g.centerX;delete g.centerY;break}}else{g.height=m;g.left=0;g.right=0;delete g.width;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_TOP_LEFT:g.bottom=n;delete g.top;delete g.centerX;delete g.centerY;break;case SC.RESIZE_BOTTOM_RIGHT:g.top=d;delete g.bottom;delete g.centerX;delete g.centerY;break}}j.set("layout",g)}f=c.get("isCollapsed")||NO;c.setIfChanged("isVisible",!f);g=SC.clone(c.get("layout"));if(k===SC.LAYOUT_HORIZONTAL){g.top=0;g.bottom=0;g.right=0;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:g.left=d+m;delete g.width;break;case SC.RESIZE_TOP_LEFT:g.width=n;delete g.left;break}}else{g.left=0;g.right=0;g.bottom=0;switch(e){case SC.RESIZE_BOTH:throw"SC.RESIZE_BOTH is currently unsupported.";case SC.RESIZE_BOTTOM_RIGHT:g.top=d+m;delete g.height;break;case SC.RESIZE_TOP_LEFT:delete g.top;g.height=n;break}}c.set("layout",g);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")},renderLayout:function(b,a){if(a||this._recalculateDivider){var f=this.get("layoutDirection"),c=this.get("frame"),e=this.$(),j=this.get("defaultThickness"),d=this.get("autoresizeBehavior"),h=this.get("dividerThickness"),g;if(!this.get("thumbViewCursor")){this.set("thumbViewCursor",SC.Cursor.create())}h=!SC.none(h)?h:7;if(this._recalculateDivider===undefined&&j<1){this._recalculateDivider=YES}else{if(this._recalculateDivider){this._recalculateDivider=NO}}if(e[0]){g=(f===SC.LAYOUT_HORIZONTAL)?e[0].offsetWidth:e[0].offsetHeight}else{g=(f===SC.LAYOUT_HORIZONTAL)?c.width:c.height}if(SC.none(j)||(j>0&&j<1)){j=Math.floor((g-(h))*(j||0.5))}if(d===SC.RESIZE_BOTTOM_RIGHT){this._desiredTopLeftThickness=j}else{this._desiredTopLeftThickness=g-h-j}this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this._updateTopLeftThickness(0);this._setCursorStyle();this.updateChildLayout()}arguments.callee.base.apply(this,arguments)},render:function(a,b){arguments.callee.base.apply(this,arguments);if(this._inLiveResize){this._setCursorStyle()}if(this.get("layoutDirection")===SC.LAYOUT_HORIZONTAL){a.addClass("sc-horizontal")}else{a.addClass("sc-vertical")}},mouseDownInThumbView:function(a,c){var b=this.getPath("pane.rootResponder");if(!b){return NO}b.dragDidStart(this);this._mouseDownX=a.pageX;this._mouseDownY=a.pageY;this._thumbView=c;this._topLeftView=this.get("topLeftView");this._bottomRightView=this.get("bottomRightView");this._topLeftViewThickness=this.thicknessForView(this.get("topLeftView"));this._bottomRightThickness=this.thicknessForView(this.get("bottomRightView"));this._dividerThickness=this.get("dividerThickness");this._layoutDirection=this.get("layoutDirection");this.beginLiveResize();this._inLiveResize=YES;return YES},mouseDragged:function(a){var b=(this._layoutDirection===SC.LAYOUT_HORIZONTAL)?a.pageX-this._mouseDownX:a.pageY-this._mouseDownY;this._updateTopLeftThickness(b);return YES},mouseUp:function(a){if(this._inLiveResize===YES){this._thumbView=null;this._inLiveResize=NO;this.endLiveResize();return YES}var d=this.get("thumbViewCursor"),c=SC.clone(d),b=this.get("dividerView");d.set("cursorStyle",SC.SYSTEM_CURSOR);b.set("cursor",c);this.set("cursor",d);return NO},touchesDragged:function(a){return this.mouseDragged(a)},touchEnd:function(a){return this.mouseUp(a)},doubleClickInThumbView:function(b,d){var a=this._topLeftView,c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){a=this._bottomRightView;c=a.get("isCollapsed")||NO;if(!c&&!this.canCollapseView(a)){return NO}}if(!c){this._uncollapsedThickness=this.thicknessForView(a);if(a===this._topLeftView){this._updateTopLeftThickness(this.topLeftThickness()*-1)}else{this._updateBottomRightThickness(this.bottomRightThickness()*-1)}if(!a.get("isCollapsed")){this._uncollapsedThickness=null}}else{if(a===this._topLeftView){this._updateTopLeftThickness(this._uncollapsedThickness)}else{this._updateBottomRightThickness(this._uncollapsedThickness)}a._uncollapsedThickness=null}this._setCursorStyle();return true},_updateTopLeftThickness:function(e){var a=this._topLeftView,c=this._bottomRightView,f=this.thicknessForView(a),g=this.thicknessForView(c),k=this._dividerThickness,j=0,b=this._topLeftViewThickness+e,o=this._layoutDirection,q=this.canCollapseView(c),n=b,m=this.get("topLeftMaxThickness"),d=this.get("topLeftMinThickness"),p,h,r;if(!a.get("isCollapsed")){j+=f}if(!c.get("isCollapsed")){j+=g}if(!SC.none(m)){n=Math.min(m,n)}if(!SC.none(d)){n=Math.max(d,n)}m=this.get("bottomRightMaxThickness");d=this.get("bottomRightMinThickness");p=j-n;if(!SC.none(m)){p=Math.min(m,p)}if(!SC.none(d)){p=Math.max(d,p)}n=j-p;n=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,n);n=Math.min(n,j);n=Math.max(0,n);h=a.get("collapseAtThickness");if(!h){h=0}r=c.get("collapseAtThickness");r=SC.none(r)?j:(j-r);if((b<=h)&&this.canCollapseView(a)){m=c.get("maxThickness");if(!m||(k+j)<=m){n=0}}else{if(b>=r&&this.canCollapseView(c)){m=a.get("maxThickness");if(!m||(k+j)<=m){n=j}}}if(n!=this.thicknessForView(a)){this._desiredTopLeftThickness=n;a.set("isCollapsed",n===0);c.set("isCollapsed",n>=j);this.updateChildLayout();this.displayDidChange()}},_updateBottomRightThickness:function(e){var a=this._topLeftView,c=this._bottomRightView,f=this.thicknessForView(a),g=this.thicknessForView(c),k=this._dividerThickness,j=0,b=this._topLeftViewThickness+e,o=this._layoutDirection,q=this.canCollapseView(c),n=b,m=this.get("topLeftMaxThickness"),d=this.get("topLeftMinThickness"),p,h,r;if(!a.get("isCollapsed")){j+=f}if(!c.get("isCollapsed")){j+=g}if(!SC.none(m)){n=Math.min(m,n)}if(!SC.none(d)){n=Math.max(d,n)}m=this.get("bottomRightMaxThickness");d=this.get("bottomRightMinThickness");p=j-n;if(!SC.none(m)){p=Math.min(m,p)}if(!SC.none(d)){p=Math.max(d,p)}n=j-p;n=this.invokeDelegateMethod(this.delegate,"splitViewConstrainThickness",this,a,n);n=Math.min(n,j);n=Math.max(0,n);h=a.get("collapseAtThickness");if(!h){h=0}r=c.get("collapseAtThickness");r=SC.none(r)?j:(j-r);if((b<=h)&&this.canCollapseView(a)){m=c.get("maxThickness");if(!m||(k+j)<=m){n=0}}else{if(b>=r&&this.canCollapseView(c)){m=a.get("maxThickness");if(!m||(k+j)<=m){n=j}}}if(n!=this.thicknessForView(a)){this._desiredTopLeftThickness=n;a.set("isCollapsed",n===0);c.set("isCollapsed",n>=j);this.updateChildLayout();this.displayDidChange()}},_setCursorStyle:function(){var e=this._topLeftView,f=this._bottomRightView,b=this.get("thumbViewCursor"),c=this.thicknessForView(e),d=this.thicknessForView(f),a=this.get("dividerView");this._layoutDirection=this.get("layoutDirection");if(e.get("isCollapsed")||c===this.get("topLeftMinThickness")||d==this.get("bottomRightMaxThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"s-resize")}else{if(f.get("isCollapsed")||c===this.get("topLeftMaxThickness")||d==this.get("bottomRightMinThickness")){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"w-resize":"n-resize")}else{if(SC.browser.msie){b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"e-resize":"n-resize")}else{b.set("cursorStyle",this._layoutDirection===SC.LAYOUT_HORIZONTAL?"ew-resize":"ns-resize")}}}a.set("cursor",b);if(this._inLiveResize){this.set("cursor",b)}}.observes("layoutDirection"),splitViewCanCollapse:function(b,a){if(b.get("canCollapseViews")===NO){return NO}if(a.get("canCollapse")===NO){return NO}return YES},splitViewConstrainThickness:function(c,a,b){return b},_forceSplitCalculation:function(){this.updateLayout()}.observes("*pane.isPaneAttached"),viewDidResize:function(){arguments.callee.base.apply(this,arguments);this.notifyPropertyChange("topLeftThickness").notifyPropertyChange("bottomRightThickness")}.observes("layout")});SC.mixin(SC.View.prototype,{splitView:function(){var a=this;while(a&&!a.isSplitView){a=a.get("parentView")}return a}.property("parentView").cacheable()});sc_require("views/collection");SC.StackedView=SC.CollectionView.extend({classNames:["sc-stacked-view"],layout:{top:0,left:0,right:0,height:1},computeNowShowing:function(a){return this.get("allContentIndexes")},updateHeight:function(a){if(a){this._updateHeight()}else{this.invokeLast(this._updateHeight)}return this},_updateHeight:function(){var e=this.get("childViews"),b=e.get("length"),c,d,a;if(b===0){a=1}else{c=e.objectAt(b-1);d=c?c.get("layer"):null;a=d?(d.offsetTop+d.offsetHeight):1;d=null}this.adjust("height",a)},didReload:function(a){return this.updateHeight()},didCreateLayer:function(){return this.updateHeight()}});SC.StaticContentView=SC.View.extend(SC.StaticLayout,{classNames:["sc-static-content-view"],displayProperties:["content"],content:null,contentLayoutDidChange:function(){this._viewFrameDidChange()},useStaticLayout:YES,frame:function(){var a=this.get("layer"),b;if(!a){return{x:0,y:0,width:0,height:0}}if(a.getBoundingClientRect&&!SC.browser.isIE8OrLower){b=a.getBoundingClientRect();return{x:0,y:0,width:b.width,height:b.height}}else{return{x:0,y:0,width:a.clientWidth,height:a.clientHeight}}}.property("content").cacheable(),parentViewDidResize:function(){this.contentLayoutDidChange()},didUpdateLayer:function(){this.contentLayoutDidChange()},render:function(a,c){var b=this.get("content");if(b){a.push(b||"")}},touchStart:function(a){a.allowDefault();return YES},touchEnd:function(a){a.allowDefault();return YES}});sc_require("views/segmented");SC.TOP_LOCATION="top";SC.TOP_TOOLBAR_LOCATION="top-toolbar";SC.BOTTOM_LOCATION="bottom";SC.TabView=SC.View.extend({classNames:["sc-tab-view"],displayProperties:["nowShowing"],nowShowing:null,items:[],isEnabled:YES,itemTitleKey:null,itemValueKey:null,itemIsEnabledKey:null,itemIconKey:null,itemWidthKey:null,itemToolTipKey:null,tabHeight:SC.REGULAR_BUTTON_HEIGHT,tabLocation:SC.TOP_LOCATION,userDefaultKey:null,_tab_nowShowingDidChange:function(){var a=this.get("nowShowing");this.get("containerView").set("nowShowing",a);this.get("segmentedView").set("value",a);return this}.observes("nowShowing"),_tab_saveUserDefault:function(){var a=this.get("nowShowing");var b=this.get("userDefaultKey");if(b){SC.userDefaults.set([b,"nowShowing"].join(":"),a)}}.observes("nowShowing"),_tab_itemsDidChange:function(){this.get("segmentedView").set("items",this.get("items"));return this}.observes("items"),init:function(){arguments.callee.base.apply(this,arguments);this._tab_nowShowingDidChange()._tab_itemsDidChange()},awake:function(){arguments.callee.base.apply(this,arguments);var a=this.get("userDefaultKey");if(a){a=[a,"nowShowing"].join(":");var b=SC.userDefaults.get(a);if(!SC.none(b)){this.set("nowShowing",b)}}},createChildViews:function(){var f=[],a,e,d,c=this.get("tabLocation"),b=this.get("tabHeight"),g=this.get("controlSize");if(c===SC.TOP_LOCATION){d={top:b/2+1,left:0,right:0,bottom:0,border:1}}else{if(c===SC.TOP_TOOLBAR_LOCATION){d={top:b+1,left:0,right:0,bottom:0,border:1}}else{d={top:0,left:0,right:0,bottom:(b/2)-1,border:1}}}e=this.containerView.extend({layout:d,ariaRole:"tabpanel"});a=this.containerView=this.createChildView(e);f.push(a);d=(c===SC.TOP_LOCATION||c===SC.TOP_TOOLBAR_LOCATION)?{height:b,left:0,right:0,top:0}:{height:b,left:0,right:0,bottom:0};this.segmentedView=this.get("segmentedView").extend({layout:d,controlSize:g,_sc_tab_segmented_valueDidChange:function(){var h=this.get("parentView");if(h){h.set("nowShowing",this.get("value"))}}.observes("value"),init:function(){var h=this.get("parentView");if(h){SC._TAB_ITEM_KEYS.forEach(function(j){this[j]=h.get(j)},this)}return arguments.callee.base.apply(this,arguments)}});a=this.segmentedView=this.createChildView(this.segmentedView);f.push(a);this.set("childViews",f);return this},containerView:SC.ContainerView.extend({renderDelegateName:"wellRenderDelegate"}),segmentedView:SC.SegmentedView});SC._TAB_ITEM_KEYS=["itemTitleKey","itemValueKey","itemIsEnabledKey","itemIconKey","itemWidthKey","itemToolTipKey","itemActionKey","itemTargetKey"];SC.ThumbView=SC.View.extend({classNames:["sc-thumb-view"],isEnabled:YES,isEnabledBindingDefault:SC.Binding.bool(),prepareContext:function(a,c){var b=this.get("splitView");if(b){this.set("cursor",b.get("thumbViewCursor"))}return arguments.callee.base.apply(this,arguments)},mouseDown:function(a){if(!this.get("isEnabled")){return NO}var b=this.get("splitView");return(b)?b.mouseDownInThumbView(a,this):arguments.callee.base.apply(this,arguments)},touchStart:function(a){return this.mouseDown(a)}});SC.WebView=SC.View.extend(SC.Control,{classNames:"sc-web-view",displayProperties:["value","shouldAutoResize"],shouldAutoResize:NO,render:function(a,d){var c=this.get("value"),b;if(d){a.push('<iframe src="'+c+'" style="position: absolute; width: 100%; height: 100%; border: 0px; margin: 0px; padding: 0px;"></iframe>')}else{if(c!==this._lastSrc){b=this.$("iframe");b.attr("src","javascript:;");b.attr("src",c)}}this._lastSrc=c},didCreateLayer:function(){var a=this.$("iframe");SC.Event.add(a,"load",this,this.iframeDidLoad)},willDestroyLayer:function(){var a=this.$("iframe");SC.Event.remove(a,"load",this,this.iframeDidLoad)},iframeDidLoad:function(){if(this.get("shouldAutoResize")===YES){var a;var c=this.$("iframe")[0];if(c&&c.contentWindow){a=c.contentWindow;if(a&&a.document&&a.document.documentElement){var b=a.document.documentElement;if(!SC.browser.isIE){this.$().width(b.scrollWidth);this.$().height(b.scrollHeight)}else{this.$().width(b.scrollWidth+12);this.$().height(b.scrollHeight+5)}}}}}});SC.WELL_CONTAINER_PADDING=15;SC.WellView=SC.ContainerView.extend({classNames:"sc-well-view",contentLayout:{top:SC.WELL_CONTAINER_PADDING,bottom:SC.WELL_CONTAINER_PADDING,left:SC.WELL_CONTAINER_PADDING,right:SC.WELL_CONTAINER_PADDING},renderDelegateName:"wellRenderDelegate",createChildViews:function(){var a=this.get("contentView");if(a){a=this.contentView=this.createChildView(a);a.set("layout",this.contentLayout);this.childViews=[a]}},contentViewDidChange:function(){var a=this.get("contentView");a.set("layout",this.contentLayout);this.replaceContent(a)}.observes("contentView")});Function.prototype.handleEvents=function(){this.isEventHandler=YES;this.events=arguments;return this};Function.prototype.stateObserves=function(){this.isStateObserveHandler=YES;this.args=SC.A(arguments);return this};SC.StatePathMatcher=SC.Object.extend({state:null,expression:null,tokens:null,init:function(){arguments.callee.base.apply(this,arguments);this._parseExpression()},_parseExpression:function(){var h=this.expression?this.expression.split("."):[],b=h.length,f=0,c,e=null,d,g=[];for(;f<b;f+=1){c=h[f];if(c.indexOf("~")>=0){c=c.split("~");if(c.length>2){throw"Invalid use of '~' at part %@".fmt(f)}d=SC.StatePathMatcher._ExpandToken.create({start:c[0],end:c[1]})}else{if(c==="this"){if(g.length>0){throw"Invalid use of 'this' at part %@".fmt(f)}d=SC.StatePathMatcher._ThisToken.create()}else{d=SC.StatePathMatcher._BasicToken.create({value:c})}}d.owner=this;g.push(d)}this.set("tokens",g);var a=SC.clone(g);this._chain=e=a.pop();while(d=a.pop()){e.nextToken=d;e=d}},lastPart:function(){var c=this.get("tokens"),a=c?c.length:0,b=a>0?c[a-1]:null;return b.get("lastPart")}.property("tokens").cacheable(),match:function(a){this._stack=a.split(".");if(SC.empty(a)||SC.typeOf(a)!==SC.T_STRING){return NO}return this._chain.match()},_pop:function(){this._lastPopped=this._stack.pop();return this._lastPopped}});SC.StatePathMatcher._Token=SC.Object.extend({type:null,owner:null,nextToken:null,lastPart:null,match:function(){return NO}});SC.StatePathMatcher._BasicToken=SC.StatePathMatcher._Token.extend({type:"basic",value:null,lastPart:function(){return this.value}.property("value").cacheable(),match:function(){var a=this.owner._pop(),b=this.nextToken;if(this.value!==a){return NO}return b?b.match():YES}});SC.StatePathMatcher._ExpandToken=SC.StatePathMatcher._Token.extend({type:"expand",start:null,end:null,lastPart:function(){return this.end}.property("end").cacheable(),match:function(){var d=this.start,a=this.end,b,c=this.nextToken;b=this.owner._pop();if(b!==a){return NO}while(b=this.owner._pop()){if(b===d){return c?c.match():YES}}return NO}});SC.StatePathMatcher._ThisToken=SC.StatePathMatcher._Token.extend({type:"this",lastPart:"this",match:function(){var e=this.owner.state,c=e.get("substates"),a=c.length,d=0,b;b=this.owner._lastPopped;if(!b||this.owner._stack.length!==0){return NO}for(;d<a;d+=1){if(c[d].get("name")===b){return YES}}return NO}});SC.Async=SC.Object.extend({func:null,arg1:null,arg2:null,tryToPerform:function(d){var c=this.get("func"),b=this.get("arg1"),a=this.get("arg2"),e=SC.typeOf(c);if(e===SC.T_STRING){d.tryToPerform(c,b,a)}else{if(e===SC.T_FUNCTION){c.apply(d,[b,a])}}}});SC.Async.mixin({perform:function(c,b,a){return SC.Async.create({func:c,arg1:b,arg2:a})}});SC.State=SC.Object.extend({name:null,parentState:null,historyState:null,initialSubstate:null,substatesAreConcurrent:NO,substates:null,statechart:null,stateIsInitialized:NO,currentSubstates:null,enteredSubstates:null,trace:function(){var a=this.getPath("statechart.statechartTraceKey");return this.getPath("statechart.%@".fmt(a))}.property().cacheable(),owner:function(){var c=this.get("statechart"),b=c?c.get("statechartOwnerKey"):null,a=c?c.get(b):null;return a?a:c}.property().cacheable(),init:function(){arguments.callee.base.apply(this,arguments);this._registeredEventHandlers={};this._registeredStringEventHandlers={};this._registeredRegExpEventHandlers=[];this._registeredStateObserveHandlers={};this._registeredSubstatePaths={};this._registeredSubstates=[];var b=this.get("statechart"),c=b?b.get("statechartOwnerKey"):null,a=b?b.get("statechartTraceKey"):null;if(b){b.addObserver(c,this,"_statechartOwnerDidChange");b.addObserver(a,this,"_statechartTraceDidChange")}},destroy:function(){var c=this.get("statechart"),d=c?c.get("statechartOwnerKey"):null,a=c?c.get("statechartTraceKey"):null;if(c){c.removeObserver(d,this,"_statechartOwnerDidChange");c.removeObserver(a,this,"_statechartTraceDidChange")}var b=this.get("substates");if(b){b.forEach(function(e){e.destroy()})}this._teardownAllStateObserveHandlers();this.set("substates",null);this.set("currentSubstates",null);this.set("enteredSubstates",null);this.set("parentState",null);this.set("historyState",null);this.set("initialSubstate",null);this.set("statechart",null);this.notifyPropertyChange("trace");this.notifyPropertyChange("owner");this._registeredEventHandlers=null;this._registeredStringEventHandlers=null;this._registeredRegExpEventHandlers=null;this._registeredStateObserveHandlers=null;this._registeredSubstatePaths=null;this._registeredSubstates=null;arguments.callee.base.apply(this,arguments)},initState:function(){if(this.get("stateIsInitialized")){return}this._registerWithParentStates();var m=null,k=null,b=null,n=[],j=NO,h=this.get("initialSubstate"),f=this.get("substatesAreConcurrent"),d=this.get("statechart"),c=0,g=0,e=NO,a=null;this.set("substates",n);if(SC.kindOf(h,SC.HistoryState)&&h.isClass){a=this.createSubstate(h);this.set("initialSubstate",a);if(SC.none(a.get("defaultState"))){this.stateLogError("Initial substate is invalid. History state requires the name of a default state to be set");this.set("initialSubstate",null);a=null}}for(m in this){k=this[m];e=SC.typeOf(k)===SC.T_FUNCTION;if(e&&k.isEventHandler){this._registerEventHandler(m,k);continue}if(e&&k.isStateObserveHandler){this._registerStateObserveHandler(m,k);continue}if(e&&k.statePlugin){k=k.apply(this)}if(SC.kindOf(k,SC.State)&&k.isClass&&this[m]!==this.constructor){b=this._addSubstate(m,k);if(m===h){this.set("initialSubstate",b);j=YES}else{if(a&&a.get("defaultState")===m){a.set("defaultState",b);j=YES}}}}if(!SC.none(h)&&!j){this.stateLogError("Unable to set initial substate %@ since it did not match any of state's %@ substates".fmt(h,this))}if(n.length===0){if(!SC.none(h)){this.stateLogWarning("Unable to make %@ an initial substate since state %@ has no substates".fmt(h,this))}}else{if(n.length>0){b=this._addEmptyInitialSubstateIfNeeded();if(!b&&h&&f){this.set("initialSubstate",null);this.stateLogWarning("Can not use %@ as initial substate since substates are all concurrent for state %@".fmt(h,this))}}}this.notifyPropertyChange("substates");this.set("currentSubstates",[]);this.set("enteredSubstates",[]);this.set("stateIsInitialized",YES)},_addEmptyInitialSubstateIfNeeded:function(){var c=this.get("initialSubstate"),b=this.get("substatesAreConcurrent");if(c||b){return null}var a=this.createSubstate(SC.EmptyState);this.set("initialSubstate",a);this.get("substates").push(a);this[a.get("name")]=a;a.initState();this.stateLogWarning("state %@ has no initial substate defined. Will default to using an empty state as initial substate".fmt(this));return a},_addSubstate:function(c,d,a){var b=this.get("substates");a=SC.clone(a)||{};a.name=c;d=this.createSubstate(d,a);b.push(d);this[c]=d;d.initState();return d},addSubstate:function(c,e,b){if(SC.empty(c)){this.stateLogError("Can not add substate. name required");return null}if(this[c]!==undefined){this.stateLogError("Can not add substate '%@'. Already a defined property".fmt(c));return null}if(!this.get("stateIsInitialized")){this.stateLogError("Can not add substate '%@'. this state is not yet initialized".fmt(c));return null}var a=arguments.length;if(a===1){e=SC.State}else{if(a===2&&SC.typeOf(e)===SC.T_HASH){b=e;e=SC.State}}var d=SC.kindOf(e,SC.State)&&e.isClass;if(!d){this.stateLogError("Can not add substate '%@'. must provide a state class".fmt(c));return null}e=this._addSubstate(c,e,b);this._addEmptyInitialSubstateIfNeeded();this.notifyPropertyChange("substates");return e},createSubstate:function(b,a){a=a||{};return b.create({parentState:this,statechart:this.get("statechart")},a)},_registerEventHandler:function(b,e){var d=e.events,f=null,a=d.length,c=0;this._registeredEventHandlers[b]=e;for(;c<a;c+=1){f=d[c];if(SC.typeOf(f)===SC.T_STRING){this._registeredStringEventHandlers[f]={name:b,handler:e};continue}if(f instanceof RegExp){this._registeredRegExpEventHandlers.push({name:b,handler:e,regexp:f});continue}this.stateLogError("Invalid event %@ for event handler %@ in state %@".fmt(f,b,this))}},_registerStateObserveHandler:function(d,f){var e=0,c=f.args,b=c.length,a,g=YES;for(;e<b;e+=1){a=c[e];if(SC.typeOf(a)!==SC.T_STRING||SC.empty(a)){this.stateLogError("Invalid argument %@ for state observe handler %@ in state %@".fmt(a,d,this));g=NO}}if(!g){return}this._registeredStateObserveHandlers[d]=f.args},_registerWithParentStates:function(){var a=this.get("parentState");while(!SC.none(a)){a._registerSubstate(this);a=a.get("parentState")}},_registerSubstate:function(b){var c=b.pathRelativeTo(this);if(SC.none(c)){return}this._registeredSubstates.push(b);var a=this._registeredSubstatePaths;if(a[b.get("name")]===undefined){a[b.get("name")]={}}var d=a[b.get("name")];d[c]=b},pathRelativeTo:function(b){var c=this.get("name"),a=this.get("parentState");while(!SC.none(a)&&a!==b){c="%@.%@".fmt(a.get("name"),c);a=a.get("parentState")}if(a!==b&&b!==this){this.stateLogError("Can not generate relative path from %@ since it not a parent state of %@".fmt(b,this));return null}return c},getSubstate:function(f,h,e){if(!f){return null}var b=SC.typeOf(f);if(b===SC.T_OBJECT){return this._registeredSubstates.indexOf(f)>-1?f:null}if(b!==SC.T_STRING){this.stateLogError("Can not find matching subtype. value must be an object or string: %@".fmt(f));return null}var d=SC.StatePathMatcher.create({state:this,expression:f}),c=[],g;if(d.get("tokens").length===0){return null}var k=this._registeredSubstatePaths[d.get("lastPart")];if(!k){return this._notifySubstateNotFound(h,e,f)}for(g in k){if(d.match(g)){c.push(k[g])}}if(c.length===1){return c[0]}if(c.length>1){var j=[];for(g in k){j.push(g)}if(h){return this._notifySubstateNotFound(h,e,f,j)}var a="Can not find substate matching '%@' in state %@. Ambiguous with the following: %@";this.stateLogError(a.fmt(f,this.get("fullPath"),j.join(", ")))}return this._notifySubstateNotFound(h,e,f)},_notifySubstateNotFound:function(d,c,b,a){return d?d.call(c||this,this,b,a):null},getState:function(a){if(a===this.get("name")){return this}if(SC.kindOf(a,SC.State)){return a}return this.getSubstate(a,this._handleSubstateNotFound)},_handleSubstateNotFound:function(d,c,a){var b=this.get("parentState");if(b){return b.getState(c)}if(a){var e="Can not find state matching '%@'. Ambiguous with the following: %@";this.stateLogError(e.fmt(c,a.join(", ")))}return null},gotoState:function(c,a){var b=this.getState(c);if(!b){var d="can not go to state %@ from state %@. Invalid value.";this.stateLogError(d.fmt(c,this));return}var e=this.findFirstRelativeCurrentState(b);this.get("statechart").gotoState(b,e,false,a)},gotoHistoryState:function(d,a,b){var c=this.getState(d);if(!c){var e="can not go to history state %@ from state %@. Invalid value.";this.stateLogError(e.fmt(d,this));return}var f=this.findFirstRelativeCurrentState(c);this.get("statechart").gotoHistoryState(c,f,a,b)},resumeGotoState:function(){this.get("statechart").resumeGotoState()},stateIsCurrentSubstate:function(a){if(SC.typeOf(a)===SC.T_STRING){a=this.get("statechart").getState(a)}var b=this.get("currentSubstates");return !!b&&b.indexOf(a)>=0},stateIsEnteredSubstate:function(b){if(SC.typeOf(b)===SC.T_STRING){b=this.get("statechart").getState(b)}var a=this.get("enteredSubstates");return !!a&&a.indexOf(b)>=0},isRootState:function(){return this.getPath("statechart.rootState")===this}.property(),isCurrentState:function(){return this.stateIsCurrentSubstate(this)}.property("currentSubstates").cacheable(),isConcurrentState:function(){return this.getPath("parentState.substatesAreConcurrent")}.property(),isEnteredState:function(){return this.stateIsEnteredSubstate(this)}.property("enteredSubstates").cacheable(),hasSubstates:function(){return this.getPath("substates.length")>0}.property("substates"),hasCurrentSubstates:function(){var a=this.get("currentSubstates");return !!a&&a.get("length")>0}.property("currentSubstates").cacheable(),hasEnteredSubstates:function(){var a=this.get("enteredSubstates");return !!a&&a.get("length")>0}.property("enteredSubstates").cacheable(),findFirstRelativeCurrentState:function(b){if(this.get("isCurrentState")){return this}var a=this.get("currentSubstates")||[],d=a.get("length"),c=this.get("parentState");if(d===0){return c?c.findFirstRelativeCurrentState():null}if(d>1){b=this.getSubstate(b);if(b){return b.findFirstRelativeCurrentState()}}return a[0]},reenter:function(){if(this.get("isEnteredState")){this.gotoState(this)}else{SC.Logger.error("Can not re-enter state %@ since it is not an entered state in the statechart".fmt(this))}},tryToHandleEvent:function(f,c,b){var g=this.get("trace");if(this._registeredEventHandlers[f]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered event handler".fmt(this,f));return NO}if(this._registeredStateObserveHandlers[f]){this.stateLogWarning("state %@ can not handle event '%@' since it is a registered state observe handler".fmt(this,f));return NO}if(SC.typeOf(this[f])===SC.T_FUNCTION){if(g){this.stateLogTrace("will handle event '%@'".fmt(f))}return(this[f](c,b)!==NO)}var e=this._registeredStringEventHandlers[f];if(e){if(g){this.stateLogTrace("%@ will handle event '%@'".fmt(e.name,f))}return(e.handler.call(this,f,c,b)!==NO)}var a=this._registeredRegExpEventHandlers.length,d=0;for(;d<a;d+=1){e=this._registeredRegExpEventHandlers[d];if(f.match(e.regexp)){if(g){this.stateLogTrace("%@ will handle event '%@'".fmt(e.name,f))}return(e.handler.call(this,f,c,b)!==NO)}}if(SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION){if(g){this.stateLogTrace("unknownEvent will handle event '%@'".fmt(f))}return(this.unknownEvent(f,c,b)!==NO)}return NO},enterState:function(a){},stateWillBecomeEntered:function(){},stateDidBecomeEntered:function(){this._setupAllStateObserveHandlers()},exitState:function(a){},stateWillBecomeExited:function(){this._teardownAllStateObserveHandlers()},stateDidBecomeExited:function(){},_setupAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("addObserver")},_teardownAllStateObserveHandlers:function(){this._configureAllStateObserveHandlers("removeObserver")},_configureAllStateObserveHandlers:function(b){var g,h,f,a,j,d,c,e;for(g in this._registeredStateObserveHandlers){h=this._registeredStateObserveHandlers[g];for(c=0;c<h.length;c+=1){j=h[c];d=g;a=j.indexOf(".");if(a<0){this[b](j,this,d)}else{if(j.indexOf("*")===0){this[b](j.slice(1),this,d)}else{e=null;if(a===0){e=this;j=j.slice(1)}else{if(a===4&&j.slice(0,5)==="this."){e=this;j=j.slice(5)}else{if(a<0&&j.length===4&&j==="this"){e=this;j=""}}}SC.Observers[b](j,this,d,e)}}}}},performAsync:function(c,b,a){return SC.Async.perform(c,b,a)},respondsToEvent:function(d){if(this._registeredEventHandlers[d]){return false}if(SC.typeOf(this[d])===SC.T_FUNCTION){return true}if(this._registeredStringEventHandlers[d]){return true}if(this._registeredStateObserveHandlers[d]){return false}var a=this._registeredRegExpEventHandlers.length,b=0,c;for(;b<a;b+=1){c=this._registeredRegExpEventHandlers[b];if(d.match(c.regexp)){return true}}return SC.typeOf(this["unknownEvent"])===SC.T_FUNCTION},fullPath:function(){var a=this.getPath("statechart.rootState");if(!a){return this.get("name")}return this.pathRelativeTo(a)}.property("name","parentState").cacheable(),toString:function(){return this.get("fullPath")},_enteredSubstatesDidChange:function(){this.notifyPropertyChange("enteredSubstates")}.observes("*enteredSubstates.[]"),_currentSubstatesDidChange:function(){this.notifyPropertyChange("currentSubstates")}.observes("*currentSubstates.[]"),_statechartTraceDidChange:function(){this.notifyPropertyChange("trace")},_statechartOwnerDidChange:function(){this.notifyPropertyChange("owner")},stateLogTrace:function(b){var a=this.get("statechart");a.statechartLogTrace("%@: %@".fmt(this,b))},stateLogWarning:function(b){var a=this.get("statechart");a.statechartLogWarning(b)},stateLogError:function(b){var a=this.get("statechart");a.statechartLogError(b)}});SC.State.plugin=function(c){var a=SC.A(arguments);a.shift();var b=function(){var d=SC.objectForPropertyPath(c);if(!d){console.error("SC.State.plugin: Unable to determine path %@".fmt(c));return undefined}if(!d.isClass||!d.kindOf(SC.State)){console.error("SC.State.plugin: Unable to extend. %@ must be a class extending from SC.State".fmt(c));return undefined}return d.extend.apply(d,a)};b.statePlugin=YES;return b};SC.State.design=SC.State.extend;sc_require("system/state");SC.EMPTY_STATE_NAME="__EMPTY_STATE__";SC.EmptyState=SC.State.extend({name:SC.EMPTY_STATE_NAME,enterState:function(){var a="No initial substate was defined for state %@. Entering default empty state";this.stateLogWarning(a.fmt(this.get("parentState")))}});sc_require("system/state");SC.HistoryState=SC.Object.extend({isRecursive:NO,defaultState:null,statechart:null,parentState:null,state:function(){var b=this.get("defaultState"),a=this.getPath("parentState.historyState");return !!a?a:b}.property().cacheable(),parentHistoryStateDidChange:function(){this.notifyPropertyChange("state")}.observes("*parentState.historyState")});sc_require("system/state");SC.StatechartManager={isResponderContext:YES,isStatechart:YES,statechartIsInitialized:NO,rootState:null,rootStateExample:SC.State,initialState:null,statesAreConcurrent:NO,monitorIsActive:NO,monitor:null,statechartTraceKey:"trace",trace:NO,statechartOwnerKey:"owner",owner:null,autoInitStatechart:YES,suppressStatechartWarnings:NO,initMixin:function(){if(this.get("autoInitStatechart")){this.initStatechart()}},destroyMixin:function(){var b=this.get("rootState"),a=this.get("statechartTraceKey");this.removeObserver(a,this,"_statechartTraceDidChange");b.destroy();this.set("rootState",null)},initStatechart:function(){if(this.get("statechartIsInitialized")){return}this._gotoStateLocked=NO;this._sendEventLocked=NO;this._pendingStateTransitions=[];this._pendingSentEvents=[];this.sendAction=this.sendEvent;if(this.get("monitorIsActive")){this.set("monitor",SC.StatechartMonitor.create({statechart:this}))}var a=this.get("statechartTraceKey");this.addObserver(a,this,"_statechartTraceDidChange");this._statechartTraceDidChange();var d=this.get("allowStatechartTracing"),c=this.get("rootState"),e;if(d){this.statechartLogTrace("BEGIN initialize statechart")}if(!c){c=this._constructRootStateClass()}else{if(SC.typeOf(c)===SC.T_FUNCTION&&c.statePlugin){c=c.apply(this)}}if(!(SC.kindOf(c,SC.State)&&c.isClass)){e="Unable to initialize statechart. Root state must be a state class";this.statechartLogError(e);throw e}c=this.createRootState(c,{statechart:this,name:SC.ROOT_STATE_NAME});this.set("rootState",c);c.initState();if(SC.kindOf(c.get("initialSubstate"),SC.EmptyState)){e="Unable to initialize statechart. Root state must have an initial substate explicilty defined";this.statechartLogError(e);throw e}if(!SC.empty(this.get("initialState"))){var b="initialState";this.set(b,c.get(this.get(b)))}this.set("statechartIsInitialized",YES);this.gotoState(c);if(d){this.statechartLogTrace("END initialize statechart")}},createRootState:function(b,a){if(!a){a={}}b=b.create(a);return b},currentStates:function(){return this.getPath("rootState.currentSubstates")}.property().cacheable(),firstCurrentState:function(){var a=this.get("currentStates");return a?a.objectAt(0):null}.property("currentStates").cacheable(),currentStateCount:function(){return this.getPath("currentStates.length")}.property("currentStates").cacheable(),stateIsCurrentState:function(a){return this.get("rootState").stateIsCurrentSubstate(a)},enteredStates:function(){return this.getPath("rootState.enteredSubstates")}.property().cacheable(),stateIsEntered:function(a){return this.get("rootState").stateIsEnteredSubstate(a)},doesContainState:function(a){return !SC.none(this.getState(a))},getState:function(b){var a=this.get("rootState");return a===b?a:a.getSubstate(b)},gotoState:function(b,m,n,c){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@. statechart has not yet been initialized".fmt(b));return}if(this.get("isDestroyed")){this.statechartLogError("can not go to state %@. statechart is destroyed".fmt(this));return}var j=this._processGotoStateArgs(arguments);b=j.state;m=j.fromCurrentState;n=j.useHistory;c=j.context;var p=null,k=[],o=[],f=this.get("allowStatechartTracing"),a=this.get("rootState"),h=b,e=m,d;b=this.getState(b);if(SC.none(b)){this.statechartLogError("Can not to goto state %@. Not a recognized state in statechart".fmt(h));return}if(this._gotoStateLocked){this._pendingStateTransitions.push({state:b,fromCurrentState:m,useHistory:n,context:c});return}this._gotoStateLocked=YES;if(m){m=this.getState(m);if(SC.none(m)||!m.get("isCurrentState")){d="Can not to goto state %@. %@ is not a recognized current state in statechart";this.statechartLogError(d.fmt(h,e));this._gotoStateLocked=NO;return}}else{m=b.findFirstRelativeCurrentState();if(!m){m=this.get("firstCurrentState")}}if(f){this.statechartLogTrace("BEGIN gotoState: %@".fmt(b));d="starting from current state: %@";d=d.fmt(m?m:"---");this.statechartLogTrace(d);d="current states before: %@";d=d.fmt(this.getPath("currentStates.length")>0?this.get("currentStates"):"---");this.statechartLogTrace(d)}if(!SC.none(m)){k=this._createStateChain(m)}o=this._createStateChain(b);p=this._findPivotState(k,o);if(p){if(f){this.statechartLogTrace("pivot state = %@".fmt(p))}if(p.get("substatesAreConcurrent")&&p!==b){this.statechartLogError("Can not go to state %@ from %@. Pivot state %@ has concurrent substates.".fmt(b,m,p));this._gotoStateLocked=NO;return}}var g=[];this._traverseStatesToExit(k.shift(),k,p,g);if(p!==b){this._traverseStatesToEnter(o.pop(),o,p,n,g)}else{this._traverseStatesToExit(p,[],null,g);this._traverseStatesToEnter(p,null,null,n,g)}this._executeGotoStateActions(b,g,null,c)},gotoStateActive:function(){return this._gotoStateLocked}.property(),gotoStateSuspended:function(){return this._gotoStateLocked&&!!this._gotoStateSuspendedPoint}.property(),resumeGotoState:function(){if(!this.get("gotoStateSuspended")){this.statechartLogError("Can not resume goto state since it has not been suspended");return}var a=this._gotoStateSuspendedPoint;this._executeGotoStateActions(a.gotoState,a.actions,a.marker,a.context)},_executeGotoStateActions:function(g,f,b,c){var e=null,a=f.length,d=null;b=SC.none(b)?0:b;for(;b<a;b+=1){e=f[b];switch(e.action){case SC.EXIT_STATE:d=this._exitState(e.state,c);break;case SC.ENTER_STATE:d=this._enterState(e.state,e.currentState,c);break}if(SC.kindOf(d,SC.Async)){this._gotoStateSuspendedPoint={gotoState:g,actions:f,marker:b+1,context:c};d.tryToPerform(e.state);return}}this.beginPropertyChanges();this.notifyPropertyChange("currentStates");this.notifyPropertyChange("enteredStates");this.endPropertyChanges();if(this.get("allowStatechartTracing")){this.statechartLogTrace("current states after: %@".fmt(this.get("currentStates")));this.statechartLogTrace("END gotoState: %@".fmt(g))}this._gotoStateSuspendedPoint=null;this._gotoStateLocked=NO;this._flushPendingStateTransition()},_exitState:function(d,b){var c;if(d.get("currentSubstates").indexOf(d)>=0){c=d.get("parentState");while(c){c.get("currentSubstates").removeObject(d);c=c.get("parentState")}}c=d;while(c){c.get("enteredSubstates").removeObject(d);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("<-- exiting state: %@".fmt(d))}d.set("currentSubstates",[]);d.stateWillBecomeExited();var a=this.exitState(d,b);d.stateDidBecomeExited();if(this.get("monitorIsActive")){this.get("monitor").pushExitedState(d)}d._traverseStatesToExit_skipState=NO;return a},exitState:function(b,a){return b.exitState(a)},_enterState:function(d,e,b){var c=d.get("parentState");if(c&&!d.get("isConcurrentState")){c.set("historyState",d)}if(e){c=d;while(c){c.get("currentSubstates").pushObject(d);c=c.get("parentState")}}c=d;while(c){c.get("enteredSubstates").pushObject(d);c=c.get("parentState")}if(this.get("allowStatechartTracing")){this.statechartLogTrace("--> entering state: %@".fmt(d))}d.stateWillBecomeEntered();var a=this.enterState(d,b);d.stateDidBecomeEntered();if(this.get("monitorIsActive")){this.get("monitor").pushEnteredState(d)}return a},enterState:function(b,a){return b.enterState(a)},gotoHistoryState:function(f,e,c,d){if(!this.get("statechartIsInitialized")){this.statechartLogError("can not go to state %@'s history state. Statechart has not yet been initialized".fmt(f));return}var b=this._processGotoStateArgs(arguments);f=b.state;e=b.fromCurrentState;c=b.useHistory;d=b.context;f=this.getState(f);if(!f){this.statechartLogError("Can not to goto state %@'s history state. Not a recognized state in statechart".fmt(f));return}var a=f.get("historyState");if(!c){if(a){this.gotoState(a,e,d)}else{this.gotoState(f,e,d)}}else{this.gotoState(f,e,YES,d)}},sendEvent:function(b,g,f){if(this.get("isDestroyed")){this.statechartLogError("can send event %@. statechart is destroyed".fmt(b));return}var c=NO,m=NO,h=this.get("currentStates").slice(),k={},j=0,e=0,a=null,d=this.get("allowStatechartTracing");if(this._sendEventLocked||this._goStateLocked){this._pendingSentEvents.push({event:b,arg1:g,arg2:f});return}this._sendEventLocked=YES;if(d){this.statechartLogTrace("BEGIN sendEvent: '%@'".fmt(b))}j=h.get("length");for(;e<j;e+=1){m=NO;a=h[e];if(!a.get("isCurrentState")){continue}while(!m&&a){if(!k[a.get("fullPath")]){m=a.tryToHandleEvent(b,g,f);k[a.get("fullPath")]=YES}if(!m){a=a.get("parentState")}else{c=YES}}}this._sendEventLocked=NO;if(d){if(!c){this.statechartLogTrace("No state was able handle event %@".fmt(b))}this.statechartLogTrace("END sendEvent: '%@'".fmt(b))}var n=this._flushPendingSentEvents();return c?this:(n?this:null)},_createStateChain:function(b){var a=[];while(b){a.push(b);b=b.get("parentState")}return a},_findPivotState:function(c,b){if(c.length===0||b.length===0){return null}var a=c.find(function(e,d){if(b.indexOf(e)>=0){return YES}});return a},_traverseStatesToExit:function(b,k,d,h){if(!b||b===d){return}var e=this.get("allowStatechartTracing");if(b.get("substatesAreConcurrent")){var f=0,g=b.get("currentSubstates"),j=g.length,c=null;for(;f<j;f+=1){c=g[f];if(c._traverseStatesToExit_skipState===YES){continue}var a=this._createStateChain(c);this._traverseStatesToExit(a.shift(),a,b,h)}}h.push({action:SC.EXIT_STATE,state:b});if(b.get("isCurrentState")){b._traverseStatesToExit_skipState=YES}this._traverseStatesToExit(k.shift(),k,d,h)},_traverseStatesToEnter:function(b,e,j,g,d){if(!b){return}var c=this.get("allowStatechartTracing");if(j){if(b!==j){this._traverseStatesToEnter(e.pop(),e,j,g,d)}else{this._traverseStatesToEnter(e.pop(),e,null,g,d)}}else{if(!e||e.length===0){var h={action:SC.ENTER_STATE,state:b,currentState:NO};d.push(h);var f=b.get("initialSubstate"),a=b.get("historyState");if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),null,g,d)}else{if(b.get("hasSubstates")&&a&&g){this._traverseStatesToEnter(a,null,null,g,d)}else{if(f){if(SC.kindOf(f,SC.HistoryState)){if(!g){g=f.get("isRecursive")}f=f.get("state")}this._traverseStatesToEnter(f,null,null,g,d)}else{h.currentState=YES}}}}else{if(e.length>0){d.push({action:SC.ENTER_STATE,state:b});var k=e.pop();this._traverseStatesToEnter(k,e,null,g,d);if(b.get("substatesAreConcurrent")){this._traverseConcurrentStatesToEnter(b.get("substates"),k,g,d)}}}}},respondsTo:function(d){var b=this.get("currentStates"),a=b.get("length"),c=0,e=null;for(;c<a;c+=1){e=b.objectAt(c);while(e){if(e.respondsToEvent(d)){return true}e=e.get("parentState")}}return SC.typeOf(this[d])===SC.T_FUNCTION},tryToPerform:function(d,c,b){if(!this.respondsTo(d)){return NO}if(SC.typeOf(this[d])===SC.T_FUNCTION){var a=this[d](c,b);if(a!==NO){return YES}}return !!this.sendEvent(d,c,b)},invokeStateMethod:function(k,j,c){if(k==="unknownEvent"){this.statechartLogError("can not invoke method unkownEvent");return}j=SC.A(arguments);j.shift();var f=j.length,n=f>0?j[f-1]:null,m=SC.typeOf(n)===SC.T_FUNCTION?j.pop():null,e=this.get("currentStates"),d=0,b=null,h={},a,o=undefined,g=0;f=e.get("length");for(;d<f;d+=1){b=e.objectAt(d);while(b){if(h[b.get("fullPath")]){break}h[b.get("fullPath")]=YES;a=b[k];if(SC.typeOf(a)===SC.T_FUNCTION&&!a.isEventHandler){o=a.apply(b,j);if(m){m.call(this,b,o)}g+=1;break}b=b.get("parentState")}}return g===1?o:undefined},_traverseConcurrentStatesToEnter:function(d,c,f,b){var e=0,a=d.length,g=null;for(;e<a;e+=1){g=d[e];if(g!==c){this._traverseStatesToEnter(g,null,null,f,b)}}},_flushPendingStateTransition:function(){if(!this._pendingStateTransitions){this.statechartLogError("Unable to flush pending state transition. _pendingStateTransitions is invalid");return}var a=this._pendingStateTransitions.shift();if(!a){return}this.gotoState(a.state,a.fromCurrentState,a.useHistory,a.context)},_flushPendingSentEvents:function(){var a=this._pendingSentEvents.shift();if(!a){return null}return this.sendEvent(a.event,a.arg1,a.arg2)},_monitorIsActiveDidChange:function(){if(this.get("monitorIsActive")&&SC.none(this.get("monitor"))){this.set("monitor",SC.StatechartMonitor.create())}}.observes("monitorIsActive"),_processGotoStateArgs:function(b){var d={state:null,fromCurrentState:null,useHistory:false,context:null},a=null,c=null;b=SC.$A(b);b=b.filter(function(e){return !(e===undefined)});a=b.length;if(a<1){return d}d.state=b[0];if(a===2){c=b[1];switch(SC.typeOf(c)){case SC.T_BOOL:d.useHistory=c;break;case SC.T_HASH:d.context=c;break;default:d.fromCurrentState=c}}else{if(a===3){c=b[1];if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c;d.context=b[2]}else{d.fromCurrentState=c;c=b[2];if(SC.typeOf(c)===SC.T_BOOL){d.useHistory=c}else{d.context=c}}}else{d.fromCurrentState=b[1];d.useHistory=b[2];d.context=b[3]}}return d},_constructRootStateClass:function(){var d="rootStateExample",e=this.get(d),b=this.get("initialState"),c=this.get("statesAreConcurrent"),a=0,j,g,f,h={};if(SC.typeOf(e)===SC.T_FUNCTION&&e.statePlugin){e=e.apply(this)}if(!(SC.kindOf(e,SC.State)&&e.isClass)){this._logStatechartCreationError("Invalid root state example");return null}if(c&&!SC.empty(b)){this._logStatechartCreationError("Can not assign an initial state when states are concurrent")}else{if(c){h.substatesAreConcurrent=YES}else{if(SC.typeOf(b)===SC.T_STRING){h.initialSubstate=b}else{this._logStatechartCreationError("Must either define initial state or assign states as concurrent");return null}}}for(j in this){if(j===d){continue}g=this[j];f=SC.typeOf(g)===SC.T_FUNCTION;if(f&&g.statePlugin){g=g.apply(this)}if(SC.kindOf(g,SC.State)&&g.isClass&&this[j]!==this.constructor){h[j]=g;a+=1}}if(a===0){this._logStatechartCreationError("Must define one or more states");return null}return e.extend(h)},_logStatechartCreationError:function(a){SC.Logger.error("Unable to create statechart for %@: %@.".fmt(this,a))},statechartLogTrace:function(a){SC.Logger.info("%@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogError:function(a){SC.Logger.error("ERROR %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogWarning:function(a){if(this.get("suppressStatechartWarnings")){return}SC.Logger.warn("WARN %@: %@".fmt(this.get("statechartLogPrefix"),a))},statechartLogPrefix:function(){var b=SC._object_className(this.constructor),a=this.get("name"),c;if(SC.empty(a)){c="%@<%@>".fmt(b,SC.guidFor(this))}else{c="%@<%@, %@>".fmt(b,a,SC.guidFor(this))}return c}.property().cacheable(),allowStatechartTracing:function(){var a=this.get("statechartTraceKey");return this.get(a)}.property().cacheable(),_statechartTraceDidChange:function(){this.notifyPropertyChange("allowStatechartTracing")}};SC.ROOT_STATE_NAME="__ROOT_STATE__";SC.EXIT_STATE=0;SC.ENTER_STATE=1;SC.Statechart=SC.Object.extend(SC.StatechartManager,{autoInitStatechart:NO});SC.Statechart.design=SC.Statechart.extend;SC.stringsFor("English",{"SC.Date.Era.AD.Abbreviated":"AD","SC.Date.Era.AD.Full":"Anno Domini","SC.Date.Era.AD.Letter":"A","SC.Date.Era.BC.Abbreviated":"BC","SC.Date.Era.BC.Full":"Before Christ","SC.Date.Era.BC.Letter":"B","SC.Date.Quarter.Q1.Abbreviated":"Q1","SC.Date.Quarter.Q1.Full":"1st quarter","SC.Date.Quarter.StandAlone.Q1.Abbreviated":"Q1","SC.Date.Quarter.StandAlone.Q1.Full":"1st Quarter","SC.Date.Quarter.Q2.Abbreviated":"Q2","SC.Date.Quarter.Q2.Full":"2nd quarter","SC.Date.Quarter.StandAlone.Q2.Abbreviated":"Q2","SC.Date.Quarter.StandAlone.Q2.Full":"2nd Quarter","SC.Date.Quarter.Q3.Abbreviated":"Q3","SC.Date.Quarter.Q3.Full":"3rd quarter","SC.Date.Quarter.StandAlone.Q3.Abbreviated":"Q3","SC.Date.Quarter.StandAlone.Q3.Full":"3rd Quarter","SC.Date.Quarter.Q4.Abbreviated":"Q4","SC.Date.Quarter.Q4.Full":"4th quarter","SC.Date.Quarter.StandAlone.Q4.Abbreviated":"Q4","SC.Date.Quarter.StandAlone.Q4.Full":"4th Quarter","SC.Date.Month.January.Abbreviated":"Jan","SC.Date.Month.January.Full":"January","SC.Date.Month.January.Letter":"J","SC.Date.Month.StandAlone.January.Abbreviated":"Jan","SC.Date.Month.StandAlone.January.Full":"January","SC.Date.Month.StandAlone.January.Letter":"J","SC.Date.Month.February.Abbreviated":"Feb","SC.Date.Month.February.Full":"February","SC.Date.Month.February.Letter":"F","SC.Date.Month.StandAlone.February.Abbreviated":"Feb","SC.Date.Month.StandAlone.February.Full":"February","SC.Date.Month.StandAlone.February.Letter":"F","SC.Date.Month.March.Abbreviated":"Mar","SC.Date.Month.March.Full":"March","SC.Date.Month.March.Letter":"M","SC.Date.Month.StandAlone.March.Abbreviated":"Mar","SC.Date.Month.StandAlone.March.Full":"March","SC.Date.Month.StandAlone.March.Letter":"M","SC.Date.Month.April.Abbreviated":"Apr","SC.Date.Month.April.Full":"April","SC.Date.Month.April.Letter":"A","SC.Date.Month.StandAlone.April.Abbreviated":"Apr","SC.Date.Month.StandAlone.April.Full":"April","SC.Date.Month.StandAlone.April.Letter":"A","SC.Date.Month.May.Abbreviated":"May","SC.Date.Month.May.Full":"May","SC.Date.Month.May.Letter":"M","SC.Date.Month.StandAlone.May.Abbreviated":"May","SC.Date.Month.StandAlone.May.Full":"May","SC.Date.Month.StandAlone.May.Letter":"M","SC.Date.Month.June.Abbreviated":"Jun","SC.Date.Month.June.Full":"June","SC.Date.Month.June.Letter":"J","SC.Date.Month.StandAlone.June.Abbreviated":"Jun","SC.Date.Month.StandAlone.June.Full":"June","SC.Date.Month.StandAlone.June.Letter":"J","SC.Date.Month.July.Abbreviated":"Jul","SC.Date.Month.July.Full":"July","SC.Date.Month.July.Letter":"J","SC.Date.Month.StandAlone.July.Abbreviated":"Jul","SC.Date.Month.StandAlone.July.Full":"July","SC.Date.Month.StandAlone.July.Letter":"J","SC.Date.Month.August.Abbreviated":"Aug","SC.Date.Month.August.Full":"August","SC.Date.Month.August.Letter":"A","SC.Date.Month.StandAlone.August.Abbreviated":"Aug","SC.Date.Month.StandAlone.August.Full":"August","SC.Date.Month.StandAlone.August.Letter":"A","SC.Date.Month.September.Abbreviated":"Sep","SC.Date.Month.September.Full":"September","SC.Date.Month.September.Letter":"S","SC.Date.Month.StandAlone.September.Abbreviated":"Sep","SC.Date.Month.StandAlone.September.Full":"September","SC.Date.Month.StandAlone.September.Letter":"S","SC.Date.Month.October.Abbreviated":"Oct","SC.Date.Month.October.Full":"October","SC.Date.Month.October.Letter":"O","SC.Date.Month.StandAlone.October.Abbreviated":"Oct","SC.Date.Month.StandAlone.October.Full":"October","SC.Date.Month.StandAlone.October.Letter":"O","SC.Date.Month.November.Abbreviated":"Nov","SC.Date.Month.November.Full":"November","SC.Date.Month.November.Letter":"N","SC.Date.Month.StandAlone.November.Abbreviated":"Nov","SC.Date.Month.StandAlone.November.Full":"November","SC.Date.Month.StandAlone.November.Letter":"N","SC.Date.Month.December.Abbreviated":"Dec","SC.Date.Month.December.Full":"December","SC.Date.Month.December.Letter":"D","SC.Date.Month.StandAlone.December.Abbreviated":"Dec","SC.Date.Month.StandAlone.December.Full":"December","SC.Date.Month.StandAlone.December.Letter":"D","SC.Date.Day.Monday.Abbreviated":"Mon","SC.Date.Day.Monday.Full":"Monday","SC.Date.Day.Monday.Letter":"M","SC.Date.Day.StandAlone.Monday.Abbreviated":"Mon","SC.Date.Day.StandAlone.Monday.Full":"Monday","SC.Date.Day.StandAlone.Monday.Letter":"M","SC.Date.Day.Tuesday.Abbreviated":"Tue","SC.Date.Day.Tuesday.Full":"Tuesday","SC.Date.Day.Tuesday.Letter":"T","SC.Date.Day.StandAlone.Tuesday.Abbreviated":"Tue","SC.Date.Day.StandAlone.Tuesday.Full":"Tuesday","SC.Date.Day.StandAlone.Tuesday.Letter":"T","SC.Date.Day.Wednesday.Abbreviated":"Wed","SC.Date.Day.Wednesday.Full":"Wednesday","SC.Date.Day.Wednesday.Letter":"W","SC.Date.Day.StandAlone.Wednesday.Abbreviated":"Wed","SC.Date.Day.StandAlone.Wednesday.Full":"Wednesday","SC.Date.Day.StandAlone.Wednesday.Letter":"W","SC.Date.Day.Thursday.Abbreviated":"Thu","SC.Date.Day.Thursday.Full":"Thursday","SC.Date.Day.Thursday.Letter":"R","SC.Date.Day.StandAlone.Thursday.Abbreviated":"Thu","SC.Date.Day.StandAlone.Thursday.Full":"Thursday","SC.Date.Day.StandAlone.Thursday.Letter":"R","SC.Date.Day.Friday.Abbreviated":"Fri","SC.Date.Day.Friday.Full":"Friday","SC.Date.Day.Friday.Letter":"F","SC.Date.Day.StandAlone.Friday.Abbreviated":"Fri","SC.Date.Day.StandAlone.Friday.Full":"Friday","SC.Date.Day.StandAlone.Friday.Letter":"F","SC.Date.Day.Saturday.Abbreviated":"Sat","SC.Date.Day.Saturday.Full":"Saturday","SC.Date.Day.Saturday.Letter":"S","SC.Date.Day.StandAlone.Saturday.Abbreviated":"Sat","SC.Date.Day.StandAlone.Saturday.Full":"Saturday","SC.Date.Day.StandAlone.Saturday.Letter":"S","SC.Date.Day.Sunday.Abbreviated":"Sun","SC.Date.Day.Sunday.Full":"Sunday","SC.Date.Day.Sunday.Letter":"S","SC.Date.Day.StandAlone.Sunday.Abbreviated":"Sun","SC.Date.Day.StandAlone.Sunday.Full":"Sunday","SC.Date.Day.StandAlone.Sunday.Letter":"S","SC.Date.Period.AM":"AM","SC.Date.Period.PM":"PM"});SC.DateFormatter=function(c,e){if(!c){throw"No date passed to date formatter."}else{if(!c.getFullYear){throw"Object passed to date formatter was not a date!"}}if(!e){throw"No formatting string passed to date formatter. Date: "+c}var b=e.length,g=e[0],a;for(a=1;a<b;a++){if(e[a]!==g){throw"Invalid format string for a date; all characters must be the same: "+e+"; date: "+c}}var d=SC.DateFormatter[g];if(!d){throw"No formatter `"+g+"` exists for date: "+c}return d(c,b)};SC.DateFormatter.G=function(b,c){var a="SC.Date.Era.";a+=b.getFullYear()>=0?"AD":"BC";if(c<=3){return(a+".Abbreviated").loc()}else{if(c===4){return(a+".Full").loc()}else{if(c===5){return(a+".Letter").loc()}else{throw"Invalid era format: expected at most 5 digits; found "+c+"."}}}};SC.DateFormatter.y=function(a,c){var b=Math.abs(a.getFullYear()).toString();while(b.length<c){b="0"+b}b=b.substr(b.length-c);return b};SC.DateFormatter.Y=function(a,b){return SC.DateFormatter.y(a,b)};SC.DateFormatter.u=function(a,d){var b=a.getFullYear()<0;var c=Math.abs(a.getFullYear()).toString();while(c.length<d){c="0"+c}c=c.substr(c.length-d);return(b?"-":"")+c};SC.DateFormatter.Q=function(b,d,c){var e=b.getMonth(),a=Math.floor(e/3)+1,f="SC.Date.Quarter."+(c?"StandAlone.":"")+"Q"+a;if(d===1){return""+a}else{if(d===2){return"0"+a}else{if(d===3){return(f+".Abbreviated").loc()}else{if(d==4){return(f+".Full").loc()}else{throw"Unrecognized number of characters for quarter: "+d}}}}};SC.DateFormatter.q=function(a,b){return SC.DateFormatter.Q(a,b,YES)};SC.DateFormatter.ENGLISH_MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December"];SC.DateFormatter.M=function(c,e,d){var f=c.getMonth(),b=""+(f+1),a="SC.Date.Month."+(d?"StandAlone.":"")+SC.DateFormatter.ENGLISH_MONTH_NAMES[f];if(e===1){return b}else{if(e===2){if(b.length<2){b="0"+b}return b}else{if(e===3){return(a+".Abbreviated").loc()}else{if(e===4){return(a+".Full").loc()}else{if(e===5){return(a+".Letter").loc()}else{throw"The number of Ms or Ls must be from 1 to 5. Supplied: "+e}}}}}};SC.DateFormatter.L=function(a,b){return SC.DateFormatter.M(a,b,YES)};SC.DateFormatter.l=function(){throw"`l` date formatter not implemented."};SC.DateFormatter.w=function(a,b){throw"Week number currently not supported for date formatting."};SC.DateFormatter.W=function(a,b){throw"Week number currently not supported for date formatting."};SC.DateFormatter.d=function(a,b){var c=""+a.getDate();if(b>c.length){c="0"+c}return c};SC.DateFormatter.D=function(b,c){var a=new Date(b.getFullYear(),0,1),d=a.getTime(),e=b.getTime()-d,f=Math.floor(e/(24*60*60*1000))+1;f=""+f;while(f.length<c){f="0"+f}return f};SC.DateFormatter.F=function(a,b){throw"Day of week in month (F) is not supported in date formatting"};SC.DateFormatter.g=function(a,b){throw"Julian day not supported in date formatting."};SC.DateFormatter.ENGLISH_DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];SC.DateFormatter.E=function(a,b){if(b<3){b=3}return SC.DateFormatter.e(a,b)};SC.DateFormatter.e=function(c,e,d){var b=c.getDay(),f=""+(b+1),a="SC.Date.Day."+(d?"StandAlone.":"")+SC.DateFormatter.ENGLISH_DAY_NAMES[b];if(e===1){return f}else{if(e===2){f="0"+f;return f}else{if(e===3){return(a+".Abbreviated").loc()}else{if(e===4){return(a+".Full").loc()}else{if(e===5){return(a+".Letter").loc()}else{throw"Unrecognized number of `e`s, `c`s, or `E`s in date format string."}}}}}};SC.DateFormatter.c=function(a,b){return SC.DateFormatter.e(a,b,YES)};SC.DateFormatter.a=function(b,c){if(c!==1){throw"`a` can only be included in a date format string once."}var a="SC.Date.Period."+(b.getHours()>11?"PM":"AM");return a.loc()};SC.DateFormatter._h=function(c,d,f,e){var b=c.getHours();if(!f){b=b%12}if(e){if(!f){if(b===0){b=12}}else{if(b===0){b=24}}}var a=""+b;if(a.length<d){a="0"+a}return a};SC.DateFormatter.h=function(a,b){return SC.DateFormatter._h(a,b,NO,1)};SC.DateFormatter.H=function(a,b){return SC.DateFormatter._h(a,b,YES,0)};SC.DateFormatter.K=function(a,b){return SC.DateFormatter._h(a,b,NO,0)};SC.DateFormatter.k=function(a,b){return SC.DateFormatter._h(a,b,YES,1)};SC.DateFormatter.m=function(a,b){var c=""+a.getMinutes();if(c.length<b){c="0"+c}return c};SC.DateFormatter.s=function(a,b){var c=""+a.getSeconds();if(c.length<b){c="0"+c}return c};SC.DateFormatter.S=function(a,c){var b=a.getMilliseconds()/1000,d=Math.pow(10,c);b=Math.round(b*d);b=""+b;while(b.length<c){b="0"+b}return b};SC.DateFormatter.A=function(a,c){var d=new Date(a.getFullYear(),a.getMonth(),a.getDay()).getTime();var b=a.getTime()-d;b=""+b;while(b.length<c){b="0"+b}return b};SC.DateFormatter.z=SC.DateFormatter.Z=SC.DateFormatter.v=SC.DateFormatter.V=function(a,b){throw"Timezone not supported in date format strings."};SC.stringsFor("English",{"Uploader.fileTooBigDescription":"The file was too big","Uploader.wrongFiletypeDescription":"The file type is not supported","SC.Date.Era.AD.Abbreviated":"AD","SC.Date.Era.AD.Full":"Anno Domini","SC.Date.Era.AD.Letter":"A","SC.Date.Era.BC.Abbreviated":"BC","SC.Date.Era.BC.Full":"Before Christ","SC.Date.Era.BC.Letter":"B","SC.Date.Quarter.Q1.Abbreviated":"Q1","SC.Date.Quarter.Q1.Full":"1st quarter","SC.Date.Quarter.StandAlone.Q1.Abbreviated":"Q1","SC.Date.Quarter.StandAlone.Q1.Full":"1st Quarter","SC.Date.Quarter.Q2.Abbreviated":"Q2","SC.Date.Quarter.Q2.Full":"2nd quarter","SC.Date.Quarter.StandAlone.Q2.Abbreviated":"Q2","SC.Date.Quarter.StandAlone.Q2.Full":"2nd Quarter","SC.Date.Quarter.Q3.Abbreviated":"Q3","SC.Date.Quarter.Q3.Full":"3rd quarter","SC.Date.Quarter.StandAlone.Q3.Abbreviated":"Q3","SC.Date.Quarter.StandAlone.Q3.Full":"3rd Quarter","SC.Date.Quarter.Q4.Abbreviated":"Q4","SC.Date.Quarter.Q4.Full":"4th quarter","SC.Date.Quarter.StandAlone.Q4.Abbreviated":"Q4","SC.Date.Quarter.StandAlone.Q4.Full":"4th Quarter","SC.Date.Month.January.Abbreviated":"Jan","SC.Date.Month.January.Full":"January","SC.Date.Month.January.Letter":"J","SC.Date.Month.StandAlone.January.Abbreviated":"Jan","SC.Date.Month.StandAlone.January.Full":"January","SC.Date.Month.StandAlone.January.Letter":"J","SC.Date.Month.February.Abbreviated":"Feb","SC.Date.Month.February.Full":"February","SC.Date.Month.February.Letter":"F","SC.Date.Month.StandAlone.February.Abbreviated":"Feb","SC.Date.Month.StandAlone.February.Full":"February","SC.Date.Month.StandAlone.February.Letter":"F","SC.Date.Month.March.Abbreviated":"Mar","SC.Date.Month.March.Full":"March","SC.Date.Month.March.Letter":"M","SC.Date.Month.StandAlone.March.Abbreviated":"Mar","SC.Date.Month.StandAlone.March.Full":"March","SC.Date.Month.StandAlone.March.Letter":"M","SC.Date.Month.April.Abbreviated":"Apr","SC.Date.Month.April.Full":"April","SC.Date.Month.April.Letter":"A","SC.Date.Month.StandAlone.April.Abbreviated":"Apr","SC.Date.Month.StandAlone.April.Full":"April","SC.Date.Month.StandAlone.April.Letter":"A","SC.Date.Month.May.Abbreviated":"May","SC.Date.Month.May.Full":"May","SC.Date.Month.May.Letter":"M","SC.Date.Month.StandAlone.May.Abbreviated":"May","SC.Date.Month.StandAlone.May.Full":"May","SC.Date.Month.StandAlone.May.Letter":"M","SC.Date.Month.June.Abbreviated":"Jun","SC.Date.Month.June.Full":"June","SC.Date.Month.June.Letter":"J","SC.Date.Month.StandAlone.June.Abbreviated":"Jun","SC.Date.Month.StandAlone.June.Full":"June","SC.Date.Month.StandAlone.June.Letter":"J","SC.Date.Month.July.Abbreviated":"Jul","SC.Date.Month.July.Full":"July","SC.Date.Month.July.Letter":"J","SC.Date.Month.StandAlone.July.Abbreviated":"Jul","SC.Date.Month.StandAlone.July.Full":"July","SC.Date.Month.StandAlone.July.Letter":"J","SC.Date.Month.August.Abbreviated":"Aug","SC.Date.Month.August.Full":"August","SC.Date.Month.August.Letter":"A","SC.Date.Month.StandAlone.August.Abbreviated":"Aug","SC.Date.Month.StandAlone.August.Full":"August","SC.Date.Month.StandAlone.August.Letter":"A","SC.Date.Month.September.Abbreviated":"Sep","SC.Date.Month.September.Full":"September","SC.Date.Month.September.Letter":"S","SC.Date.Month.StandAlone.September.Abbreviated":"Sep","SC.Date.Month.StandAlone.September.Full":"September","SC.Date.Month.StandAlone.September.Letter":"S","SC.Date.Month.October.Abbreviated":"Oct","SC.Date.Month.October.Full":"October","SC.Date.Month.October.Letter":"O","SC.Date.Month.StandAlone.October.Abbreviated":"Oct","SC.Date.Month.StandAlone.October.Full":"October","SC.Date.Month.StandAlone.October.Letter":"O","SC.Date.Month.November.Abbreviated":"Nov","SC.Date.Month.November.Full":"November","SC.Date.Month.November.Letter":"N","SC.Date.Month.StandAlone.November.Abbreviated":"Nov","SC.Date.Month.StandAlone.November.Full":"November","SC.Date.Month.StandAlone.November.Letter":"N","SC.Date.Month.December.Abbreviated":"Dec","SC.Date.Month.December.Full":"December","SC.Date.Month.December.Letter":"D","SC.Date.Month.StandAlone.December.Abbreviated":"Dec","SC.Date.Month.StandAlone.December.Full":"December","SC.Date.Month.StandAlone.December.Letter":"D","SC.Date.Day.Monday.Abbreviated":"Mon","SC.Date.Day.Monday.Full":"Monday","SC.Date.Day.Monday.Letter":"M","SC.Date.Day.StandAlone.Monday.Abbreviated":"Mon","SC.Date.Day.StandAlone.Monday.Full":"Monday","SC.Date.Day.StandAlone.Monday.Letter":"M","SC.Date.Day.Tuesday.Abbreviated":"Tue","SC.Date.Day.Tuesday.Full":"Tuesday","SC.Date.Day.Tuesday.Letter":"T","SC.Date.Day.StandAlone.Tuesday.Abbreviated":"Tue","SC.Date.Day.StandAlone.Tuesday.Full":"Tuesday","SC.Date.Day.StandAlone.Tuesday.Letter":"T","SC.Date.Day.Wednesday.Abbreviated":"Wed","SC.Date.Day.Wednesday.Full":"Wednesday","SC.Date.Day.Wednesday.Letter":"W","SC.Date.Day.StandAlone.Wednesday.Abbreviated":"Wed","SC.Date.Day.StandAlone.Wednesday.Full":"Wednesday","SC.Date.Day.StandAlone.Wednesday.Letter":"W","SC.Date.Day.Thursday.Abbreviated":"Thu","SC.Date.Day.Thursday.Full":"Thursday","SC.Date.Day.Thursday.Letter":"R","SC.Date.Day.StandAlone.Thursday.Abbreviated":"Thu","SC.Date.Day.StandAlone.Thursday.Full":"Thursday","SC.Date.Day.StandAlone.Thursday.Letter":"R","SC.Date.Day.Friday.Abbreviated":"Fri","SC.Date.Day.Friday.Full":"Friday","SC.Date.Day.Friday.Letter":"F","SC.Date.Day.StandAlone.Friday.Abbreviated":"Fri","SC.Date.Day.StandAlone.Friday.Full":"Friday","SC.Date.Day.StandAlone.Friday.Letter":"F","SC.Date.Day.Saturday.Abbreviated":"Sat","SC.Date.Day.Saturday.Full":"Saturday","SC.Date.Day.Saturday.Letter":"S","SC.Date.Day.StandAlone.Saturday.Abbreviated":"Sat","SC.Date.Day.StandAlone.Saturday.Full":"Saturday","SC.Date.Day.StandAlone.Saturday.Letter":"S","SC.Date.Day.Sunday.Abbreviated":"Sun","SC.Date.Day.Sunday.Full":"Sunday","SC.Date.Day.Sunday.Letter":"S","SC.Date.Day.StandAlone.Sunday.Abbreviated":"Sun","SC.Date.Day.StandAlone.Sunday.Full":"Sunday","SC.Date.Day.StandAlone.Sunday.Letter":"S","SC.Date.Period.AM":"AM","SC.Date.Period.PM":"PM"});CW=SC.Object.create({NAMESPACE:"CW",VERSION:"1.0.0"});CW.mixin({upperCaseUUID:function(){return this.UUID().toString().toUpperCase()},UUID:function(){var b,d="89ab",a=[];for(b=0;b<36;b+=1){a[b]=(Math.random()*16|0).toString(16)}a[8]=a[13]=a[18]=a[23]="-";a[14]="4";a[19]=d.charAt(Math.random()*4|0);return a.join("")},invertArray:function(e){if(!e){CW.fatalError("invertArray():  You must specify an array to invert")}var c,a,d,b={};for(c=0,a=e.length;c<a;++c){d=e[c];b[d]=true}return b},invertArrayWithOrder:function(e){if(!e){CW.fatalError("invertArrayWithOrder():  You must specify an array to invert")}var c,a,d,b={};for(c=0,a=e.length;c<a;++c){d=e[c];b[d]=c}return b},invertHash:function(e,b){if(!e){CW.fatalError("invertHash():  You must specify an hash to invert")}var c,d,a=[];if(b){for(c in e){d=e[c];if(d){a.push(parseInt(c,10))}}}else{for(c in e){d=e[c];if(d){a.push(c)}}}return a},combineHashes:function(d,c){var a=SC.clone(d),b;for(b in c){a[b]=c[b]}return a},hashDifferencesBreakdown:function(e,d,n){if(!e||!d){CW.fatalError("hashDifferencesBreakdown() must be called with two hashes")}if(e===d){CW.fatalError("hashDifferencesBreakdown() must be called with two different hashes")}var m=[],b=[],s=[],c=[];var o,r,g,h;if(n){o=this.invertArray(n)}var a=CW.getSimpleTypes(),q={},k,j,p,f;for(r in e){q[r]=true;if(o&&o[r]){continue}k=e[r];j=d[r];if(j===undefined){s.push(r)}else{p=(k===j);if(!p){f=SC.typeOf(k);if(a[f]){p=false}else{p=CW.valuesAreEqual(k,j,f)}}if(p){m.push(r)}else{b.push(r)}}}for(r in d){if(!q[r]){c.push(r)}}return{equal:m,different:b,firstHashOnly:s,secondHashOnly:c}},valuesAreEqual:function(k,j,g,e){if(k===j){return true}if(!g){g=SC.typeOf(k)}var a=CW.getSimpleTypes();if(a[g]){return false}else{if(!e){e=SC.typeOf(j)}if(g!==e){return false}else{if(g===SC.T_DATE){return k.getTime()===j.getTime()}else{if(g===SC.T_REGEXP){return k.toString()===j.toString()}else{if(g===SC.T_HASH){var b=0,o,n,m,h;for(o in k){++b;n=k[o];m=j[o];if(n!==m){h=SC.typeOf(n);if(a[h]){return false}else{if(!CW.valuesAreEqual(n,m,h)){return false}}}}for(o in j){--b}return(b===0)}else{if(g===SC.T_ARRAY){var d=k.length;var c=j.length;if(d!==c){return false}for(var f=(d-1);f>=0;--f){n=k[f];m=j[f];if(n!==m){h=SC.typeOf(n);if(a[h]){return false}else{if(!CW.valuesAreEqual(n,m,h)){return false}}}}return true}else{CW.fatalError("Unsupported type for CW.valuesAreEqual:  '%@'".fmt(g))}}}}}}},getSimpleTypes:function(){var a=CW._simpleTypes;if(!a){a=CW._simpleTypes={};a[SC.T_STRING]=true;a[SC.T_NUMBER]=true;a[SC.T_BOOL]=true;a[SC.T_UNDEFINED]=true;a[SC.T_NULL]=true}return a},getUrlParameters:function(g){if(!g){g=location.search}if(g.indexOf("?")===0){g=g.substr(1)}var a={},f=g.split("&"),d,c,b,e;for(d=0;!!f[d];d++){c=f[d].split("=");b=c[0];e=c[1];if(b&&e){if(e==="true"){e=true}else{if(e==="false"){e=false}}a[b]=e}}return a},escapeRegexCharacters:function(a){return a.replace(/[-[\]{}()*+?.,\\^$|#]/g,"\\$&")},formatNumber:function(e,b,a){if(SC.none(e)){return""}if(!b){b=","}if(!a){a="."}e=e.toString();var g=e.split("."),f=g[0],h=g[1],d=/(\d+?)(?=(?:\d{3})+$)/g,c="$1"+b;f=f.replace(d,c);if(h){return f+a+h}else{return f}},preloadTargetImages:function(c){if(SC.APP_IMAGE_ASSETS){for(var b=0,a=SC.APP_IMAGE_ASSETS.length;b<a;b++){if(!c||SC.APP_IMAGE_ASSETS[b].indexOf(c)!==-1){SC.imageQueue.loadImage(SC.APP_IMAGE_ASSETS[b])}}}}});SC.ready(function(){setTimeout(function(){CW.preloadTargetImages("apple_theme_v3")},2000)});sc_require("core");sc_require("system/utils");CW.mixin({fatalError:function(a,b){var d=this.recordStack(YES,YES),c;if(a instanceof Error){c=a}else{c=new Error(a)}if(b){SC.mixin(c,b)}c.recordedStack=d;throw c},recordStack:function(c,b){if(b||!this.get("hasSymbolicated")){try{this.symbolicate()}catch(g){}}var k=arguments.callee,d=k?k.caller:null,f=0,m=[],a={},j,h,n;if(d&&c){d=d.caller}while(d&&f<26){j=d.displayName;if(!j){j=d.name}if(!j){j=d.toString()}if(j.length>150){j=j.substring(0,150)}n={func:j};h=d["arguments"];if(h){n.args=[h[0],h[1],h[2],h[3],h[4]]}m[f++]=n;if(a[j]){m[f++]="(Because "+j+" was called recursively, no more of the stack is available)";break}a[j]=true;d=d.caller}return m},hasSymbolicated:NO,namespacesToSymbolicate:["SC"],symbolicate:function(){if(!SC.Object.toString()){SC.warn("Cannot yet properly symbolicate because SproutCore is not yet in a position to provide class names");return}if(!this.hasSymbolicated){this.hasSymbolicated=true}if(!SC||!SC.typeOf){return}this._symbolicateClassAndSubclasses(SC.Object);var a=this.namespacesToSymbolicate,b=CW.invertArray(a),n,m,c,o,d,f,j,h,p,k;if(!a){return}for(n in window){if(b[n]){continue}m=n.charAt(0);if(m.toUpperCase()===m){try{j=window[n];if(j&&j.isObject){a.push(n)}}catch(g){}}}for(d=0,f=a.length;d<f;++d){c=a[d];o=window[c];for(n in o){if(!o.hasOwnProperty(n)){continue}j=o[n];if(!j){continue}if(j instanceof Function){if(!j.displayName){h=c+"."+n;j.displayName=h}}else{if(j instanceof Object&&!j.isClass){for(p in j){if(!j.hasOwnProperty(p)){continue}k=j[p];if(k instanceof Function){if(!k.displayName){h=c+"."+n+"."+p;k.displayName=h}}}}}}}},_symbolicateClassAndSubclasses:function(a){var g=a.toString(),f,h,c,e,d,b;if(!g){return}for(f in a){if(!a.hasOwnProperty(f)){continue}h=a[f];if(h instanceof Function){if(!h.displayName){c=g+"."+f;h.displayName=c}}}e=a.prototype;for(f in e){if(!e.hasOwnProperty(f)){continue}h=e[f];if(h instanceof Function){if(!h.displayName){c=g+"#"+f;h.displayName=c}}}d=a.subclasses;for(f in d){b=d[f];if(b&&b.isClass){this._symbolicateClassAndSubclasses(b)}}}});CW.FakeReply=SC.Object.extend({isFakeReply:YES,shouldProcessRequestNormally:NO,applyToBackgroundRequests:NO,status:undefined,statusText:undefined,responseText:undefined,urlFilter:undefined,delay:undefined,readyState:undefined,getAllResponseHeaders:function(){return null},abort:function(){},toString:function(){if(this.get("shouldProcessRequestNormally")){return"will be sent normally"}else{var d=[],c=CW.FakeReply.allowableCreationParams,b,a,f,e;for(b=0,a=c.length;b<a;++b){f=c[b];e=this.get(f);if(e!==undefined){if(f==="applyToBackgroundRequests"&&!e){continue}if(SC.typeOf(e)===SC.T_STRING){d.push("%@=%@".fmt(f,e))}else{d.push("%@=%@".fmt(f,e))}}}return d.join(",  ")}}});SC.mixin(CW.FakeReply,{allowableCreationParams:["applyToBackgroundRequests","status","statusText","responseText","responseHash","urlFilter","delay"],_allowableCreationParamsHash:null,createFakeReply:function(d){var o=CW.FakeReply,m=o._allowableCreationParamsHash,c,a,g,h;if(!m){m=o._allowableCreationParamsHash={};a=o.allowableCreationParams;for(g=0,h=a.length;g<h;++g){c=a[g];m[c]=YES}}if(d===null){return o.create({shouldProcessRequestNormally:YES})}else{if(!d){CW.fatalError("You must specify params for the fake reply")}}var n=NO;for(c in d){if(!m[c]){if(console.error){console.error("Fake reply has an unrecognized parameter %@:".fmt(c),d)}n=YES}}if(n){CW.fatalError("Unrecognized parameter in fake reply")}var p=0;var f=d.status;if(f===undefined){if(console.error){console.error("Fake reply does not include a status:",d)}++p}else{if(!f){if(console.error){console.error("Fake reply has an invalid status of 0:",d)}++p}}var k=d.responseText,b=d.responseHash;if(k===undefined&&!b){k=d.responseText="Fake reply with status "+f}else{if(k!==undefined&&b){if(console.error){console.error("Fake reply has both a responseText and a responseHash:",d)}++p}else{if(k!==undefined&&SC.typeOf(k)!==SC.T_STRING){if(console.error){console.error("Fake reply has an invalid responseText (it should be a string):",d)}++p}else{if(b&&SC.typeOf(b)!==SC.T_HASH){if(console.error){console.error("Fake reply has an invalid responseHash (it should be a hash):",d)}++p}}}}var q=d.urlFilter;if(q&&!(q instanceof RegExp)){if(SC.typeOf(q)===SC.T_STRING){d.urlFilter=new RegExp(q)}else{if(console.error){console.error("Fake reply has an invalid urlFilter (it should be a string or a RegExp instance):",d)}++p}}if(b&&p===0){delete d.responseHash;try{d.responseText=SC.json.encode(b)}catch(j){if(console.error){console.error("There was an error encoding JSON from the responseHash:  "+j+",  fake reply:",d)}++p}}if(p===1){CW.fatalError("There was one error with the fake reply parameters")}else{if(p>0){CW.fatalError("There were %@ errors with the fake reply parameters".fmt(p))}else{return o.create(d)}}}});sc_require("core");sc_require("core_error_handling");sc_require("system/fake_reply");CW.mixin({requestLoggingLevel:null,fakeReplyQueue:null,addFakeReply:function(k,o){if(SC.typeOf(k)!==SC.T_ARRAY){k=SC.$A(k)}var p=CW.FakeReply,m=[],f,h,d,b;for(f=0,h=k.length;f<h;++f){d=k[f];b=null;try{b=p.createFakeReply(d)}catch(j){}if(b){m.push(b)}}var g=k.length,n=m.length;if(g!==n){var c=g-n;if(c===1){CW.fatalError("Errors prevented your fake reply from being added.  The fake reply queue was not changed.")}else{CW.fatalError("Errors prevented %@ of your %@ fake replies from being added.  The fake reply queue was not changed.".fmt(c,g))}}var a=this.get("fakeReplyQueue");if(!a){a=[];this.set("fakeReplyQueue",a)}a.beginPropertyChanges();for(f=0,h=m.length;f<h;++f){b=m[f];a.pushObject(b)}a.endPropertyChanges();if(!o){console.log("The fake reply queue is now:");this.listFakeReplyQueue()}},listFakeReplyQueue:function(){var b=this.get("fakeReplyQueue");if(!b){console.log("(no fake reply queue)")}else{var e=[],c,a,d;for(c=0,a=b.length;c<a;++c){d=b[c];e.push("[%@]  %@".fmt(c,d))}console.log(e.join("\n"))}},_recordingCount:0,_logRequestIfAppropriateFor:function(e){if(!e){CW.fatalError("_logRequestIfAppropriateFor():  A response must be specified")}var h=this.get("requestLoggingLevel"),c=++this._recordingCount,f,a,b,d,j,g,k;if(h){e._recordingID=c;e._sentAt=new Date();f=e.get("request");a=f.get("type");b=f.getFullAddress();d=this._sortAndStringifyHeaders(f.get("headers"));j=f.get("cookies");if(f.get("bodyShouldBeLogged")){g=f.get("encodedBody");if(!g){g="(empty)"}}else{g="(omitted)"}k="-->  Request "+c+":   "+a+" to "+b+",  headers: "+d+(j?",  cookies: "+j:"")+",  body: "+g;SC.Logger._handleMessage(h,NO,k)}},_logResponseIfAppropriate:function(g){if(!g){CW.fatalError("_logResponseIfAppropriateFor():  A response must be specified")}var n=this.get("requestLoggingLevel"),m=new Date(),a,f,b,o,d,h,c,j,p;if(n){a=g._recordingID;f=g._sentAt;b=g._receivedAtWhileSuspended;o=g.get("timedOut");if(o){d="  (timed out)"}else{if(b){d=f?("  ("+(b-f)+"ms, suspended for "+(m-b)+"ms)"):"  (unknown)"}else{d=f?("  ("+(m-f)+"ms)"):"  (unknown)"}}h=g.get("status");try{c=this._sortAndStringifyHeaders(g.get("headers"))}catch(k){}if(g.get("bodyShouldBeLogged")){j=g.get("encodedBody");if(!j){j="(empty)"}}else{j="(omitted)"}p="<--  Response "+a+":  "+h+d+",  headers: "+c+"  body: "+j;SC.Logger._handleMessage(n,NO,p)}},_sortAndStringifyHeaders:function(f){var g,e,b,c,a,d=[];for(g in f){d.push(g)}d.sort();b="";for(c=0,a=d.length;c<a;++c){g=d[c];e=f[g];if(c!==0){b+=", "}b+=g+"="+e}return b}});CW.ButtonKeyHandlingHelpers={isDefault:NO,isCancel:NO,keyHandlersDidChange:function(){var a=null,c=this.get("isDefault"),b=this.get("isCancel");if(c){this.registerKeyboardShortcut("return",this,this.triggerActionFromKeyboardShortcut)}else{this.deregisterKeyboardShortcut("return")}if(b){this.registerKeyboardShortcut("escape",this,this.triggerActionFromKeyboardShortcut)}else{this.deregisterKeyboardShortcut("escape")}}.observes("isDefault","isCancel"),initMixin:function(){if(this.get("isDefault")){this.registerKeyboardShortcut("return",this,this.triggerActionFromKeyboardShortcut)}if(this.get("isCancel")){this.registerKeyboardShortcut("escape",this,this.triggerActionFromKeyboardShortcut)}},triggerActionFromKeyboardShortcut:function(a){this.triggerAction();return YES}};CW.ViewKeyHandlingHelpers={keyboardShortcuts:null,initMixin:function(){this._cwvkh_paneDidChange()},_cwvkh_paneDidChange:function(){var e,d,g,f,c,b=this,a;if(this.keyboardShortcuts&&this._cwvkh_lastPane!==this.get("pane")){g=this.get("pane");e=this.get("keyboardShortcuts");f=this._cwvkh_lastPane;if(f){for(d in e){f.deregisterKeyboardShortcut(d)}}if(g){for(d in e){c=e[d];if(typeof c==="string"||typeof c==="function"){a=c}else{b=c.target;a=c.action}g.registerKeyboardShortcut(d,b,a)}}this._cwvkh_lastPane=g}}.observes("pane"),registerKeyboardShortcut:function(b,d,c){if(!c){c=d;d=this}var a=this.keyboardShortcuts,e=this.get("pane");if(!a){a=this.keyboardShortcuts={}}a[b]={target:d,action:c};if(e){e.registerKeyboardShortcut(b,d,c)}},deregisterKeyboardShortcut:function(a){var b=this.keyboardShortcuts,c=this.get("pane");if(b){delete this.keyboardShortcuts[a];if(c){c.deregisterKeyboardShortcut(a)}}}};SHA1=SC.Object.create({hexcase:1,b64pad:"",hex_sha1:function(a){return this.rstr2hex(this.rstr_sha1(this.str2rstr_utf8(a)))},b64_sha1:function(a){return this.rstr2b64(this.rstr_sha1(this.str2rstr_utf8(a)))},sha1_vm_test:function(){return this.hex_sha1("abc").toLowerCase()==="a9993e364706816aba3e25717850c26c9cd0d89d"},rstr_sha1:function(a){return this.binb2rstr(this.binb_sha1(this.rstr2binb(a),a.length*8))},rstr2hex:function(c){var e=this.hexcase?"0123456789ABCDEF":"0123456789abcdef";var b="";var a;for(var d=0;d<c.length;d++){a=c.charCodeAt(d);b+=e.charAt((a>>>4)&15)+e.charAt(a&15)}return b},rstr2b64:function(c){var f="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";var b="";var a=c.length;for(var e=0;e<a;e+=3){var g=(c.charCodeAt(e)<<16)|(e+1<a?c.charCodeAt(e+1)<<8:0)|(e+2<a?c.charCodeAt(e+2):0);for(var d=0;d<4;d++){if(e*8+d*6>c.length*8){b+=b64pad}else{b+=f.charAt((g>>>6*(3-d))&63)}}}return b},str2rstr_utf8:function(c){var b="";var d=-1;var a,e;while(++d<c.length){a=c.charCodeAt(d);e=d+1<c.length?c.charCodeAt(d+1):0;if(55296<=a&&a<=56319&&56320<=e&&e<=57343){a=65536+((a&1023)<<10)+(e&1023);d++}if(a<=127){b+=String.fromCharCode(a)}else{if(a<=2047){b+=String.fromCharCode(192|((a>>>6)&31),128|(a&63))}else{if(a<=65535){b+=String.fromCharCode(224|((a>>>12)&15),128|((a>>>6)&63),128|(a&63))}else{if(a<=2097151){b+=String.fromCharCode(240|((a>>>18)&7),128|((a>>>12)&63),128|((a>>>6)&63),128|(a&63))}}}}}return b},rstr2binb:function(b){var c;var a=Array(b.length>>2);for(c=0;c<a.length;c++){a[c]=0}for(c=0;c<b.length*8;c+=8){a[c>>5]|=(b.charCodeAt(c/8)&255)<<(24-c%32)}return a},binb2rstr:function(b){var a="";for(var c=0;c<b.length*32;c+=8){a+=String.fromCharCode((b[c>>5]>>>(24-c%32))&255)}return a},binb_sha1:function(y,p){y[p>>5]|=128<<(24-p%32);y[((p+64>>9)<<4)+15]=p;var z=Array(80);var v=1732584193;var u=-271733879;var s=-1732584194;var r=271733878;var q=-1009589776;for(var m=0;m<y.length;m+=16){var o=v;var n=u;var k=s;var h=r;var f=q;for(var g=0;g<80;g++){if(g<16){z[g]=y[m+g]}else{z[g]=this.bit_rol(z[g-3]^z[g-8]^z[g-14]^z[g-16],1)}var A=this.safe_add(this.safe_add(this.bit_rol(v,5),this.sha1_ft(g,u,s,r)),this.safe_add(this.safe_add(q,z[g]),this.sha1_kt(g)));q=r;r=s;s=this.bit_rol(u,30);u=v;v=A}v=this.safe_add(v,o);u=this.safe_add(u,n);s=this.safe_add(s,k);r=this.safe_add(r,h);q=this.safe_add(q,f)}return Array(v,u,s,r,q)},sha1_ft:function(e,a,g,f){if(e<20){return(a&g)|((~a)&f)}if(e<40){return a^g^f}if(e<60){return(a&g)|(a&f)|(g&f)}return a^g^f},sha1_kt:function(a){return(a<20)?1518500249:(a<40)?1859775393:(a<60)?-1894007588:-899497514},safe_add:function(a,d){var c=(a&65535)+(d&65535);var b=(a>>16)+(d>>16)+(c>>16);return(b<<16)|(c&65535)},bit_rol:function(a,b){return(a<<b)|(a>>>(32-b))}});(function(){var b,m="",e,o,c;String.cssWidthData={};var d=String.cssWidthData;var f=function f(){if(!o.parentNode){document.body.appendChild(o)}};String.removeWidthContainer=function(){if(o.parentNode){document.body.removeChild(o)}};var a=String.removeWidthContainer;String.prototype.calculatedWidth=function n(q,p){if(q===undefined){q=""}if(q!==m){m=q;b.style.cssText=q||""}f();b.innerHTML=(function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}).apply(this);return b.offsetWidth};String.prototype.cachedWidth=function h(s,r){var t=s||"nocss";if(!r){r=d[t]}if(!r){d[t]=r={}}var p=r[this];if(p!==undefined){return p}var q;r[this]=q=this.calculatedWidth(s,r);return q};String.prototype.truncateMiddle=function j(q,p){if(q>=this.length){return this}if(p===undefined){p=""}var r=Math.floor(q)/2;return this.substring(0,r)+p+this.substring(this.length-(q-r))};String.prototype.truncateEnd=function k(q,p){if(q>=this.length){return this}if(p===undefined){p=""}return this.substring(0,(q-p.length))+p};String.prototype.truncateStart=function k(q,p){if(q>=this.length){return this}if(p===undefined){p=""}return this.substring(p+(q-p.length),q)};String.prototype.truncateToWidth=function g(A,q,s,B){var w=0;var z,v,C,y=undefined,t=undefined,x=0,r,p,u;if(!(B instanceof Function)){B=String.prototype.truncateEnd}r=A/"i".cachedWidth(s);x=A/"W".cachedWidth(s);p=this.calculatedWidth(s);C=z=this;u=p<A;while(!u){w++;if((x===y&&r===t)||p==A){u=true;continue}y=x;t=r;v=Math.floor((x+r)/2);C=B.call(z,v,q);p=C.calculatedWidth(s);if(p<A){x=v}else{r=v}}return C};b=String.wcon=document.createElement("span");if(!SC.browser.isIE){e=document.createElement("div");e.style.position="absolute";e.style.left="-1000px";e.style.top="-1000px";e.style.visibility="hidden";e.appendChild(b)}if(SC.browser.isIE){o=b}else{o=e}})();CW.SpritePreloadEnforcement={hasSpritePreloadEnforcement:YES,extraRequiredSrcs:null,extraRequiredImages:null,didFinishWaitingForImages:function(){},initMixin:function(){if(this.didCreateLayer){this._user_didCreateLayer=this.didCreateLayer}this.didCreateLayer=function(){if(this._user_didCreateLayer){var a=this._user_didCreateLayer.apply(this,arguments)}this._preload_didCreateLayer();return a}},_preload_didCreateLayer:function(){if(this.constructor.prototype.__hasPreloadedSprites__){var a=this.constructor.prototype.__preloadedExtraRequiredImages__;if(a){this.extraRequiredImages=a}SC.debug("Creating another instance of "+this.constructor+": all sprite backgrounds are confirmed to have been downloaded. Performing no preload action.");if(this.hasPaneAnimationSupport){SC.debug("Because this is the first append, and this pane has PaneAnimationSupport, we now trigger animateShow() to perform the animation.");this._hasShownFromDidCreateLayer=true;this.animateShow()}return}this.hideForPreload();this.preloadBackgroundSprites(this.getPreloadElementList(),this.showForPreload,this)},getPreloadElementList:function(){return SC.$A(this.$("*"))},hideForPreload:function(){this.set("isVisible",NO)},showForPreload:function(){this.set("isVisible",YES);if(this.hasPaneAnimationSupport){this._hasShownFromDidCreateLayer=true;this.animateShow()}},preloadBackgroundSprites:function(a,c,b){this.__elements__=a;this.__callback__=c;this.__target__=b;this.invokeLast("_preloadBackgroundSprites",a,c,b)},_preloadBackgroundSprites:function(r,e,u){r=this.__elements__;e=this.__callback__;u=this.__target__;this.__target__=this.__callback__=this.__elements__=undefined;var n=CW._backgroundImageLoadedness||(CW._backgroundImageLoadedness={}),b,h=0,f=false,m=this,o=undefined,g=this.get("extraRequiredSrcs"),q=this.extraRequiredImages=g?{}:null,d=function(){h--;SC.debug("Finished loading "+this._src_+". images remaining before callback: "+h);n[this._src_]=true;if(q&&this._extraKey_){q[this._extraKey_]=this}if(h===0){SC.debug("All images are downloaded. Now running callback.");k()}},k=function(v){if(o){clearTimeout(o)}if(f){SC.debug("Performing the callback for all images having finished loading, but it has already been performed. Aborting.");return}if(!v){m.constructor.prototype.__hasPreloadedSprites__=true;if(q){m.constructor.prototype.__preloadedExtraRequiredImages__=q}}m.didFinishWaitingForImages();f=true;SC.run(function(){e.apply(u||m)})};r=SC.$A(r);for(var t=0,a,s,j,p;a=r[t];t++){j=jQuery(a).css("background-image");if(!j){continue}if(j.indexOf("http")===-1){continue}if(j.indexOf("url(")===-1){continue}j=j.substring(4,j.length-1);if((s=j.charAt(0))==='"'||s==="'"){j=j.substring(1)}if((s=j.charAt(j.length-1))==='"'||s==="'"){j=j.substring(0,j.length-1)}if(n[j]){continue}if(b&&b[j]){continue}(b||(b={}))[j]=true;h++;p=new Image();p.onload=d;SC.debug("Preloading "+j);p.src=(p._src_=j)}if(g){for(t in g){if(!g.hasOwnProperty(t)){continue}j=g[t];h++;p=new Image();p.onload=d;SC.debug("Preloading explicitly-specified image "+j);p.src=(p._src_=j);p._extraKey_=t}}if(h===0){SC.debug("Preloading background images, but every image was already loaded. Running callback immediately.");k()}else{var c=SC.buildMode==="debug"?3000:1500;o=setTimeout(function(){SC.debug("Attempted to preload background images, but the loading is taking longer than "+(c/1000)+" seconds. Now running callback regardless of image loadedness.");k(true)},c)}}};CW.TouchApproximation={isTouchApproximationEnabled:YES,distanceThreshold:50,touchStart:function(c){var g=this.convertFrameFromView({x:c.pageX,y:c.pageY}),m=g.x,j=g.y,r,p,k=this.get("touchApproximationViews")||this.get("childViews"),d=this.get("distanceThreshold"),b=null,o=Infinity,a,q,n,e,h;e=k.get("length");for(n=0;n<e;n++){a=k[n];if(!a||!a.get("isVisible")||a.get("isDecorative")){continue}q=a.get("frame");r=-1;p=-1;if(m<q.x){r=q.x-m}else{if(m>(q.x+q.width)){r=m-(q.x+q.width)}}if(j<q.y){p=q.y-j}else{if(j>(q.y+q.height)){p=j-(q.y+q.height)}}if(r!==-1&&p!==-1){r=(r+p)/2}else{if(p!==-1){r=p}}if(r!==-1&&r<o&&r<d){b=a;o=r}}if(b){c.isProxied=YES;c.target=b.get("layer");h=b.tryToPerform("touchStart",c);if(h){this._foundChild=b;return YES}else{this._foundChild=null}}return NO},touchesDragged:function(a,c){var b=this._foundChild;if(b){return b.tryToPerform("touchesDragged",a,c)}return NO},touchEnd:function(b){var a=this._foundChild;if(a){b.isProxied=YES;b.target=a.get("layer");return a.tryToPerform("touchEnd",b)}return NO}};CW.mixin({encodeBase64:function(g){var d=this._b64,h=0,p=0,f="",e=[],c,b,a,n,m,k,j,o;if(!g){return g}g=this.encodeUTF8(g+"");do{c=g.charCodeAt(h++);b=g.charCodeAt(h++);a=g.charCodeAt(h++);o=c<<16|b<<8|a;n=o>>18&63;m=o>>12&63;k=o>>6&63;j=o&63;e[p++]=d.charAt(n)+d.charAt(m)+d.charAt(k)+d.charAt(j)}while(h<g.length);f=e.join("");switch(g.length%3){case 1:f=f.slice(0,-2)+"==";break;case 2:f=f.slice(0,-1)+"=";break}return f},decodeBase64:function(d){var a="",c=0,b=this._b64,m,j,g,k,h,f,e;d=d.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<d.length){k=b.indexOf(d.charAt(c++));h=b.indexOf(d.charAt(c++));f=b.indexOf(d.charAt(c++));e=b.indexOf(d.charAt(c++));m=(k<<2)|(h>>4);j=((h&15)<<4)|(f>>2);g=((f&3)<<6)|e;a+=String.fromCharCode(m);if(f!==64){a+=String.fromCharCode(j)}if(e!==64){a+=String.fromCharCode(g)}}a=this.decodeUTF8(a);return a},encodeUTF8:function(d){d=d.replace(/\r\n/g,"\n");var b="",e,a,f;for(e=0,a=d.length;e<a;++e){f=d.charCodeAt(e);if(f<128){b+=String.fromCharCode(f)}else{if((f>127)&&(f<2048)){b+=String.fromCharCode((f>>6)|192);b+=String.fromCharCode((f&63)|128)}else{b+=String.fromCharCode((f>>12)|224);b+=String.fromCharCode(((f>>6)&63)|128);b+=String.fromCharCode((f&63)|128)}}}return b},decodeUTF8:function(a){var d="",f=0,h,g,e,b;h=g=e=b=0;while(f<a.length){h=a.charCodeAt(f);if(h<128){d+=String.fromCharCode(h);f++}else{if((h>191)&&(h<224)){e=a.charCodeAt(f+1);d+=String.fromCharCode(((h&31)<<6)|(e&63));f+=2}else{e=a.charCodeAt(f+1);b=a.charCodeAt(f+2);d+=String.fromCharCode(((h&15)<<12)|((e&63)<<6)|(b&63));f+=3}}}return d},_b64:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});sc_require("core");CW.DATE_ONLY=0;CW.DATE_TIME=1;CW.DATE_TIME_TO_MIDNIGHT=3;CW.DATE_TIME_SEC=4;CW.DAY_MIN_DUR=1440;CW.DAY_MILLIS_DUR=86400000;CW.Date={value:null,dateType:CW.DATE_ONLY,timeFormat:null,fullDateFormat:null,dateFormat:null,_dateObj:null,incrementSeconds:function(a){this.seconds(this.seconds()+a);return this},incrementMinutes:function(a){this.minutes(this.minutes()+a);return this},incrementHours:function(a){this.hours(this.hours()+a);return this},incrementDate:function(a){this.date(this.date()+a);return this},incrementMonth:function(a){this.month(this.month()+a);return this},incrementYear:function(a){this.year(this.year()+a);return this},now:function(){this._dateObj=new Date();this._dateComponentDidChange();return this},dateComponent:function(){var a=this.value;return a?a[0]:null},date:function(a){if(a!==undefined){this._dateObj.setDate(a);return this._dateComponentDidChange()}else{return this.value[3]}},dateObject:function(){return this._dateObj},day:function(){return this._dateObj.getDay()},fullYear:function(a){if(a!==undefined){this._dateObj.setFullYear(a);return this._dateComponentDidChange()}else{return this.value[1]}},hours:function(a){if(a!==undefined){this._dateObj.setHours(a);return this._dateComponentDidChange()}else{return this.value[4]}},minutes:function(a){if(a!==undefined){this._dateObj.setMinutes(a);return this._dateComponentDidChange()}else{return this.value[5]}},seconds:function(a){if(this.dateType===CW.DATE_TIME_SEC){if(a!==undefined){this._dateObj.setSeconds(a);return this._dateComponentDidChange()}else{return this.value[6]}}return 0},month:function(a){if(a!==undefined){this._dateObj.setMonth(a);return this._dateComponentDidChange()}else{return this._dateObj.getMonth()}},time:function(a){if(a!==undefined){this._dateObj.setTime(a);return this._dateComponentDidChange()}else{return this._dateObj.getTime()}},timezoneOffset:function(a){if(a!==undefined){this._dateObj.setTimezoneOffset(a);return this._dateComponentDidChange()}else{return this._dateObj.getTimezoneOffset()}},year:function(a){return this.fullYear(a)},changeDateType:function(a){if(a===this.dateType){return this}if(a===CW.DATE_ONLY||a===CW.DATE_TIME||a===CW.DATE_TIME_TO_MIDNIGHT||a===CW.DATE_TIME_SEC){this.dateType=a;this._dateComponentDidChange()}else{CW.fatalError("You must provide a valid date type.")}return this},weekNumber:function(c){c=(c?c:this._dateObj);var d=new Date(c.getFullYear(),0,1),g=1,j=d.getDay()-g,k=Math.floor((c.getTime()-d.getTime()-(c.getTimezoneOffset()-d.getTimezoneOffset())*60000)/CW.DAY_MILLIS_DUR)+1,a,f,b,e,h;j=j>=0?j:j+7;if(j<4){a=Math.floor((k+j-1)/7)+1;if(a>52){f=new Date(c.getFullYear()+1,0,1);b=f.getDay()-g;b=b>=0?b:b+7;a=b<4?1:53}}else{e=Math.floor((k+j-1)/7);a=e===0?53:e}h=c.getFullYear();if(a===53&&c.getMonth()===0){h--}else{if(a===1&&c.getMonth()===11){h++}}return[h,a]},weekNumberToDate:function(d,e){d=parseInt(d,0);e=parseInt(e,0);var h=new Date(e,0,10,12,0,0);var b=new Date(e,0,4,12,0,0);var g=new Date(b.getTime()-h.getDay()*CW.DAY_MILLIS_DUR);var a=new Date(g.getTime()+(d-1)*604800000);var f=new Date(a.getTime()+518400000);var c=[a,f];return c},dateRangeOfWeek:function(){var c=this._dateObj;var a=c.getDay(),b;if(a===0){b=6}else{b=a+1}var e=new Date(c.valueOf());e.setDate(c.getDate()-b);var d=new Date(c.valueOf());d.setDate(c.getDate()+(7-c.getDay()));return[e,d]},daysInMonth:function(){var c=this.year(),a=this.month(),b=[31,28,31,30,31,30,31,31,30,31,30,31];return(a===1&&((c%4===0&&c%100!==0)||c%400===0))?29:b[a]},toTimeString:function(a){if(a){return this.format(a)}else{if(this.timeFormat){return this.format(this.timeFormat)}}return this._dateObj.toString().substr(16,5)},toString:function(b){if(b){return this.format(b)}else{if(this.fullDateFormat){return this.format(this.fullDateFormat)}else{var a=this._dateObj;if(a){return a.toString()}else{return"null"}}}},toDateString:function(a){if(a){return this.format(a)}else{if(this.dateFormat){return this.format(this.dateFormat)}}return this._dateObj.toString().substr(0,15)},parse:function(a){var b=this._dateObj;if(SC.typeOf(a)===SC.T_ARRAY){if(!isNaN(a[3])){b.setDate(a[3])}if(!isNaN(a[1])){b.setFullYear(a[1])}if(!isNaN(a[2])){b.setMonth(a[2]-1)}if(!isNaN(a[3])&&a[3]!==b.getDate()){b.setDate(a[3])}if(this.dateType===CW.DATE_ONLY){b.setHours(0);b.setMinutes(0)}else{if(!isNaN(a[4])){b.setHours(a[4])}if(!isNaN(a[5])){b.setMinutes(a[5])}if(this.dateType===CW.DATE_TIME_SEC){if(!isNaN(a[6])){b.setSeconds(a[6])}}}}else{if(a&&a.getTime){b.setFullYear(a.getFullYear(),a.getMonth(),a.getDate());b.setHours(a.getHours());b.setMinutes(a.getMinutes());if(this.dateType===CW.DATE_TIME_SEC){b.setSeconds(a.setSeconds())}}}if(this.dateType!==CW.DATE_TIME_SEC){b.setSeconds(0)}b.setMilliseconds(0);this._dateObj=b;this._dateComponentDidChange();return this},format:function(I,J){I+="";if(J){I=I.loc()}var P=this._dateObj,z=this.value||{},D=I.length,o="",x=0,O="",f="",n=z[1]+"",g=z[2],L=z[3],q=P.getDay(),p=z[4],A=z[5],t=P.getSeconds(),v,w,b,u,Q,e,G,F,B,r,S,R,j,a,C,T,N;if(n.length<3){if(n>=0&&n<=28){n=""+(n+2000)}else{if(n>=28&&n<=99){n=""+(n+1900)}}}z.y=""+n;z.yyyy=n;z.yy=n.substring(2,4);z.M=g;z.MM=LZ(g);z.MMM=MONTH_NAMES[g-1];z.NNN=MONTH_NAMES[g+11];z.d=L;z.dd=LZ(L);z.E=DAY_NAMES[q+7];z.EE=DAY_NAMES[q];z.H=p;z.HH=LZ(p);if(p===0){z.h=12}else{if(p>12){z.h=p-12}else{z.h=p}}z.hh=LZ(z.h);if(p>11){z.K=p-12}else{z.K=p}z.k=p+1;z.KK=LZ(z.K);z.kk=LZ(z.k);if(p>11){z.a="PM"}else{z.a="AM"}z.m=A;z.mm=LZ(A);z.s=t;z.ss=LZ(t);while(x<D){O=I.charAt(x);f="";while((I.charAt(x)==O)&&(x<D)){f+=I.charAt(x++)}T=z[f];if(!SC.none(T)){N=T.toString().loc();o+=N?N:T}else{o+=f}}return o},done:function(){if(CW.Date._pool.indexOf(this)===-1){CW.Date._pool.push(this)}this.timeFormat=this.fullTimeFormat=this.dateFormat=null;return SC.clone(this.value)},components:function(){return SC.clone(this.value)},clone:function(a){return CW.Date.create(SC.clone(this.value),(a)?a:this.dateType)},setValue:function(a){this.value=SC.clone(a);this._dateComponentDidChange()},_dateComponentDidChange:function(){var a=[0,0,0,0,0,0,0];var b=this._dateObj;a[1]=b.getFullYear();a[2]=b.getMonth()+1;a[3]=b.getDate();a[0]=parseInt(a[1]+((a[2]<10)?"0":"")+a[2]+((a[3]<10)?"0":"")+a[3],0);if(this.dateType!==CW.DATE_ONLY){a[4]=b.getHours();a[5]=b.getMinutes();if(this.dateType===CW.DATE_TIME_SEC){a[6]=b.getSeconds()}else{a[6]=(this.dateType===CW.DATE_TIME_TO_MIDNIGHT)?CW.DAY_MIN_DUR-(a[4]*60+a[5]):a[4]*60+a[5]}}this.value=a;return this}};SC.mixin(CW.Date,{_pool:[],parseDate:function(a,b){var c=new Date();if(SC.typeOf(a)!==SC.T_ARRAY){return c}c.setFullYear(a[1]);c.setMonth(a[2]);c.setDate(a[3]);if(!b){c.setHours(a[4]);c.setMinutes(a[5])}c.setSeconds(0);c.setMilliseconds(0);return c},dateComponentsEqual:function(d,c){if(SC.typeOf(d)!==SC.T_ARRAY&&SC.typeOf(c)===SC.T_ARRAY){return NO}else{return(d[0]===c[0])}},datesEqual:function(e,c){if(e===c){return YES}var d=SC.typeOf(e),f=SC.typeOf(c);if(d!==f){return NO}else{return(e.value[0]===c.value[0])}},dateTimesEqual:function(d,c){if(SC.typeOf(d)!==SC.T_ARRAY&&SC.typeOf(c)===SC.T_ARRAY){return NO}else{return(d[0]===c[0]&&d[4]===c[4]&&d[5]===c[5])}},create:function(c,b){var a;if(CW.Date._pool.length>0){a=CW.Date._pool.pop();a.value=null;a.dateType=CW.DATE_ONLY}else{a=SC.beget(CW.Date)}a._dateObj=new Date();if(c&&SC.typeOf(c)===SC.T_NUMBER){b=c;c=null}if(b!==undefined){a.dateType=b}a.parse(c);return a},createFromDateObject:function(c,b){var a;if(SC.typeOf(c)===SC.T_HASH){if(CW.Date._pool.length>0){a=CW.Date._pool.pop();a.value=null;a.dateType=CW.DATE_ONLY}else{a=SC.beget(CW.Date)}a._dateObj=c;a.dateType=b||CW.DATE_ONLY}},createFromDateComponent:function(c){if(!c){CW.fatalError("createFromDateComponent():  No date component was specified")}var d=Math.floor(c/10000),f=Math.floor(c/100)-(d*100),a=c-(d*10000)-(f*100),e=[c,d,f,a],b=CW.Date.create(e,CW.DATE_ONLY);return b},areDatesInRange:function(a,d,c,b){if(!a||!d){return NO}if(d[0]===c[0]&&d[6]===1440){return NO}return((a[0]>=c[0]&&a[0]<=b[0])||(d[0]>=c[0]&&d[0]<=b[0])||(a[0]<=c[0]&&d[0]>=b[0]))},compareDates:function(e,b,a){if(!e||!b){return e||b}var g,f,d,c;g=e._dateObj?e.components():e;f=b._dateObj?b.components():b;if(g[0]<f[0]){return(a?b:e)}else{if(g[0]===f[0]){d=g[4]*60+g[5];c=f[4]*60+f[5];if(d<c){return(a?b:e)}else{if(d>c){return(a?e:b)}else{return null}}}else{return(a?e:b)}}},greaterThan:function(c,b){if(SC.typeOf(c)===SC.T_ARRAY){c=CW.Date.create(c)}if(SC.typeOf(b)===SC.T_ARRAY){b=CW.Date.create(b)}var a=this.compareDates(c,b,YES);if(a===c){return YES}else{return NO}}});CW.DateFormatter=function(a,b){return SC.DateFormatter(a.dateObject(),b)};CW.DateParser={parseDate:function(v,k,w,n){var j,y,t,F,H,D,C,G,g,r,h,E,e,d,B,x,u=["Sunday".loc().toLowerCase(),"Monday".loc().toLowerCase(),"Tuesday".loc().toLowerCase(),"Wednesday".loc().toLowerCase(),"Thursday".loc().toLowerCase(),"Friday".loc().toLowerCase()],z=v.toLowerCase(),s,A,q,o,m,f=SC.Locale.currentLocale.language,p;if(!isNaN(v)&&parseInt(v,10)>31){j=CW.Date.create(k);x=v.length;if(x===2){if(!w){y=parseInt(v.charAt(0),10)-1;t=parseInt(v.charAt(1),10)}else{y=parseInt(v.charAt(1),10)-1;t=parseInt(v.charAt(0),10)}F=new Date().getFullYear()}else{if(x===3){E=v;H=parseInt(v.charAt(0),10);G=parseInt(v.substr(0,2),10);g=parseInt(v.substr(1,2),10);C=parseInt(v.charAt(2),10);if(!w){y=(G<=12)?(G-1):(H-1);t=(G<=12)?C:g}else{y=(g<=12)?(g-1):(C-1);t=(g<=12)?H:G}F=new Date().getFullYear()}else{if(x===4){e=v;H=parseInt(v.charAt(0),10);G=parseInt(v.substr(0,2),10);r=parseInt(v.substr(2,2),10);D=parseInt(v.charAt(1),10);if(!w){y=(G<=12&&r<=31)?(G-1):(H-1);t=(G<=12&&r<=31)?r:D;F=(G<=12&&r<=31)?new Date().getFullYear():2000+r}else{y=(g<=12)?(g-1):(C-1);t=(g<=12)?H:G}}else{if(x===5){d=parseInt(v,10).toString();H=parseInt(v.charAt(0),10);G=parseInt(v.substr(0,2),10);g=parseInt(v.substr(1,2),10);B=parseInt(v.substr(3,2),10);C=parseInt(v.substr(2,1),10);if(!w){y=(G<=12)?(G-1):(H-1);t=(G<=12)?C:g}else{y=(g<=12)?(g-1):(C-1);t=(g<=12)?H:G}F=2000+B}else{if(x>=6&&x<=8){G=parseInt(v.substr(0,2),10);r=parseInt(v.substr(2,2),10);C=parseInt(v.charAt(2),10);B=parseInt(v.substr(3,2),10);h=parseInt(v.substr(4),10);if(!(x===6&&r===20)&&!(x===7&&B===20)){y=(G<=12)?(G-1):((r<=12&&G>=1&&G<=31)?(r-1):-1);t=(r>=1&&r<=31&&y===(G-1))?r:((G>=1&&G<=31&&y===(r-1))?G:-1);F=x>6?h:2000+h}else{if(x===6&&r===20){if(!w){y=H-1;t=D}else{y=D-1;t=H}}else{if(x===7&&B===20){if(!w){y=(G<=12)?(G-1):(H-1);t=(G<=12)?C:g}else{y=(g<=12)?(g-1):(C-1);t=(g<=12)?H:G}}}}}}}}}if(y<0||y>=12||t<1||t>31||F<0){j=null}else{j._dateObj.set({month:y,day:t,year:F});j._dateComponentDidChange()}}else{if(!isNaN(v)&&(p=parseInt(v,10))<31&&p<31){j=CW.Date.create();j._dateObj=Date.parse(v);j._dateComponentDidChange()}}return j}};CW.Response=SC.XHRResponse.extend({bodyShouldBeLogged:function(){var a=this.get("status");return(!SC.none(a)&&a!==200)}.property("status"),fakeReply:null,overallTimeoutTimer:null,addedToOutgoingQueueTimestamp:null,getFullAddress:function(){return this.get("request").getFullAddress()},notify:function(){var c=arguments.callee.base.apply(this,arguments),b=CW.RequestManagement,a;if(b){a=b.sharedInstance()}if(a){a.removeOutstandingResponse(this)}return c},fire:function(d){var a=this.get("request"),c=a?a.get("source"):null;if(c&&c.willSend){c.willSend(a,this)}a.freeze();if(!this.get("isCancelled")){this.invokeTransport(d)}var b=a.get("timeout");if(b){var e=SC.Timer.schedule({target:this,action:"timeoutReached",interval:b,repeats:NO});this.set("timeoutTimer",e)}if(!this.get("isCancelled")&&c&&c.didSend){c.didSend(a,this)}},timeoutReached:function(){var a=this.get("timeoutTimer");if(a){a.invalidate()}a=this.get("overallTimeoutTimer");if(a){a.invalidate()}return arguments.callee.base.apply(this,arguments)},receive:function(c,a){var b=this.get("overallTimeoutTimer");if(b){b.invalidate()}return arguments.callee.base.apply(this,arguments)},invokeTransport:function(){var g=this.get("fakeReply"),c;if(g){this.set("rawRequest",g);c=g.get("delay");this.invokeLater(this._triggerFakeReply,c)}else{var e,h,b,d,f;e=this.createRequest();this.set("rawRequest",e);d=!!this.getPath("request.isAsynchronous");if(d){if(!SC.browser.msie&&!SC.browser.opera){SC.Event.add(e,"readystatechange",this,this.finishRequest,e)}else{h=this;b=function(){if(!h){return null}var j=h.finishRequest();if(j){h=null}return j};e.onreadystatechange=b}}e.open(this.get("type"),this.getFullAddress(),d);f=this.getPath("request.headers");for(var a in f){e.setRequestHeader(a,f[a])}if(this.getPath("request.useCrossDomain")){e.withCredentials=true}e.send(this.getPath("request.encodedBody"));if(!d){this.finishRequest()}return e}},cancelTransport:function(){var a=this.get("fakeReply");if(a){return}else{return arguments.callee.base.apply(this,arguments)}},_triggerFakeReply:function(){var a=this.get("fakeReply");if(a){a.set("readyState",4);this.finishRequest(undefined)}}});sc_require("system/response");CW.IFramePostMessageResponse=CW.Response.extend({isCrossDomain:YES,requestId:-1,rawResponse:null,_activeRequests:{},destinationDomain:"",headers:function(){var a=this.get("rawResponse");if(!a){return{}}var c=a.headers,b={};if(!c){return b}c.split("\n").forEach(function(g){var d=g.indexOf(":"),e,f;if(d>=0){e=g.slice(0,d);f=g.slice(d+1).trim();b[e]=f}},this);return b}.property("status").cacheable(),header:function(a){var b=this.get("headers");return b[a]||null},encodedBody:function(){var a=this.get("rawResponse");if(!a){return""}return a.responseText}.property("status").cacheable(),invokeTransport:function(f){var c=this.get("request");var a={requestId:f,url:c.getFullAddress(),type:c.get("type"),headers:c.get("headers"),body:c.get("body"),isAsynchronous:c.get("isAsynchronous")};var b=SC.Request.manager.get("crossDomainIFrames")[c.get("destinationDomain")];try{b.contentWindow.postMessage(SC.json.encode(a),this.get("destinationDomain"))}catch(d){SC.debug('CW.IFramePostMessageResponse: iFrame not properly loaded from "%@". Maybe ajax_sender.html is missing?',b.src)}},finishRequest:function(c){var e=this.get("rawResponse"),a=e.readyState,d,b,f;if(a===4&&!this.get("timedOut")){this.receive(function(g){if(!g){return}b=-1;try{b=e.status||0}catch(j){}if((b<200)||(b>=300)){try{f=e.statusText||""}catch(h){f=""}d=SC.$error(f||"HTTP Request failed","Request",b);d.set("errorValue",this);this.set("isError",YES);this.set("errorObject",d)}this.set("status",b)},this);if(!SC.browser.msie&&!SC.browser.opera){SC.Event.remove(e,"readystatechange",this,this.finishRequest)}else{e.onreadystatechange=null}return YES}return NO},cancelTransport:function(){this.set("rawRequest",null)}});sc_require("core");CW.ImagePreloader=SC.Object.extend({images:null,callBack:null,init:function(){this.loadImages()},loadImages:function(){this._numLoaded=0;this._numProcessed=0;this._allImages=[];this._numImages=this.get("images").length;for(var a=0;a<this._numImages;a++){this.preload(this.get("images")[a])}},preload:function(a){var b=new Image;this._allImages.push(b);theImage=this;b.onload=function(){theImage.onload.call(theImage)};b.onerror=function(){theImage.onerror.call(theImage)};b.onabort=function(){theImage.onabort.call(theImage)};b.sLoaded=false;b.src=a},onComplete:function(){this._numProcessed++;if(this._numProcessed===this._numImages){this.callBack(this._allImages,this._numLoaded)}},onload:function(){this.sLoaded=true;this._numLoaded++;this.onComplete()},onerror:function(){this.sError=true;this.onComplete()},onabort:function(){this.sAbort=true;this.onComplete()}});CW.KeyResponder={_kr_init:function(){var a=this.keyboardShortcuts||{};a=SC.clone(a);this.keyboardShortcuts=a;this._kr_hasInited=YES},registerKeyboardShortcut:function(a,c,b){if(!this._kr_hasInited){this._kr_init()}if(!b){b=c;this.keyboardShortcuts[a]=b}else{this.keyboardShortcuts[a]={target:c,action:b}}},deregisterKeyboardShortcut:function(a){if(!this._kr_hasInited){this._kr_init()}delete this.keyboardShortcuts[a]},performKeyEquivalent:function(c,b){if(!this._kr_hasInited){this._kr_init()}if(CW.LOG_KEYBOARD_SHORTCUTS){SC.Logger.log("Responder attempting to find keyboard shortcut for %s",c)}var a=this.keyboardShortcuts[c];if(a){var d=a,e=this;if(typeof a==="object"){e=a.target;d=a.action}if(typeof d!=="string"){return d.call(e,c,b)}return SC.RootResponder.responder.sendAction(d,e,this,c,b)}return NO}};SC.mixin(CW,{LOG_KEYBOARD_SHORTCUTS:NO,registerKeyboardShortcut:function(a,c,b){CW.globalKeyResponder.registerKeyboardShortcut(a,c,b)},deregisterKeyboardShortcut:function(a){CW.globalKeyResponder.deregisterKeyboardShortcut(a)},keyResponders:[],globalKeyResponder:SC.Object.create(CW.KeyResponder),addKeyResponder:function(a){this.keyResponders.push(a)},removeKeyResponder:function(a){this.keyResponders.removeObject(a)},performKeyEquivalent:function(e,c){if(CW.LOG_KEYBOARD_SHORTCUTS){SC.Logger.log("Attempting to find keyboard shortcut for %s",e)}var d=this.keyResponders,b,a=d.length;for(b=a-1;b>=0;b--){if(d[b].performKeyEquivalent(e,c)){return YES}}return NO},installKeyResponder:function(){var a=SC.RootResponder.prototype.attemptKeyEquivalent;SC.RootResponder.reopen({attemptKeyEquivalent:function(b){var d=a.apply(this,arguments);if(d){return d}var c=b.commandCodes()[0];if(!c){return NO}return CW.performKeyEquivalent(c,b)}});SC.View.reopen(CW.ViewKeyHandlingHelpers);SC.Pane.reopen(CW.KeyResponder);SC.ButtonView.reopen(CW.ButtonKeyHandlingHelpers)}});CW.keyResponders.push(CW.globalKeyResponder);CW.LOG_NOTIFICATIONS=NO;CW.notificationCenter=SC.Object.create({_subscriptions:{},postNotification:function(g){var a=this._subscriptions;if(!a[g]){if(CW.LOG_NOTIFICATIONS){SC.info("Notification Center: Could not find any subscribers for %@, returning.".fmt(g))}return}var f=a[g];var b=f.length;var h=SC.A(arguments).slice(1);if(!h){h=[]}if(CW.LOG_NOTIFICATIONS){SC.info("Notification Center: Posting notification %@".fmt(g))}for(var d=0;d<b;d++){var j=f[d];if(j){var c=j.action;var e=j.target;c.apply(e,h)}}},_targetForTargetName:function(a){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a)}return a},_methodForMethodNameInTarget:function(a,b){if(SC.typeOf(a)===SC.T_STRING){return SC.objectForPropertyPath(a,b)}return a},subscribeToNotification:function(g,e,b){e=this._targetForTargetName(e);b=this._methodForMethodNameInTarget(b,e);if(!b){throw"You must pass a action to subscribeToNotification()"}var a=this._subscriptions;var f=a[g];if(!f){f=a[g]=[]}var j=false;var d=f.length;for(var c=0;c<d;c++){var h=f[c];if(h.action===b&&h.target===e){j=true}}if(!j){if(CW.LOG_NOTIFICATIONS){SC.info("Notification Center: Subscribed to %@".fmt(g))}a[g].push({action:b,target:e});this._subscriptions=a}},unsubscribeFromNotification:function(g,e,c){var a=this._subscriptions;e=this._targetForTargetName(e);c=this._methodForMethodNameInTarget(c,e);if(!c){throw"You must pass a action to subscribeToNotification()"}var f=a[g];if(!f){return}var b=f.length;var j=-1;for(var d=0;d<b;d++){var h=f[d];if(h.action===c&&h.target===e){j=d}}if(j!==-1){if(CW.LOG_NOTIFICATIONS){SC.info("Notification Center: Subscribed to %@".fmt(g))}a[g].splice(j,1);this._subscriptions=a}}});sc_require("system/response");CW.Request=SC.Request.extend({COPY_KEYS:SC.Request.prototype.COPY_KEYS.concat(["overallTimeout","addressPrefix","useCrossDomain","id","isCancelled","destinationDomain","cycle","action","isBackgroundRequest","_crossDomainMethod","_queryParameters","_isRead","isRead","isWrite","_isPending","_cycleWhenPended","_cycleWhenSent"]),responseClass:undefined,timeout:30000,overallTimeout:null,addressPrefix:null,useCrossDomain:NO,iFrameScriptLocation:"ajax_sender.html",id:null,isCancelled:NO,cycle:null,action:null,isBackgroundRequest:NO,isRead:function(a,c){if(c===undefined){var d=this._isRead;if(d!==undefined){return d}else{var b=this.get("type");if(!b){CW.fatalError("No type was specified, so we dont know whether this request is a read or a write.")}else{return b.toLowerCase()==="get"}}}else{this._isRead=c;return c}}.property("type").cacheable(),isWrite:function(a,b){if(b===undefined){return !this.get("isRead")}else{this.set("isRead",!b);return b}}.property("isRead").cacheable(),bodyShouldBeLogged:NO,queryParameter:function(a,b){var c;if(SC.typeOf(a)===SC.T_STRING){c=this._queryParameters;if(arguments.length===1){return c?c[a]:null}else{this.propertyWillChange("queryParameters");if(!c){c=this._queryParameters={}}c[a]=b;this.propertyDidChange("queryParameters");return this}}else{if(b===undefined){c=a;this.beginPropertyChanges();for(a in c){if(!c.hasOwnProperty(a)){continue}this.queryParameter(a,c[a])}this.endPropertyChanges();return this}else{CW.fatalError("queryParameter():  You must pass in either a key or a hash of query parameters",{target:this})}}return this},clearQueryParameters:function(){this.propertyWillChange("queryParameters");this._queryParameters={};this.propertyDidChange("queryParameters")},queryParameters:function(){return this._queryParameters}.property().cacheable(),queryParametersOrder:null,addressWithQueryParameters:function(){var f=this.get("address")||"",c=this.get("queryParameters"),o=this._queryParameterSortFunc,b,n,a,d,e,m,j,k,g,h;if(c){b=[];k=SC.typeOf;g=SC.T_BOOLEAN;n=CW.invertHash(c);if(o){a=this.get("queryParametersOrder");if(a){CW.Request._sortOrderMapping=CW.invertArrayWithOrder(a)}n=n.sort(o)}delete CW.Request._sortOrderMapping;for(d=0,e=n.length;d<e;++d){m=n[d];j=c[m];m=encodeURIComponent(m);if(j===null){b.push(m)}else{if(k(j)===g){j=j?"true":"false"}else{j=encodeURIComponent(j.toString())}b.push(m+"="+j)}}h=b.join("&");if(h){if(f.indexOf("?")!==-1){f+="&"+h}else{f+="?"+h}}}return f}.property("address","queryParameters").cacheable(),send:function(d,b){this._determineResponseClassAndMethod();var a;if(this.get("isAsynchronous")===NO){a=this._crossDomainMethod;if(a&&a!=="cors"){CW.fatalError("You cannot send a synchronous request using iframes with postMessage",{target:this})}}var j=CW.RequestManagement,f=j?j.sharedInstance():null,e,k,g,c;this._isPending=NO;this._cycleWhenPended=null;this._cycleWhenSent=this.get("cycle");k=this._getFakeReply();var h=this.get("timeout");if(h&&!this.get("isAsynchronous")){throw"Timeout values cannot be used with synchronous requests"}else{if(h===0){throw"The timeout value must either not be specified or must be greater than 0"}}if(d){this.set("body",d)}c=this.copy()._prep();if(k){c._fakeReplyToUse=k}e=SC.Request.manager.sendRequest(c);if(e&&f){f.addOutstandingResponse(e)}if(b&&f){f.removePendingRequest(this)}return e},sendAfterDelay:function(a,d){if(!d){CW.fatalError("sendAfterDelay():  You must specify a delay",{target:this})}var c=CW.RequestManagement,b=c?c.sharedInstance():null;this._isPending=YES;this._cycleWhenPended=this.get("cycle");if(b){b.addPendingRequest(this)}this.invokeLater(this.send,d,a,YES)},resend:function(e,a){var g=this._getFakeReply(),d,f,c,b;f=this.get("source")?this:this.copy()._prep();if(g){f._fakeReplyToUse=g}d=SC.Request.manager.sendRequest(f,e);if(d){c=CW.RequestManagement;b=c?c.sharedInstance():null;if(b){b.addOutstandingResponse(d)}}if(a&&b){b.removePendingRequest(this)}return d},resendAfterDelay:function(d,c){if(!c){CW.fatalError("resendAfterDelay():  You must specify a delay",{target:this})}var b=CW.RequestManagement,a=b?b.sharedInstance():null;this._isPending=YES;this._cycleWhenPended=this.get("cycle");if(a){a.addPendingRequest(this)}this.invokeLater(this.resend,c,d,YES)},getFullAddress:function(){var b=this.get("addressPrefix"),a=this.get("addressWithQueryParameters");if(b){a=b+a}return a},didSend:function(b,a){var c;CW._logRequestIfAppropriateFor(a);c=a.get("rawRequest");if(c&&c.isFakeReply){SC.info("Using fake reply (%@) for request:  %@",c,b)}},didReceive:function(d,c){var b=CW.Request,a;if(b._responseSuspendCount>0){c._receivedAtWhileSuspended=new Date();a=b._suspendedResponses;if(!a){a=b._suspendedResponses=[c]}else{a.push(c)}if(!c.get("isCancelled")){c._receivedWhenSuspended=YES;c.set("isCancelled",YES)}}else{CW._logResponseIfAppropriate(c)}},destinationDomain:function(){var a=this.getFullAddress(),b=null,d,c;if(a){d=new RegExp("^(?:([^:/?#.]+):)?(?://)?(([^:/?#]*)(?::(\\d*))?)?((/(?:[^?#](?![^?#/]*\\.[^?#/.]+(?:[\\?#]|$)))*/?)?([^?#/]*))?(?:\\?([^#]*))?(?:#(.*))?");c=d.exec(a);if(c){b=c[1]+"://"+c[2]}}return b}.property("addressPrefix","address"),cycleDidChange:function(){var b=CW.RequestManagement,a=b?b.sharedInstance():null,d,c;if(a){d=this.get("cycle");if(this._isPending){if(d!==this._cycleWhenPended){a.cycleDidChangeForPendingRequest()}}else{c=this._cycleWhenSent;if(c&&(d!==c)){a.cycleDidChangeForOutstandingResponse()}}}}.observes("cycle"),toString:function(){var b=arguments.callee.base.apply(this,arguments),a=this.get("address");if(a){b+=" ("+a+")"}return b},_crossDomainMethod:null,_queryParameters:null,_isPending:NO,_cycleWhenPended:null,_cycleWhenSent:null,_determineResponseClassAndMethod:function(){var a=SC.kindOf,b,c;if(this.get("useCrossDomain")){b=this.get("responseClass");if(!b){if(SC.browser.webkit||SC.browser.mozilla){b=CW.Response}else{if(window.postMessage){b=CW.IFramePostMessageResponse}else{if(SC.browser.msie&&SC.browser.version<=7){b=CW.IFrameDocumentDomainResponse}}}}if(!this._crossDomainMethod){if(a(b,CW.IFramePostMessageResponse)){c="postMessage"}else{if(a(b,CW.IFrameDocumentDomainResponse)){c="documentDomain"}else{if(a(b,CW.Response)){c="cors"}}}if(c){this._crossDomainMethod=c}}}else{b=CW.Response}if(!this.get("responseClass")&&b){this.set("responseClass",b)}},_getFakeReply:function(){var b=CW.get("fakeReplyQueue"),j=b?b.length:0,e=null,f,g,d,c,h,a;if(j>0){f=this.get("isBackgroundRequest");g=null;for(d=0;d<j;++d){c=b[d];if(f&&!c.get("applyToBackgroundRequests")){continue}h=c.get("urlFilter");if(h){a=this.get("address");if(!a||!h.test(a)){continue}}b.removeAt(d,1);g=c;break}if(g){if(!g.get("shouldProcessRequestNormally")){e=g}}}return e},_queryParameterSortFunc:function(f,d){var c=CW.Request._sortOrderMapping,g=c?c[f]:undefined,e=c?c[d]:undefined;if(g===undefined){if(e===undefined){if(f<d){return -1}else{if(f>d){return 1}else{return 0}}}else{return 1}}else{if(e===undefined){return -1}else{if(g<e){return -1}else{if(g>e){return 1}else{return 0}}}}}});CW.Request.mixin({suspendResponses:function(){++this._responseSuspendCount},resumeResponses:function(){var h=--this._responseSuspendCount,b,d,a,c,f,g;if(h<0){SC.warn("CW.Response.resumeResponses() was called without a paired suspendResponses() invocation; ignoring");this._responseSuspendCount=0}var e=function(){if(c.get("isCancelled")&&c._receivedWhenSuspended){c.set("isCancelled",NO);f=c.get("request");g=f.get("source");if(g&&g.didReceive){g.didReceive(f,c)}if(!c.get("isCancelled")){c.notify()}}};b=this._suspendedResponses;a=b?b.length:0;for(d=0;d<a;++d){c=b[d];SC.run(e)}},_responseSuspendCount:0,_suspendedResponses:null});SC.Request.manager.mixin({crossDomainIFrames:{},_requestId:0,_crossDomainXHRLoaderURL:"",shouldFireRequest:null,_createCrossDomainIFrame:function(d,c){if(!d){CW.fatalError("_createCrossDomainIFrame():  A destination domain must be specified",{target:this})}if(!c){CW.fatalError("_createCrossDomainIFrame():  An AJAX sender URL must be specified",{target:this,destinationDomain:d})}var a=document.createElement("iframe"),b=this;if(c[0]!=="/"){c="/"+c}a.loaded=false;a.onload=a.onreadystatechange=function(){if(!a.loaded&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){a.loaded=true;b.fireRequestIfNeeded()}};if(d[d.length-1]==="/"){d=d.substr(0,d.length-1)}a.src=d+c;a.style.display="none";document.body.appendChild(a);a.className="crossdomain-iframe";SC.Event.add(window,"message",this,"_messageWasReceived",null,true);this.get("crossDomainIFrames")[d]=a;this.notifyPropertyChange("crossDomainIFrames")},_messageWasReceived:function(b){var c=SC.json.decode(b.originalEvent.data),g=c.headers,f=this.get("inflight"),a=f.length,e;for(var d=0;d<a;d++){e=f[d];if(e.requestId===c.requestId){e.set("rawResponse",c);e.set("rawRequest",c);e.finishRequest();return}}},sendRequest:function(e,f){if(!e){return null}var b=this._requestId,g=e.get("destinationDomain"),c=e.get("responseClass").create({request:e,destinationDomain:g,requestId:b}),j,h,d,a;if((e._crossDomainMethod==="postMessage"||e._crossDomainMethod==="documentDomain")&&!this.get("crossDomainIFrames")[g]){this._createCrossDomainIFrame(g,e.get("iFrameScriptLocation"))}if(c.get("isCrossDomain")){c.set("destinationDomain",g)}if(f){c.set("retryOf",f)}this._requestId=++b;c.set("addedToOutgoingQueueTimestamp",new Date());j=e._fakeReplyToUse;if(j){c.set("fakeReply",j);delete e._fakeReplyToUse}h=e.get("timeout");d=e.get("overallTimeout");if(d===null&&h){d=h;e.set("overallTimeout",h)}if(d){a=SC.Timer.schedule({target:c,action:"timeoutReached",interval:d,repeats:NO});c.set("overallTimeoutTimer",a)}this.get("pending").pushObject(c);this.fireRequestIfNeeded();return c},fireRequestIfNeeded:function(){var b=this.get("pending"),g=this.get("inflight"),h=this.get("maxRequests"),f=b.length,k,d,j,e;if((f>0)&&(g.length<h)){k=this.shouldFireRequest;if(k){for(e=0;e<f;++e){d=b.objectAt(e);if(k(d)){j=d;b.removeAt(e);break}}}else{j=b.shiftObject()}if(!j){return}if(j.get("isCrossDomain")){var c=this.get("crossDomainIFrames")[j.get("destinationDomain")];if(!c||!c.loaded){SC.debug("CW.Request.manager: postponing the sending of %@ since the necessary iframe is not loaded",j);b.unshift(j);return}}g.pushObject(j);this.set("inflight",g);var a=j.get("requestId");j.fire(a)}this.propertyDidChange("inflight")}});CW.RequestManagement=SC.Object.extend({pendingRequests:null,outstandingResponses:null,addPendingRequest:function(b){var a=this.get("pendingRequests");a.pushObject(b)},addOutstandingResponse:function(b){if(!b.getPath("request.isAsynchronous")){SC.debug("Skipping response registration for synchronous response %@",b);return}var a=this.get("outstandingResponses");a.pushObject(b)},removePendingRequest:function(c){var b=this.get("pendingRequests"),a=b.indexOf(c);if(a!==-1){b.removeAt(a,1)}},removeOutstandingResponse:function(c){var b=this.get("outstandingResponses"),a=b.indexOf(c);if(a!==-1){b.removeAt(a,1)}},pendingRequestsForCycle:function(e){var f=this.get("pendingRequests"),c=null,d,a,b;for(d=0,a=f.length;d<a;++d){b=f[d];if(b.get("cycle")===e){if(!c){c=[b]}else{c.push(b)}}}return c},outstandingResponsesForCycle:function(f){var b=this.get("outstandingResponses"),d=null,e,a,c;for(e=0,a=b.length;e<a;++e){c=b[e];if(c.getPath("request.cycle")===f){if(!d){d=[c]}else{d.push(c)}}}return d},cycleDidChangeForPendingRequest:function(){this.get("pendingRequests").enumerableContentDidChange()},cycleDidChangeForOutstandingResponse:function(){this.get("outstandingResponses").enumerableContentDidChange()},numberOfPendingOrOutstandingReadsForCycle:function(a){return(this.numberOfPendingReadRequestsForCycle(a)+this.numberOfOutstandingReadResponsesForCycle(a))},numberOfPendingReadRequestsForCycle:function(d){var c,a,b,f=0,e=this.pendingRequestsForCycle(d);if(e){for(c=0,a=e.length;c<a;++c){b=e[c];if(b.get("isRead")){f++}}}return f},numberOfOutstandingReadResponsesForCycle:function(e){var d,a,c,f=0,b=this.outstandingResponsesForCycle(e);if(b){for(d=0,a=b.length;d<a;++d){c=b[d];if(c.getPath("request.isRead")){f++}}}return f},numberOfPendingOrOutstandingWritesForCycle:function(a){return(this.numberOfPendingWriteRequestsForCycle(a)+this.numberOfOutstandingWriteResponsesForCycle(a))},numberOfPendingWriteRequestsForCycle:function(d){var c,a,b,f=0,e=this.pendingRequestsForCycle(d);if(e){for(c=0,a=e.length;c<a;++c){b=e[c];if(b.get("isWrite")){f++}}}return f},numberOfOutstandingWriteResponsesForCycle:function(e){var d,a,c,f=0,b=this.outstandingResponsesForCycle(e);if(b){for(d=0,a=b.length;d<a;++d){c=b[d];if(c.getPath("request.isWrite")){f++}}}return f},init:function(){var a=arguments.callee.base.apply(this,arguments);this.pendingRequests=[];this.outstandingResponses=[];return a}});CW.RequestManagement.mixin({sharedInstance:function(){var a=this._singleton;if(!a){a=this._singleton=CW.RequestManagement.create()}return a},_singleton:null});SC.time=function(a){var b=SC.beget(fn);b.value=a;return b};(function(){var a=new Date();SC.mixin(SC.time,{month:function(c,b){a.setTime(c);if(b===undefined){return a.getMonth()}a.setMonth(b);return a.getTime()},utc:function(b){a.setTime(b);return b+(a.getTimezoneOffset()*60*1000)},local:function(b){a.setTime(b);return b-(a.getTimezoneOffset()*60*1000)},parse:function(b){},format:function(b){}})})();SC.time.fmt=SC.time.format;SC.time.fn={done:function(){return this.value}};"month day year".split(" ").forEach(function(a){SC.time.fn[a]=function(b){if(b===undefined){return SC.time[a](this.value)}else{this.value=SC.time[a](this.value,b);return this}}});var MONTH_NAMES=["January","February","March","April","May","June","July","August","September","October","November","December","Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var DAY_NAMES=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sun","Mon","Tue","Wed","Thu","Fri","Sat"];function LZ(a){return(a<0||a>9?"":"0")+a}SC.Locale.define("en",{longMonthNames:"January February March April May".split(" "),shortMonthNames:[],shortDateFormat:"dd/mm/yy",longDateFormat:""});SC.mixin(Date,{isDate:function(c,b){var a=Date.getDateFromFormat(c,b);if(a===0){return false}return true},compareDates:function(e,f,c,d){var b=Date.getDateFromFormat(e,f);var a=Date.getDateFromFormat(c,d);if(b===0||a===0){return -1}else{if(b>a){return 1}}return 0},getDateFromFormat:function(A,r){A=A+"";r=r+"";var z=0;var m=0;var t="";var f="";var w="";var h,g;var b=new Date();var j=b.getFullYear();var v=b.getMonth()+1;var u=1;var d=b.getHours();var s=b.getMinutes();var o=b.getSeconds();var k="";var p=SC.Locale.currentLocale;while(m<r.length){t=r.charAt(m);f="";while((r.charAt(m)==t)&&(m<r.length)){f+=r.charAt(m++)}if(f==="yyyy"||f==="yy"||f==="y"){if(f==="yyyy"){h=4;g=4}if(f==="yy"){h=2;g=2}if(f==="y"){h=2;g=4}j=Date._getInt(A,z,h,g);if(j===null){return 0}z+=j.length;if(j.length===2){if(j>70){j=1900+(j-0)}else{j=2000+(j-0)}}}else{if(f==="MMM"||f==="NNN"){v=0;for(var q=0;q<MONTH_NAMES.length;q++){var e=MONTH_NAMES[q];if(A.substring(z,z+e.length).toLowerCase()==e.toLowerCase()){if(f==="MMM"||(f==="NNN"&&q>11)){v=q+1;if(v>12){v-=12}z+=e.length;break}}}if((v<1)||(v>12)){return 0}}else{if(f==="EE"||f==="E"){for(q=0;q<DAY_NAMES.length;q++){var n=DAY_NAMES[q];if(A.substring(z,z+n.length).toLowerCase()==n.toLowerCase()){z+=n.length;break}}}else{if(f==="MM"||f==="M"){v=Date._getInt(A,z,f.length,2);if(v===null||(v<1)||(v>12)){return 0}z+=v.length}else{if(f==="dd"||f==="d"){u=Date._getInt(A,z,f.length,2);if(u===null||(u<1)||(u>31)){return 0}z+=u.length}else{if(f==="hh"||f==="h"){d=Date._getInt(A,z,f.length,2);if(d===null||(d<1)||(d>12)){return 0}z+=d.length}else{if(f==="HH"||f==="H"){d=Date._getInt(A,z,f.length,2);if(d===null||(d<0)||(d>23)){return 0}z+=d.length}else{if(f==="KK"||f==="K"){d=Date._getInt(A,z,f.length,2);if(d===null||(d<0)||(d>11)){return 0}z+=d.length}else{if(f==="kk"||f==="k"){d=Date._getInt(A,z,f.length,2);if(d===null||(d<1)||(d>24)){return 0}z+=d.length;d--}else{if(f==="mm"||f==="m"){s=Date._getInt(A,z,f.length,2);if(s===null||(s<0)||(s>59)){return 0}z+=s.length}else{if(f==="ss"||f==="s"){o=Date._getInt(A,z,f.length,2);if(o===null||(o<0)||(o>59)){return 0}z+=o.length}else{if(f==="a"){if(A.substring(z,z+2).toLowerCase()==="am"){k="AM"}else{if(A.substring(z,z+2).toLowerCase()==="pm"){k="PM"}else{return 0}}z+=2}else{if(A.substring(z,z+f.length)!=f){return 0}else{z+=f.length}}}}}}}}}}}}}}if(z!==A.length){return 0}if(v===2){if(((j%4===0)&&(j%100!==0))||(j%400===0)){if(u>29){return 0}}else{if(u>28){return 0}}}if((v===4)||(v===6)||(v===9)||(v===11)){if(u>30){return 0}}if(d<12&&k=="PM"){d=d-0+12}else{if(d>11&&k=="AM"){d-=12}}var a=new Date(j,v-1,u,d,s,o);return a.getTime()},parseDate:function(b){var g=(arguments.length==2)?arguments[1]:false,k=["E NNN dd HH:mm:ss UTC yyyy","y-M-d","y-M-d","MMM d, y","MMM d,y","y-MMM-d","d-MMM-y","MMM d","d MMM y","d.MMM.y","y MMM d","y.MMM.d"],e=["M/d/y","M-d-y","M.d.y","MMM-d","M/d","M-d"],m=["d/M/y","d-M-y","d.M.y","d-MMM","d/M","d-M"],c=g?k.concat(m,e):k.concat(e,m),h=null;h=0;var a=new Date().getTime();switch(b.toLowerCase()){case SC.String.loc("yesterday"):h=a-(24*60*60*1000);break;case SC.String.loc("today"):case SC.String.loc("now"):h=a;break;case SC.String.loc("tomorrow"):h=a+(24*60*60*1000);break}if(h>0){return new Date(h)}for(var f=0;f<c.length;f++){h=Date.getDateFromFormat(b,c[f]);if(h===0){h=Date.getDateFromFormat(b,c[f]+" H:m:s")}if(h===0){h=Date.getDateFromFormat(b,c[f]+" h:m:s a")}if(h!==0){return new Date(h)}}return null},_isInteger:function(c){var b="1234567890";for(var a=0;a<c.length;a++){if(b.indexOf(c.charAt(a))==-1){return false}}return true},_getInt:function(f,d,e,c){for(var a=c;a>=e;a--){var b=f.substring(d,d+a);if(b.length<e){return null}if(Date._isInteger(b)){return b}}return null}});SC.mixin(Date.prototype,{format:function(G){G=G+"";var L=this;var o="";var x=0;var J="";var f="";var n=L.getFullYear()+"";var g=L.getMonth()+1;var I=L.getDate();var q=L.getDay();var p=L.getHours();var A=L.getMinutes();var t=L.getSeconds();var v,w,b,u,N,e,F,D,B,r,P,O,j,a,C;var z={};if(n.length<4){n=""+(n-0+1900)}z.y=""+n;z.yyyy=n;z.yy=n.substring(2,4);z.M=g;z.MM=LZ(g);z.MMM=MONTH_NAMES[g-1];z.NNN=MONTH_NAMES[g+11];z.d=I;z.dd=LZ(I);z.E=DAY_NAMES[q+7];z.EE=DAY_NAMES[q];z.H=p;z.HH=LZ(p);if(p===0){z.h=12}else{if(p>12){z.h=p-12}else{z.h=p}}z.hh=LZ(z.h);if(p>11){z.K=p-12}else{z.K=p}z.k=p+1;z.KK=LZ(z.K);z.kk=LZ(z.k);if(p>11){z.a="PM"}else{z.a="AM"}z.m=A;z.mm=LZ(A);z.s=t;z.ss=LZ(t);while(x<G.length){J=G.charAt(x);f="";while((G.charAt(x)==J)&&(x<G.length)){f+=G.charAt(x++)}if(!SC.none(z[f])){o=o+z[f]}else{o=o+f}}return o},utcFormat:function(){var a=new Date(this.getTime()+(this.getTimezoneOffset()*60*1000));return a.format("E NNN dd HH:mm:ss UTC yyyy")}});CW.UPLOADER_READY=0;CW.UPLOADER_INCOMPATIBLE_FILE_TYPE=1;CW.UPLOADER_FILE_TOO_BIG=2;CW.UPLOADER_MISSING_XHR=3;CW.Uploader=SC.Object.extend({isUploader:YES,uploadURL:null,maximumFileSize:1024*2000,allowedFileTypes:"png jpeg bmp jpg gif".w(),shouldUploadFile:function(a){return YES},willUploadFile:function(c,b){var a=this;b.upload.onprogress=function(d){SC.run(function(){a.uploadProgressDidChange(b,d)})};b.onload=function(d){SC.run(function(){a.didUploadFile(b,d)})};b.onerror=function(d){SC.run(function(){a.uploadDidFail(b,d)})}},setRequestHeaders:function(e,d){d.setRequestHeader("X-File-Name",e.fileName);d.setRequestHeader("X-File-Size",e.fileSize);var c=this._xhrHeaders;var a=c.length;for(var b in c){d.setRequestHeader(b,c[b])}},uploadProgressDidChange:function(b,a){},didUploadFile:function(b,a){},uploadDidFail:function(b,a){},uploadFiles:function(b){var g=[];for(var a=b.length-1;a>=0;a--){var c=b[a];var f=this._fileIsAcceptableToUpload(c);if((f)!==CW.UPLOADER_READY){g.push(this._errorForFile(c,f))}else{if(this.shouldUploadFile(c)){try{this._createAndSendUploadRequest(c)}catch(d){console.warn(d.toString())}}}}return g},_xhrHeaders:{"If-Modified-Since":"Mon, 26 Jul 1997 05:00:00 GMT","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest","Content-Type":"text/plain"},_fileTooBigDescription:"Uploader.fileTooBigDescription".loc(),_wrongFileTypeDescription:"Uploader.wrongFiletypeDescription".loc(),_createAndSendUploadRequest:function(b){var a=this.get("uploadURL");if(!a){throw"%@: Can't upload file if uploadURL is not set.".fmt(this)}var c=new XMLHttpRequest();c.overrideMimeType("text/plain","charset=x-user-defined-binary");if(!c){throw this._errorForFile(b,CW.UPLOADER_MISSING_XHR)}this.willUploadFile(b,c);c.open("POST",a,true);this.setRequestHeaders(b,c);c.send(b)},_fileIsAcceptableToUpload:function(d){var b=CW.UPLOADER_READY;var e=this.get("maximumFileSize");var a=this.get("allowedFileTypes");var c=d.type.split("/")[1];if(d.fileSize>e){b=CW.UPLOADER_FILE_TOO_BIG}if(a.indexOf(c)===-1){b=CW.UPLOADER_INCOMPATIBLE_FILE_TYPE}return b},_errorForFile:function(c,d){var b="";var a="";switch(d){case CW.UPLOADER_INCOMPATIBLE_FILE_TYPE:b=this._wrongFileTypeDescription;break;case CW.UPLOADER_FILE_TOO_BIG:b=this._fileTooBigDescription;break}return SC.$error(b,a,c,d)}});sc_require("system/date_parser");SC.Validator.CalDate=SC.Validator.extend({format:"M/d/yyyy",currentValue:null,fieldValueForObject:function(b,c,d){var a=CW.Date.create(b,CW.DATE_ONLY);b=this._date=a.format(this.get("format"));return b},objectForFieldValue:function(j,b,f){var d=CW.DATE_ONLY,h=this.get("format"),m=["M/d/yyyy","M.d.yyyy","M-d-yyyy"],n=m.indexOf(h)===-1,c=n?[h]:null,g,e,a=f.get("value"),k=this.get("currentValue");e=Date.parseDate(j,c);if(e){j=CW.Date.create(e,d).done()}else{if(Date.isDate(j,"yyyy/MM/dd")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy/MM/dd")),d).done()}else{if(Date.isDate(j,"yyyy.MM.dd")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy.MM.dd")),d).done()}else{if(Date.isDate(j,"yyyy/M/dd")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy/M/dd")),d).done()}else{if(Date.isDate(j,"yyyy.M.dd")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy.M.dd")),d).done()}else{if(Date.isDate(j,"yyyy/MM/d")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy/MM/d")),d).done()}else{if(Date.isDate(j,"yyyy.MM.d")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy.MM.d")),d).done()}else{if(Date.isDate(j,"yyyy.M.d")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy.M.d")),d).done()}else{if(Date.isDate(j,"yyyy/M/d")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy/M/d")),d).done()}else{if(Date.isDate(j,"MM/yyyy")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"MM/yyyy")),d).done()}else{if(Date.isDate(j,"MM.yyyy")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"MM.yyyy")),d).done()}else{if(Date.isDate(j,"MM-yyyy")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"MM-yyyy")),d).done()}else{if(Date.isDate(j,"yyyy/MM")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy/MM")),d).done()}else{if(Date.isDate(j,"yyyy.MM")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy.MM")),d).done()}else{if(Date.isDate(j,"yyyy-MM")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"yyyy-MM")),d).done()}else{if(Date.isDate(j,"dd.MM")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"dd.MM")),d).done()}else{if(Date.isDate(j,"MM.dd")){j=CW.Date.create(new Date(Date.getDateFromFormat(j,"MM.dd")),d).done()}else{g=CW.DateParser.parseDate(j,a,n,k);j=g?g.done():a}}}}}}}}}}}}}}}}}return j}});SC.Validator.Email=SC.Validator.extend({validate:function(a,b){return/^([A-Z0-9\.\-\_\+])*([A-Z0-9\+\-\_])+\@[A-Z0-9]+([\-][A-Z0-9]+)*([\.][A-Z0-9\-]+){1,8}$/i.test(b.get("fieldValue")||"")},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return SC.$error("Invalid.Email(%@)".loc(a),a)}});SC.Validator.IsDate=SC.Validator.Date.extend({validate:function(b,d){var c=d.get("fieldValue");var a=!!c;if(a&&c.length){a=Date.isDate(c)}return a},validateError:function(b,c){var a=c.get("errorLabel")||"Field";return $error("Invalid.Date(%@)".loc(),c.get("errorLabel"))}});SC.Validator.CalTime=SC.Validator.extend({format:"hh:mm",separator:":",fieldValueForObject:function(a,b,c){return a},objectForFieldValue:function(n,e,d){var r=this.get("format"),A=d.get("value"),t,w,s,p,c=12,h,j=["a","am","p","pm"],k=n.charAt(n.length-1),o=n.substr(n.length-2),q=j.indexOf(k)!==-1?k:((j.indexOf(o)!==-1)?o:null),B=j.indexOf(q)>=2,f=n,v=f.length;if(Date.isDate(n,"h:m")){t=new Date(Date.getDateFromFormat(n,"h:m"))}else{if(Date.isDate(n,"h.m")){t=new Date(Date.getDateFromFormat(n,"h:m"))}}if(Date.isDate(n,"h")){t=new Date(Date.getDateFromFormat(n,"h"));t.setMinutes(0)}if(Date.isDate(n,"h:")){t=new Date(Date.getDateFromFormat(n,"h:"));t.setMinutes(0)}else{if(Date.isDate(n,"h.")){t=new Date(Date.getDateFromFormat(n,"h."));t.setMinutes(0)}}if(Date.isDate(n,":m")){t=new Date(Date.getDateFromFormat(n,":m"));t.setHours(0)}else{if(Date.isDate(n,".m")){t=new Date(Date.getDateFromFormat(n,".m"));t.setHours(0)}}if(Date.isDate(n,"H:m")){t=new Date(Date.getDateFromFormat(n,"H:m"))}else{if(Date.isDate(n,"H.m")){t=new Date(Date.getDateFromFormat(n,"H.m"))}}if(Date.isDate(n,"H:")){t=new Date(Date.getDateFromFormat(n,"H:"));t.setMinutes(0)}else{if(Date.isDate(n,"H.")){t=new Date(Date.getDateFromFormat(n,"H."));t.setMinutes(0)}}if(Date.isDate(n,"H")){t=new Date(Date.getDateFromFormat(n,"H"));t.setMinutes(0)}if(!SC.none(t)){w=n.split(this.get("separator")).objectAt(0);s=(w.toString().charAt(0)==="0")?parseInt(w.toString().charAt(1),10):parseInt(w,10);if(w.toString().charAt(0)==="0"||s>12){c=24}else{if(r==="H:mm"&&(s===12||s===11||s===10)){c=24}}A=t.format(r)}else{if(n.toLowerCase()==="Now".loc().toLowerCase()){h=CW.Date.create(null,CW.DATE_TIME);h._dateObj=Date.parse(n);h.parse(Date.parse(n));A=h.format(r);c=24}else{if(n.toLowerCase()==="Midnight".loc().toLowerCase()){h=CW.Date.create(null,CW.DATE_TIME);h.hours(0).minutes(0);A=h.format(r);c=24}else{if(n.toLowerCase()==="Noon".loc().toLowerCase()){h=CW.Date.create(null,CW.DATE_TIME);h.hours(12).minutes(0);A=h.format(r);c=24}else{var z,y,x,m,g;if(q){f=n.substr(0,n.indexOf(q));v=f.length}if(!isNaN(f)){z=parseInt(n.charAt(0),10);x=parseInt(n.charAt(1),10);y=parseInt(n.substr(0,2),10);m=parseInt(n.substr(2,2),10);g=parseInt(n.substr(1,2),10);switch(v){case 1:w=z;p=0;break;case 2:w=y<=23?y:z;p=y<=23?0:x;break;case 3:w=z;p=g;break;case 4:w=y;p=m;break}if(w<12&&B){w+=12}if(w===12&&!B){w=0}if(p>=0&&p<=59&&w>=0&&w<=23){h=CW.Date.create(null,CW.DATE_TIME);var u=new Date();u.setHours(parseInt(w,10));u.setMinutes(parseInt(p,10));u.setSeconds(0);u.setMilliseconds(0);h._dateObj=u;h._dateComponentDidChange();c=24;A=h.format(r)}}}}}}return[A,c]}});if(!window.CW){window.CW={}}(function(){var a=CW.Animator=CW.Anim={fps:60,tasks:[],speedMultiplier:1,frameCount:0,isActive:false,isInFrame:false,extraStatus:{},ENABLE_OLD_IE:true,_runningCWAguid:0,_hasSC:!!(window.SC&&SC.RunLoop&&SC.Object),_frameTimeNoiseLevelingWindowSize:30,_frameNoiseLevelerLog:[],_movingAverageFrameTime:function(){for(var d=0,e=a._frameNoiseLevelerLog,c=0,b=e.length;d<b;d++){c+=e[d]}return Math.round(10*c/(b||1))/10},init:function(){a.prepareObject();a.stop();a.useRAF=a.IS_MOBILE&&window.requestAnimationFrame&&window.cancelRequestAnimationFrame;a.lock16=a.IS_MOBILE&&!a.useRAF},nextFrame:function(b,k){a.isInFrame=true;var j,m=a._frameNoiseLevelerLog,d=a._frameTimeNoiseLevelingWindowSize,f,g;f=(a._lastFrameTime===-1)?new Date().valueOf():a._lastFrameTime;a._lastFrameTime=new Date().valueOf();g=f=a._lastFrameTime-f;a.now=a._lastFrameTime;if(a.firstActiveFrame){f=0}if(f>=300&&f>=(j=Math.max(a._movingAverageFrameTime(),300/5))*5){f=0;m.unshift(j/2)}else{m.unshift(f)}(m.length<=d)||(m.length=d);a.frameTime=f;var c=!a._hasSC||SC.RunLoop.isRunLoopInProgress();if(!a.shouldSkipFrame||!a.shouldSkipFrame()){if(!c){SC.RunLoop.begin();a._SCLoopBegan()}a.trigger("preframe");for(var h=0,e;e=a.tasks[h];h++){if(e.running){e.elapse(f*a.speedMultiplier)}}for(h=0;e=a.tasks[h];h++){if(!e.running){e._inCWATasks=false;a.tasks.splice(h--,1)}}a.trigger("frame");if(!c){SC.RunLoop.end();a._SCLoopEnded()}a.isActive=!!a.tasks.length;a.frameCount++}a.frameRate=Math.round(100*1000/g)/100;a.computeTime=new Date().valueOf()-a.now;var n=Math.round(1000/a.fps);a.timeoutWaitTime=Math.max(0,n-a.computeTime);a.clearNextTimeout();if(!k&&a.isActive){if(a.useRAF){a._timeout=requestAnimationFrame(a.nextFrame,document.body)}else{a._timeout=setTimeout(a.nextFrame,a.lock16?16:a.timeoutWaitTime)}}else{a.stop()}if(a.firstActiveFrame){a.firstActiveFrame=false}a.isInFrame=false},start:function(){if(a.isActive||a.isInFrame){return}a.firstActiveFrame=true;a.isActive=true;a._lastFrameTime=-1;a.frameTime=1000/a.fps;a.frameRate=1000/a.frameTime;a.computeTime=0;a.trigger("start");a.nextFrame()},stop:function(){a.isActive=false;a.frameTime=Infinity;a.frameRate=0;a.computeTime=NaN;a.timeoutWaitTime=NaN;a.clearNextTimeout();a.trigger("stop")},clearNextTimeout:function(){if(!a._timeout){return}if(a.useRAF){cancelRequestAnimationFrame(a._timeout)}else{clearTimeout(a._timeout)}a._timeout=0},handleTask:function(c){if(!c||c.isDestroyed){return}if(!c._inCWATasks){if(c.name){for(var d=0,e=a.tasks,b;b=e[d];d++){if(b.name===c.name){b.stop()}}}a.tasks.push(c)}c._inCWATasks=true;a.start()},trigger:function(e,c){if(this.isDestroyed){return}var b,g;if((b=this["on"+e]||this["on"+a.toCamel(e,true)]) instanceof Function){b.call(this,c)}if(!(g=this["__"+e+"Listeners__"])){return}for(var d=0,f;d<g.length;d++){if(!((f=g[d]) instanceof Function)){continue}f.call(this,c)}},clearTrigger:function(b){var c=this["__"+b+"Listeners__"];if(!c){return}c.length=0},listen:function(b,c){(this[b="__"+b+"Listeners__"]||(this[b]=[])).push(c)},toString:function(){return"[The CoreWeb Animator]"},prepareObject:function(){Function.prototype.listens=function(){for(var c=0,b=arguments.length;c<b;c++){(this._listens||(this._listens=[])).push(arguments[c])}return this};a.Object=a._hasSC?a.prepareSCObject():a.prepareOwnObject()},prepareOwnObject:function(){var b=function(){};b.prototype={className:"Object",init:function(){this._cwaguid=++a._runningCWAguid},mixin:function(s){if(!arguments.length){return this}for(var m=0,d=arguments.length,h;m<d;m++){h=arguments[m];for(var p in h){if(!h.hasOwnProperty(p)){continue}var r=this[p];var n=h[p];if(r instanceof Function){n.base=r}if(n instanceof Function&&n._listens){for(var g=0,o;(o=n._listens[g])&&(o="__"+o+"Listeners__");g++){if(!this.hasOwnProperty(o)){if(!this[o]){this[o]=[]}else{for(var c=[],f=0,q=this[o].length;f<q;f++){c.push(this[o][f])}this[o]=c}}this[o].push(n)}}this[p]=n}}return this},trigger:a.trigger,listen:a.listen,clearTrigger:a.clearTrigger,toString:a._objectToString,get:function(c){return this[c]},set:function(d,c){this[d]=c;return c}};b.isClass=true;b.create=function(){var c;if(!arguments.length){c=new this()}else{c=new (this.extend.apply(this,arguments))()}c._type=this;c.init();return c};b.extend=function(){var c=function(){};var e=new this();e.mixin.apply(e,arguments);for(var d in this){if(!this.hasOwnProperty(d)){continue}c[d]=this[d]}c.prototype=e;return c};return b},prepareSCObject:function(){var b=SC.Object.extend({className:"CW.Anim.Object",init:function(){arguments.callee.base.call(this);this._cwaguid=a._runningCWAguid++},trigger:a.trigger,listen:a.listen,clearTrigger:a.clearTrigger,toString:a._objectToString});var d=function(q,p){for(var s,o,n=0;s=q[n];n++){if(typeof s!=="object"){continue}for(i in s){if(!s.hasOwnProperty(i)){continue}if(!((func=s[i]) instanceof Function)||!func._listens){continue}for(var m=0;(o=func._listens[m])&&(o="__"+o+"Listeners__");m++){if(!p.hasOwnProperty(o)){if(!p[o]){p[o]=[]}else{for(var f=[],g=0,r=p[o].length;g<r;g++){f.push(p[o][g])}p[o]=f}}p[o].push(func)}}}};var e=function(){var f=arguments.callee.base.apply(this,arguments);f.prototype._type=this;d(arguments,f.prototype);return f};e.base=b.extend;b.extend=e;var c=function(){var f=arguments.callee.base.apply(this,arguments);d(arguments,f);return f};c.base=b.create;b.create=c;return b},_objectToString:function(){return"["+this.className+(this._cwaguid?":"+this._cwaguid:"")+"]"},asHTML:function(b){return b.split("\n").join("<BR>").split("  ").join(" &nbsp;")},toCamel:function(e,d){for(var c=0,b=e.length;c<b;c++){if(e.charAt(c)!=="-"||c==b-1){continue}e=e.substring(0,c)+e.charAt(c+1).toUpperCase()+e.substring(c+2);b--}return d?(e.charAt(0).toUpperCase()+e.substring(1)):e},toDashed:function(e){for(var d=0,b=e.length;d<b;d++){var f=e.charAt(d);if(f.toLowerCase()===f||d==b-1){continue}e=e.substring(0,d)+"-"+e.charAt(d).toLowerCase()+e.substring(d+1);b++}return e},getStyle:function(c,b){if(c.currentStyle){return c.currentStyle[a.toCamel(b)]}if(c.initialStyle){return c.initialStyle.getPropertyValue(b)}var d;if((d=document.defaultView)&&(d=(d.getComputedStyle))){return(c.initialStyle=d(c,null)).getPropertyValue(b)}},IS_OLD_IE:navigator.userAgent.indexOf("MSIE ")!==-1&&parseInt((navigator.userAgent+"").charAt(navigator.userAgent.indexOf("MSIE ")+"MSIE ".length),10)<=8,IS_MOBILE:!!((/ipad/).test(navigator.userAgent.toLowerCase())||(/iphone/).test(navigator.userAgent.toLowerCase())||(/ipod/).test(navigator.userAgent.toLowerCase())||(/android/).test(navigator.userAgent.toLowerCase())),getOpacity:function(c){if(!c){return -1}var b;if(((b=(c.cwa$opacity||c.getAttribute("cwa$opacity")))&&(b=parseFloat(b)))||b===0){return b}if(a.IS_OLD_IE){try{b=parseInt(c.filters.item("DXImageTransform.Microsoft.Alpha").opacity,10)/100;return b}catch(d){}if((b=(c.style.filter||a.getStyle(c,"filter")).toLowerCase())){if(b.indexOf("alpha(opacity=")!==-1){if((b=parseFloat(b.substring(b.indexOf("alpha(opacity=")+14))/100)||b===0){return b}}else{return 1}}else{return 1}}if(((b=(c.style.opacity||a.getStyle(c,"opacity")))&&(b=parseFloat(b)))||b===0){return parseFloat(b)}else{return 1}},setOpacity:function(c,f){var b=a.IS_OLD_IE;if(!c){return -1}f=Math.max(0,Math.min(1,f));if(f>0.9999||isNaN(f)){return this.removeOpacity(c)}c.cwa$opacity=f;if(!b){c.style.opacity=f}else{if(c.hasIEAlpha){try{c.filters.item("DXImageTransform.Microsoft.Alpha").opacity=Math.round(f*100)}catch(d){c.hasIEAlpha=true;c.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}}else{c.hasIEAlpha=true;c.style.filter+=" progid:DXImageTransform.Microsoft.Alpha(opacity="+Math.round(f*100)+")"}if(c.isIEAlphaDisabled){c.filters.item("DXImageTransform.Microsoft.Alpha").enabled=true;c.isIEAlphaDisabled=false}}return f},removeOpacity:function(c){if(!c){return -1}var b=CW.Anim.IS_OLD_IE;c.cwa$opacity=1;if(!b){c.style.opacity=""}else{if(c.hasIEAlpha){try{c.filters.item("DXImageTransform.Microsoft.Alpha").opacity=100;c.filters.item("DXImageTransform.Microsoft.Alpha").enabled=false;c.isIEAlphaDisabled=true}catch(d){c.style.filter=""}}}return 1},encodeColor:function(e,d,c){if(typeof e==="object"&&typeof e.r==="number"&&typeof e.g==="number"&&typeof e.b==="number"){d=e.g;c=e.b;e=e.r}else{if(typeof e==="object"){d=e[1];c=e[2];e=e[0]}else{if(typeof e=="string"){if(e.charAt(0)=="#"&&e.length===7){return e}e=CW.Anim.decodeColor(e);d=e[1];c=e[2];e=e[0]}}}e=Math.round(Math.max(0,Math.min(255,e))).toString(16);if(e.length==1){e="0"+e}d=Math.round(Math.max(0,Math.min(255,d))).toString(16);if(d.length==1){d="0"+d}c=Math.round(Math.max(0,Math.min(255,c))).toString(16);if(c.length==1){c="0"+c}return("#"+e+d+c).toUpperCase()},decodeColor:function(e){if(a.colors&&a.colors[e]){e=a.colors[e]}var d,h,f,c;if((d=typeof e)=="number"||d=="object"){return undefined}e=e.replace(/\s+/g,"");if(e.charAt(0)=="#"){if(e.length==4){e="#"+e.charAt(1)+e.charAt(1)+e.charAt(2)+e.charAt(2)+e.charAt(3)+e.charAt(3)}h=parseInt(e.substring(1,3),16);f=parseInt(e.substring(3,5),16);c=parseInt(e.substring(5,7),16)}else{var j;if(e.indexOf("rgba(")!=-1){j=5}else{if(e.indexOf("rgb(")!=-1){j=4}else{return undefined}}e=e.substring(j,e.length-1).split(",");h=parseInt(e[0],10);f=parseInt(e[1],10);c=parseInt(e[2],10)}return[h,f,c]},colors:{red:"#ff0000","orange red":"#ff4500",orange:"#ff7f00",yellow:"#ffff00",green:"#00ff00","forest green":"#228b22",cyan:"#00ffff","light sea green":"#20b2aa",blue:"#0000ff","cornflower blue":"#6495ed","medium blue":"#3232cd",purple:"#a020f0","hot pink":"#ff69b4",magenta:"#ff00ff",white:"#ffffff","light gray":"#d3d3d3",gray:"#bebebe","dark gray":"#a9a9a9","dim gray":"#696969",black:"#000000"},initRandom:function(d,c,b){return{isInitRandom:true,lo:d,hi:c,round:b}},perf:function(c){var b;a.perfPop=b=window.open("","CW.Animator","height="+(screen.availHeight-19)+",width=500,top=0,left=0");if(!b){if(window.console&&console.log){console.log("No popup available for performance monitor.")}return}b.document.body.innerHTML='<div style="position:absolute; left:0px; top:0px; width:100%; height:100%; overflow:auto"><div style="position:absolute; left:10px; top:10px; right:10px;"></div></div>';b.document.body.style.background="black";if(!a.perfPop.updater){a.perfPop.updater=a.perfPop.setInterval(function(){(function(){try{var d=this.opener.CW.Anim.status();this.document.body.firstChild.firstChild.innerHTML='<span style="font-family:helvetica,arial,sans-serif; font-size:12px; color:#CCCCCC;"><big>Performance Monitor</big><br>'+CW.Anim.asHTML(d)+"</span>"}catch(f){if(!this.opener||this.opener==this.window){this.close()}}}).call(a.perfPop)},c||250)}window.focus()},status:function(){var b="";b+="\nActive: "+a.isActive;b+="\n";b+="\nTarget FPS: "+a.fps;b+="\nActual FPS: "+a.frameRate;b+="\n";b+="\nFrame Time: "+a.frameTime+" ms";b+="\nCompute Time: "+a.computeTime+" ms";b+="\nTimeout Wait Time: "+a.timeoutWaitTime+" ms";b+="\n";b+="\nSpeed Multiplier: "+a.speedMultiplier;b+="\n";b+="\nExtra Status: ";b+="\n"+a.enumerate(a.extraStatus);b+="\n";b+="\n"+a.tasks.length+" Task"+(a.tasks.length==1?"":"s")+":";b+="\n"+a.tasks.join("\n");return b},enumerate:function(h,g,d,e,b,c){if(!h){return"{falsy}"}function m(p){return p.split("\\").join("\\\\").split("\n").join("\\n").split("'").join("\\'").split('"').join('\\"')}var o,f;if(g===true){g=10}if(g<1){g=false}if(!c){c=0}var k="";if(g){k="    "}var n=h.___originalKeys||h;for(f in n){if(f==="___originalKeys"||(!d&&!n.hasOwnProperty(f))||(e&&!!e[f])){continue}(o||(o=[])).push("    "+(f.match(/^[a-zA-Z_][a-zA-Z0-9_]*$/)?f:'"'+f+'"')+": "+(function(){try{if(typeof h[f]=="string"){return'"'+m(h[f])+'"'}if(typeof h[f]=="number"){return h[f]}if(typeof h[f]=="function"){return h[f].toString().split("\n").join("\n"+k)}return g?a.enumerate(h[f],g-1,d,e,undefined,c+1).split("\n").join("\n"+k):h[f]}catch(p){return p}})())}if(!o){return"{}"}var j=" {\n"+o.join(",\n")+"\n}";if(b){return j.split("\n").join("<br>").split("  ").join("&nbsp;&nbsp;")}else{return j}},_improveSCCompatibility:function(){if(!a._hasSC){return}a._runLoopedTrigger=function(){var b=SC.RunLoop.isRunLoopInProgress();if(!b){SC.RunLoop.begin()}a._inSCLoop=true;var c=a._coreTrigger.apply(this,arguments);a._inSCLoop=false;if(!b){SC.RunLoop.end()}return c};a._coreTrigger=a.trigger;a.trigger=a._runLoopedTrigger},_SCLoopBegan:function(){a._inSCLoop=true;a.trigger=a.Object.prototype.trigger=a._coreTrigger},_SCLoopEnded:function(){a._inSCLoop=false;a.trigger=a.Object.prototype.trigger=a._runLoopedTrigger}}})();CW.Anim.init();CW.Anim._improveSCCompatibility();CW.Anim.Task=CW.Anim.Object.extend({className:"CW.Anim.Task",running:false,speedMultiplier:1,frameCount:0,elapsedTime:0,ticked:false,tickCount:0,start:function(){if(this.running){return this}this.running=true;this.elapsedTime=this.frameCount=this.tickCount=0;this.trigger("start");CW.Anim.handleTask(this);return this},stop:function(){if(!this.running){return this}this.running=false;this.trigger("stop");return this},elapse:function(e,d){if(this.isDestroyed){this.running=false;return this}if(!d&&this.shouldSkipFrame&&this.shouldSkipFrame()){return this}if(this._forcedZeroes){e=0;this._forcedZeroes--}e*=this.speedMultiplier;this.trigger("preframe");this.elapsedTime+=e;if(!this.ticked){this.trigger("pretick");if(this.run instanceof Function){this.run(e)}this.tickCount++;this.trigger("tick")}else{for(var f=this.ticked===true?1000/CW.Anim.fps:this.ticked,a=1+Math.floor(this.elapsedTime/f),c=a-this.tickCount,b=0;b<c;b++){this.trigger("pretick");if(this.run instanceof Function){this.run(f,b<c-1)}if(this.running){this.trigger("tick")}this.tickCount++}}if(this.running){this.trigger("frame");this.trigger("frame"+this.frameCount)}this.trigger("postFrame");this.clearTrigger("postFrame");this.frameCount++;return this},destroy:function(){if(arguments.callee.base){arguments.callee.base.apply(this,arguments)}this.isDestroyed=true;return this}});CW.Anim.Task.initiate=function(){var a=this.create.apply(this,arguments);a.start();return a};CW.Anim.tweens={make:function(d){var b=[];for(var c=1,a=arguments.length;c<a;c++){b.push(arguments[c])}return(function(){var e=b;e.l=e.length;var f=CW.Anim.tweens[d]||CW.Anim.tweens.LINEAR;return function(g){e[e.l]=g;return f.apply(this,e)}})()},LINEAR:function(a){return a},BOUNCE:function(f){var e;f=1-f;for(var d=0,c=1;1;d+=c,c/=2){if(f>=(7-4*d)/11){e=c*c-Math.pow((11-6*d-11*f)/4,2);break}}return 1-e},SINE_IN_OUT:function(a){return 0.5-0.5*Math.cos(Math.PI*a)},multiSineInOut:function(c,b){var d=c%1;c=Math.floor(c);for(var a=0;a<c;a++){b=0.5-0.5*Math.cos(Math.PI*b)}if(d){b=(1-d)*b+(d)*(0.5-0.5*Math.cos(Math.PI*b))}return b},QUADRATIC_IN:function(a){return a*a},QUADRATIC_OUT:function(a){return 1-(a=1-a)*a},WEBKIT_EASE:function(a){return CW.Anim.tweens.cubicBezier(0.25,0.1,0.25,1,a)},WEBKIT_LINEAR:function(a){return a},WEBKIT_EASE_IN:function(a){return CW.Anim.tweens.cubicBezier(0.42,0,1,1,a)},WEBKIT_EASE_OUT:function(a){return CW.Anim.tweens.cubicBezier(0,0,0.58,1,a)},WEBKIT_EASE_IN_OUT:function(a){return CW.Anim.tweens.cubicBezier(0.42,0,0.58,1,a)},cubicBezier:function(c,b,g,f,k){var a=5;var e=3*c,s=3*(g-c)-e,o=1-e-s,d=3*b,q=3*(f-b)-d,j=1-d-q,u=1/(200*a),n,m,h,r,t,p;for(h=k,p=0;p<8;p++){r=((o*h+s)*h+e)*h-k;if(Math.abs(r)<u){return((j*h+q)*h+d)*h}t=(3*o*h+2*s)*h+e;if(Math.abs(t)<0.000001){break}h=h-r/t}n=0;m=1;h=k;if(h<n){return((j*n+q)*n+d)*n}if(h>m){return((j*m+q)*m+d)*m}while(n<m){r=((o*h+s)*h+e)*h;if(Math.abs(r-k)<u){return((j*h+q)*h+d)*h}if(k>r){n=h}else{m=h}h=(m-n)*0.5+n}return((j*h+q)*h+d)*h},linearInterpolation:function(a,d){var g=a._length_||(a._length=a.length),c=d*g/g*(g-1),f=Math.floor(c),b=a[f];rem=c-f;if(rem===0){return b}var e=a[Math.ceil(c)];return b*(1-rem)+e*rem}};CW.Anim.Animation=CW.Animation=CW.Anim.Task.extend({className:"CW.Animation",init:function(){arguments.callee.base.call(this);if(!this.hasOwnProperty("animateOldIE")){this.animateOldIE=CW.Anim.ENABLE_OLD_IE}if(CW.Anim.IS_OLD_IE&&!this.animateOldIE){this.disabled=true}var f,e,c,b,d,a=this._type.prototype.freevars;if(typeof this.freevars==="string"){this.freevars=this.freevars.split(/\s+/)}if(this.freevars&&!this.freevars.length){this.freevars=[this.freevars]}if(this.freevars&&a&&this.freevars===a){d=[];for(e=0;e<(b||(b=this.freevars.length));e++){d.push(this.freevars[e])}this.freevars=d}if(this.freevars){if(this.speed===undefined&&this.duration===undefined&&!this.signal){this.duration=0}}for(e=-1,b=!!this.freevars&&this.freevars.length;e<b;e++){f=e===-1?this:this.freevars[e];if(typeof f==="string"){this[f].key=f;this.freevars[e]=f=this[f]}f=this.makeFreevarFromHash(f);if(f!==this){this.freevars[e]=f;if(f.key){this[f.key]=f}}}},makeFreevarFromHash:function(h){if(h._isFreevar){return h}var c=CW.Animation.defaultFreevar,g,a,d,e,f,b,k,m=h===this?this:{};for(d in h){if(!h.hasOwnProperty(d)){continue}if((e=h[d])&&e.isInitRandom===true){k=e.round;e=Math.random()*(e.hi-e.lo)+e.lo;if(k){e=Math.round(e/k)*k}m[d]=e}else{if(m!==h){m[d]=h[d]}}}for(d in c){if(!m.hasOwnProperty(d)){m[d]=c[d]}}if(m.signal){g=this._returnExtendedFreevar(m,CW.Animation._signalFreevar);g._unsignaledCurrent=g.from}else{if(m.inertia){g=this._returnExtendedFreevar(m,CW.Animation._inertiaFreevar);g._undampedCurrent=g.from;g.inertia!==true||(g.inertia=CW.Animation._inertiaFreevar.prototype.inertia);a=[];for(d=0;d<m.inertia-1;d++){a[d]=g._undampedCurrent}g.inertiaChain=a}else{g=this._returnExtendedFreevar(m,CW.Animation._tweenFreevar);g._untweenedCurrent=m.from;if(typeof g.speed==="number"){g.duration=undefined}}}g._isFreevar=true;g.freevarRun(0);return g},_returnExtendedFreevar:function(b,c){if(b===this){for(var a in c.prototype){if(this[a]===undefined){this[a]=c.prototype[a]}}return this}else{return new c(b)}},addFreevar:function(a){if(!a){return}if(a.key&&this[a.key]){return false}a=this.makeFreevarFromHash(a);if(a.key){this[a.key]=a}(this.freevars||(this.freevars=[])).push(a);return this},removeFreevar:function(b){if(typeof b==="string"){b=this[b]}if(!b||!b._isFreevar){return null}if(!this.freevars||!this.freevars.length){return null}if(b.key){this[b.key]=undefined}for(var a=0;a<this.freevars.length;a++){if(this.freevars[a]===b){this.freevars.splice(a--,1)}}return b},allFreevarsDo:function(b,e){var d,h,c=arguments.callee.args||(arguments.callee.args=[]);c.length=0;for(var g=1,a=arguments.length;g<a;g++){c.push(arguments[g])}this[b].apply(this,c);if(!(d=this.freevars)){return this}for(g=0;h=d[g];g++){h[b].apply(h,c)}return this},forceAll:function(a){this.allFreevarsDo("force",a);return this},resetAll:function(){this.allFreevarsDo("reset");return this},reverseAll:function(a){this.allFreevarsDo("reverse");return this},run:function(g,c){var a=true;var d=1;var f=Infinity;var h;for(var e=-1,b=(!!this.freevars&&this.freevars.length)||0;e<b;e++){h=(this.freevars&&this.freevars[e])||this;if(!h.freevarRun(g)){a=false}if(h.progress<d){d=h.progress}if(h.tweenedProgress<f){f=h.tweenedProgress}}if(this.freevars){this.progress=d;this.tweenedProgress=f}if(!c){this.update()}if(a){this.listen("postFrame",this._finishNaturally)}},start:function(){if(this.running){return this}if(this.disabled){this.allFreevarsDo("zeroOutDuration")}if(CW.Animator._hasSC){var a=SC.RunLoop.isRunLoopInProgress();if(!a){SC.RunLoop.begin()}}var b=arguments.callee.base.apply(this,arguments);if(CW.Anim.isActive){this.update();this.trigger("tick");this.trigger("frame")}if(!a&&CW.Animator._hasSC){SC.RunLoop.end()}return b},finish:function(a,c){if(!this.running){return this}if(!a){this.allFreevarsDo("force");if(!c){this.update();this.trigger("tick");this.trigger("frame")}}var b=this.stop();this.trigger("finish");if(this.repeat>0){this.repeat--;if(this.reverseOnRepeat){this.reverse()}else{this.reset()}this.start()}return b},_finishNaturally:function(){this.finish(true)},update:function(){},toString:function(){var a=arguments.callee.base.apply(this,arguments);a=a.substring(0,a.length-1)+(this.name?(" "+this.name):"")+(this.running?" running":"")+((this.freevars||this.inertia)?"":(" "+Math.round(this.progress*100)+"%"))+"]";return a},destroy:function(){var a=arguments.callee.base.apply(this,arguments);this.update=this.run=this.finish=function(){};return a},recycle:function(){this.tickCount=this.frameCount=this.elapsedTime=this._forcedZeroes=0}});CW.Animation.defaultFreevar={tween:CW.Anim.tweens.WEBKIT_EASE,discreteness:0};CW.Animation._tweenFreevar=(function(){var a=function(b){for(var c in b){if(b.hasOwnProperty(c)){this[c]=b[c]}}};a.prototype={from:0,to:1,duration:1000,importants:undefined,isAlmostFinished:function(b){return Math.abs(this.to-this.current)<b},reverse:function(){var b=this.to;this.to=this.from;this.from=b;this.freevarRun(0);return this},reset:function(){this._untweenedCurrent=this.from;this.freevarRun(0);return this},redirectTo:function(b){this.from=this.current;this.to=b;this._untweenedCurrent=this.from;this.freevarRun(0);return this},zeroOutDuration:function(){!this.duration||(this.duration=0);!this.speed||(this.speed=Infinity);return this},force:function(b){if(typeof b==="number"){this.to=b}this._untweenedCurrent=this.to;this.freevarRun(0);return this},freevarRun:function(j){if(this.duration===0||this.speed===Infinity){this._untweenedCurrent=this.to}var h=this,d=h._untweenedCurrent<h.to,g=h.isFinished=(h._untweenedCurrent===h.to),c=h.importants?(h.importants[h._impSpot||0]||undefined):undefined,b=c!==undefined?h._untweenedCurrent<c:undefined,k,e;if(h.to===h.from){h.current=h._untweenedCurrent=h.to;return h.isFinished=true}if(!g){e=h.speed||1000/h.duration*Math.abs(h.to-h.from);k=Math.abs(e*j/1000);if(d){h._untweenedCurrent+=k}else{h._untweenedCurrent-=k}if((b===true&&h._untweenedCurrent>c)||(b===false&&h._untweenedCurrent<c)){h._untweenedCurrent=c;h._impSpot=(h._impSpot||0)+1}if((h.isFinished=(d&&h._untweenedCurrent>=h.to)||(!d&&h._untweenedCurrent<=h.to))){h._untweenedCurrent=h.to}}if(h.from!==undefined&&h.to!==undefined){h.progress=(h._untweenedCurrent-h.from)/(h.to-h.from);if(h.tween instanceof Function&&h.from!=h.to){if(h.from===0&&h.to===1){h.current=h.tweenedProgress=h.tween.call(this,h._untweenedCurrent)}else{h.current=(h.tweenedProgress=h.tween.call(this,h.progress))*(h.to-h.from)+h.from}}}else{h.current=h._untweenedCurrent}if(h.discreteness&&Math.abs(h.to/h.discreteness)%1<1e-8){h.current=Math.round(h.current/h.discreteness)*h.discreteness}return h.isFinished}};a._freevarPrototype=a;return a})();CW.Animation._inertiaFreevar=(function(){var a=function(b){for(var c in b){if(b.hasOwnProperty(c)){this[c]=b[c]}}};a.prototype={from:0,to:1,speed:1,inertia:3,headStart:0.01,isAlmostFinished:function(b){return Math.abs(this.to-this.current)<b},reverse:function(){var b=this.to;this.to=this.from;this.from=b;return this},reset:function(){var b=this.to;this.force(this.from);this.to=b;return this},redirectTo:function(b){this.from=this.current;this.to=b;return this},zeroOutDuration:function(){this.speed=Infinity;return this},force:function(c){if(typeof c==="number"){this.to=c}this._undampedCurrent=this.current=this.to;for(var d=0,b=this.inertiaChain.length;d<b;d++){this.inertiaChain[d]=this.to}return this},freevarRun:function(e){if(this.speed===Infinity){this.force()}var j,k=this,d,m,g=k.speed,c=k.inertiaChain,h,n,b;for(j=0;j<k.inertia;j++){if(j===0){d=k._undampedCurrent;m=k.to}else{if(j===1){d=c[0];m=k._undampedCurrent}else{d=c[j-1];m=c[j-2]}}if(d===m){continue}h=d<m;n=e/1000*g*Math.abs(m+k.headStart*(2*h-1)-d);if(h){d+=n}else{d-=n}if((b=(h&&d>=m)||(!h&&d<=m))){d=m}if(j===0){k._undampedCurrent=d}else{c[j-1]=d}}k.current=d;if(k.discreteness&&Math.abs(k.to/k.discreteness)%1<1e-8){k.current=Math.round(k.current/k.discreteness)*k.discreteness}k.isFinished=k.to===k.current;k.progress=NaN;return k.isFinished}};a._freevarPrototype=a;return a})();CW.Animation._signalFreevar=(function(){var a=function(b){for(var c in b){if(b.hasOwnProperty(c)){this[c]=b[c]}}};a.prototype={speed:1,from:0,signal:function(b){return 0.5+0.5*Math.sin(b*Math.PI*2)},persistent:true,isAlmostFinished:function(b){return !this.persistent},reverse:function(){this.speed=-this.speed;return this},reset:function(){this._unsignaledCurrent=this.from;return this},redirectTo:function(){return this},force:function(){return this},advance:function(b){this._unsignaledCurrent+=b},zeroOutDuration:function(){return this},freevarRun:function(b){this._unsignaledCurrent+=b/1000*this.speed;this.current=this.signal(this._unsignaledCurrent);if(this.discreteness){this.current=Math.round(this.current/this.discreteness)*this.discreteness}this.isFinished=!this.persistent;this.progress=NaN;return this.isFinished}};a._freevarPrototype=a;return a})();CW.Anim.Fader=CW.Fader=CW.Animation.extend({className:"CW.Fader",update:function(){CW.Anim.setOpacity(this.element,this.current)},init:function(){if(this.from===undefined){this._untweenedCurrent=this.from=CW.Anim.getOpacity(this.element)}arguments.callee.base.apply(this,arguments)},_removeOnFinish:function(){if(!this.REMOVE_ON_FINISH){return}if(this.element.parentNode){this.element.parentNode.removeChild(this.element)}}.listens("finish"),saveSelf:function(){tmp=this.element._cwaFader;if(tmp){tmp.stop()}this.element._cwaFader=this}.listens("start"),killSelf:function(){this.element._cwaFader=undefined}.listens("stop")});CW.Anim.DisplayNoneAtZero={setDisplayNone:function(){if(this.to===0){this.element.style.display="none"}}.listens("finish"),removeDisplayNone:function(){this.element.style.display=""}.listens("start")};CW.Anim.ColorFader=CW.ColorFader=CW.Animation.extend({className:"CW.ColorFader",style:"color",init:function(){this.colorKey="_cwa"+this.style+"color";this.saveKey="_cwa"+this.style+"Fader";var a;if(this.sR===undefined||this.sG===undefined||this.sB===undefined){if((a=CW.Anim.getStyle(this.element,this.style))){a=CW.Anim.decodeColor(a)}else{a=this.element[this.colorKey]||(this.element[this.colorKey]=[0,0,0])}this.sR=a[0];this.sG=a[1];this.sB=a[2]}arguments.callee.base.apply(this,arguments)},update:function(){if(!this.element||!this.style){return}var e=this.current,d=1-e,h,f,a,c=this.element[this.colorKey]||(this.element[this.colorKey]=[]);c[0]=h=this.tR*e+this.sR*d;c[1]=f=this.tG*e+this.sG*d;c[2]=a=this.tB*e+this.sB*d;this.element.style[this.style]=(this.cssBeforeColor||"")+CW.Anim.encodeColor(h,f,a)+(this.cssAfterColor||"")},saveSelf:function(){var a=this.element[this.saveKey];if(a){a.stop()}this.element[this.saveKey]=this}.listens("start"),killSelf:function(){this.element[this.saveKey]=undefined}.listens("stop")});CW.Anim.Mover=CW.Mover=CW.Animation.extend({className:"CW.Mover",getOmittedPositions:function(){var b,a,d,c;if(this.fromX===undefined||this.anchorX===undefined){d="left";b=parseInt(CW.Anim.getStyle(this.element,d),10);if(isNaN(b)){d="right";b=parseInt(CW.Anim.getStyle(this.element,d),10)}if(isNaN(b)){d="left"}this.anchorX!==undefined||(this.anchorX=d);this.fromX!==undefined||(this.fromX=b)}if(this.fromY===undefined||this.anchorY===undefined){c="top";a=parseInt(CW.Anim.getStyle(this.element,c),10);if(isNaN(a)){c="bottom";a=parseInt(CW.Anim.getStyle(this.element,c),10)}if(isNaN(a)){d="top"}this.anchorY!==undefined||(this.anchorY=c);this.fromY!==undefined||(this.fromY=a)}if(isNaN(this.fromX)||isNaN(this.fromY)){this.anchorX="left";this.anchorY="top";this.fromX=this.element.offsetLeft;this.fromY=this.element.offsetTop;this.element.style.position="absolute"}if(this.toX===undefined){this.toX=this.fromX}if(this.toY===undefined){this.toY=this.fromY}}.listens("start"),update:function(){var c=this.element.style,b=this.current,a=1-b;c[this.anchorX]=Math.round(b*this.toX+a*this.fromX)+"px";c[this.anchorY]=Math.round(b*this.toY+a*this.fromY)+"px"}});CW.Animatability={ENABLE_OLD_IE:YES,hasAnimatability:true,mustKeepLayoutSync:YES,isAnimating:NO,isAnimatingInWindow:NO,isAnimatingWithParent:NO,recomputeIsAnimatingBooleans:function(){var a=this.get("isAnimatingInWindow"),e=false,c=this,b=this._animCount>0,d;while((c=c.get("parentView"))){if(c.hasAnimatability&&c.get("isAnimating")){e=true;break}}d=e||b;if(this.isAnimating!==b){this.set("isAnimating",b)}if(this.isAnimatingInWindow!==d){this.set("isAnimatingInWindow",d)}if(this.isAnimatingWithParent!==e){this.set("isAnimatingWithParent",e)}if(d!==a){this._recomputeChildrenIsAnimatingBooleans()}},_recomputeChildrenIsAnimatingBooleans:function(){for(var b=0,c=this.get("childViews"),a;a=c[b];b++){if(a.hasAnimatability){a.recomputeIsAnimatingBooleans()}else{CW.Animatability._recomputeChildrenIsAnimatingBooleans.apply(a)}}},incrementAnimationCount:function(){this._animCount=(this._animCount||0)+1;this.recomputeIsAnimatingBooleans()},decrementAnimationCount:function(){this._animCount=Math.max(this._animCount-1,0);this.recomputeIsAnimatingBooleans()},animateProperty:function(c,a,b){return this.animateProperties.apply(this,arguments)},animateProperties:function(k,g){var y,x,B,r,q,z,m,v,e,h,p,E,s,d,a,t,w,A,n,o,f,C,D,b=SC.A(arguments),c=this._currentlyAnimatingProperties,u=this.get("mustKeepLayoutSync");if((r=typeof k==="string")){(B={})[k]=g;k=B;g=b[2]}if(!k){SC.warn("When using .animateProperties(, either a property name (string)or a hash, keyed by property name, full of destinations (or full freevar optionshashes) must be supplied as the first argument. Aborting the call.");return}k=SC.clone(k);if(g){for((y=r?2:1)&&(l=b.length)&&!(g=undefined);y<l;y++){if(typeof(f=b[y])!=="object"){continue}for(x in f){(g||(g={}))[x]=f[x]}}}g||(g=this.___emptyHash);if(typeof(q=g.duration)==="number"){delete g.duration}if((z=g.tween)){delete g.tween}if((m=g.speed)){delete g.speed}if((v=g.inertia)){delete g.inertia}if((e=g.headStart)){delete g.headStart}s=true;for(y in g){if(!g.hasOwnProperty(y)){continue}a=g[y];t=typeof a;if(t==="object"||t==="function"){s=false}(d||(d=[])).push(y)}g.canReuse=s=s||g.canReuse;if(d){g.extraKeys=d}for(y in k){if(SC.none(h=k[y])){continue}p=(oldAnim=c[y])?((n||(n={}))[y]=oldAnim).removeProperty(y,true):undefined;if(typeof h==="number"){h=k[y]={to:h}}if(h.from===undefined){if(h.isLayoutProperty){if(p){h.from=p.current}else{h.from=(this._previousLayout||this.get("layout"))[y]}if(typeof h.from!=="number"){h.from=this._DEFAULT_LAYOUT_FROMS[y]||0}}else{h.from=this.getPath(y)}}if(typeof q==="number"&&h.duration===undefined&&h.inertia===undefined&&h.speed===undefined){h.duration=q}if(z&&h.tween===undefined&&h.inertia===undefined){h.tween=z}if(m&&h.speed===undefined&&h.duration===undefined&&h.tween===undefined){h.speed=m}if(v&&h.inertia===undefined&&h.tween===undefined){h.inertia=v}if(e&&h.headStart===undefined){h.headStart=e}if(p&&p.inertia&&h.inertia===p.inertia){if(h.speed){p.speed=h.speed}if(h.headStart){p.headStart=h.headStart}p.from=h.from;p.to=h.to;k[y]=h=p}k[y].propertyName=y}A=0;o=0;C=!this.get("animateOldIE")&&SC.browser.msie&&SC.browser.msie<=8;for(y in k){if(!(h=k[y])){continue}if(C){!h.duration||(h.duration=0);!h.speed||(h.speed=Infinity)}if((h.duration||0)>A){A=h.duration}if(!u){this.adjust(h.propertyName,h.to)}if(h.to===h.from){if(u){this.adjust(h.propertyName,h.to)}delete k[y]}else{o++}}if(o===0){if(!s){D=CW.Animation.create({view:this,duration:A||q||0},g).start()}}else{if(s&&(w=this._bestMatchAnimationForProperties(k)||this._animationFromPool())){for(y in k){w.addProperty(k[y])}for(y in g){w[y]=g[y]}D=w.start()}else{E={freevars:[],properties:[]};for(y in k){E.freevars.push(y);E.properties.push(y)}E.view=this;w=CW.MultiPropertyAnimation.create(E,k,g);for(y in k){c[y]=w}D=w.start()}}if(n){for(y in n){if(!n.hasOwnProperty(y)){continue}pillagee=n[y];if(pillagee.__checked__){continue}pillagee.__checked__=true;pillagee.stopIfNoProperties()}for(y in n){if(!n.hasOwnProperty(y)){continue}n[y].__checked__=false}}return D},_bestMatchAnimationForProperties:function(d){var c,b,a,h,e,f,g=this._currentlyAnimatingProperties;for(c in g){if(!(h=g[c])||h.___matchCheck){continue}h.___matchCheck=true;a=h.properties.length;e=0;for(b=0;b<a;b++){e+=(d[h.properties[b]])?2:1}h.___matchCount=e}e=0;for(c in g){if(!(h=g[c])||!h.matchCheck){continue}h.___matchCheck=undefined;if(h.___matchCount>e){e=h.___matchCount;f=h}h.___matchCount=undefined}return f||this._animationFromPool()},_propertyAnimPool:null,_addAnimationToPool:function(d){if(!d){return}var c=this._propertyAnimPool;for(var b=0,a=c.length;b<a;b++){if(c[b]===d){return}}c.push(d)},_animationFromPool:function(){var b=this._propertyAnimPool,a=b.length;ret=b[a-1];if(ret){b.length=a-1}return ret},animate:function(g,a){var d,b,e,h,c,k,f=SC.A(arguments);if((c=typeof g==="string")){(d={})[g]=a;g=d;a=f[2]}if(!g){SC.warn("When using .animate(, either a property name (string)or a hash, keyed by property name, full of destinations (or full freevar optionshashes) must be supplied as the first argument. Aborting the call.");return}g=SC.clone(g);if(a){for((e=c?2:1)&&(l=f.length)&&!(a=undefined);e<l;e++){if(typeof(k=f[e])!=="object"){continue}for(b in k){(a||(a={}))[b]=k[b]}}}if(typeof(d=g.duration)==="number"){(a||(a={})).duration=d;delete g.duration}if((d=g.tween)){(a||(a={})).tween=d;delete g.tween}if((d=g.speed)){(a||(a={})).speed=d;delete g.speed}if((d=g.inertia)){(a||(a={})).inertia=d;delete g.inertia}if((d=g.headStart)){(a||(a={})).headStart=d;delete g.headStart}a||(a=this.___emptyHash);for(e in g){h=g[e];if(typeof h==="number"){h=g[e]={to:h}}h.isLayoutProperty=true}return this.animateProperties(g,a)},adjust:function(a){return SC.View.prototype.adjust.apply(this,arguments)},stopAnimation:function(){this._forSaidPropertyAnimationsDo("removeProperty",arguments)},finishAnimation:function(){this._forSaidPropertyAnimationsDo("finishProperty",arguments)},updateToAnimation:function(){this._forSaidPropertyAnimationsDo("updateToProperty",arguments)},_forSaidPropertyAnimationsDo:function(b,c){var g=this._currentlyAnimatingProperties;if(!b||!g){return}var f=this.___keysForDoAll||(this.___keysForDoAll=[]),e=c[0],d,a,h;f.length=0;if(!e){e=g}if(e instanceof Array){a=e.length;for(d=0;d<a;d++){f[d]=e[d]}}else{if(typeof e==="object"){for(d in e){if(e.hasOwnProperty(d)&&e[d]!==undefined){f.push(d)}}}else{if(typeof e==="string"){a=c.length;for(d=0;d<a;d++){f[d]=c[d]}}}}a=f.length;for(d=0;d<a;d++){anim=g[h=f[d]];if(!anim){continue}anim[b](h)}},_canAvoidAdjust:function(){if(this.get("mustKeepLayoutSync")){return false}return true},_quickAdjust:function(b,a){if(!this._isQuickAdjusting){return this.adjust.apply(this,arguments)}},_isQuickAdjusting:false,_quickAdjustment:null,_beginQuickAdjustment:function(){this._isQuickAdjusting=true;var c=this._quickAdjustment||(this._quickAdjustment={}),b=this._previousLayout||this.get("layout");for(var a in c){if(!b.hasOwnProperty(a)){delete c[a]}}for(a in b){c[a]=b[a]}},_commitQuickAdjustment:function(){this._isQuickAdjusting=false},_renderQuickAdjustment:function(){},_currentlyAnimatingProperties:null,___emptyHash:{},initMixin:function(){this._currentlyAnimatingProperties={};this._propertyAnimPool=[];if(!this.hasOwnProperty("animateOldIE")){this.set("animateOldIE",CW.Animatability.ENABLE_OLD_IE)}},_DEFAULT_LAYOUT_FROMS:{opacity:1},discreteForOutsideUnitInterval:{left:YES,top:YES,width:YES,height:YES,right:YES,bottom:YES,centerX:YES,centerY:YES}};CW.MultiPropertyAnimation=CW.Animation.extend({view:null,properties:null,ticked:SC.platform.touch?5:0,stopIfNoProperties:function(){if(this.properties.length===0){this.stop()}},finishProperty:function(a,b){var c=this.freevarForProperty(a);if(!c){return}c.force();if(!b){this.update()}this.removeProperty(a)},removeProperty:function(c,a){for(var d=0,e;e=this.properties[d];d++){if(e===c){this.properties.splice(d,1);d--}}this.view._currentlyAnimatingProperties[c]=undefined;if(!a){this.stopIfNoProperties()}var b=this.removeFreevar(this.freevarForProperty(c));return b},addProperty:function(b){var a;if(!b||!(a=b.propertyName)){return}b.key=b.propertyName;for(var c=0,d;d=this.properties[c];c++){if(d===a){this.removeProperty(a,true);c--}}this.properties.push(a);this.view._currentlyAnimatingProperties[a]=this;this.addFreevar(b)},updateToProperty:function(b){var d=CW.Animatability.discreteForOutsideUnitInterval,c=b,a=this.view;a._updatingAnimatedProperty=true;if(typeof c==="string"){c=this.freevarForProperty(c)}b=c.propertyName;if(c.isLayoutProperty){c.discreteness=(d[b]&&(c.to>1||c.from>1||c.to<0||c.from<0))?1:0.000001;if(a.get("mustKeepLayoutSync")){a.adjust(b,c.current)}else{a.$().css(b,c.current)}}else{if(this.view[b]!==c.current){a.set(b,c.current)}}a._updatingAnimatedProperty=false},freevarForProperty:function(a){return this[a]},update:function(){for(var b=0,c,a;c=this.freevars[b];b++){this.updateToProperty(c)}},releaseProperties:function(){for(var a=0,b;b=this.properties[a];a++){this.view._currentlyAnimatingProperties[b]=undefined}}.listens("stop"),poolAnimation:function(){if(!this.canReuse){return}while(this.properties.length){this.removeProperty(this.properties[0],true)}this.properties.length=0;if(this.extraKeys){for(var a in this.extraKeys){delete this[a]}delete this.extraKeys}this.recycle();this.view._addAnimationToPool(this)}.listens("stop"),markView:function(){this.view.incrementAnimationCount()}.listens("start"),unmarkView:function(){this.view.decrementAnimationCount()}.listens("stop")});CW.PaneAnimationSupport={hasPaneAnimationSupport:YES,hiddenState:{opacity:0},showingState:{opacity:1},duration:350,showDuration:null,hideDuration:null,tween:CW.Anim.tweens.WEBKIT_EASE,showTween:null,hideTween:null,firstShowDelay:0,hideDelay:0,append:function(a){if(!this.hasSpritePreloadEnforcement||this._hasShownFromDidCreateLayer){this.animateShow()}a()}.enhance(),animateShow:function(){if(SC.browser.isIE8OrLower){this.paneWillShow();this.paneDidShow();return}if(this._hideAnim){this._hideAnim.finish()}if(this._showAnim){this._showAnim.finish()}if(this._showTimer){this._showTimer.invalidate();this._showTimer=null}if(this._hideTimer){this._hideTimer.invalidate();this._hideTimer=null}this._animatingShow=YES;this.paneWillShow();this.invokeLast(function(){this._animatingShow=YES;this.adjust(this.get("hiddenState"));var b=this.get("showDuration"),a=[this.get("showingState"),{duration:typeof b==="number"?b:this.get("duration"),tween:this.get("showTween")||this.get("tween"),notifyFrame:function(){this.view.didFrame(this);this.view.showDidFrame(this)}.listens("frame"),completed:function(){this.view._showAnim=null;this.view.paneDidShow(this)}.listens("finish")}];if(!this._hasAppendedOnce&&this.get("firstShowDelay")!==0){this._showTimer=this.invokeLater(function(){this._showTimer=null;this._showAnim=this.animate.apply(this,a)},this.get("firstShowDelay"));this._hasAppendedOnce=YES}else{this._showTimer=this.invokeLast(function(){this._showTimer=null;this._showAnim=this.animate.apply(this,a)})}this._animatingShow=NO});this._animatingShow=NO},remove:function(b){if(SC.browser.isIE8OrLower){this.paneWillHide();b();this.paneDidHide();return}var a;if(this.get("isPanelPane")&&this._isShowingModal){this._isShowingModal=NO;if((a=this._modalPane())){a.paneDidRemove(this)}}if(this._hideAnim){this._hideAnim.finish()}if(this._showAnim){this._showAnim.finish()}if(this._showTimer){this._showTimer.invalidate();this._showTimer=null}if(this._hideTimer){this._hideTimer.invalidate();this._hideTimer=null}this._animatingHide=YES;this.paneWillHide();this.invokeLast(function(){this._animatingHide=YES;var d=this.get("hideDuration"),c=[this.get("hiddenState"),{duration:typeof d==="number"?d:this.get("duration"),tween:this.get("hideTween")||this.get("tween"),notifyFrame:function(){this.view.didFrame(this);this.view.hideDidFrame(this)}.listens("frame"),enableClickThrough:function(){this.view.$().css("pointerEvents","none")}.listens("start"),removeClickThrough:function(){this.view.$().css("pointerEvents","")}.listens("stop"),completed:function(){this.view._hideAnim=null;b();this.view.paneDidHide(this)}.listens("finish")}];if(this.get("hideDelay")!==0){this._hideTimer=this.invokeLater(function(){this._hideTimer=null;this._hideAnim=this.animate.apply(this,c)},this.get("hideDelay"))}else{this._hideTimer=this.invokeLast(function(){this._hideTimer=null;this._hideAnim=this.animate.apply(this,c)})}this._animatingHide=NO});this._animatingHide=NO}.enhance(),didFrame:function(a){},showDidFrame:function(a){},hideDidFrame:function(a){},paneDidHide:function(a){},paneWillHide:function(){},paneDidShow:function(a){},paneWillShow:function(){}};CW.PaneFadingSupport=SC.clone(CW.PaneAnimationSupport);SC.mixin(CW.PaneFadingSupport,{paneFadeInDuration:100,paneFadeOutDuration:350,showDuration:function(){return this.get("paneFadeInDuration")}.property("paneFadeInDuration").cacheable(),hideDuration:function(){return this.get("paneFadeOutDuration")}.property("paneFadeOutDuration").cacheable(),showingState:function(){return{opacity:this.get("paneOpacity")||1}}.property("paneOpacity").cacheable(),paneDidHide:function(){return this.paneDidFadeOut()},paneDidFadeOut:function(){}});
/*!
 * Raphael 1.5.2 - JavaScript Vector Library
 *
 * Copyright (c) 2010 Dmitry Baranovskiy (http://raphaeljs.com)
 * Licensed under the MIT (http://raphaeljs.com/license.html) license.
 */
(function(){function aJ(){if(aJ.is(arguments[0],a8)){var b=arguments[0],d=G[bC](aJ,b.splice(0,3+aJ.is(b[0],aG))),R=d.set();for(var E=0,S=b[t];E<S;E++){var e=b[E]||{};bq[ah](e.type)&&R[k](d[e.type]().attr(e))}return R}return G[bC](aJ,arguments)}aJ.version="1.5.2";var a=/[, ]+/,bq={circle:1,rect:1,path:1,ellipse:1,text:1,image:1},bo=/\{(\d+)\}/g,bF="prototype",ah="hasOwnProperty",ab=document,aR=window,s={was:Object[bF][ah].call(aR,"Raphael"),is:aR.Raphael},bA=function(){this.customAttributes={}},a0,bl="appendChild",bC="apply",bx="concat",X="createTouch" in ab,aQ="",aI=" ",bD=String,J="split",T="click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend orientationchange touchcancel gesturestart gesturechange gestureend"[J](aI),br={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},aX="join",t="length",bH=bD[bF].toLowerCase,ap=Math,n=ap.max,bj=ap.min,ar=ap.abs,bm=ap.pow,aN=ap.PI,aG="number",ag="string",a8="array",a1="toString",a5="fill",aU=Object[bF][a1],bu={},k="push",h=/^url\(['"]?([^\)]+?)['"]?\)$/i,H=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,aq={"NaN":1,"Infinity":1,"-Infinity":1},c=/^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/,ae=ap.round,F="setAttribute",ak=parseFloat,U=parseInt,a6=" progid:DXImageTransform.Microsoft",bp=bD[bF].toUpperCase,r={blur:0,"clip-rect":"0 0 1e9 1e9",cursor:"default",cx:0,cy:0,fill:"#fff","fill-opacity":1,font:'10px "Arial"',"font-family":'"Arial"',"font-size":"10","font-style":"normal","font-weight":400,gradient:0,height:0,href:"http://raphaeljs.com/",opacity:1,path:"M0,0",r:0,rotation:0,rx:0,ry:0,scale:"1 1",src:"",stroke:"#000","stroke-dasharray":"","stroke-linecap":"butt","stroke-linejoin":"butt","stroke-miterlimit":0,"stroke-opacity":1,"stroke-width":1,target:"_blank","text-anchor":"middle",title:"Raphael",translation:"0 0",width:0,x:0,y:0},an={along:"along",blur:aG,"clip-rect":"csv",cx:aG,cy:aG,fill:"colour","fill-opacity":aG,"font-size":aG,height:aG,opacity:aG,path:"path",r:aG,rotation:"csv",rx:aG,ry:aG,scale:"csv",stroke:"colour","stroke-opacity":aG,"stroke-width":aG,translation:"csv",width:aG,x:aG,y:aG},bt="replace",bg=/^(from|to|\d+%?)$/,be=/\s*,\s*/,o={hs:1,rg:1},bb=/,?([achlmqrstvxz]),?/gi,aS=/([achlmqstvz])[\s,]*((-?\d*\.?\d*(?:e[-+]?\d+)?\s*,?\s*)+)/ig,aH=/(-?\d*\.?\d*(?:e[-+]?\d+)?)\s*,?\s*/ig,aP=/^r(?:\(([^,]+?)\s*,\s*([^\)]+?)\))?/,bn=function(e,d){return e.key-d.key};aJ.type=(aR.SVGAngle||ab.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1")?"SVG":"VML");if(aJ.type=="VML"){var ay=ab.createElement("div"),aC;ay.innerHTML='<v:shape adj="1"/>';aC=ay.firstChild;aC.style.behavior="url(#default#VML)";if(!(aC&&typeof aC.adj=="object")){return aJ.type=null}ay=null}aJ.svg=!(aJ.vml=aJ.type=="VML");bA[bF]=aJ[bF];a0=bA[bF];aJ._id=0;aJ._oid=0;aJ.fn={};aJ.is=function(d,b){b=bH.call(b);if(b=="finite"){return !aq[ah](+d)}return(b=="null"&&d===null)||(b==typeof d)||(b=="object"&&d===Object(d))||(b=="array"&&Array.isArray&&Array.isArray(d))||aU.call(d).slice(8,-1).toLowerCase()==b};aJ.angle=function(R,bI,e,S,d,E){if(d==null){var b=R-e,bJ=bI-S;if(!b&&!bJ){return 0}return((b<0)*180+ap.atan(-bJ/-b)*180/aN+360)%360}else{return aJ.angle(R,bI,d,E)-aJ.angle(e,S,d,E)}};aJ.rad=function(b){return b%360*aN/180};aJ.deg=function(b){return b*180/aN%360};aJ.snapTo=function(d,E,b){b=aJ.is(b,"finite")?b:10;if(aJ.is(d,a8)){var e=d.length;while(e--){if(ar(d[e]-E)<=b){return d[e]}}}else{d=+d;var R=E%d;if(R<b){return E-R}if(R>d-b){return E-R+d}}return E};function j(){var d=[],b=0;for(;b<32;b++){d[b]=(~~(ap.random()*16))[a1](16)}d[12]=4;d[16]=((d[16]&3)|8)[a1](16);return"r-"+d[aX]("")}aJ.setWindow=function(b){aR=b;ab=aR.document};var ba=function(E){if(aJ.vml){var b=/^\s+|\s+$/g;var S;try{var bI=new ActiveXObject("htmlfile");bI.write("<body>");bI.close();S=bI.body}catch(bJ){S=createPopup().document.body}var d=S.createTextRange();ba=aB(function(bK){try{S.style.color=bD(bK)[bt](b,aQ);var bL=d.queryCommandValue("ForeColor");bL=((bL&255)<<16)|(bL&65280)|((bL&16711680)>>>16);return"#"+("000000"+bL[a1](16)).slice(-6)}catch(bM){return"none"}})}else{var R=ab.createElement("i");R.title="Rapha\xebl Colour Picker";R.style.display="none";ab.body[bl](R);ba=aB(function(e){R.style.color=e;return ab.defaultView.getComputedStyle(R,aQ).getPropertyValue("color")})}return ba(E)},aD=function(){return"hsb("+[this.h,this.s,this.b]+")"},N=function(){return"hsl("+[this.h,this.s,this.l]+")"},C=function(){return this.hex};aJ.hsb2rgb=function(E,e,d,R){if(aJ.is(E,"object")&&"h" in E&&"s" in E&&"b" in E){d=E.b;e=E.s;E=E.h;R=E.o}return aJ.hsl2rgb(E,e,d/2,R)};aJ.hsl2rgb=function(bI,bP,E,e){if(aJ.is(bI,"object")&&"h" in bI&&"s" in bI&&"l" in bI){E=bI.l;bP=bI.s;bI=bI.h}if(bI>1||bP>1||E>1){bI/=360;bP/=100;E/=100}var bN={},bK=["r","g","b"],bJ,bM,S,d,bL,bO;if(!bP){bN={r:E,g:E,b:E}}else{if(E<0.5){bJ=E*(1+bP)}else{bJ=E+bP-E*bP}bM=2*E-bJ;for(var R=0;R<3;R++){S=bI+1/3*-(R-1);S<0&&S++;S>1&&S--;if(S*6<1){bN[bK[R]]=bM+(bJ-bM)*6*S}else{if(S*2<1){bN[bK[R]]=bJ}else{if(S*3<2){bN[bK[R]]=bM+(bJ-bM)*(2/3-S)*6}else{bN[bK[R]]=bM}}}}}bN.r*=255;bN.g*=255;bN.b*=255;bN.hex="#"+(16777216|bN.b|(bN.g<<8)|(bN.r<<16)).toString(16).slice(1);aJ.is(e,"finite")&&(bN.opacity=e);bN.toString=C;return bN};aJ.rgb2hsb=function(b,d,bJ){if(d==null&&aJ.is(b,"object")&&"r" in b&&"g" in b&&"b" in b){bJ=b.b;d=b.g;b=b.r}if(d==null&&aJ.is(b,ag)){var bL=aJ.getRGB(b);b=bL.r;d=bL.g;bJ=bL.b}if(b>1||d>1||bJ>1){b/=255;d/=255;bJ/=255}var bI=n(b,d,bJ),e=bj(b,d,bJ),R,E,S=bI;if(e==bI){return{h:0,s:0,b:bI,toString:aD}}else{var bK=(bI-e);E=bK/bI;if(b==bI){R=(d-bJ)/bK}else{if(d==bI){R=2+((bJ-b)/bK)}else{R=4+((b-d)/bK)}}R/=6;R<0&&R++;R>1&&R--}return{h:R,s:E,b:S,toString:aD}};aJ.rgb2hsl=function(d,e,bI){if(e==null&&aJ.is(d,"object")&&"r" in d&&"g" in d&&"b" in d){bI=d.b;e=d.g;d=d.r}if(e==null&&aJ.is(d,ag)){var bM=aJ.getRGB(d);d=bM.r;e=bM.g;bI=bM.b}if(d>1||e>1||bI>1){d/=255;e/=255;bI/=255}var S=n(d,e,bI),E=bj(d,e,bI),R,bL,b=(S+E)/2,bK;if(E==S){bK={h:0,s:0,l:b}}else{var bJ=S-E;bL=b<0.5?bJ/(S+E):bJ/(2-S-E);if(d==S){R=(e-bI)/bJ}else{if(e==S){R=2+(bI-d)/bJ}else{R=4+(d-e)/bJ}}R/=6;R<0&&R++;R>1&&R--;bK={h:R,s:bL,l:b}}bK.toString=N;return bK};aJ._path2string=function(){return this.join(",")[bt](bb,"$1")};function aB(E,d,b){function e(){var R=Array[bF].slice.call(arguments,0),bI=R[aX]("\u25ba"),S=e.cache=e.cache||{},bJ=e.count=e.count||[];if(S[ah](bI)){return b?b(S[bI]):S[bI]}bJ[t]>=1000&&delete S[bJ.shift()];bJ[k](bI);S[bI]=E[bC](d,R);return b?b(S[bI]):S[bI]}return e}aJ.getRGB=aB(function(b){if(!b||!!((b=bD(b)).indexOf("-")+1)){return{r:-1,g:-1,b:-1,hex:"none",error:1}}if(b=="none"){return{r:-1,g:-1,b:-1,hex:"none"}}!(o[ah](b.toLowerCase().substring(0,2))||b.charAt()=="#")&&(b=ba(b));var R,d,e,bI,E,bK,bJ,S=b.match(H);if(S){if(S[2]){bI=U(S[2].substring(5),16);e=U(S[2].substring(3,5),16);d=U(S[2].substring(1,3),16)}if(S[3]){bI=U((bK=S[3].charAt(3))+bK,16);e=U((bK=S[3].charAt(2))+bK,16);d=U((bK=S[3].charAt(1))+bK,16)}if(S[4]){bJ=S[4][J](be);d=ak(bJ[0]);bJ[0].slice(-1)=="%"&&(d*=2.55);e=ak(bJ[1]);bJ[1].slice(-1)=="%"&&(e*=2.55);bI=ak(bJ[2]);bJ[2].slice(-1)=="%"&&(bI*=2.55);S[1].toLowerCase().slice(0,4)=="rgba"&&(E=ak(bJ[3]));bJ[3]&&bJ[3].slice(-1)=="%"&&(E/=100)}if(S[5]){bJ=S[5][J](be);d=ak(bJ[0]);bJ[0].slice(-1)=="%"&&(d*=2.55);e=ak(bJ[1]);bJ[1].slice(-1)=="%"&&(e*=2.55);bI=ak(bJ[2]);bJ[2].slice(-1)=="%"&&(bI*=2.55);(bJ[0].slice(-3)=="deg"||bJ[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsba"&&(E=ak(bJ[3]));bJ[3]&&bJ[3].slice(-1)=="%"&&(E/=100);return aJ.hsb2rgb(d,e,bI,E)}if(S[6]){bJ=S[6][J](be);d=ak(bJ[0]);bJ[0].slice(-1)=="%"&&(d*=2.55);e=ak(bJ[1]);bJ[1].slice(-1)=="%"&&(e*=2.55);bI=ak(bJ[2]);bJ[2].slice(-1)=="%"&&(bI*=2.55);(bJ[0].slice(-3)=="deg"||bJ[0].slice(-1)=="\xb0")&&(d/=360);S[1].toLowerCase().slice(0,4)=="hsla"&&(E=ak(bJ[3]));bJ[3]&&bJ[3].slice(-1)=="%"&&(E/=100);return aJ.hsl2rgb(d,e,bI,E)}S={r:d,g:e,b:bI};S.hex="#"+(16777216|bI|(e<<8)|(d<<16)).toString(16).slice(1);aJ.is(E,"finite")&&(S.opacity=E);return S}return{r:-1,g:-1,b:-1,hex:"none",error:1}},aJ);aJ.getColor=function(d){var e=this.getColor.start=this.getColor.start||{h:0,s:1,b:d||0.75},b=this.hsb2rgb(e.h,e.s,e.b);e.h+=0.075;if(e.h>1){e.h=0;e.s-=0.2;e.s<=0&&(this.getColor.start={h:0,s:1,b:e.b})}return b.hex};aJ.getColor.reset=function(){delete this.start};aJ.parsePathString=aB(function(b){if(!b){return null}var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},d=[];if(aJ.is(b,a8)&&aJ.is(b[0],a8)){d=aT(b)}if(!d[t]){bD(b)[bt](aS,function(R,E,bJ){var bI=[],S=bH.call(E);bJ[bt](aH,function(bL,bK){bK&&bI[k](+bK)});if(S=="m"&&bI[t]>2){d[k]([E][bx](bI.splice(0,2)));S="l";E=E=="m"?"l":"L"}while(bI[t]>=e[S]){d[k]([E][bx](bI.splice(0,e[S])));if(!e[S]){break}}})}d[a1]=aJ._path2string;return d});aJ.findDotsAtSegment=function(d,b,bW,bU,bI,R,bK,bJ,bQ){var bO=1-bQ,bN=bm(bO,3)*d+bm(bO,2)*3*bQ*bW+bO*3*bQ*bQ*bI+bm(bQ,3)*bK,bL=bm(bO,3)*b+bm(bO,2)*3*bQ*bU+bO*3*bQ*bQ*R+bm(bQ,3)*bJ,bS=d+2*bQ*(bW-d)+bQ*bQ*(bI-2*bW+d),bR=b+2*bQ*(bU-b)+bQ*bQ*(R-2*bU+b),bV=bW+2*bQ*(bI-bW)+bQ*bQ*(bK-2*bI+bW),bT=bU+2*bQ*(R-bU)+bQ*bQ*(bJ-2*R+bU),bP=(1-bQ)*d+bQ*bW,bM=(1-bQ)*b+bQ*bU,E=(1-bQ)*bI+bQ*bK,e=(1-bQ)*R+bQ*bJ,S=(90-ap.atan((bS-bV)/(bR-bT))*180/aN);(bS>bV||bR<bT)&&(S+=180);return{x:bN,y:bL,m:{x:bS,y:bR},n:{x:bV,y:bT},start:{x:bP,y:bM},end:{x:E,y:e},alpha:S}};var aj=aB(function(bM){if(!bM){return{x:0,y:0,width:0,height:0}}bM=W(bM);var bJ=0,bI=0,E=[],d=[],e;for(var R=0,bL=bM[t];R<bL;R++){e=bM[R];if(e[0]=="M"){bJ=e[1];bI=e[2];E[k](bJ);d[k](bI)}else{var S=a7(bJ,bI,e[1],e[2],e[3],e[4],e[5],e[6]);E=E[bx](S.min.x,S.max.x);d=d[bx](S.min.y,S.max.y);bJ=e[5];bI=e[6]}}var b=bj[bC](0,E),bK=bj[bC](0,d);return{x:b,y:bK,width:n[bC](0,E)-b,height:n[bC](0,d)-bK}}),aT=function(S){var e=[];if(!aJ.is(S,a8)||!aJ.is(S&&S[0],a8)){S=aJ.parsePathString(S)}for(var d=0,E=S[t];d<E;d++){e[d]=[];for(var b=0,R=S[d][t];b<R;b++){e[d][b]=S[d][b]}}e[a1]=aJ._path2string;return e},av=aB(function(E){if(!aJ.is(E,a8)||!aJ.is(E&&E[0],a8)){E=aJ.parsePathString(E)}var bL=[],bN=0,bM=0,bQ=0,bP=0,e=0;if(E[0][0]=="M"){bN=E[0][1];bM=E[0][2];bQ=bN;bP=bM;e++;bL[k](["M",bN,bM])}for(var bI=e,bR=E[t];bI<bR;bI++){var b=bL[bI]=[],bO=E[bI];if(bO[0]!=bH.call(bO[0])){b[0]=bH.call(bO[0]);switch(b[0]){case"a":b[1]=bO[1];b[2]=bO[2];b[3]=bO[3];b[4]=bO[4];b[5]=bO[5];b[6]=+(bO[6]-bN).toFixed(3);b[7]=+(bO[7]-bM).toFixed(3);break;case"v":b[1]=+(bO[1]-bM).toFixed(3);break;case"m":bQ=bO[1];bP=bO[2];default:for(var S=1,bJ=bO[t];S<bJ;S++){b[S]=+(bO[S]-((S%2)?bN:bM)).toFixed(3)}}}else{b=bL[bI]=[];if(bO[0]=="m"){bQ=bO[1]+bN;bP=bO[2]+bM}for(var R=0,d=bO[t];R<d;R++){bL[bI][R]=bO[R]}}var bK=bL[bI][t];switch(bL[bI][0]){case"z":bN=bQ;bM=bP;break;case"h":bN+=+bL[bI][bK-1];break;case"v":bM+=+bL[bI][bK-1];break;default:bN+=+bL[bI][bK-2];bM+=+bL[bI][bK-1]}}bL[a1]=aJ._path2string;return bL},0,aT),z=aB(function(E){if(!aJ.is(E,a8)||!aJ.is(E&&E[0],a8)){E=aJ.parsePathString(E)}var bK=[],bM=0,bL=0,bP=0,bO=0,e=0;if(E[0][0]=="M"){bM=+E[0][1];bL=+E[0][2];bP=bM;bO=bL;e++;bK[0]=["M",bM,bL]}for(var bI=e,bQ=E[t];bI<bQ;bI++){var b=bK[bI]=[],bN=E[bI];if(bN[0]!=bp.call(bN[0])){b[0]=bp.call(bN[0]);switch(b[0]){case"A":b[1]=bN[1];b[2]=bN[2];b[3]=bN[3];b[4]=bN[4];b[5]=bN[5];b[6]=+(bN[6]+bM);b[7]=+(bN[7]+bL);break;case"V":b[1]=+bN[1]+bL;break;case"H":b[1]=+bN[1]+bM;break;case"M":bP=+bN[1]+bM;bO=+bN[2]+bL;default:for(var S=1,bJ=bN[t];S<bJ;S++){b[S]=+bN[S]+((S%2)?bM:bL)}}}else{for(var R=0,d=bN[t];R<d;R++){bK[bI][R]=bN[R]}}switch(b[0]){case"Z":bM=bP;bL=bO;break;case"H":bM=b[1];break;case"V":bL=b[1];break;case"M":bP=bK[bI][bK[bI][t]-2];bO=bK[bI][bK[bI][t]-1];default:bM=bK[bI][bK[bI][t]-2];bL=bK[bI][bK[bI][t]-1]}}bK[a1]=aJ._path2string;return bK},null,aT),bE=function(d,E,b,e){return[d,E,b,e,b,e]},bk=function(d,E,bI,R,b,e){var S=1/3,bJ=2/3;return[S*d+bJ*bI,S*E+bJ*R,S*b+bJ*bI,S*e+bJ*R,b,e]},aa=function(bP,ck,bY,bW,bQ,bK,E,bO,cj,bR){var bV=aN*120/180,b=aN/180*(+bQ||0),b2=[],bZ,cg=aB(function(cm,cp,cl){var co=cm*ap.cos(cl)-cp*ap.sin(cl),cn=cm*ap.sin(cl)+cp*ap.cos(cl);return{x:co,y:cn}});if(!bR){bZ=cg(bP,ck,-b);bP=bZ.x;ck=bZ.y;bZ=cg(bO,cj,-b);bO=bZ.x;cj=bZ.y;var d=ap.cos(aN/180*bQ),bM=ap.sin(aN/180*bQ),b4=(bP-bO)/2,b3=(ck-cj)/2;var ce=(b4*b4)/(bY*bY)+(b3*b3)/(bW*bW);if(ce>1){ce=ap.sqrt(ce);bY=ce*bY;bW=ce*bW}var e=bY*bY,b7=bW*bW,b9=(bK==E?-1:1)*ap.sqrt(ar((e*b7-e*b3*b3-b7*b4*b4)/(e*b3*b3+b7*b4*b4))),bT=b9*bY*b3/bW+(bP+bO)/2,bS=b9*-bW*b4/bY+(ck+cj)/2,bJ=ap.asin(((ck-bS)/bW).toFixed(9)),bI=ap.asin(((cj-bS)/bW).toFixed(9));bJ=bP<bT?aN-bJ:bJ;bI=bO<bT?aN-bI:bI;bJ<0&&(bJ=aN*2+bJ);bI<0&&(bI=aN*2+bI);if(E&&bJ>bI){bJ=bJ-aN*2}if(!E&&bI>bJ){bI=bI-aN*2}}else{bJ=bR[0];bI=bR[1];bT=bR[2];bS=bR[3]}var bN=bI-bJ;if(ar(bN)>bV){var bU=bI,bX=bO,bL=cj;bI=bJ+bV*(E&&bI>bJ?1:-1);bO=bT+bY*ap.cos(bI);cj=bS+bW*ap.sin(bI);b2=aa(bO,cj,bY,bW,bQ,0,E,bX,bL,[bI,bU,bT,bS])}bN=bI-bJ;var S=ap.cos(bJ),ci=ap.sin(bJ),R=ap.cos(bI),ch=ap.sin(bI),b5=ap.tan(bN/4),b8=4/3*bY*b5,b6=4/3*bW*b5,cf=[bP,ck],cd=[bP+b8*ci,ck-b6*S],cc=[bO+b8*ch,cj-b6*R],ca=[bO,cj];cd[0]=2*cf[0]-cd[0];cd[1]=2*cf[1]-cd[1];if(bR){return[cd,cc,ca][bx](b2)}else{b2=[cd,cc,ca][bx](b2)[aX]()[J](",");var b0=[];for(var cb=0,b1=b2[t];cb<b1;cb++){b0[cb]=cb%2?cg(b2[cb-1],b2[cb],b).y:cg(b2[cb],b2[cb+1],b).x}return b0}},ad=function(d,b,E,e,bK,bJ,bI,S,bL){var R=1-bL;return{x:bm(R,3)*d+bm(R,2)*3*bL*E+R*3*bL*bL*bK+bm(bL,3)*bI,y:bm(R,3)*b+bm(R,2)*3*bL*e+R*3*bL*bL*bJ+bm(bL,3)*S}},a7=aB(function(E,d,S,R,bS,bR,bO,bL){var bQ=(bS-2*S+E)-(bO-2*bS+S),bN=2*(S-E)-2*(bS-S),bK=E-S,bJ=(-bN+ap.sqrt(bN*bN-4*bQ*bK))/2/bQ,bI=(-bN-ap.sqrt(bN*bN-4*bQ*bK))/2/bQ,bM=[d,bL],bP=[E,bO],e;ar(bJ)>"1e12"&&(bJ=0.5);ar(bI)>"1e12"&&(bI=0.5);if(bJ>0&&bJ<1){e=ad(E,d,S,R,bS,bR,bO,bL,bJ);bP[k](e.x);bM[k](e.y)}if(bI>0&&bI<1){e=ad(E,d,S,R,bS,bR,bO,bL,bI);bP[k](e.x);bM[k](e.y)}bQ=(bR-2*R+d)-(bL-2*bR+R);bN=2*(R-d)-2*(bR-R);bK=d-R;bJ=(-bN+ap.sqrt(bN*bN-4*bQ*bK))/2/bQ;bI=(-bN-ap.sqrt(bN*bN-4*bQ*bK))/2/bQ;ar(bJ)>"1e12"&&(bJ=0.5);ar(bI)>"1e12"&&(bI=0.5);if(bJ>0&&bJ<1){e=ad(E,d,S,R,bS,bR,bO,bL,bJ);bP[k](e.x);bM[k](e.y)}if(bI>0&&bI<1){e=ad(E,d,S,R,bS,bR,bO,bL,bI);bP[k](e.x);bM[k](e.y)}return{min:{x:bj[bC](0,bP),y:bj[bC](0,bM)},max:{x:n[bC](0,bP),y:n[bC](0,bM)}}}),W=aB(function(bQ,bL){var E=z(bQ),bM=bL&&z(bL),bN={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},b={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},S=function(bS,bT){var bR,bU;if(!bS){return["C",bT.x,bT.y,bT.x,bT.y,bT.x,bT.y]}!(bS[0] in {T:1,Q:1})&&(bT.qx=bT.qy=null);switch(bS[0]){case"M":bT.X=bS[1];bT.Y=bS[2];break;case"A":bS=["C"][bx](aa[bC](0,[bT.x,bT.y][bx](bS.slice(1))));break;case"S":bR=bT.x+(bT.x-(bT.bx||bT.x));bU=bT.y+(bT.y-(bT.by||bT.y));bS=["C",bR,bU][bx](bS.slice(1));break;case"T":bT.qx=bT.x+(bT.x-(bT.qx||bT.x));bT.qy=bT.y+(bT.y-(bT.qy||bT.y));bS=["C"][bx](bk(bT.x,bT.y,bT.qx,bT.qy,bS[1],bS[2]));break;case"Q":bT.qx=bS[1];bT.qy=bS[2];bS=["C"][bx](bk(bT.x,bT.y,bS[1],bS[2],bS[3],bS[4]));break;case"L":bS=["C"][bx](bE(bT.x,bT.y,bS[1],bS[2]));break;case"H":bS=["C"][bx](bE(bT.x,bT.y,bS[1],bT.y));break;case"V":bS=["C"][bx](bE(bT.x,bT.y,bT.x,bS[1]));break;case"Z":bS=["C"][bx](bE(bT.x,bT.y,bT.X,bT.Y));break}return bS},d=function(bR,bS){if(bR[bS][t]>7){bR[bS].shift();var bT=bR[bS];while(bT[t]){bR.splice(bS++,0,["C"][bx](bT.splice(0,6)))}bR.splice(bS,1);bO=n(E[t],bM&&bM[t]||0)}},e=function(bV,bU,bS,bR,bT){if(bV&&bU&&bV[bT][0]=="M"&&bU[bT][0]!="M"){bU.splice(bT,0,["M",bR.x,bR.y]);bS.bx=0;bS.by=0;bS.x=bV[bT][1];bS.y=bV[bT][2];bO=n(E[t],bM&&bM[t]||0)}};for(var bJ=0,bO=n(E[t],bM&&bM[t]||0);bJ<bO;bJ++){E[bJ]=S(E[bJ],bN);d(E,bJ);bM&&(bM[bJ]=S(bM[bJ],b));bM&&d(bM,bJ);e(E,bM,bN,b,bJ);e(bM,E,b,bN,bJ);var bI=E[bJ],bP=bM&&bM[bJ],R=bI[t],bK=bM&&bP[t];bN.x=bI[R-2];bN.y=bI[R-1];bN.bx=ak(bI[R-4])||bN.x;bN.by=ak(bI[R-3])||bN.y;b.bx=bM&&(ak(bP[bK-4])||b.x);b.by=bM&&(ak(bP[bK-3])||b.y);b.x=bM&&bP[bK-2];b.y=bM&&bP[bK-1]}return bM?[E,bM]:E},null,aT),x=aB(function(bL){var bK=[];for(var S=0,bM=bL[t];S<bM;S++){var b={},bJ=bL[S].match(/^([^:]*):?([\d\.]*)/);b.color=aJ.getRGB(bJ[1]);if(b.color.error){return null}b.color=b.color.hex;bJ[2]&&(b.offset=bJ[2]+"%");bK[k](b)}for(S=1,bM=bK[t]-1;S<bM;S++){if(!bK[S].offset){var e=ak(bK[S-1].offset||0),E=0;for(var R=S+1;R<bM;R++){if(bK[R].offset){E=bK[R].offset;break}}if(!E){E=100;R=bM}E=ak(E);var bI=(E-e)/(R-S+1);for(;S<R;S++){e+=bI;bK[S].offset=e+"%"}}}return bK}),aK=function(b,R,e,E){var d;if(aJ.is(b,ag)||aJ.is(b,"object")){d=aJ.is(b,ag)?ab.getElementById(b):b;if(d.tagName){if(R==null){return{container:d,width:d.style.pixelWidth||d.offsetWidth,height:d.style.pixelHeight||d.offsetHeight}}else{return{container:d,width:R,height:e}}}}else{return{container:1,x:b,y:R,width:e,height:E}}},bf=function(b,e){var d=this;for(var E in e){if(e[ah](E)&&!(E in b)){switch(typeof e[E]){case"function":(function(R){b[E]=b===d?R:function(){return R[bC](d,arguments)}})(e[E]);break;case"object":b[E]=b[E]||{};bf.call(this,b[E],e[E]);break;default:b[E]=e[E];break}}}},aF=function(b,d){b==d.top&&(d.top=b.prev);b==d.bottom&&(d.bottom=b.next);b.next&&(b.next.prev=b.prev);b.prev&&(b.prev.next=b.next)},am=function(b,d){if(d.top===b){return}aF(b,d);b.next=null;b.prev=d.top;d.top.next=b;d.top=b},q=function(b,d){if(d.bottom===b){return}aF(b,d);b.next=d.bottom;b.prev=null;d.bottom.prev=b;d.bottom=b},K=function(d,b,e){aF(d,e);b==e.top&&(e.top=d);b.next&&(b.next.prev=d);d.next=b.next;d.prev=b;b.next=d},aM=function(d,b,e){aF(d,e);b==e.bottom&&(e.bottom=d);b.prev&&(b.prev.next=d);d.prev=b.prev;b.prev=d;d.next=b},A=function(b){return function(){throw new Error("Rapha\xebl: you are calling to method \u201c"+b+"\u201d of removed object")}};aJ.pathToRelative=av;if(aJ.svg){a0.svgns="http://www.w3.org/2000/svg";a0.xlink="http://www.w3.org/1999/xlink";ae=function(b){return +b+(~~b===b)*0.5};var bi=function(e,b){if(b){for(var d in b){if(b[ah](d)){e[F](d,bD(b[d]))}}}else{e=ab.createElementNS(a0.svgns,e);e.style.webkitTapHighlightColor="rgba(0,0,0,0)";return e}};aJ[a1]=function(){return"Your browser supports SVG.\nYou are running Rapha\xebl "+this.version};var y=function(b,E){var d=bi("path");E.canvas&&E.canvas[bl](d);var e=new aV(d,E);e.type="path";ao(e,{fill:"none",stroke:"#000",path:b});return e};var g=function(E,bP,b){var bM="linear",bJ=0.5,S=0.5,bR=E.style;bP=bD(bP)[bt](aP,function(bU,bS,bV){bM="radial";if(bS&&bV){bJ=ak(bS);S=ak(bV);var bT=((S>0.5)*2-1);bm(bJ-0.5,2)+bm(S-0.5,2)>0.25&&(S=ap.sqrt(0.25-bm(bJ-0.5,2))*bT+0.5)&&S!=0.5&&(S=S.toFixed(5)-0.00001*bT)}return aQ});bP=bP[J](/\s*\-\s*/);if(bM=="linear"){var bI=bP.shift();bI=-ak(bI);if(isNaN(bI)){return null}var R=[0,0,ap.cos(bI*aN/180),ap.sin(bI*aN/180)],bO=1/(n(ar(R[2]),ar(R[3]))||1);R[2]*=bO;R[3]*=bO;if(R[2]<0){R[0]=-R[2];R[2]=0}if(R[3]<0){R[1]=-R[3];R[3]=0}}var bL=x(bP);if(!bL){return null}var d=E.getAttribute(a5);d=d.match(/^url\(#(.*)\)$/);d&&b.defs.removeChild(ab.getElementById(d[1]));var e=bi(bM+"Gradient");e.id=j();bi(e,bM=="radial"?{fx:bJ,fy:S}:{x1:R[0],y1:R[1],x2:R[2],y2:R[3]});b.defs[bl](e);for(var bK=0,bQ=bL[t];bK<bQ;bK++){var bN=bi("stop");bi(bN,{offset:bL[bK].offset?bL[bK].offset:!bK?"0%":"100%","stop-color":bL[bK].color||"#fff"});e[bl](bN)}bi(E,{fill:"url(#"+e.id+")",opacity:1,"fill-opacity":1});bR.fill=aQ;bR.opacity=1;bR.fillOpacity=1;return 1};var ac=function(d){var b=d.getBBox();bi(d.pattern,{patternTransform:aJ.format("translate({0},{1})",b.x,b.y)})};var ao=function(bP,bY){var bS={"":[0],none:[0],"-":[3,1],".":[1,1],"-.":[3,1,1,1],"-..":[3,1,1,1,1,1],". ":[1,3],"- ":[4,3],"--":[8,3],"- .":[4,3,1,3],"--.":[8,3,1,3],"--..":[8,3,1,3,1,3]},bU=bP.node,bQ=bP.attrs,bM=bP.rotate(),bI=function(b5,b4){b4=bS[bH.call(b4)];if(b4){var b2=b5.attrs["stroke-width"]||"1",b0={round:b2,square:b2,butt:0}[b5.attrs["stroke-linecap"]||bY["stroke-linecap"]]||0,b3=[];var b1=b4[t];while(b1--){b3[b1]=b4[b1]*b2+((b1%2)?1:-1)*b0}bi(bU,{"stroke-dasharray":b3[aX](",")})}};bY[ah]("rotation")&&(bM=bY.rotation);var bL=bD(bM)[J](a);if(!(bL.length-1)){bL=null}else{bL[1]=+bL[1];bL[2]=+bL[2]}ak(bM)&&bP.rotate(0,true);for(var bT in bY){if(bY[ah](bT)){if(!r[ah](bT)){continue}var bR=bY[bT];bQ[bT]=bR;switch(bT){case"blur":bP.blur(bR);break;case"rotation":bP.rotate(bR,true);break;case"href":case"title":case"target":var bW=bU.parentNode;if(bH.call(bW.tagName)!="a"){var R=bi("a");bW.insertBefore(R,bU);R[bl](bU);bW=R}if(bT=="target"&&bR=="blank"){bW.setAttributeNS(bP.paper.xlink,"show","new")}else{bW.setAttributeNS(bP.paper.xlink,bT,bR)}break;case"cursor":bU.style.cursor=bR;break;case"clip-rect":var d=bD(bR)[J](a);if(d[t]>=4){bP.clip&&bP.clip.parentNode.parentNode.removeChild(bP.clip.parentNode);var e=bi("clipPath"),bV=bi("rect");e.id=j();bi(bV,{x:d[0],y:d[1],width:d[2],height:d[3],r:d[4]||0,rx:d[4]||0,ry:d[4]||0});e[bl](bV);bP.paper.defs[bl](e);bi(bU,{"clip-path":"url(#"+e.id+")"});bP.clip=bV}if(!bR){var bX=ab.getElementById(bU.getAttribute("clip-path")[bt](/(^url\(#|\)$)/g,aQ));bX&&bX.parentNode.removeChild(bX);bi(bU,{"clip-path":aQ});delete bP.clip}break;case"path":if(bP.type=="path"){bi(bU,{d:bR?bQ.path=z(bR):"M0,0"})}break;case"width":bU[F](bT,bR);if(bQ.fx){bT="x";bR=bQ.x}else{break}case"x":if(bQ.fx){bR=-bQ.x-(bQ.width||0)}case"rx":if(bT=="rx"&&bP.type=="rect"){break}case"cx":bL&&(bT=="x"||bT=="cx")&&(bL[1]+=bR-bQ[bT]);bU[F](bT,bR);bP.pattern&&ac(bP);break;case"height":bU[F](bT,bR);if(bQ.fy){bT="y";bR=bQ.y}else{break}case"y":if(bQ.fy){bR=-bQ.y-(bQ.height||0)}case"ry":if(bT=="ry"&&bP.type=="rect"){break}case"cy":bL&&(bT=="y"||bT=="cy")&&(bL[2]+=bR-bQ[bT]);bU[F](bT,bR);bP.pattern&&ac(bP);break;case"r":if(bP.type=="rect"){bi(bU,{rx:bR,ry:bR})}else{bU[F](bT,bR)}break;case"src":if(bP.type=="image"){bU.setAttributeNS(bP.paper.xlink,"href",bR)}break;case"stroke-width":bU.style.strokeWidth=bR;bU[F](bT,bR);if(bQ["stroke-dasharray"]){bI(bP,bQ["stroke-dasharray"])}break;case"stroke-dasharray":bI(bP,bR);break;case"translation":var bJ=bD(bR)[J](a);bJ[0]=+bJ[0]||0;bJ[1]=+bJ[1]||0;if(bL){bL[1]+=bJ[0];bL[2]+=bJ[1]}B.call(bP,bJ[0],bJ[1]);break;case"scale":bJ=bD(bR)[J](a);bP.scale(+bJ[0]||1,+bJ[1]||+bJ[0]||1,isNaN(ak(bJ[2]))?null:+bJ[2],isNaN(ak(bJ[3]))?null:+bJ[3]);break;case a5:var S=bD(bR).match(h);if(S){e=bi("pattern");var bO=bi("image");e.id=j();bi(e,{x:0,y:0,patternUnits:"userSpaceOnUse",height:1,width:1});bi(bO,{x:0,y:0});bO.setAttributeNS(bP.paper.xlink,"href",S[1]);e[bl](bO);var bZ=ab.createElement("img");bZ.style.cssText="position:absolute;left:-9999em;top-9999em";bZ.onload=function(){bi(e,{width:this.offsetWidth,height:this.offsetHeight});bi(bO,{width:this.offsetWidth,height:this.offsetHeight});ab.body.removeChild(this);bP.paper.safari()};ab.body[bl](bZ);bZ.src=S[1];bP.paper.defs[bl](e);bU.style.fill="url(#"+e.id+")";bi(bU,{fill:"url(#"+e.id+")"});bP.pattern=e;bP.pattern&&ac(bP);break}var E=aJ.getRGB(bR);if(!E.error){delete bY.gradient;delete bQ.gradient;!aJ.is(bQ.opacity,"undefined")&&aJ.is(bY.opacity,"undefined")&&bi(bU,{opacity:bQ.opacity});!aJ.is(bQ["fill-opacity"],"undefined")&&aJ.is(bY["fill-opacity"],"undefined")&&bi(bU,{"fill-opacity":bQ["fill-opacity"]})}else{if((({circle:1,ellipse:1})[ah](bP.type)||bD(bR).charAt()!="r")&&g(bU,bR,bP.paper)){bQ.gradient=bR;bQ.fill="none";break}}E[ah]("opacity")&&bi(bU,{"fill-opacity":E.opacity>1?E.opacity/100:E.opacity});case"stroke":E=aJ.getRGB(bR);bU[F](bT,E.hex);bT=="stroke"&&E[ah]("opacity")&&bi(bU,{"stroke-opacity":E.opacity>1?E.opacity/100:E.opacity});break;case"gradient":(({circle:1,ellipse:1})[ah](bP.type)||bD(bR).charAt()!="r")&&g(bU,bR,bP.paper);break;case"opacity":if(bQ.gradient&&!bQ[ah]("stroke-opacity")){bi(bU,{"stroke-opacity":bR>1?bR/100:bR})}case"fill-opacity":if(bQ.gradient){var b=ab.getElementById(bU.getAttribute(a5)[bt](/^url\(#|\)$/g,aQ));if(b){var bK=b.getElementsByTagName("stop");bK[bK[t]-1][F]("stop-opacity",bR)}break}default:bT=="font-size"&&(bR=U(bR,10)+"px");var bN=bT[bt](/(\-.)/g,function(b0){return bp.call(b0.substring(1))});bU.style[bN]=bR;bU[F](bT,bR);break}}}Q(bP,bY);if(bL){bP.rotate(bL.join(aI))}else{ak(bM)&&bP.rotate(bM,true)}};var p=1.2,Q=function(b,E){if(b.type!="text"||!(E[ah]("text")||E[ah]("font")||E[ah]("font-size")||E[ah]("x")||E[ah]("y"))){return}var bK=b.attrs,d=b.node,bM=d.firstChild&&d.firstChild.style["font-size"]!==""?U(ab.defaultView.getComputedStyle(d.firstChild,aQ).getPropertyValue("font-size"),10):U(d.style["font-size"],10)||10;if(E[ah]("text")){bK.text=E.text;while(d.firstChild){d.removeChild(d.firstChild)}var e=bD(E.text)[J]("\n");for(var R=0,bL=e[t];R<bL;R++){if(e[R]){var bI=bi("tspan");R&&bi(bI,{dy:bM*p,x:bK.x});bI[bl](ab.createTextNode(e[R]));d[bl](bI)}}}else{e=d.getElementsByTagName("tspan");for(R=0,bL=e[t];R<bL;R++){R&&bi(e[R],{dy:bM*p,x:bK.x})}}bi(d,{y:bK.y});var S=b.getBBox(),bJ=bK.y-(S.y+S.height/2);bJ&&aJ.is(bJ,"finite")&&bi(d,{y:bK.y+bJ})},aV=function(d,b){var E=0,e=0;this[0]=d;this.id=aJ._oid++;this.node=d;d.raphael=this;this.paper=b;this.attrs=this.attrs||{};this.transformations=[];this._={tx:0,ty:0,rt:{deg:0,cx:0,cy:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};var bd=aV[bF];aV[bF].rotate=function(d,b,E){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)}return this._.rt.deg}var e=this.getBBox();d=bD(d)[J](a);if(d[t]-1){b=ak(d[1]);E=ak(d[2])}d=ak(d[0]);if(b!=null&&b!==false){this._.rt.deg=d}else{this._.rt.deg+=d}(E==null)&&(b=null);this._.rt.cx=b;this._.rt.cy=E;b=b==null?e.x+e.width/2:b;E=E==null?e.y+e.height/2:E;if(this._.rt.deg){this.transformations[0]=aJ.format("rotate({0} {1} {2})",this._.rt.deg,b,E);this.clip&&bi(this.clip,{transform:aJ.format("rotate({0} {1} {2})",-this._.rt.deg,b,E)})}else{this.transformations[0]=aQ;this.clip&&bi(this.clip,{transform:aQ})}bi(this.node,{transform:this.transformations[aX](aI)});return this};aV[bF].hide=function(){!this.removed&&(this.node.style.display="none");return this};aV[bF].show=function(){!this.removed&&(this.node.style.display="");return this};aV[bF].remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);for(var b in this){delete this[b]}this.removed=true};aV[bF].getBBox=function(){if(this.removed){return this}if(this.type=="path"){return aj(this.attrs.path)}if(this.node.style.display=="none"){this.show();var d=true}var bI={};try{bI=this.node.getBBox()}catch(R){}finally{bI=bI||{}}if(this.type=="text"){try{bI={x:bI.x,y:Infinity,width:0,height:0};for(var b=0,E=this.node.getNumberOfChars();b<E;b++){var S=this.node.getExtentOfChar(b);(S.y<bI.y)&&(bI.y=S.y);(S.y+S.height-bI.y>bI.height)&&(bI.height=S.y+S.height-bI.y);(S.x+S.width-bI.x>bI.width)&&(bI.width=S.x+S.width-bI.x)}}catch(R){}finally{bI=bI||{x:bI.x,y:Infinity,width:0,height:0}}}d&&this.hide();return bI};aV[bF].attr=function(b,bK){if(this.removed){return this}if(b==null){var bJ={};for(var R in this.attrs){if(this.attrs[ah](R)){bJ[R]=this.attrs[R]}}this._.rt.deg&&(bJ.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(bJ.scale=this.scale());bJ.gradient&&bJ.fill=="none"&&(bJ.fill=bJ.gradient)&&delete bJ.gradient;return bJ}if(bK==null&&aJ.is(b,ag)){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(bK==null&&aJ.is(b,a8)){var bM={};for(var E=0,S=b.length;E<S;E++){bM[b[E]]=this.attr(b[E])}return bM}if(bK!=null){var d={};d[b]=bK}else{if(b!=null&&aJ.is(b,"object")){d=b}}for(var bL in this.paper.customAttributes){if(this.paper.customAttributes[ah](bL)&&d[ah](bL)&&aJ.is(this.paper.customAttributes[bL],"function")){var bI=this.paper.customAttributes[bL].apply(this,[][bx](d[bL]));this.attrs[bL]=d[bL];for(var e in bI){if(bI[ah](e)){d[e]=bI[e]}}}}ao(this,d);return this};aV[bF].toFront=function(){if(this.removed){return this}this.node.parentNode[bl](this.node);var b=this.paper;b.top!=this&&am(this,b);return this};aV[bF].toBack=function(){if(this.removed){return this}if(this.node.parentNode.firstChild!=this.node){this.node.parentNode.insertBefore(this.node,this.node.parentNode.firstChild);q(this,this.paper);var b=this.paper}return this};aV[bF].insertAfter=function(b){if(this.removed){return this}var d=b.node||b[b.length-1].node;if(d.nextSibling){d.parentNode.insertBefore(this.node,d.nextSibling)}else{d.parentNode[bl](this.node)}K(this,b,this.paper);return this};aV[bF].insertBefore=function(b){if(this.removed){return this}var d=b.node||b[0].node;d.parentNode.insertBefore(this.node,d);aM(this,b,this.paper);return this};aV[bF].blur=function(d){var b=this;if(+d!==0){var e=bi("filter"),E=bi("feGaussianBlur");b.attrs.blur=d;e.id=j();bi(E,{stdDeviation:+d||1.5});e.appendChild(E);b.paper.defs.appendChild(e);b._blur=e;bi(b.node,{filter:"url(#"+e.id+")"})}else{if(b._blur){b._blur.parentNode.removeChild(b._blur);delete b._blur;delete b.attrs.blur}b.node.removeAttribute("filter")}};var af=function(d,b,S,R){var E=bi("circle");d.canvas&&d.canvas[bl](E);var e=new aV(E,d);e.attrs={cx:b,cy:S,r:R,fill:"none",stroke:"#000"};e.type="circle";bi(E,e.attrs);return e},bc=function(e,b,bJ,d,S,bI){var R=bi("rect");e.canvas&&e.canvas[bl](R);var E=new aV(R,e);E.attrs={x:b,y:bJ,width:d,height:S,r:bI||0,rx:bI||0,ry:bI||0,fill:"none",stroke:"#000"};E.type="rect";bi(R,E.attrs);return E},aA=function(d,b,bI,S,R){var E=bi("ellipse");d.canvas&&d.canvas[bl](E);var e=new aV(E,d);e.attrs={cx:b,cy:bI,rx:S,ry:R,fill:"none",stroke:"#000"};e.type="ellipse";bi(E,e.attrs);return e},w=function(e,bI,b,bJ,d,S){var R=bi("image");bi(R,{x:b,y:bJ,width:d,height:S,preserveAspectRatio:"none"});R.setAttributeNS(e.xlink,"href",bI);e.canvas&&e.canvas[bl](R);var E=new aV(R,e);E.attrs={x:b,y:bJ,width:d,height:S,src:bI};E.type="image";return E},al=function(d,b,S,R){var E=bi("text");bi(E,{x:b,y:S,"text-anchor":"middle"});d.canvas&&d.canvas[bl](E);var e=new aV(E,d);e.attrs={x:b,y:S,"text-anchor":"middle",text:R,font:r.font,"font-size":r["font-size"],stroke:"none",fill:"#000"};e.type="text";ao(e,e.attrs);return e},bB=function(d,b){this.width=d||this.width;this.height=b||this.height;this.canvas[F]("width",this.width);this.canvas[F]("height",this.height);return this},G=function(){var E=aK[bC](0,arguments),e=E&&E.container,d=E.x,bI=E.y,R=E.width,b=E.height;if(!e){throw new Error("SVG container not found.")}var S=bi("svg");d=d||0;bI=bI||0;R=R||512;b=b||342;bi(S,{xmlns:"http://www.w3.org/2000/svg",version:1.1,width:R,height:b});if(e==1){S.style.cssText="position:absolute;left:"+d+"px;top:"+bI+"px";ab.body[bl](S)}else{if(e.firstChild){e.insertBefore(S,e.firstChild)}else{e[bl](S)}}e=new bA;e.width=R;e.height=b;e.canvas=S;bf.call(e,e,aJ.fn);e.clear();return e};a0.clear=function(){var b=this.canvas;while(b.firstChild){b.removeChild(b.firstChild)}this.bottom=this.top=null;(this.desc=bi("desc"))[bl](ab.createTextNode("Created with Rapha\xebl"));b[bl](this.desc);b[bl](this.defs=bi("defs"))};a0.remove=function(){this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=A(b)}}}if(aJ.vml){var O={M:"m",L:"l",C:"c",Z:"x",m:"t",l:"r",c:"v",z:"x"},aO=/([clmz]),?([^clmz]*)/gi,by=/ progid:\S+Blur\([^\)]+\)/g,bG=/-?[^,\s-]+/g,aY=1000+aI+1000,v=10,u={path:1,rect:1},bh=function(bM){var bJ=/[ahqstv]/ig,e=z;bD(bM).match(bJ)&&(e=W);bJ=/[clmz]/g;if(e==z&&!bD(bM).match(bJ)){var bI=bD(bM)[bt](aO,function(bQ,bS,bO){var bR=[],bN=bH.call(bS)=="m",bP=O[bS];bO[bt](bG,function(bT){if(bN&&bR[t]==2){bP+=bR+O[bS=="m"?"l":"L"];bR=[]}bR[k](ae(bT*v))});return bP+bR});return bI}var bK=e(bM),d,b;bI=[];for(var R=0,bL=bK[t];R<bL;R++){d=bK[R];b=bH.call(bK[R][0]);b=="z"&&(b="x");for(var E=1,S=d[t];E<S;E++){b+=ae(d[E]*v)+(E!=S-1?",":aQ)}bI[k](b)}return bI[aX](aI)};aJ[a1]=function(){return"Your browser doesn\u2019t support SVG. Falling down to VML.\nYou are running Rapha\xebl "+this.version};y=function(e,d){var S=az("group");S.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";S.coordsize=d.coordsize;S.coordorigin=d.coordorigin;var R=az("shape"),E=R.style;E.width=d.width+"px";E.height=d.height+"px";R.coordsize=aY;R.coordorigin=d.coordorigin;S[bl](R);var bI=new aV(R,S,d),b={fill:"none",stroke:"#000"};e&&(b.path=e);bI.type="path";bI.path=[];bI.Path=aQ;ao(bI,b);d.canvas[bl](S);return bI};ao=function(bL,bS){bL.attrs=bL.attrs||{};var bP=bL.node,bT=bL.attrs,bI=bP.style,E,bR=(bS.x!=bT.x||bS.y!=bT.y||bS.width!=bT.width||bS.height!=bT.height||bS.r!=bT.r)&&bL.type=="rect",bX=bL;for(var bJ in bS){if(bS[ah](bJ)){bT[bJ]=bS[bJ]}}if(bR){bT.path=au(bT.x,bT.y,bT.width,bT.height,bT.r);bL.X=bT.x;bL.Y=bT.y;bL.W=bT.width;bL.H=bT.height}bS.href&&(bP.href=bS.href);bS.title&&(bP.title=bS.title);bS.target&&(bP.target=bS.target);bS.cursor&&(bI.cursor=bS.cursor);"blur" in bS&&bL.blur(bS.blur);if(bS.path&&bL.type=="path"||bR){bP.path=bh(bT.path)}if(bS.rotation!=null){bL.rotate(bS.rotation,true)}if(bS.translation){E=bD(bS.translation)[J](a);B.call(bL,E[0],E[1]);if(bL._.rt.cx!=null){bL._.rt.cx+=+E[0];bL._.rt.cy+=+E[1];bL.setBox(bL.attrs,E[0],E[1])}}if(bS.scale){E=bD(bS.scale)[J](a);bL.scale(+E[0]||1,+E[1]||+E[0]||1,+E[2]||null,+E[3]||null)}if("clip-rect" in bS){var b=bD(bS["clip-rect"])[J](a);if(b[t]>=4){b[2]=+b[2]+(+b[0]);b[3]=+b[3]+(+b[1]);if(!b[4]){b[4]=0}var bK=bP.clipRect||ab.createElement("div"),bW=bK.style,S=bP.parentNode;bW.clip=aJ.format("rect({1}px {2}px {3}px {0}px)",b);if(!bP.clipRect){bW.position="absolute";bW.top=0;bW.left=0;bW.width=bL.paper.width+"px";bW.height=bL.paper.height+"px";S.parentNode.insertBefore(bK,S);bK[bl](S);bP.clipRect=bK}}if(!bS["clip-rect"]){bP.clipRect&&(bP.clipRect.style.clip=aQ)}}if(bL.type=="image"&&bS.src){bP.src=bS.src}if(bL.type=="image"&&bS.opacity){bP.filterOpacity=a6+".Alpha(opacity="+(bS.opacity*100)+")";bI.filter=(bP.filterMatrix||aQ)+(bP.filterOpacity||aQ)}bS.font&&(bI.font=bS.font);bS["font-family"]&&(bI.fontFamily='"'+bS["font-family"][J](",")[0][bt](/^['"]+|['"]+$/g,aQ)+'"');bS["font-size"]&&(bI.fontSize=bS["font-size"]);bS["font-weight"]&&(bI.fontWeight=bS["font-weight"]);bS["font-style"]&&(bI.fontStyle=bS["font-style"]);if(bS.opacity!=null||bS["stroke-width"]!=null||bS.fill!=null||bS.stroke!=null||bS["stroke-width"]!=null||bS["stroke-opacity"]!=null||bS["fill-opacity"]!=null||bS["stroke-dasharray"]!=null||bS["stroke-miterlimit"]!=null||bS["stroke-linejoin"]!=null||bS["stroke-linecap"]!=null){bP=bL.shape||bP;var bQ=(bP.getElementsByTagName(a5)&&bP.getElementsByTagName(a5)[0]),bU=false;!bQ&&(bU=bQ=az(a5));if("fill-opacity" in bS||"opacity" in bS){var d=((+bT["fill-opacity"]+1||2)-1)*((+bT.opacity+1||2)-1)*((+aJ.getRGB(bS.fill).o+1||2)-1);d=bj(n(d,0),1);bQ.opacity=d}bS.fill&&(bQ.on=true);if(bQ.on==null||bS.fill=="none"){bQ.on=false}if(bQ.on&&bS.fill){var e=bS.fill.match(h);if(e){bQ.src=e[1];bQ.type="tile"}else{bQ.color=aJ.getRGB(bS.fill).hex;bQ.src=aQ;bQ.type="solid";if(aJ.getRGB(bS.fill).error&&(bX.type in {circle:1,ellipse:1}||bD(bS.fill).charAt()!="r")&&g(bX,bS.fill)){bT.fill="none";bT.gradient=bS.fill}}}bU&&bP[bl](bQ);var R=(bP.getElementsByTagName("stroke")&&bP.getElementsByTagName("stroke")[0]),bV=false;!R&&(bV=R=az("stroke"));if((bS.stroke&&bS.stroke!="none")||bS["stroke-width"]||bS["stroke-opacity"]!=null||bS["stroke-dasharray"]||bS["stroke-miterlimit"]||bS["stroke-linejoin"]||bS["stroke-linecap"]){R.on=true}(bS.stroke=="none"||R.on==null||bS.stroke==0||bS["stroke-width"]==0)&&(R.on=false);var bO=aJ.getRGB(bS.stroke);R.on&&bS.stroke&&(R.color=bO.hex);d=((+bT["stroke-opacity"]+1||2)-1)*((+bT.opacity+1||2)-1)*((+bO.o+1||2)-1);var bM=(ak(bS["stroke-width"])||1)*0.75;d=bj(n(d,0),1);bS["stroke-width"]==null&&(bM=bT["stroke-width"]);bS["stroke-width"]&&(R.weight=bM);bM&&bM<1&&(d*=bM)&&(R.weight=1);R.opacity=d;bS["stroke-linejoin"]&&(R.joinstyle=bS["stroke-linejoin"]||"miter");R.miterlimit=bS["stroke-miterlimit"]||8;bS["stroke-linecap"]&&(R.endcap=bS["stroke-linecap"]=="butt"?"flat":bS["stroke-linecap"]=="square"?"square":"round");if(bS["stroke-dasharray"]){var bN={"-":"shortdash",".":"shortdot","-.":"shortdashdot","-..":"shortdashdotdot",". ":"dot","- ":"dash","--":"longdash","- .":"dashdot","--.":"longdashdot","--..":"longdashdotdot"};R.dashstyle=bN[ah](bS["stroke-dasharray"])?bN[bS["stroke-dasharray"]]:aQ}bV&&bP[bl](R)}if(bX.type=="text"){bI=bX.paper.span.style;bT.font&&(bI.font=bT.font);bT["font-family"]&&(bI.fontFamily=bT["font-family"]);bT["font-size"]&&(bI.fontSize=bT["font-size"]);bT["font-weight"]&&(bI.fontWeight=bT["font-weight"]);bT["font-style"]&&(bI.fontStyle=bT["font-style"]);bX.node.string&&(bX.paper.span.innerHTML=bD(bX.node.string)[bt](/</g,"&#60;")[bt](/&/g,"&#38;")[bt](/\n/g,"<br>"));bX.W=bT.w=bX.paper.span.offsetWidth;bX.H=bT.h=bX.paper.span.offsetHeight;bX.X=bT.x;bX.Y=bT.y+ae(bX.H/2);switch(bT["text-anchor"]){case"start":bX.node.style["v-text-align"]="left";bX.bbx=ae(bX.W/2);break;case"end":bX.node.style["v-text-align"]="right";bX.bbx=-ae(bX.W/2);break;default:bX.node.style["v-text-align"]="center";break}}};g=function(b,bI){b.attrs=b.attrs||{};var bJ=b.attrs,bL,R="linear",S=".5 .5";b.attrs.gradient=bI;bI=bD(bI)[bt](aP,function(bO,bP,bN){R="radial";if(bP&&bN){bP=ak(bP);bN=ak(bN);bm(bP-0.5,2)+bm(bN-0.5,2)>0.25&&(bN=ap.sqrt(0.25-bm(bP-0.5,2))*((bN>0.5)*2-1)+0.5);S=bP+aI+bN}return aQ});bI=bI[J](/\s*\-\s*/);if(R=="linear"){var d=bI.shift();d=-ak(d);if(isNaN(d)){return null}}var E=x(bI);if(!E){return null}b=b.shape||b.node;bL=b.getElementsByTagName(a5)[0]||az(a5);!bL.parentNode&&b.appendChild(bL);if(E[t]){bL.on=true;bL.method="none";bL.color=E[0].color;bL.color2=E[E[t]-1].color;var bM=[];for(var e=0,bK=E[t];e<bK;e++){E[e].offset&&bM[k](E[e].offset+aI+E[e].color)}bL.colors&&(bL.colors.value=bM[t]?bM[aX]():"0% "+bL.color);if(R=="radial"){bL.type="gradientradial";bL.focus="100%";bL.focussize=S;bL.focusposition=S}else{bL.type="gradient";bL.angle=(270-d)%360}}return 1};aV=function(R,bI,b){var S=0,e=0,d=0,E=1;this[0]=R;this.id=aJ._oid++;this.node=R;R.raphael=this;this.X=0;this.Y=0;this.attrs={};this.Group=bI;this.paper=b;this._={tx:0,ty:0,rt:{deg:0},sx:1,sy:1};!b.bottom&&(b.bottom=this);this.prev=b.top;b.top&&(b.top.next=this);b.top=this;this.next=null};bd=aV[bF];bd.rotate=function(d,b,e){if(this.removed){return this}if(d==null){if(this._.rt.cx){return[this._.rt.deg,this._.rt.cx,this._.rt.cy][aX](aI)}return this._.rt.deg}d=bD(d)[J](a);if(d[t]-1){b=ak(d[1]);e=ak(d[2])}d=ak(d[0]);if(b!=null){this._.rt.deg=d}else{this._.rt.deg+=d}e==null&&(b=null);this._.rt.cx=b;this._.rt.cy=e;this.setBox(this.attrs,b,e);this.Group.style.rotation=this._.rt.deg;return this};bd.setBox=function(E,R,e){if(this.removed){return this}var b=this.Group.style,S=(this.shape&&this.shape.style)||this.node.style;E=E||{};for(var bI in E){if(E[ah](bI)){this.attrs[bI]=E[bI]}}R=R||this._.rt.cx;e=e||this._.rt.cy;var bL=this.attrs,bO,bN,bP,bK;switch(this.type){case"circle":bO=bL.cx-bL.r;bN=bL.cy-bL.r;bP=bK=bL.r*2;break;case"ellipse":bO=bL.cx-bL.rx;bN=bL.cy-bL.ry;bP=bL.rx*2;bK=bL.ry*2;break;case"image":bO=+bL.x;bN=+bL.y;bP=bL.width||0;bK=bL.height||0;break;case"text":this.textpath.v=["m",ae(bL.x),", ",ae(bL.y-2),"l",ae(bL.x)+1,", ",ae(bL.y-2)][aX](aQ);bO=bL.x-ae(this.W/2);bN=bL.y-this.H/2;bP=this.W;bK=this.H;break;case"rect":case"path":if(!this.attrs.path){bO=0;bN=0;bP=this.paper.width;bK=this.paper.height}else{var bJ=aj(this.attrs.path);bO=bJ.x;bN=bJ.y;bP=bJ.width;bK=bJ.height}break;default:bO=0;bN=0;bP=this.paper.width;bK=this.paper.height;break}R=(R==null)?bO+bP/2:R;e=(e==null)?bN+bK/2:e;var d=R-this.paper.width/2,bM=e-this.paper.height/2,bQ;b.left!=(bQ=d+"px")&&(b.left=bQ);b.top!=(bQ=bM+"px")&&(b.top=bQ);this.X=u[ah](this.type)?-d:bO;this.Y=u[ah](this.type)?-bM:bN;this.W=bP;this.H=bK;if(u[ah](this.type)){S.left!=(bQ=-d*v+"px")&&(S.left=bQ);S.top!=(bQ=-bM*v+"px")&&(S.top=bQ)}else{if(this.type=="text"){S.left!=(bQ=-d+"px")&&(S.left=bQ);S.top!=(bQ=-bM+"px")&&(S.top=bQ)}else{b.width!=(bQ=this.paper.width+"px")&&(b.width=bQ);b.height!=(bQ=this.paper.height+"px")&&(b.height=bQ);S.left!=(bQ=bO-d+"px")&&(S.left=bQ);S.top!=(bQ=bN-bM+"px")&&(S.top=bQ);S.width!=(bQ=bP+"px")&&(S.width=bQ);S.height!=(bQ=bK+"px")&&(S.height=bQ)}}};bd.hide=function(){!this.removed&&(this.Group.style.display="none");return this};bd.show=function(){!this.removed&&(this.Group.style.display="block");return this};bd.getBBox=function(){if(this.removed){return this}if(u[ah](this.type)){return aj(this.attrs.path)}return{x:this.X+(this.bbx||0),y:this.Y,width:this.W,height:this.H}};bd.remove=function(){if(this.removed){return}aF(this,this.paper);this.node.parentNode.removeChild(this.node);this.Group.parentNode.removeChild(this.Group);this.shape&&this.shape.parentNode.removeChild(this.shape);for(var b in this){delete this[b]}this.removed=true};bd.attr=function(b,bI){if(this.removed){return this}if(b==null){var S={};for(var E in this.attrs){if(this.attrs[ah](E)){S[E]=this.attrs[E]}}this._.rt.deg&&(S.rotation=this.rotate());(this._.sx!=1||this._.sy!=1)&&(S.scale=this.scale());S.gradient&&S.fill=="none"&&(S.fill=S.gradient)&&delete S.gradient;return S}if(bI==null&&aJ.is(b,"string")){if(b=="translation"){return B.call(this)}if(b=="rotation"){return this.rotate()}if(b=="scale"){return this.scale()}if(b==a5&&this.attrs.fill=="none"&&this.attrs.gradient){return this.attrs.gradient}return this.attrs[b]}if(this.attrs&&bI==null&&aJ.is(b,a8)){var bL,bK={};for(E=0,bL=b[t];E<bL;E++){bK[b[E]]=this.attr(b[E])}return bK}var d;if(bI!=null){d={};d[b]=bI}bI==null&&aJ.is(b,"object")&&(d=b);if(d){for(var bJ in this.paper.customAttributes){if(this.paper.customAttributes[ah](bJ)&&d[ah](bJ)&&aJ.is(this.paper.customAttributes[bJ],"function")){var R=this.paper.customAttributes[bJ].apply(this,[][bx](d[bJ]));this.attrs[bJ]=d[bJ];for(var e in R){if(R[ah](e)){d[e]=R[e]}}}}if(d.text&&this.type=="text"){this.node.string=d.text}ao(this,d);if(d.gradient&&(({circle:1,ellipse:1})[ah](this.type)||bD(d.gradient).charAt()!="r")){g(this,d.gradient)}(!u[ah](this.type)||this._.rt.deg)&&this.setBox(this.attrs)}return this};bd.toFront=function(){!this.removed&&this.Group.parentNode[bl](this.Group);this.paper.top!=this&&am(this,this.paper);return this};bd.toBack=function(){if(this.removed){return this}if(this.Group.parentNode.firstChild!=this.Group){this.Group.parentNode.insertBefore(this.Group,this.Group.parentNode.firstChild);q(this,this.paper)}return this};bd.insertAfter=function(b){if(this.removed){return this}if(b.constructor==ai){b=b[b.length-1]}if(b.Group.nextSibling){b.Group.parentNode.insertBefore(this.Group,b.Group.nextSibling)}else{b.Group.parentNode[bl](this.Group)}K(this,b,this.paper);return this};bd.insertBefore=function(b){if(this.removed){return this}if(b.constructor==ai){b=b[0]}b.Group.parentNode.insertBefore(this.Group,b.Group);aM(this,b,this.paper);return this};bd.blur=function(b){var d=this.node.runtimeStyle,e=d.filter;e=e.replace(by,aQ);if(+b!==0){this.attrs.blur=b;d.filter=e+aI+a6+".Blur(pixelradius="+(+b||1.5)+")";d.margin=aJ.format("-{0}px 0 0 -{0}px",ae(+b||1.5))}else{d.filter=e;d.margin=0;delete this.attrs.blur}};af=function(d,b,bJ,S){var R=az("group"),bI=az("oval"),e=bI.style;R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aY;R.coordorigin=d.coordorigin;R[bl](bI);var E=new aV(bI,R,d);E.type="circle";ao(E,{stroke:"#000",fill:"none"});E.attrs.cx=b;E.attrs.cy=bJ;E.attrs.r=S;E.setBox({x:b-S,y:bJ-S,width:S*2,height:S*2});d.canvas[bl](R);return E};function au(b,R,d,e,E){if(E){return aJ.format("M{0},{1}l{2},0a{3},{3},0,0,1,{3},{3}l0,{5}a{3},{3},0,0,1,{4},{3}l{6},0a{3},{3},0,0,1,{4},{4}l0,{7}a{3},{3},0,0,1,{3},{4}z",b+E,R,d-E*2,E,-E,e-E*2,E*2-d,E*2-e)}else{return aJ.format("M{0},{1}l{2},0,0,{3},{4},0z",b,R,d,e,-d)}}bc=function(d,bI,R,bJ,e,b){var bK=au(bI,R,bJ,e,b),E=d.path(bK),S=E.attrs;E.X=S.x=bI;E.Y=S.y=R;E.W=S.width=bJ;E.H=S.height=e;S.r=b;S.path=bK;E.type="rect";return E};aA=function(b,bK,bJ,e,d){var R=az("group"),E=az("oval"),bI=E.style;R.style.cssText="position:absolute;left:0;top:0;width:"+b.width+"px;height:"+b.height+"px";R.coordsize=aY;R.coordorigin=b.coordorigin;R[bl](E);var S=new aV(E,R,b);S.type="ellipse";ao(S,{stroke:"#000"});S.attrs.cx=bK;S.attrs.cy=bJ;S.attrs.rx=e;S.attrs.ry=d;S.setBox({x:bK-e,y:bJ-d,width:e*2,height:d*2});b.canvas[bl](R);return S};w=function(d,b,bJ,bI,bK,E){var R=az("group"),e=az("image");R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aY;R.coordorigin=d.coordorigin;e.src=b;R[bl](e);var S=new aV(e,R,d);S.type="image";S.attrs.src=b;S.attrs.x=bJ;S.attrs.y=bI;S.attrs.w=bK;S.attrs.h=E;S.setBox({x:bJ,y:bI,width:bK,height:E});d.canvas[bl](R);return S};al=function(d,bK,bJ,bL){var R=az("group"),E=az("shape"),bI=E.style,bM=az("path"),b=bM.style,e=az("textpath");R.style.cssText="position:absolute;left:0;top:0;width:"+d.width+"px;height:"+d.height+"px";R.coordsize=aY;R.coordorigin=d.coordorigin;bM.v=aJ.format("m{0},{1}l{2},{1}",ae(bK*10),ae(bJ*10),ae(bK*10)+1);bM.textpathok=true;bI.width=d.width;bI.height=d.height;e.string=bD(bL);e.on=true;E[bl](e);E[bl](bM);R[bl](E);var S=new aV(e,R,d);S.shape=E;S.textpath=bM;S.type="text";S.attrs.text=bL;S.attrs.x=bK;S.attrs.y=bJ;S.attrs.w=1;S.attrs.h=1;ao(S,{font:r.font,stroke:"none",fill:"#000"});S.setBox();d.canvas[bl](R);return S};bB=function(e,b){var d=this.canvas.style;e==+e&&(e+="px");b==+b&&(b+="px");d.width=e;d.height=b;d.clip="rect(0 "+e+" "+b+" 0)";return this};var az;ab.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)");try{!ab.namespaces.rvml&&ab.namespaces.add("rvml","urn:schemas-microsoft-com:vml");az=function(b){return ab.createElement("<rvml:"+b+' class="rvml">')}}catch(ax){az=function(b){return ab.createElement("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="rvml">')}}G=function(){var e=aK[bC](0,arguments),b=e.container,bK=e.height,bL,d=e.width,bJ=e.x,bI=e.y;if(!b){throw new Error("VML container not found.")}var R=new bA,S=R.canvas=ab.createElement("div"),E=S.style;bJ=bJ||0;bI=bI||0;d=d||512;bK=bK||342;d==+d&&(d+="px");bK==+bK&&(bK+="px");R.width=1000;R.height=1000;R.coordsize=v*1000+aI+v*1000;R.coordorigin="0 0";R.span=ab.createElement("span");R.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";S[bl](R.span);E.cssText=aJ.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden",d,bK);if(b==1){ab.body[bl](S);E.left=bJ+"px";E.top=bI+"px";E.position="absolute"}else{if(b.firstChild){b.insertBefore(S,b.firstChild)}else{b[bl](S)}}bf.call(R,R,aJ.fn);return R};a0.clear=function(){this.canvas.innerHTML=aQ;this.span=ab.createElement("span");this.span.style.cssText="position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;";this.canvas[bl](this.span);this.bottom=this.top=null};a0.remove=function(){this.canvas.parentNode.removeChild(this.canvas);for(var b in this){this[b]=A(b)}return true}}var V=navigator.userAgent.match(/Version\/(.*?)\s/);if((navigator.vendor=="Apple Computer, Inc.")&&(V&&V[1]<4||navigator.platform.slice(0,2)=="iP")){a0.safari=function(){var b=this.rect(-99,-99,this.width+99,this.height+99).attr({stroke:"none"});aR.setTimeout(function(){b.remove()})}}else{a0.safari=function(){}}var P=function(){this.returnValue=false},bw=function(){return this.originalEvent.preventDefault()},a4=function(){this.cancelBubble=true},aE=function(){return this.originalEvent.stopPropagation()},aw=(function(){if(ab.addEventListener){return function(S,E,e,d){var b=X&&br[E]?br[E]:E;var R=function(bL){if(X&&br[ah](E)){for(var bJ=0,bK=bL.targetTouches&&bL.targetTouches.length;bJ<bK;bJ++){if(bL.targetTouches[bJ].target==S){var bI=bL;bL=bL.targetTouches[bJ];bL.originalEvent=bI;bL.preventDefault=bw;bL.stopPropagation=aE;break}}}return e.call(d,bL)};S.addEventListener(b,R,false);return function(){S.removeEventListener(b,R,false);return true}}}else{if(ab.attachEvent){return function(S,E,e,d){var R=function(bI){bI=bI||aR.event;bI.preventDefault=bI.preventDefault||P;bI.stopPropagation=bI.stopPropagation||a4;return e.call(d,bI)};S.attachEvent("on"+E,R);var b=function(){S.detachEvent("on"+E,R);return true};return b}}}})(),a9=[],bs=function(S){var bJ=S.clientX,bI=S.clientY,bK=ab.documentElement.scrollTop||ab.body.scrollTop,bL=ab.documentElement.scrollLeft||ab.body.scrollLeft,b,d=a9.length;while(d--){b=a9[d];if(X){var R=S.touches.length,E;while(R--){E=S.touches[R];if(E.identifier==b.el._drag.id){bJ=E.clientX;bI=E.clientY;(S.originalEvent?S.originalEvent:S).preventDefault();break}}}else{S.preventDefault()}bJ+=bL;bI+=bK;b.move&&b.move.call(b.move_scope||b.el,bJ-b.el._drag.x,bI-b.el._drag.y,bJ,bI,S)}},f=function(E){aJ.unmousemove(bs).unmouseup(f);var d=a9.length,b;while(d--){b=a9[d];b.el._drag={};b.end&&b.end.call(b.end_scope||b.start_scope||b.move_scope||b.el,E)}a9=[]};for(var at=T[t];at--;){(function(b){aJ[b]=aV[bF][b]=function(e,d){if(aJ.is(e,"function")){this.events=this.events||[];this.events.push({name:b,f:e,unbind:aw(this.shape||this.node||ab,b,e,d||this)})}return this};aJ["un"+b]=aV[bF]["un"+b]=function(E){var e=this.events,d=e[t];while(d--){if(e[d].name==b&&e[d].f==E){e[d].unbind();e.splice(d,1);!e.length&&delete this.events;return this}}return this}})(T[at])}bd.hover=function(E,b,e,d){return this.mouseover(E,e).mouseout(b,d||e)};bd.unhover=function(d,b){return this.unmouseover(d).unmouseout(b)};bd.drag=function(d,S,R,b,e,E){this._drag={};this.mousedown(function(bJ){(bJ.originalEvent||bJ).preventDefault();var bI=ab.documentElement.scrollTop||ab.body.scrollTop,bK=ab.documentElement.scrollLeft||ab.body.scrollLeft;this._drag.x=bJ.clientX+bK;this._drag.y=bJ.clientY+bI;this._drag.id=bJ.identifier;S&&S.call(e||b||this,bJ.clientX+bK,bJ.clientY+bI,bJ);!a9.length&&aJ.mousemove(bs).mouseup(f);a9.push({el:this,move:d,end:R,move_scope:b,start_scope:e,end_scope:E})});return this};bd.undrag=function(b,E,e){var d=a9.length;while(d--){a9[d].el==this&&(a9[d].move==b&&a9[d].end==e)&&a9.splice(d++,1)}!a9.length&&aJ.unmousemove(bs).unmouseup(f)};a0.circle=function(b,e,d){return af(this,b||0,e||0,d||0)};a0.rect=function(b,R,d,e,E){return bc(this,b||0,R||0,d||0,e||0,E||0)};a0.ellipse=function(b,E,e,d){return aA(this,b||0,E||0,e||0,d||0)};a0.path=function(b){b&&!aJ.is(b,ag)&&!aJ.is(b[0],a8)&&(b+=aQ);return y(aJ.format[bC](aJ,arguments),this)};a0.image=function(E,b,R,d,e){return w(this,E||"about:blank",b||0,R||0,d||0,e||0)};a0.text=function(b,e,d){return al(this,b||0,e||0,bD(d))};a0.set=function(b){arguments[t]>1&&(b=Array[bF].splice.call(arguments,0,arguments[t]));return new ai(b)};a0.setSize=bB;a0.top=a0.bottom=null;a0.raphael=aJ;function D(){return this.x+aI+this.y}bd.resetScale=function(){if(this.removed){return this}this._.sx=1;this._.sy=1;this.attrs.scale="1 1"};bd.scale=function(b0,bZ,bR,bP){if(this.removed){return this}if(b0==null&&bZ==null){return{x:this._.sx,y:this._.sy,toString:D}}bZ=bZ||b0;!+bZ&&(bZ=b0);var d,b,b8,b7,cb=this.attrs;if(b0!=0){var cc=this.getBBox(),E=cc.x+cc.width/2,e=cc.y+cc.height/2,b5=ar(b0/this._.sx),b4=ar(bZ/this._.sy);bR=(+bR||bR==0)?bR:E;bP=(+bP||bP==0)?bP:e;var bK=this._.sx>0,bJ=this._.sy>0,bQ=~~(b0/ar(b0)),bO=~~(bZ/ar(bZ)),S=b5*bQ,R=b4*bO,b1=this.node.style,bY=bR+ar(E-bR)*S*(E>bR==bK?1:-1),bX=bP+ar(e-bP)*R*(e>bP==bJ?1:-1),bU=(b0*bQ>bZ*bO?b4:b5);switch(this.type){case"rect":case"image":var bM=cb.width*b5,bV=cb.height*b4;this.attr({height:bV,r:cb.r*bU,width:bM,x:bY-bM/2,y:bX-bV/2});break;case"circle":case"ellipse":this.attr({rx:cb.rx*b5,ry:cb.ry*b4,r:cb.r*bU,cx:bY,cy:bX});break;case"text":this.attr({x:bY,y:bX});break;case"path":var b3=av(cb.path),bL=true,bT=bK?S:b5,bS=bJ?R:b4;for(var ca=0,bW=b3[t];ca<bW;ca++){var b6=b3[ca],bN=bp.call(b6[0]);if(bN=="M"&&bL){continue}else{bL=false}if(bN=="A"){b6[b3[ca][t]-2]*=bT;b6[b3[ca][t]-1]*=bS;b6[1]*=b5;b6[2]*=b4;b6[5]=+(bQ+bO?!!+b6[5]:!+b6[5])}else{if(bN=="H"){for(var b9=1,bI=b6[t];b9<bI;b9++){b6[b9]*=bT}}else{if(bN=="V"){for(b9=1,bI=b6[t];b9<bI;b9++){b6[b9]*=bS}}else{for(b9=1,bI=b6[t];b9<bI;b9++){b6[b9]*=(b9%2)?bT:bS}}}}}var b2=aj(b3);d=bY-b2.x-b2.width/2;b=bX-b2.y-b2.height/2;b3[0][1]+=d;b3[0][2]+=b;this.attr({path:b3});break}if(this.type in {text:1,image:1}&&(bQ!=1||bO!=1)){if(this.transformations){this.transformations[2]="scale("[bx](bQ,",",bO,")");this.node[F]("transform",this.transformations[aX](aI));d=(bQ==-1)?-cb.x-(bM||0):cb.x;b=(bO==-1)?-cb.y-(bV||0):cb.y;this.attr({x:d,y:b});cb.fx=bQ-1;cb.fy=bO-1}else{this.node.filterMatrix=a6+".Matrix(M11="[bx](bQ,", M12=0, M21=0, M22=",bO,", Dx=0, Dy=0, sizingmethod='auto expand', filtertype='bilinear')");b1.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}else{if(this.transformations){this.transformations[2]=aQ;this.node[F]("transform",this.transformations[aX](aI));cb.fx=0;cb.fy=0}else{this.node.filterMatrix=aQ;b1.filter=(this.node.filterMatrix||aQ)+(this.node.filterOpacity||aQ)}}cb.scale=[b0,bZ,bR,bP][aX](aI);this._.sx=b0;this._.sy=bZ}return this};bd.clone=function(){if(this.removed){return null}var b=this.attr();delete b.scale;delete b.translation;return this.paper[this.type]().attr(b)};var a3={},m=function(R,d,bK,bJ,bS,bR,bQ,bO,S){var bN=0,bM=100,E=[R,d,bK,bJ,bS,bR,bQ,bO].join(),b=a3[E],bI,e;!b&&(a3[E]=b={data:[]});b.timer&&clearTimeout(b.timer);b.timer=setTimeout(function(){delete a3[E]},2000);if(S!=null){var bP=m(R,d,bK,bJ,bS,bR,bQ,bO);bM=~~bP*10}for(var bL=0;bL<bM+1;bL++){if(b.data[S]>bL){e=b.data[bL*bM]}else{e=aJ.findDotsAtSegment(R,d,bK,bJ,bS,bR,bQ,bO,bL/bM);b.data[bL]=e}bL&&(bN+=bm(bm(bI.x-e.x,2)+bm(bI.y-e.y,2),0.5));if(S!=null&&bN>=S){return e}bI=e}if(S==null){return bN}},a2=function(b,d){return function(bQ,R,S){bQ=W(bQ);var bM,bL,e,bI,E="",bP={},bN,bK=0;for(var bJ=0,bO=bQ.length;bJ<bO;bJ++){e=bQ[bJ];if(e[0]=="M"){bM=+e[1];bL=+e[2]}else{bI=m(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6]);if(bK+bI>R){if(d&&!bP.start){bN=m(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],R-bK);E+=["C",bN.start.x,bN.start.y,bN.m.x,bN.m.y,bN.x,bN.y];if(S){return E}bP.start=E;E=["M",bN.x,bN.y+"C",bN.n.x,bN.n.y,bN.end.x,bN.end.y,e[5],e[6]][aX]();bK+=bI;bM=+e[5];bL=+e[6];continue}if(!b&&!d){bN=m(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],R-bK);return{x:bN.x,y:bN.y,alpha:bN.alpha}}}bK+=bI;bM=+e[5];bL=+e[6]}E+=e}bP.end=E;bN=b?bK:d?bP:aJ.findDotsAtSegment(bM,bL,e[1],e[2],e[3],e[4],e[5],e[6],1);bN.alpha&&(bN={x:bN.x,y:bN.y,alpha:bN.alpha});return bN}};var aL=a2(1),M=a2(),Z=a2(0,1);bd.getTotalLength=function(){if(this.type!="path"){return}if(this.node.getTotalLength){return this.node.getTotalLength()}return aL(this.attrs.path)};bd.getPointAtLength=function(b){if(this.type!="path"){return}return M(this.attrs.path,b)};bd.getSubpath=function(e,d){if(this.type!="path"){return}if(ar(this.getTotalLength()-d)<"1e-6"){return Z(this.attrs.path,e).end}var b=Z(this.attrs.path,d,1);return e?Z(b,e).end:b};aJ.easing_formulas={linear:function(b){return b},"<":function(b){return bm(b,3)},">":function(b){return bm(b-1,3)+1},"<>":function(b){b=b*2;if(b<1){return bm(b,3)/2}b-=2;return(bm(b,3)+2)/2},backIn:function(d){var b=1.70158;return d*d*((b+1)*d-b)},backOut:function(d){d=d-1;var b=1.70158;return d*d*((b+1)*d+b)+1},elastic:function(e){if(e==0||e==1){return e}var d=0.3,b=d/4;return bm(2,-10*e)*ap.sin((e-b)*(2*aN)/d)+1},bounce:function(E){var d=7.5625,e=2.75,b;if(E<(1/e)){b=d*E*E}else{if(E<(2/e)){E-=(1.5/e);b=d*E*E+0.75}else{if(E<(2.5/e)){E-=(2.25/e);b=d*E*E+0.9375}else{E-=(2.625/e);b=d*E*E+0.984375}}}return b}};var Y=[],bv=function(){var bJ=+new Date;for(var bU=0;bU<Y[t];bU++){var bZ=Y[bU];if(bZ.stop||bZ.el.removed){continue}var R=bJ-bZ.start,bR=bZ.ms,bQ=bZ.easing,bV=bZ.from,bO=bZ.diff,d=bZ.to,bN=bZ.t,bI=bZ.el,bP={},b;if(R<bR){var E=bQ(R/bR);for(var bS in bV){if(bV[ah](bS)){switch(an[bS]){case"along":b=E*bR*bO[bS];d.back&&(b=d.len-b);var bT=M(d[bS],b);bI.translate(bO.sx-bO.x||0,bO.sy-bO.y||0);bO.x=bT.x;bO.y=bT.y;bI.translate(bT.x-bO.sx,bT.y-bO.sy);d.rot&&bI.rotate(bO.r+bT.alpha,bT.x,bT.y);break;case aG:b=+bV[bS]+E*bR*bO[bS];break;case"colour":b="rgb("+[L(ae(bV[bS].r+E*bR*bO[bS].r)),L(ae(bV[bS].g+E*bR*bO[bS].g)),L(ae(bV[bS].b+E*bR*bO[bS].b))][aX](",")+")";break;case"path":b=[];for(var bX=0,bM=bV[bS][t];bX<bM;bX++){b[bX]=[bV[bS][bX][0]];for(var bW=1,bY=bV[bS][bX][t];bW<bY;bW++){b[bX][bW]=+bV[bS][bX][bW]+E*bR*bO[bS][bX][bW]}b[bX]=b[bX][aX](aI)}b=b[aX](aI);break;case"csv":switch(bS){case"translation":var bL=E*bR*bO[bS][0]-bN.x,bK=E*bR*bO[bS][1]-bN.y;bN.x+=bL;bN.y+=bK;b=bL+aI+bK;break;case"rotation":b=+bV[bS][0]+E*bR*bO[bS][0];bV[bS][1]&&(b+=","+bV[bS][1]+","+bV[bS][2]);break;case"scale":b=[+bV[bS][0]+E*bR*bO[bS][0],+bV[bS][1]+E*bR*bO[bS][1],(2 in d[bS]?d[bS][2]:aQ),(3 in d[bS]?d[bS][3]:aQ)][aX](aI);break;case"clip-rect":b=[];bX=4;while(bX--){b[bX]=+bV[bS][bX]+E*bR*bO[bS][bX]}break}break;default:var S=[].concat(bV[bS]);b=[];bX=bI.paper.customAttributes[bS].length;while(bX--){b[bX]=+S[bX]+E*bR*bO[bS][bX]}break}bP[bS]=b}}bI.attr(bP);bI._run&&bI._run.call(bI)}else{if(d.along){bT=M(d.along,d.len*!d.back);bI.translate(bO.sx-(bO.x||0)+bT.x-bO.sx,bO.sy-(bO.y||0)+bT.y-bO.sy);d.rot&&bI.rotate(bO.r+bT.alpha,bT.x,bT.y)}(bN.x||bN.y)&&bI.translate(-bN.x,-bN.y);d.scale&&(d.scale+=aQ);bI.attr(d);Y.splice(bU--,1)}}aJ.svg&&bI&&bI.paper&&bI.paper.safari();Y[t]&&setTimeout(bv)},bz=function(b,e,S,R,E){var d=S-R;e.timeouts.push(setTimeout(function(){aJ.is(E,"function")&&E.call(e);e.animate(b,d,b.easing)},R))},L=function(b){return n(bj(b,255),0)},B=function(b,e){if(b==null){return{x:this._.tx,y:this._.ty,toString:D}}this._.tx+=+b;this._.ty+=+e;switch(this.type){case"circle":case"ellipse":this.attr({cx:+b+this.attrs.cx,cy:+e+this.attrs.cy});break;case"rect":case"image":case"text":this.attr({x:+b+this.attrs.x,y:+e+this.attrs.y});break;case"path":var d=av(this.attrs.path);d[0][1]+=+b;d[0][2]+=+e;this.attr({path:d});break}return this};bd.animateWith=function(e,R,b,bI,S){for(var d=0,E=Y.length;d<E;d++){if(Y[d].el.id==e.id){R.start=Y[d].start}}return this.animate(R,b,bI,S)};bd.animateAlong=aW();bd.animateAlongBack=aW(1);function aW(b){return function(E,e,d,S){var R={back:b};aJ.is(d,"function")?(S=d):(R.rot=d);E&&E.constructor==aV&&(E=E.attrs.path);E&&(R.along=E);return this.animate(R,e,S)}}function aZ(bP,E,d,bO,bN,bJ){var bK=3*E,bM=3*(bO-E)-bK,b=1-bK-bM,bI=3*d,bL=3*(bN-d)-bI,bQ=1-bI-bL;function S(bR){return((b*bR+bM)*bR+bK)*bR}function e(bR,bT){var bS=R(bR,bT);return((bQ*bS+bL)*bS+bI)*bS}function R(bR,bY){var bX,bW,bU,bS,bV,bT;for(bU=bR,bT=0;bT<8;bT++){bS=S(bU)-bR;if(ar(bS)<bY){return bU}bV=(3*b*bU+2*bM)*bU+bK;if(ar(bV)<0.000001){break}bU=bU-bS/bV}bX=0;bW=1;bU=bR;if(bU<bX){return bX}if(bU>bW){return bW}while(bX<bW){bS=S(bU);if(ar(bS-bR)<bY){return bU}if(bR>bS){bX=bU}else{bW=bU}bU=(bW-bX)/2+bX}return bU}return e(bP,1/(200*bJ))}bd.onAnimation=function(b){this._run=b||0;return this};bd.animate=function(b1,bR,bQ,R){var d=this;d.timeouts=d.timeouts||[];if(aJ.is(bQ,"function")||!bQ){R=bQ||null}if(d.removed){R&&R.call(d);return d}var bV={},e={},S=false,bM={};for(var bS in b1){if(b1[ah](bS)){if(an[ah](bS)||d.paper.customAttributes[ah](bS)){S=true;bV[bS]=d.attr(bS);(bV[bS]==null)&&(bV[bS]=r[bS]);e[bS]=b1[bS];switch(an[bS]){case"along":var bZ=aL(b1[bS]);var bT=M(b1[bS],bZ*!!b1.back);var bI=d.getBBox();bM[bS]=bZ/bR;bM.tx=bI.x;bM.ty=bI.y;bM.sx=bT.x;bM.sy=bT.y;e.rot=b1.rot;e.back=b1.back;e.len=bZ;b1.rot&&(bM.r=ak(d.rotate())||0);break;case aG:bM[bS]=(e[bS]-bV[bS])/bR;break;case"colour":bV[bS]=aJ.getRGB(bV[bS]);var bU=aJ.getRGB(e[bS]);bM[bS]={r:(bU.r-bV[bS].r)/bR,g:(bU.g-bV[bS].g)/bR,b:(bU.b-bV[bS].b)/bR};break;case"path":var bJ=W(bV[bS],e[bS]);bV[bS]=bJ[0];var bO=bJ[1];bM[bS]=[];for(var bY=0,bL=bV[bS][t];bY<bL;bY++){bM[bS][bY]=[0];for(var bX=1,b0=bV[bS][bY][t];bX<b0;bX++){bM[bS][bY][bX]=(bO[bY][bX]-bV[bS][bY][bX])/bR}}break;case"csv":var b=bD(b1[bS])[J](a),bK=bD(bV[bS])[J](a);switch(bS){case"translation":bV[bS]=[0,0];bM[bS]=[b[0]/bR,b[1]/bR];break;case"rotation":bV[bS]=(bK[1]==b[1]&&bK[2]==b[2])?bK:[0,b[1],b[2]];bM[bS]=[(b[0]-bV[bS][0])/bR,0,0];break;case"scale":b1[bS]=b;bV[bS]=bD(bV[bS])[J](a);bM[bS]=[(b[0]-bV[bS][0])/bR,(b[1]-bV[bS][1])/bR,0,0];break;case"clip-rect":bV[bS]=bD(bV[bS])[J](a);bM[bS]=[];bY=4;while(bY--){bM[bS][bY]=(b[bY]-bV[bS][bY])/bR}break}e[bS]=b;break;default:b=[].concat(b1[bS]);bK=[].concat(bV[bS]);bM[bS]=[];bY=d.paper.customAttributes[bS][t];while(bY--){bM[bS][bY]=((b[bY]||0)-(bK[bY]||0))/bR}break}}}}if(!S){var bP=[],E;for(var b2 in b1){if(b1[ah](b2)&&bg.test(b2)){bS={value:b1[b2]};b2=="from"&&(b2=0);b2=="to"&&(b2=100);bS.key=U(b2,10);bP.push(bS)}}bP.sort(bn);if(bP[0].key){bP.unshift({key:0,value:d.attrs})}for(bY=0,bL=bP[t];bY<bL;bY++){bz(bP[bY].value,d,bR/100*bP[bY].key,bR/100*(bP[bY-1]&&bP[bY-1].key||0),bP[bY-1]&&bP[bY-1].value.callback)}E=bP[bP[t]-1].value.callback;if(E){d.timeouts.push(setTimeout(function(){E.call(d)},bR))}}else{var bW=aJ.easing_formulas[bQ];if(!bW){bW=bD(bQ).match(c);if(bW&&bW[t]==5){var bN=bW;bW=function(b3){return aZ(b3,+bN[1],+bN[2],+bN[3],+bN[4],bR)}}else{bW=function(b3){return b3}}}Y.push({start:b1.start||+new Date,ms:bR,easing:bW,from:bV,diff:bM,to:e,el:d,t:{x:0,y:0}});aJ.is(R,"function")&&(d._ac=setTimeout(function(){R.call(d)},bR));Y[t]==1&&setTimeout(bv)}return this};bd.stop=function(){for(var b=0;b<Y.length;b++){Y[b].el.id==this.id&&Y.splice(b--,1)}for(b=0,ii=this.timeouts&&this.timeouts.length;b<ii;b++){clearTimeout(this.timeouts[b])}this.timeouts=[];clearTimeout(this._ac);delete this._ac;return this};bd.translate=function(b,d){return this.attr({translation:b+" "+d})};bd[a1]=function(){return"Rapha\xebl\u2019s object"};aJ.ae=Y;var ai=function(b){this.items=[];this[t]=0;this.type="set";if(b){for(var d=0,e=b[t];d<e;d++){if(b[d]&&(b[d].constructor==aV||b[d].constructor==ai)){this[this.items[t]]=this.items[this.items[t]]=b[d];this[t]++}}}};ai[bF][k]=function(){var E,b;for(var d=0,e=arguments[t];d<e;d++){E=arguments[d];if(E&&(E.constructor==aV||E.constructor==ai)){b=this.items[t];this[b]=this.items[b]=E;this[t]++}}return this};ai[bF].pop=function(){delete this[this[t]--];return this.items.pop()};for(var I in bd){if(bd[ah](I)){ai[bF][I]=(function(b){return function(){for(var d=0,e=this.items[t];d<e;d++){this.items[d][b][bC](this.items[d],arguments)}return this}})(I)}}ai[bF].attr=function(d,S){if(d&&aJ.is(d,a8)&&aJ.is(d[0],"object")){for(var b=0,R=d[t];b<R;b++){this.items[b].attr(d[b])}}else{for(var e=0,E=this.items[t];e<E;e++){this.items[e].attr(d,S)}}return this};ai[bF].animate=function(d,b,S,bJ){(aJ.is(S,"function")||!S)&&(bJ=S||null);var R=this.items[t],e=R,bK,bI=this,E;bJ&&(E=function(){!--R&&bJ.call(bI)});S=aJ.is(S,ag)?S:E;bK=this.items[--e].animate(d,b,S,E);while(e--){this.items[e]&&!this.items[e].removed&&this.items[e].animateWith(bK,d,b,S,E)}return this};ai[bF].insertAfter=function(d){var b=this.items[t];while(b--){this.items[b].insertAfter(d)}return this};ai[bF].getBBox=function(){var b=[],S=[],d=[],E=[];for(var e=this.items[t];e--;){var R=this.items[e].getBBox();b[k](R.x);S[k](R.y);d[k](R.x+R.width);E[k](R.y+R.height)}b=bj[bC](0,b);S=bj[bC](0,S);return{x:b,y:S,width:n[bC](0,d)-b,height:n[bC](0,E)-S}};ai[bF].clone=function(e){e=new ai;for(var b=0,d=this.items[t];b<d;b++){e[k](this.items[b].clone())}return e};aJ.registerFont=function(d){if(!d.face){return d}this.fonts=this.fonts||{};var E={w:d.w,face:{},glyphs:{}},e=d.face["font-family"];for(var bI in d.face){if(d.face[ah](bI)){E.face[bI]=d.face[bI]}}if(this.fonts[e]){this.fonts[e][k](E)}else{this.fonts[e]=[E]}if(!d.svg){E.face["units-per-em"]=U(d.face["units-per-em"],10);for(var R in d.glyphs){if(d.glyphs[ah](R)){var S=d.glyphs[R];E.glyphs[R]={w:S.w,k:{},d:S.d&&"M"+S.d[bt](/[mlcxtrv]/g,function(bJ){return{l:"L",c:"C",x:"z",t:"m",r:"l",v:"c"}[bJ]||"M"})+"z"};if(S.k){for(var b in S.k){if(S[ah](b)){E.glyphs[R].k[b]=S.k[b]}}}}}}return d};a0.getFont=function(bJ,bK,d,E){E=E||"normal";d=d||"normal";bK=+bK||{normal:400,bold:700,lighter:300,bolder:800}[bK]||400;if(!aJ.fonts){return}var R=aJ.fonts[bJ];if(!R){var e=new RegExp("(^|\\s)"+bJ[bt](/[^\w\d\s+!~.:_-]/g,aQ)+"(\\s|$)","i");for(var b in aJ.fonts){if(aJ.fonts[ah](b)){if(e.test(b)){R=aJ.fonts[b];break}}}}var S;if(R){for(var bI=0,bL=R[t];bI<bL;bI++){S=R[bI];if(S.face["font-weight"]==bK&&(S.face["font-style"]==d||!S.face["font-style"])&&S.face["font-stretch"]==E){break}}}return S};a0.print=function(R,E,b,bJ,bK,bT,d){bT=bT||"middle";d=n(bj(d||0,1),-1);var bP=this.set(),bS=bD(b)[J](aQ),bQ=0,bN=aQ,bU;aJ.is(bJ,b)&&(bJ=this.getFont(bJ));if(bJ){bU=(bK||16)/bJ.face["units-per-em"];var e=bJ.face.bbox.split(a),bI=+e[0],bL=+e[1]+(bT=="baseline"?e[3]-e[1]+(+bJ.face.descent):(e[3]-e[1])/2);for(var bO=0,S=bS[t];bO<S;bO++){var bM=bO&&bJ.glyphs[bS[bO-1]]||{},bR=bJ.glyphs[bS[bO]];bQ+=bO?(bM.w||bJ.w)+(bM.k&&bM.k[bS[bO]]||0)+(bJ.w*d):0;bR&&bR.d&&bP[k](this.path(bR.d).attr({fill:"#000",stroke:"none",translation:[bQ,0]}))}bP.scale(bU,bU,bI,bL).translate(R-bI,E-bL)}return bP};aJ.format=function(d,e){var b=aJ.is(e,a8)?[0][bx](e):arguments;d&&aJ.is(d,ag)&&b[t]-1&&(d=d[bt](bo,function(R,E){return b[++E]==null?aQ:b[E]}));return d||aQ};aJ.ninja=function(){s.was?(aR.Raphael=s.is):delete Raphael;return aJ};aJ.el=bd;aJ.st=ai[bF];s.was?(aR.Raphael=aJ):(Raphael=aJ)})();SC.stringsFor("en-us",{monthHeading:"%@1 %@2",year:"%@",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",Jan:"Jan",Feb:"Feb",Mar:"Mar",Apr:"Apr",Jun:"Jun",Jul:"Jul",Aug:"Aug",Sep:"Sep",Oct:"Oct",Nov:"Nov",Dec:"Dec",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",Sun:"Sun",Mon:"Mon",Tue:"Tue",Wed:"Wed",Thu:"Thu",Fri:"Fri",Sat:"Sat",Yesterday:"Yesterday",Today:"Today",Tomorrow:"Tomorrow",Midnight:"Midnight",Now:"Now",Noon:"Noon",Next:"Next",Last:"Last",English:"English",French:"French",German:"German",Japanese:"Japanese","Button.OK":"OK","Button.Cancel":"Cancel","Button.Reload":"Reload","Button.Save":"Save","Button.Accept":"Accept","Button.Decline":"Decline","Button.Maybe":"Maybe","Button.TryAgain":"Try Again","Status.Loading":"Loading","Status.Sharing":"Sharing","Toolbar.Message.Actions":"Actions","Dialog.Error.Details":"Details","Color.Picker.Custom.Color":"Custom color"});CW.CANVAS_BUTTON_HEIGHT=26;CW.TOOLBAR_BUTTON_HEIGHT=26;CW.SQUARE_BUTTON_REGULAR_HEIGHT=27;CW.IOS_BUTTON_REGULAR_HEIGHT=30;CW.IOSMINI_BUTTON_REGULAR_HEIGHT=24;CW.IOSBIG_BUTTON_REGULAR_HEIGHT=46;CW.CAPSULE_BUTTON_REGULAR_HEIGHT=27;CW.SELECT_BUTTON_REGULAR_HEIGHT=27;CW.POPUP_BUTTON_REGULAR_HEIGHT=27;CW.SQUARE_BUTTON_REGULAR_MIN_WIDTH=68;CW.SQUARE_BUTTON_SMALL_MIN_WIDTH=56;CW.SQUARE_BUTTON_TINY_MIN_WIDTH=52;CW.CAPSULE_BUTTON_REGULAR_MIN_WIDTH=72;CW.CAPSULE_BUTTON_SMALL_MIN_WIDTH=60;CW.CAPSULE_BUTTON_TINY_MIN_WIDTH=52;CW.HELP_BUTTON_REGULAR_MIN_WIDTH=26;CW.HELP_BUTTON_SMALL_MIN_WIDTH=22;CW.HELP_BUTTON_TINY_MIN_WIDTH=18;CW.CHECKBOX_REGULAR_HEIGHT=18;CW.PROGRESS_REGULAR_HEIGHT=20;CW.PROGRESS_CAPSULE_HEIGHT=19;CW.PROGRESS_CAPSULE_ANIMATED_BACKGROUND_MATRIX=[171,19,31];CW.PROGRESS_REGULAR_OFFSETRANGE=32;CW.PROGRESS_CAPSULE_OFFSETRANGE=20;CW.TEXT_FIELD_SMALL_HEIGHT=18;CW.TEXT_FIELD_REGULAR_HEIGHT=22;CW.TEXT_FIELD_LARGE_HEIGHT=26;CW.TEXT_FIELD_LARGE_TALL_HEIGHT=31;CW.TEXT_FIELD_HUGE_HEIGHT=31;CW.SLIDER_REGULAR_HEIGHT=25;CW.DOCK_HEIGHT=46;CW.SOURCE_LIST_WIDTH=171;CW.TINY_CONTROL_SIZE=SC.TINY_CONTROL_SIZE;CW.SMALL_CONTROL_SIZE=SC.SMALL_CONTROL_SIZE;CW.REGULAR_CONTROL_SIZE=SC.REGULAR_CONTROL_SIZE;CW.LARGE_CONTROL_SIZE=SC.LARGE_CONTROL_SIZE;CW.LARGE_TALL_CONTROL_SIZE="me-large-tall-size";CW.XLARGE_CONTROL_SIZE=SC.HUGE_CONTROL_SIZE;CW.DropTarget={isDropTarget:YES,acceptsFileDrags:YES,dragStarted:function(b,a){},dragEntered:function(b,a){},dragUpdated:function(b,a){},dragExited:function(b,a){},dragEnded:function(b,a){},computeDragOperations:function(b,a){return SC.DRAG_NONE},acceptDragOperation:function(a,b){return YES},performDragOperation:function(a,b){return SC.DRAG_NONE},_isCurrentlyHovered:NO,renderMixin:function(a,b){if(b&&SC.browser.isWebkit&&this.get("acceptsFileDrags")){a.push('<div class="cw-drop-target-container"><input class="cw-drop-target-file" type="file" multiple="multiple"></div>')}},didCreateLayer:function(b){b();if(!this.get("acceptsFileDrags")){return}var c=this.$().children(".cw-drop-target-container").children()[0]||null;if(SC.browser.isWebkit&&c){SC.Event.add(c,"change",this,this._handleDrop)}else{if(SC.browser.mozilla){var a=this.get("layer");SC.Event.add(a,"drop",this,this._handleDrop)}}}.enhance(),_changeFileElementClickability:function(a){if(SC.browser.isWebkit&&this.get("acceptsFileDrags")){var b=this.$().children(".cw-drop-target-container").children()[0]||null;var c=(a)?"block":"none";if(b&&c!==b.style.display){b.style.display=c}}},_handleDragEnter:function(a){if(SC.browser.isWebkit){if(!(a&&a.target&&a.target.className&&a.target.className.indexOf&&a.target.className.indexOf("cw-drop-target-file")>-1)){this._isCurrentlyHovered=YES;return}}var b=a.dragOperation;if(this._isFileEvent(a)){this._changeFileElementClickability(YES)}if(this.computeDragOperations(b,a)|SC.DRAG_DATA){this.dragEntered(b,a);this._isCurrentlyHovered=YES}},_handleDragOver:function(a){var b=a.dragOperation;if(this._isFileEvent(a)){this._changeFileElementClickability(YES)}if(this.computeDragOperations(b,a)|SC.DRAG_DATA){if(this._isCurrentlyHovered){this.dragUpdated(b,a)}else{this.dragEntered(b,a);this._isCurrentlyHovered=YES}}},_handleDrop:function(a){var c=a.dragOperation;if(!c){c=this._dragOperationForEvent(a)}this._changeFileElementClickability(NO);if(this.acceptDragOperation(c,SC.DRAG_DATA)){var b=a.dataTransfer.files;if(b&&b.length>0){c.data=b}this.performDragOperation(c,SC.DRAG_DATA)}},_handleDragExit:function(a){if(SC.browser.isWebkit){if(!(a&&a.target&&a.target.className&&a.target.className.indexOf&&a.target.className.indexOf("cw-drop-target-file")>-1)){return}}var c=a.dragOperation;var b=a.originalEvent.target;if(b.type&&b.type==="file"){this._changeFileElementClickability(NO)}this.dragExited(c,a)},_isFileEvent:function(c){var e=c.dataTransfer;if(e){var d=e.types;for(var b=0,a=d.length;b<a;++b){if(d[b]==="Files"){return YES}}}return NO},_notifyTargetViewsOfEvent:function(d,a){var b=SC.RootResponder.responder;var c=b.targetViewForEvent(a);if(!this._isFileEvent(a)){a.allowDefault()}else{a.stopPropagation();a.preventDefault()}a.dragOperation=this._dragOperationForEvent(a,c);return b.sendEvent(d,a,c)},_dragOperation:null,_dragOperationForEvent:function(a,b){var d=CW.DropTarget._dragOperation;if(d){return d}var c=SC.Drag.start({event:a,source:b,ghost:NO,slideBack:NO,sourceIsDraggable:NO});CW.DropTarget._dragOperation=c;return c},_dragEndedOnDropTargets:function(d,f){f=d.dragOperation||f;if(!f){return}var e=f._dropTargets();for(var b=0,a=e.length;b<a;b++){var c=e[b];c.tryToPerform("dragEnded",this,d);if(c&&c.get("acceptsFileDrags")){c._isCurrentlyHovered=NO;c._changeFileElementClickability(NO);if(SC.browser.isWebkit&&c.isVisibleInWindow){c.$(".cw-drop-target-file")[0].value=null}}}CW.DropTarget._dragOperation=null}};SC.RootResponder.reopen({init:function(a){a();if(!SC.browser.isIE){this.listenFor("dragenter dragover dragleave drop".w(),document,null,true)}}.enhance(),_dropTargetViewForEvent:function(a){var b=this.targetViewForEvent(a);while(YES){if(SC.none(b)||b.isDropTarget){return b}else{b=b.get("parentView")}}},dragenter:function(a){this.set("_lastDragEnterTarget",a.target);this._setupDragOverTimer(a);if(SC.browser.isMozilla){var b=this._lastEvent;this._lastEvent=a;if(b){if(this._dropTargetViewForEvent(a)===this._dropTargetViewForEvent(b)){return}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragExit",b)}}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragEnter",a)}}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragEnter",a)}},_setupDragOverTimer:function(a){var b=this.get("_dragOverTimer");this.set("_lastDragOverEvent",a);if(b){b.invalidate()}b=SC.Timer.schedule({target:this,action:function(){var c=this.get("_lastDragOverEvent");if(c){this._lastEvent=undefined;CW.DropTarget._dragEndedOnDropTargets(c)}},interval:500,repeats:NO});this.set("_dragOverTimer",b)},dragover:function(a){this._setupDragOverTimer(a);CW.DropTarget._notifyTargetViewsOfEvent("_handleDragOver",a)},dragleave:function(a){if(SC.browser.isMozilla){var b=this._lastEvent;this._lastEvent=a;if(b){if(this._dropTargetViewForEvent(b)===this._dropTargetViewForEvent(a)){return}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragEnter",b)}}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragExit",a)}}else{CW.DropTarget._notifyTargetViewsOfEvent("_handleDragExit",a)}},drop:function(a){if(CW.DropTarget.eliminateDoubleDrops){if(CW.DropTarget._droppedRecently){return}CW.DropTarget._droppedRecently=YES;setTimeout(function(){CW.DropTarget._droppedRecently=undefined},1000)}var b=CW.DropTarget._notifyTargetViewsOfEvent("_handleDrop",a);if(!b){CW.DropTarget._dragEndedOnDropTargets(a)}}});CW.AlertPaneListItemView=SC.View.extend(SC.Control,SC.StaticLayout,{useStaticLayout:YES,layout:{height:45},childViews:["message","label"],message:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,layout:{top:8,height:"auto"},escapeHTML:NO,controlSize:SC.TINY_CONTROL_SIZE,classNames:["message"],valueBinding:"*owner.content.message"}),label:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,controlSize:SC.TINY_CONTROL_SIZE,classNames:["label"],layout:{top:10,height:"auto"},valueBinding:"*owner.content.label"})});sc_require("panes/list_item");CW.AlertPaneDetailView=SC.StackedView.extend({layout:{left:0,top:0,right:0,bottom:0},isSelectable:NO,classNames:"alert-pane-list".w(),exampleView:CW.AlertPaneListItemView,contentBinding:"*parentView.owner.pane.alertDetails"});CW.ScrollerView=SC.ScrollerView.extend({hasButtons:YES,scrollbarThickness:14,capLength:16,capOverlap:10,buttonLength:37,buttonOverlap:6});SC.mixin(SC.ScrollView.prototype,{horizontalScrollerView:CW.ScrollerView,verticalScrollerView:CW.ScrollerView});sc_require("views/scroller");CW.CaplessMiniScrollerView=CW.ScrollerView.extend({hasButtons:NO,classNames:"me-capless-mini-scroller-view",capLength:0,capOverlap:0,buttonLength:0,buttonOverlap:0,scrollbarThickness:8});sc_require("panes/alert_pane_detail");sc_require("views/capless_mini_scroller");CW.BUTTON1_STATUS="button1";CW.BUTTON2_STATUS="button2";CW.BUTTON3_STATUS="button3";CW.ACTIONABLE_VIEW_ELEM_CHECKBOX="checkbox";CW.ACTIONABLE_VIEW_ELEM_ONE_TEXTFIELD="oneTextField";CW.ACTIONABLE_VIEW_ELEM_TWO_TEXTFIELDS="twoTextField";CW.DETAIL_VIEW_MAX_HEIGHT=143;CW.AlertPane=SC.PanelPane.extend({classNames:"me-alert",theme:"atv3",delegate:null,shouldEscapeHTML:YES,showDetails:NO,alertDetails:null,detailView:CW.AlertPaneDetailView,icon:"sc-icon-alert-48",buttonOne:SC.outlet("contentView.mainActionButtons.okButton"),buttonTwo:SC.outlet("contentView.mainActionButtons.cancelButton"),buttonThree:SC.outlet("contentView.extraActionButton.button"),buttonThreeWrapper:SC.outlet("contentView.extraActionButton"),checkbox:SC.outlet("contentView.info.checkbox"),textField:SC.outlet("contentView.info.textfield.textfieldContent"),textField1:SC.outlet("contentView.info.textfields.left.textfield1Content"),textField2:SC.outlet("contentView.info.textfields.right.textfield2Content"),layout:{top:0.3,centerX:0,width:500},isExtraButtonCancel:null,contentView:SC.View.extend({useStaticLayout:YES,layout:{left:0,right:0,top:0,height:"auto"},childViews:["info","separator","mainActionButtons","extraActionButton"],info:SC.View.extend(SC.StaticLayout,{useStaticLayout:YES,layout:{top:0,left:0,right:460,height:"auto"},classNames:["info"],render:function(a,d){var c=this.get("pane"),b=SC.BLANK_IMAGE_URL;if(d&&c.get("icon")!=="blank"){a.push('<img src="'+b+'" class="icon '+c.get("icon")+'" />')}a.addClass("show-"+c.get("icon"));arguments.callee.base.apply(this,arguments)},childViews:["title","description","detailDisclosure","detail","caption","checkbox","textfield","textfields"],title:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["title-label"],layout:{top:0,left:0,right:0,height:"auto"},tagName:"h1",valueBinding:"*owner.pane.message",escapeHTMLBinding:"*owner.pane.shouldEscapeHTML"}),description:SC.LabelView.design(SC.StaticLayout,{classNames:["description"],useStaticLayout:YES,layout:{top:0,left:0,right:0,height:"auto"},valueBinding:"*owner.pane.description",escapeHTMLBinding:"*owner.pane.shouldEscapeHTML"}),detailDisclosure:SC.DisclosureView.design(SC.StaticLayout,{useStaticLayout:YES,isEnabled:YES,value:NO,layout:{height:15},title:"Dialog.Error.Details".loc(),isVisibleBinding:"*owner.pane.showDetails"}),detail:SC.WellView.design(SC.StaticLayout,{isVisibleBinding:"*owner.detailDisclosure.value",useStaticLayout:YES,layout:{top:0,left:0,right:0,height:CW.DETAIL_VIEW_MAX_HEIGHT},contentLayout:{top:1,left:0,right:0,bottom:2},classNames:"detail".w(),contentView:SC.ScrollView.design({verticalScrollerView:CW.CaplessMiniScrollerView,verticalScrollerLayout:{top:2,right:4,bottom:2},hasHorizontalScroller:NO,hasVerticalScroller:YES,layout:{left:0,top:0,right:0,bottom:0},contentView:function(){var a=this.getPath("owner.pane.detailView");if(SC.typeOf(a)===SC.T_CLASS){a=a.create();this.setPath("owner.pane.detailView",a)}return a}.property()}),detailVisibleDidChange:function(){var a=this.parentView.parentView.parentView;if(a){var b=a.get("layout").height+(this.get("isVisible")?-1:1)*CW.DETAIL_VIEW_MAX_HEIGHT;a.adjust({height:b}).updateLayout()}}.observes("*owner.detailDisclosure.value")}),caption:SC.LabelView.extend(SC.StaticLayout,{useStaticLayout:YES,classNames:["caption"],layout:{top:0,left:0,right:0,height:"auto"},escapeHTMLBinding:"*owner.pane.shouldEscapeHTML",init:function(){var a=this.get("pane").get("caption");if(a===null||a===""){this.set("isVisible",NO)}this.set("value",a);arguments.callee.base.apply(this,arguments)}}),checkbox:SC.CheckboxView.design(SC.StaticLayout,{useStaticLayout:YES,layout:{top:0,left:-1,right:0,height:"auto"},classNames:["checkbox"],valueBinding:"*owner.pane.checkboxValue",titleBinding:"*owner.pane.checkboxTitle",isVisibleBinding:"*owner.pane.checkboxVisible"}),textfield:SC.View.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["one-textfield"],layout:{top:0,left:0,right:0,height:"auto"},isVisibleBinding:"*owner.pane.textFieldVisible",childViews:["textfieldLabel","textfieldContent"],textfieldLabel:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["me-dialog-label"],fontWeight:SC.BOLD_WEIGHT,layout:{top:0,left:0,right:0,height:15},valueBinding:"*owner.pane.textFieldLabel"}),textfieldContent:SC.TextFieldView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["textfield"],layout:{top:0,left:0,right:0,height:22},valueBinding:"*owner.pane.textFieldValue"})}),textfields:SC.View.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["two-textfield"],layout:{top:0,left:0,right:0,height:"auto"},isVisibleBinding:"*owner.pane.textFieldsVisible",childViews:["left","right"],left:SC.View.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["left-half"],layout:{top:0,height:"auto"},tagName:"span",childViews:["textfield1Label","textfield1Content"],textfield1Label:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["me-dialog-label"],fontWeight:SC.BOLD_WEIGHT,layout:{top:0,left:0,right:0,height:15},valueBinding:"*owner.pane.textField1Label"}),textfield1Content:SC.TextFieldView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["textfield"],layout:{top:0,left:0,right:0,height:22},valueBinding:"*owner.pane.textField1Value"})}),right:SC.View.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["right-half"],layout:{top:0,height:"auto"},tagName:"span",childViews:["textfield2Label","textfield2Content"],textfield2Label:SC.LabelView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["me-dialog-label"],fontWeight:SC.BOLD_WEIGHT,layout:{top:0,left:0,right:0,height:15},valueBinding:"*owner.pane.textField2Label"}),textfield2Content:SC.TextFieldView.design(SC.StaticLayout,{useStaticLayout:YES,classNames:["textfield"],layout:{top:0,left:0,right:0,height:22},isPassword:YES,valueBinding:"*owner.pane.textField2Value"})})})}),separator:SC.View.design({classNames:["separator"],layout:{bottom:51,height:2,right:15,left:15}}),mainActionButtons:SC.View.design({layout:{bottom:10,height:CW.SQUARE_BUTTON_REGULAR_HEIGHT,right:18,left:18},childViews:["cancelButton","okButton"],classNames:["text-align-right"],cancelButton:SC.ButtonView.design({useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:CW.CAPSULE_BUTTON_REGULAR_MIN_WIDTH,layout:{right:5,height:"auto",width:"auto",bottom:0},themeName:"capsule",title:"Cancel",isCancel:YES,isCancelBinding:SC.Binding.not("*parentView.owner.pane.isExtraButtonCancel"),action:"dismiss",isVisible:NO,_notifyDidAppendToDocument:function(){arguments.callee.base.apply(this,arguments);this.set("isCancel",!this.getPath("parentView.owner.pane.isExtraButtonCancel"))}}),okButton:SC.ButtonView.extend({useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:CW.CAPSULE_BUTTON_REGULAR_MIN_WIDTH,layout:{left:0,height:"auto",width:"auto",bottom:0},themeName:"capsule",title:"OK",isDefault:YES,action:"dismiss"})}),extraActionButton:SC.View.design({layout:{bottom:10,height:CW.SQUARE_BUTTON_REGULAR_HEIGHT,left:18,width:150},isVisible:NO,childViews:["button"],button:SC.ButtonView.design({useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:CW.CAPSULE_BUTTON_REGULAR_MIN_WIDTH,layout:{left:0,height:"auto",width:"auto",bottom:0},themeName:"capsule",title:"Extra",isCancel:NO,isCancelBinding:"*parentView.owner.pane.isExtraButtonCancel",action:"dismiss",isVisible:NO,_notifyDidAppendToDocument:function(){arguments.callee.base.apply(this,arguments);this.set("isCancel",this.getPath("parentView.owner.pane.isExtraButtonCancel"))}})})}),dismiss:function(b){var a=this.delegate;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b.get("actionKey"))}if(b.get("theme")!="help"){this.set("checkboxValue",this.get("checkbox").value);this.set("textFieldValue",this.get("textField").value);this.set("textField1Value",this.get("textField1").value);this.set("textField2Value",this.get("textField2").value);this.remove()}}});CW.AlertPane._normalizeArguments=function(b){b=SC.A(b);var a=b.length,c=b[a-1];if(SC.typeOf(c)!==SC.T_STRING){b[a-1]=null}else{c=null}b[11]=c;return b};CW.AlertPane.show=function(p,A,F,g,b,n,q,d,h,E,z,D,y){var f=!y?this._normalizeArguments(arguments):arguments;var x,j,m,w,k,v,o,B;var C=YES,u=NO,r=NO,t=NO;if(g!==null&&g!==CW.ACTIONABLE_VIEW_ELEM_CHECKBOX&&g!==CW.ACTIONABLE_VIEW_ELEM_ONE_TEXTFIELD&&g!==CW.ACTIONABLE_VIEW_ELEM_TWO_TEXTFIELDS){SC.error("Extra element must be either of the following three values: CW.ACTIONABLE_VIEW_ELEM_CHECKBOX, CW.ACTIONABLE_VIEW_ELEM_ONE_TEXTFIELD, CW.ACTIONABLE_VIEW_ELEM_TWO_TEXTFIELDS")}if(g!==null&&b===null){SC.error("Please provide the element details when you want the display a checkbox or text field(s) in the alert pane.")}if(b!==null){if(g===CW.ACTIONABLE_VIEW_ELEM_CHECKBOX){x=b[0];j=b[1];u=YES}else{if(g===CW.ACTIONABLE_VIEW_ELEM_ONE_TEXTFIELD){m=b[0];w=b[1];r=YES}else{if(g===CW.ACTIONABLE_VIEW_ELEM_TWO_TEXTFIELDS){k=b[0];v=b[1];o=b[2];B=b[3];t=YES}}}}var H={message:f[0]||"",description:f[1]||null,caption:f[2]||null,checkboxVisible:u,checkboxTitle:x,checkboxValue:j,textFieldVisible:r,textFieldLabel:m,textFieldValue:w,textField1Label:k,textField1Value:v,textFieldsVisible:t,textField2Label:o,textField2Value:B,icon:f[8]||"sc-icon-alert-48",showDetails:SC.none(f[9])?NO:YES,alertDetails:!SC.kindOf(f[9],SC.View)?f[9]:null,shouldEscapeHTML:f[10]!==NO?YES:NO,delegate:f[11],isExtraButtonCancel:f[12]||NO};if(SC.kindOf(f[9],SC.View)){H.detailView=f[9]}H=this.create(H);var c="buttonOne buttonTwo buttonThree".w(),a,I,e=97;for(var s=0;s<3;s++){a=H.get(c[s]);I=f[s+5];if(I){a.set("title",I).set("isVisible",YES);if(s==2){if(I=="?"){a.set("title","").set("theme","help").set("titleMinWidth",CW.HELP_BUTTON_REGULAR_MIN_WIDTH)}H.get("buttonThreeWrapper").set("isVisible",YES)}}}var G=H.append();SC.RunLoop.begin();G.awake();SC.RunLoop.end();if(H.get("buttonThreeWrapper").get("isVisible")){H.get("buttonThreeWrapper").adjust({width:H.get(c[2]).$().width()+16})}e+=H.get(c[0]).$().width()+H.get(c[1]).$().width()+H.get(c[2]).$().width();if(e>H.get("layout").width){H.adjust("width",e);H.updateLayout()}H.adjust("height",H.childViews[0].$().height());H.updateLayout();return G};CW.AlertPane.warn=function(k,g,h,c,f,a,b,j,e){var d=this._normalizeArguments(arguments);d[8]="me-icon-alert-67";return this.show.apply(this,d)};CW.AlertPane.info=function(k,g,h,c,f,a,b,j,e){var d=this._normalizeArguments(arguments);d[8]="me-icon-info-67";return this.show.apply(this,d)};CW.AlertPane.plain=function(o,j,m,e,h,c,d,n,b,a,k,g){var f=this._normalizeArguments(arguments);f[8]="blank";return this.show.apply(this,f)};CW.AlertPane.detail=function(p,k,n,e,j,c,d,o,b,a,m,g){var f=this._normalizeArguments(arguments),h=f[8];if(!h||(h&&!h.length)){f[8]="me-icon-info-67"}return this.show.apply(this,f)};CW.AlertPane.plainWithExtraButtonCancel=function(o,j,m,e,h,c,d,n,b,a,k,g){var f=this._normalizeArguments(arguments);f[8]="blank";f[12]=YES;return this.show.apply(this,f)};CW.COMMIT="Commit";CW.DISCARD="Discard";CW.ColorPickerPane=SC.PickerPane.extend({classNames:"sc-menu color-picker".w(),_h:0,_s:1,_v:1,POINTER_CANVAS:1,SLIDER_CANVAS:2,selectedColor:"",displayProperties:["selectedColor"],colorCanvas:"",showButtons:NO,delegate:null,layout:{width:186,height:225},colorPointer:SC.outlet("contentView.colorBoxView.colorBackgroundView.colorPointerView"),colorSlider:SC.outlet("contentView.colorBoxView.colorBackgroundView.colorSliderView"),render:function(d,h){arguments.callee.base.apply(this,arguments);if(h){if(this.showButtons){return}var f=this.get("objects"),b=this.get("selectedColor");var g=0,a=f.length,e=Math.ceil(156/a);var c=this.getPath("contentView.swatchView");f.forEach(function(k){if(k){var j=SC.View.create({layout:{left:g,top:0,height:26},backgroundColor:k,classNames:["color-swatch-default"],render:function(m,n){if(this.get("backgroundColor")===b){m.begin("div").addClass("color-swatch-selected").end()}arguments.callee.base.apply(this,arguments)},eventManager:0,viewClicked:"",mouseDown:function(m){if(this.get("eventManager")===0){this.set("eventManager",1);this.viewClicked=m.target;var n=this.viewClicked,o=n.className;n.className=o.replace("color-swatch-default","color-swatch-pressed")}return YES},touchStart:function(m){return this.mouseDown(m)},mouseUp:function(n){var m=this.getPath("parentView.parentView.parentView");var o=this.get("eventManager");if(o===1||o===3){m.set("selectedColor",this.get("backgroundColor"));m.commitAndDismiss()}if(this.get("eventManager")>0){this.set("eventManager",0)}return YES},touchEnd:function(m){return this.mouseUp(m)},mouseEntered:function(m){if(this.get("eventManager")===2){this.set("eventManager",3);var n=this.viewClicked,o=n.className;n.className=o.replace("color-swatch-default","color-swatch-pressed")}return YES},mouseExited:function(m){if(this.get("eventManager")===1||this.get("eventManager")===3){this.set("eventManager",2);var n=this.viewClicked,o=n.className;n.className=o.replace("color-swatch-pressed","color-swatch-default")}return YES}});c.appendChild(j);g+=e+2}})}},init:function(){arguments.callee.base.apply(this,arguments);var e=this.get("objects"),a=this.get("selectedColor");this.set("_originalColor",a);var g=this.get("pane"),d=YES,f=this.get("contentView"),b=this.getPath("contentView.colorBoxView"),c=this.getPath("contentView.customColorLabelView");if(this.showButtons){b.set("isVisible",YES);c.set("isVisible",NO);f.generateButtons();b.adjust({top:7});g.adjust({height:217}).updateLayout()}else{e.forEach(function(h){if(h===a){d=NO;b.set("isVisible",NO);c.set("isVisible",YES);g.adjust({height:61}).updateLayout()}});if(d){b.set("isVisible",YES);c.set("isVisible",NO);g.adjust({height:215}).updateLayout()}}this.initColor(a)},contentView:SC.View.extend({layout:{left:3,right:3,top:3,bottom:3},childViews:["swatchView","customColorLabelView","colorBoxView"],swatchView:SC.View.design({layout:{top:4,left:6,width:168,height:26}}),customColorLabelView:SC.LabelView.design({tagName:"a",layout:{bottom:5,left:0,height:18,width:179},value:"Color.Picker.Custom.Color",localize:YES,fontWeight:SC.BOLD_WEIGHT,controlSize:SC.SMALL_CONTROL_SIZE,classNames:["custom-color-switcher-label"],textAlign:"center",isVisible:NO,mouseDown:function(){var b=this.get("pane");var a=this.getPath("parentView.colorBoxView");a.set("isVisible",YES);this.set("isVisible",NO);b.adjust({height:215}).updateLayout();b.positionPane();return true},touchStart:function(a){return this.mouseDown(a)}}),colorBoxView:SC.View.design({childViews:["selectedColorView","colorCanvasView","colorBackgroundView"],layout:{top:35,left:0,width:185,height:171},isVisible:YES,selectedColorView:SC.View.design({wantsAcceleratedLayer:YES,classNames:"color_selected".w(),layout:{top:0,left:7,width:166,height:24},render:function(a,c){var b=this.get("pane");a.addStyle({backgroundColor:b.get("selectedColor")})}}),colorCanvasView:SC.View.design({wantsAcceleratedLayer:YES,classNames:"color_canvas".w(),layout:{top:34,left:7,width:132,height:132},render:function(a,c){var b=this.get("pane");a.addStyle({backgroundColor:b.get("colorCanvas")})}}),colorBackgroundView:SC.View.design({wantsAcceleratedLayer:YES,layout:{top:0,left:7,width:168,height:166},classNames:"color-picker-background".w(),childViews:"colorPointerView colorSliderView".w(),colorPointerView:SC.View.design({wantsAcceleratedLayer:YES,layout:{width:11,height:11},classNames:"color-picker-pointer".w()}),colorSliderView:SC.View.design({wantsAcceleratedLayer:YES,layout:{right:-2,width:32,height:11},classNames:"color-picker-slider".w()})})}),generateButtons:function(){var b=this.get("pane");if(b.get("showButtons")){var a=SC.View.create({layout:{bottom:7,height:22,right:7,width:166},classNames:["text-align-right"],childViews:["cancelButtonView","okButtonView"],cancelButtonView:SC.ButtonView.design({useStaticLayout:YES,layout:{top:0,height:22,width:"auto",left:0},title:"Button.Cancel",localize:YES,controlSize:SC.SMALL_CONTROL_SIZE,titleMinWidth:CW.SQUARE_BUTTON_SMALL_MIN_WIDTH,isCancel:YES,action:"discardAndDismiss",actionKey:CW.DISCARD}),okButtonView:SC.ButtonView.design({useStaticLayout:YES,layout:{top:0,height:22,width:"auto",left:2},title:"Button.OK",localize:YES,controlSize:SC.SMALL_CONTROL_SIZE,titleMinWidth:CW.SQUARE_BUTTON_SMALL_MIN_WIDTH,isDefault:YES,action:"dismissPane",actionKey:CW.COMMIT})});this.appendChild(a)}return}}),mouseDown:function(a){if(this.clickedOnCustomColorSwatch(a)){this.commitAndDismiss()}else{this._canvas=this.clickPositionOnColorCanvas(a);switch(this._canvas){case this.POINTER_CANVAS:this.calculatePointerPosition();break;case this.SLIDER_CANVAS:this.calculateSliderPosition();break;default:}}return YES},touchStart:function(a){return this.mouseDown(a)},mouseUp:function(a){this._canvas=0;return YES},touchEnd:function(a){return this.mouseUp(a)},mouseDragged:function(a){this.calculateClickEventPosition(a);switch(this._canvas){case this.POINTER_CANVAS:this.calculatePointerPosition();break;case this.SLIDER_CANVAS:this.calculateSliderPosition();break;default:}return YES},modalPaneDidClick:function(a){var b=this.get("frame");if(!this.clickInside(b,a)){this.commitAndDismiss()}return YES},performKeyEquivalent:function(b,a){switch(b){case"tab":case"shift_tab":this.commitAndDismiss(b);return YES;case"escape":this.discardAndDismiss(b);return YES;case"return":this.commitAndDismiss(b);return YES;default:return NO}},clickedOnCustomColorSwatch:function(b){var c=this.getPath("contentView.colorBoxView");if(!c||!c.get("isVisible")){return NO}var e=this.get("frame"),d=e.x+11,f=e.y+(this.get("showButtons")?12:40),a=b.pageX-d,g=b.pageY-f;if(a>=0&&a<166&&g>=0&&g<24){return YES}return NO},clickPositionOnColorCanvas:function(b){this.calculateClickEventPosition(b);var a=this._x,d=this._y,c=0;if(a>=0&&a<132&&d>=0&&d<132){c=this.POINTER_CANVAS}else{if(a>=136&&a<=167&&d>=-5&&d<132){c=this.SLIDER_CANVAS}}return c},calculateClickEventPosition:function(b){if(!this._frameCache){this._frameCache=this.get("frame")}var d=this._frameCache,c=d.x+13,e=d.y+(this.get("showButtons")?46:75),a=b.pageX-c,f=b.pageY-e;this._x=a;this._y=f},calculatePointerPosition:function(){var c=this._s,b=this._v,a=this._x,d=this._y;a-=3;d-=3;a=Math.max(Math.min(a,121),0);d=Math.max(Math.min(d,121),0);this.get("colorPointer").adjust({left:a,top:d+34});this._s=a/124;this._v=(124-d)/124;if(c!=this._s||b!=this._v){this.set("selectedColor",SC.convertHsvToHex(this._h,this._s,this._v))}},calculateSliderPosition:function(){var a=this._h,b=Math.max(Math.min(this._y,131),0);this.get("colorSlider").adjust({top:b+29});this._h=b/131;if(a!=this._h){this.set("colorCanvas",SC.convertHsvToHex(this._h,1,1));this.set("selectedColor",SC.convertHsvToHex(this._h,this._s,this._v))}},dismissPane:function(b){var a=this.delegate;if(a&&a.colorPickerPaneDidDismiss){a.colorPickerPaneDidDismiss(this,b.get("actionKey"))}this.remove()},commitAndDismiss:function(b){this.remove();var a=this.delegate;if(a&&a.colorPickerPaneDidDismiss){a.colorPickerPaneDidDismiss(this,CW.COMMIT,b)}},discardAndDismiss:function(){this.remove();var a=this.delegate;if(a&&a.colorPickerPaneDidDismiss){this.set("selectedColor",this.get("_originalColor"));a.colorPickerPaneDidDismiss(this,CW.DISCARD)}},selectedColorDidChange:function(){var b=this.getPath("contentView.colorBoxView.selectedColorView");if(b){b.displayDidChange()}var a=this.delegate;if(a&&a.pointerMovedOnCustomColorCanvas){a.pointerMovedOnCustomColorCanvas(this)}}.observes("selectedColor"),colorCanvasDidChange:function(){var a=this.getPath("contentView.colorBoxView.colorCanvasView");if(a){a.displayDidChange()}}.observes("colorCanvas"),initColor:function(b){var d=SC.convertHexToHsv(b),c=d[0],k=d[1],j=d[2],a=SC.convertHsvToHex(c,1,1),g=Math.round(121*k),f=Math.round(124*(1-j)),e=Math.round(131*c);this.set("colorCanvas",a||"");this.set("_h",c||"");this.set("_s",k||"");this.set("_v",j||"");this.get("colorPointer").adjust({left:g,top:f+34});this.get("colorSlider").adjust({top:e+29})}});CW.ErrorPicker=SC.PickerPane.extend({layout:{left:0,top:0,height:15,right:0,minWidth:36},classNames:["error-picker"],errorText:"Please fill in required info",pointerOffset:[10,20,-17,19],preferType:SC.PICKER_POINTER,acceptsKeyPane:NO,acceptsFirstResponder:NO,isModal:NO,contentView:SC.LabelView.extend({layout:{width:192,bottom:0,top:0,minWidth:36},classNames:["error-picker-label"],valueBinding:"*parentView.errorText",textAlign:SC.ALIGN_CENTER,controlSize:SC.SMALL_CONTROL_SIZE,render:function(b,f){arguments.callee.base.apply(this,arguments);var d=this.get("parentView"),a=d.layout.height||26,c;var e=this.getPath("parentView.classNames").toString().replace(/,/g," ")+" "+this.get("classNames").toString().replace(/,/g," ")+" sc-small-size";c=this.getViewWidth(a,this.get("value"),e)+1;this.adjust({width:c}).updateLayout();d.adjust({width:c-46}).updateLayout();d.positionPane()},getViewWidth:function(a,b,e){var c=document.createElement("div");c.style.cssText="height: %@px; top:-10000px; left: -10000px; position: absolute; text-wrap: normal; word-wrap: break-word;".fmt(a);c.className=e;c.innerHTML=b;document.body.appendChild(c);var d=c.offsetWidth;document.body.removeChild(c);return d}}),preferMatrix:[2,3,2,2,2],render:function(b,d){var a=this.get("pointerPos");if(b.needsContent){this.renderChildViews(b,d);b.push("<div class='top-left-edge'></div>","<div class='top-edge'></div>","<div class='top-right-edge'></div>");if(a.indexOf(SC.POINTER_LAYOUT[2])!==-1){b.push('<div class="top-middle-edge" style="margin-top: '+this.get("pointerPosY")+'px"></div>')}else{if(a.indexOf(SC.POINTER_LAYOUT[3])!==-1){b.push('<div class="bottom-middle-edge" style="margin-top: '+this.get("pointerPosY")+'px"></div>')}}}else{var c=this.$(".sc-pointer");if(a===SC.POINTER_LAYOUT[2]){c.attr("class","top-middle-edge");c.attr("style","margin-top: "+this.get("pointerPosY")+"px")}else{if(a===SC.POINTER_LAYOUT[3]){c.attr("class","bottom-middle-edge");c.attr("style","margin-top: "+this.get("pointerPosY")+"px")}}}b.addClass(a)}});CW.ErrorPicker.showError=function(a,b){var c=this.create({errorText:b});c.popup(a,SC.PICKER_POINTER);return c};CW.BottomPaneView=SC.View.extend(SC.StaticLayout,{useStaticLayout:NO,childViews:["leftView","rightView"],buttonOne:SC.outlet("rightView.okButton"),buttonTwo:SC.outlet("rightView.cancelButton"),buttonThree:SC.outlet("leftView.extraButton"),leftButtonsContainerWidth:null,rightButtonsContainerWidth:null,leftViewLayout:function(){return{bottom:1,height:26,width:this.get("leftButtonsContainerWidth"),left:8}}.property("leftButtonsContainerWidth").cacheable(),rightViewLayout:function(){return{bottom:1,height:26,width:this.get("rightButtonsContainerWidth"),right:8}}.property("rightButtonsContainerWidth").cacheable(),delegate:null,action:null,buttonOneHash:{useStaticLayout:YES,actionKey:SC.BUTTON1_STATUS,localize:YES,titleMinWidth:CW.SQUARE_BUTTON_REGULAR_MIN_WIDTH,layout:{right:0,height:"auto",width:"auto",bottom:0},title:"Button.OK",icon:null,action:"dismiss",isDefault:YES},buttonTwoHash:{useStaticLayout:YES,actionKey:SC.BUTTON2_STATUS,localize:YES,titleMinWidth:CW.SQUARE_BUTTON_REGULAR_MIN_WIDTH,layout:{right:5,height:"auto",width:"auto",bottom:0},title:"Button.Cancel",icon:null,action:"dismiss",isVisible:YES,isCancel:YES},buttonThreeHash:{useStaticLayout:YES,actionKey:SC.BUTTON3_STATUS,localize:YES,titleMinWidth:CW.SQUARE_BUTTON_REGULAR_MIN_WIDTH,layout:{left:0,height:"auto",width:"auto",bottom:0},title:"Extra",icon:null,action:"dismiss",isVisible:NO},rightView:SC.View.extend({layoutBinding:"*owner.rightViewLayout",classNames:["text-align-right"],buttonOneHashBinding:"*parentView.buttonOneHash",buttonTwoHashBinding:"*parentView.buttonTwoHash",cancelButton:SC.ButtonView.extend(),okButton:SC.ButtonView.extend(),buttonHashObserver:function(){var b,a;b=this.okButton=SC.ButtonView.create(this.get("buttonOneHash"));a=this.cancelButton=SC.ButtonView.create(this.get("buttonTwoHash"));this.replaceAllChildren([a,b])}.observes("buttonOneHash","buttonTwoHash")}),leftView:SC.View.extend({layoutBinding:"*owner.leftViewLayout",classNames:["text-align-left"],isVisible:YES,buttonThreeHashBinding:"*parentView.buttonThreeHash",extraButton:SC.ButtonView.extend(),buttonHashObserver:function(){var a;a=this.extraButton=SC.ButtonView.create(this.get("buttonThreeHash"));this.replaceAllChildren([a])}.observes("buttonThreeHash")})});CW.FallOffScrollView=SC.ScrollView.extend({fallOffWidth:null,fallOffSize:SC.REGULAR_CONTROL_SIZE,classNames:["falloff-scroll"],showGradientOnlyIfScrollerVisible:NO,scrollerViewOffset:function(){return(this.get("isVerticalScrollerVisible")&&!this.get("verticalOverlay"))?this.getPath("verticalScrollerView.scrollbarThickness"):0}.property("isVerticalScrollerVisible"),applyScrollerViewOffset:function(){var c=this._falloffTop,a=this._falloffBottom;if(!SC.none(this.get("falloffWidth"))||!(c&&a)){return}var b=this._cssHash||(this._cssHash={});b.right=this.get("scrollerViewOffset");c.css(b);a.css(b)}.observes("scrollerViewOffset"),calculateFalloffVisibility:function(){var a,b,c=this.get("verticalScrollOffset"),d=this.get("maximumVerticalScrollOffset");if(!this.get("isVerticalScrollerVisible")&&this.get("showGradientOnlyIfScrollerVisible")){a=NO;b=NO}else{a=c!==0;b=c!==d}this.setIfChanged("showingTopFalloff",a);this.setIfChanged("showingBottomFalloff",b)},_calculateFalloffVisibilityOnce:function(){this.invokeOnce(this.calculateFalloffVisibility)}.observes("isVerticalScrollerVisible","verticalScrollOffset","showGradientOnlyIfScrollerVisible","maximumVerticalScrollOffset"),showingTopFalloff:NO,showOrHideTopFalloff:function(){var a=this._falloffTop;if(!a){return}if(!SC.browser.isIE8OrLower){if(this.get("showingTopFalloff")){a.fadeIn(300)}else{a.fadeOut(300)}}else{if(this.get("showingTopFalloff")){a.fadeIn(0)}else{a.fadeOut(0)}}}.observes("showingTopFalloff"),showingBottomFalloff:NO,showOrHideBottomFalloff:function(){var a=this._falloffBottom;if(!a){return}if(!SC.browser.isIE8OrLower){if(this.get("showingBottomFalloff")){a.fadeIn(300)}else{a.fadeOut(300)}}else{if(this.get("showingBottomFalloff")){a.fadeIn(0)}else{a.fadeOut(0)}}}.observes("showingBottomFalloff"),render:function(e,a){arguments.callee.base.apply(this,arguments);if(SC.platform.touch){return}if(a){var f=this.get("fallOffWidth"),b=this.get("fallOffSize"),c="",d=this.get("showingTopFalloff"),k=this.get("showingBottomFalloff"),g,h,m=(b===SC.SMALL_CONTROL_SIZE)?"small":(b===SC.REGULAR_CONTROL_SIZE)?"regular":"large",j='<span class="right"/><span class="middle"/><span class="left"/>';if(!SC.none(f)){c+="width: %@px;".fmt(f)}else{c+="right: %@;".fmt(this.get("scrollerViewOffset"))}if(!d){g=c+"display: none;"}else{g=c}this._showingTopFalloff=d;if(!k){h=c+"display: none;"}else{h=c}this._showingBottomFalloff=k;e.push('<div class="falloff %@1 top" style="%@2">%@4</div><div class="falloff %@1 bottom" style="%@3">%@4</div>'.fmt(m,g,h,j))}},didCreateLayer:function(a){this._falloffBottom=this.$(".falloff.bottom");this._falloffTop=this.$(".falloff.top");a()}.enhance()});sc_require("views/pane_bottom");sc_require("views/falloff_scroll");CW.PICKER_BOTTOM_BORDER_HEIGHT=28;CW.DEFAULT_POINTER_POSITION_FROM_TOP=33;CW.ADJUST_PARENT_DEBUGGING=NO;CW.PopOver=SC.PickerPane.extend({classNames:["pop-over"],innerScrollView:SC.outlet("contentView.wellView.contentView"),innerTitleView:SC.outlet("contentView.titleView"),innerContentOfScrollView:SC.outlet("contentView.wellView.contentView.contentView"),innerContent:SC.outlet("contentView.wellView.contentView"),innerBottomView:SC.outlet("contentView.bottomView"),contentViewHasScrollerView:NO,titleView:null,hasBottomView:NO,bottomViewWidthDistribution:null,leftButtonsContainerWidth:function(){return this.bottomViewWidthDistribution?this.bottomViewWidthDistribution.leftButtonsContainerWidth:".30"}.property("bottomViewWidthDistribution").cacheable(),rightButtonsContainerWidth:function(){return this.bottomViewWidthDistribution?this.bottomViewWidthDistribution.rightButtonsContainerWidth:".70"}.property("bottomViewWidthDistribution").cacheable(),delegate:null,action:null,verticalOverlay:YES,setInitialLayout:YES,popup:function(){arguments.callee.base.apply(this,arguments)},bottomView:CW.BottomPaneView.extend({layout:{height:32,left:0,right:0,bottom:0},leftButtonsContainerWidthBinding:"*parentView.parentView.leftButtonsContainerWidth",rightButtonsContainerWidthBinding:"*parentView.parentView.rightButtonsContainerWidth",delegateBinding:"*parentView.delegate",actionBinding:"*parentView.action"}),initialLayout:null,wellViewLayout:{top:10,left:12,right:12,bottom:10},wellView:SC.WellView.extend({}),contentViewLayout:{top:4,left:0,right:0,bottom:4},alwaysPositionBottom:NO,adjustLayout:YES,isLoading:NO,loadingText:null,isVerticalScrollerVisible:function(){if(this.get("contentViewHasScrollerView")){var a=this.get("innerScrollView");return a.get("isVerticalScrollerVisible")}return NO}.property(),render:function(d,g){var c=this.get("pointerPosY"),b=this.get("pointerPos"),e=0,f;if(b===SC.POINTER_LAYOUT[0]){e=0}else{if(b===SC.POINTER_LAYOUT[1]){f=this.get("layout");e=(f)?f.width:0}else{if(b===SC.POINTER_LAYOUT[2]||b===SC.POINTER_LAYOUT[3]){f=this.get("layout");e=(f)?f.width/2:0}}}if(b!==SC.POINTER_LAYOUT[3]&&b!==SC.POINTER_LAYOUT[2]){c+=CW.DEFAULT_POINTER_POSITION_FROM_TOP}d.addClass("popme");if(!SC.none(d.styles()["-webkit-transform-origin"])){d.removeStyle("-webkit-transform-origin")}if(!SC.none(d.styles()["-moz-transform-origin"])){d.removeStyle("-moz-transform-origin")}d.addStyle("-webkit-transform-origin","%@px %@px".fmt(e,c));d.addStyle("-moz-transform-origin","%@px %@px".fmt(e,c));var a=arguments.callee.base.apply(this,arguments);return a},contentView:SC.View.extend({classNames:["picker-contentView"],layout:{top:0,left:0,right:0,bottom:0},createChildViews:function(){var e=[],n=this.parentView,m=n.innerContentView,h=n.scrollView,k=n.titleView,a=n.contentViewLayout,d=n.hasBottomView,b=n.bottomView,g=n.get("contentViewHasScrollerView"),c=n.get("wellView"),f=n.get("wellViewLayout"),j=this.parentView.get("verticalOverlay");if(k){k=this.titleView=this.createChildView(k);this.childViews.pushObject(k)}if(d){this.bottomView=b=this.createChildView(b);this.childViews.pushObject(b)}if(g){this.wellView=c=this.createChildView(c,{layout:f,contentLayout:a,contentView:CW.FallOffScrollView.extend({classNames:["pop-over-scroll"],fallOffSize:SC.REGULAR_CONTROL_SIZE,verticalOverlay:j,hasHorizontalScroller:NO,verticalScrollerLayout:{right:4,top:3,bottom:4},verticalScrollerView:CW.CaplessMiniScrollerView,contentView:m,showGradientOnlyIfScrollerVisible:YES,delaysContentTouches:NO})});this.childViews.pushObject(c)}else{this.wellView=c=this.createChildView(c,{layout:f,contentLayout:a,contentView:m});this.childViews.pushObject(c)}}}),paneDidAttach:function(){arguments.callee.base.apply(this,arguments);this.set("initialLayout",this.get("layout"))},getContentView:function(){if(this.get("contentViewHasScrollerView")){return this.get("innerContentOfScrollView")}else{return this.get("innerContent")}},remove:function(){var a=this.get("initialLayout");var b=this.get("setInitialLayout");if(a&&b){this.set("layout",a)}arguments.callee.base.apply(this,arguments)},dismiss:function(b){var a=this.get("delegate");var c=this.get("action");if(a&&c){SC.RootResponder.responder.sendAction(c,a,b.get("actionKey"))}else{CW.fatalError("Delegate and action were not provided")}},name:"Pop Over",readableName:function(){return this.name||this.toString()}.property("name").cacheable(),updateHeight:function(d,a){var b=this.get("frame").height,c=(b+d);if(CW.ADJUST_PARENT_DEBUGGING){CW.debug("%@ current height ---> %@",this,b);CW.debug("%@ pickerHeightChange ---> %@",this,c)}this.adjust({height:c});if(a){this.adjustChildViewsLayout(d,a)}this.windowSizeDidChange(null,SC.RootResponder.responder.computeWindowSize())},fitPositionToScreenPointer:function(o,h,n){if(this.get("alwaysPositionBottom")){var k=(n.height>12)?0:1;var j=(n.height>12)?0:3;var b;var e=[[n.x+n.width+(7+k),n.y+parseInt(n.height/2,0)-40],[n.x-h.width-(7+k),n.y+parseInt(n.height/2,0)-40],[n.x+parseInt((n.width/2)-(h.width/2),0),n.y-h.height-(17+j)],[n.x+parseInt((n.width/2)-(h.width/2),0),n.y+n.height+(17+j)]];var d=[[n.x+n.width+h.width+(7+k),n.y+parseInt(n.height/2,0)+h.height-24],[n.x-(7+k),n.y+parseInt(n.height/2,0)+h.height-24],[n.x+parseInt((n.width/2)-(h.width/2),0)+h.width,n.y-(17+j)],[n.x+parseInt((n.width/2)-(h.width/2),0)+h.width,n.y+n.height+h.height+(17+j)]];var g=[[e[0][1]>0?0:0-e[0][1],d[0][0]<o.width?0:d[0][0]-o.width,d[0][1]<o.height?0:d[0][1]-o.height,e[0][0]>0?0:0-e[0][0]],[e[1][1]>0?0:0-e[1][1],d[1][0]<o.width?0:d[1][0]-o.width,d[1][1]<o.height?0:d[1][1]-o.height,e[1][0]>0?0:0-e[1][0]],[e[2][1]>0?0:0-e[2][1],d[2][0]<o.width?0:d[2][0]-o.width,d[2][1]<o.height?0:d[2][1]-o.height,e[2][0]>0?0:0-e[2][0]],[e[3][1]>0?0:0-e[3][1],d[3][0]<o.width?0:d[3][0]-o.width,d[3][1]<o.height?0:d[3][1]-o.height,e[3][0]>0?0:0-e[3][0]]];if(!this.preferMatrix||this.preferMatrix.length!==5){this.set("preferMatrix",[0,1,2,3,0])}var c=this.preferMatrix;if(c[4]===-1){h.x=n.x+parseInt(n.width/2,0);h.y=n.y+parseInt(n.height/2,0)-parseInt(h.height/2,0);this.set("pointerPos",SC.POINTER_LAYOUT[0]+" fallback");this.set("pointerPosY",parseInt(h.height/2,0)-40)}else{h.x=e[c[4]][0];h.y=e[c[4]][1];this.set("pointerPos",SC.POINTER_LAYOUT[c[4]]);this.set("pointerPosY",0)}this.set("pointerPosX",0);b=c[0];h.x=e[b][0];h.y=e[b][1];this.set("pointerPosY",0);this.set("pointerPos",SC.POINTER_LAYOUT[b])}else{h=arguments.callee.base.apply(this,arguments)}return h},windowSizeDidChange:function(b,f){var g=this.get("innerScrollView"),j,d,e,a,c,h;if(!this.get("isPaneAttached")){return}if(b&&f&&b.height===f.height&&b.width===f.width){return this}if(this.get("alwaysPositionBottom")&&this.get("contentViewHasScrollerView")&&this.get("adjustLayout")){SC.RunLoop.begin();SC.RunLoop.end();j=g.get("containerView").get("frame").height;d=g.get("contentView").get("frame").height;e=d-j;a=f.height;c=this.get("frame");h=a-(c.y+c.height+CW.PICKER_BOTTOM_BORDER_HEIGHT);h=e>h?h:e;this.adjust({height:c.height+h})}this.positionPane(b===null?YES:NO);return this},setButtonHash:function(b,e,a){var d=["buttonOne","buttonTwo","buttonThree"];var f=this.get("hasBottomView");if(!f){CW.fatalError("there is no bottomView provided")}if(d.indexOf(a)===-1){CW.fatalError("buttonNumber provided is invalid")}var c=SC.clone(this.getPath("pane.innerBottomView."+a+"Hash"));c[b]=e;this.getPath("pane.innerBottomView").set(a+"Hash",c)},setHash:function(b,a){var c=["buttonOne","buttonTwo","buttonThree"];var d=this.get("hasBottomView");if(!d){CW.fatalError("there is no bottomView provided")}if(c.indexOf(a)===-1){CW.fatalError("buttonNumber provided is invalid")}this.getPath("pane.innerBottomView").set(a+"Hash",b)},addViewToTheContentView:function(a){var b=this.get("contentViewHasScrollerView"),c;if(b){c=this.get("innerContentOfScrollView")}else{c=this.get("innerContent")}c.appendChild(a)},removeViewFromTheContentView:function(a){var b=this.get("contentViewHasScrollerView"),c;if(b){c=this.get("innerContentOfScrollView")}else{c=this.get("innerContent")}c.removeChild(a)},isLoadingObserver:function(){var b=this.get("loadingText"),a=this.get("isLoading"),c=this.get("loadingView"),d=this.getPath("contentView.wellView").get("frame");if(a){c=CW.LoadingView.show(d.width-4,d.height-4,b,"overlay-loading-view");this.set("loadingView",c);this.getPath("contentView.wellView").appendChild(c)}else{if(c){this.getPath("contentView.wellView").removeChild(c)}else{SC.error("There is no Loading View")}}}.observes("isLoading"),adjustHeightAndPositionPane:function(a){if(a&&a>0){this.adjust({height:a}).positionPane()}return this},positionPane:function(b){var e=this.get("anchorElement"),d=this.get("anchorView"),j=this.get("preferType"),h=this.get("preferMatrix"),g=this.get("layout"),m,a,k,c,f;if(e){if(!b){if(d){a=d.get("frame");k=a.width;c=a.height}e=this.computeAnchorRect(e,k,c);if(e.x===0&&e.y===0){return}m=SC.cloneRect(e);if(j){switch(j){case SC.PICKER_MENU:case SC.PICKER_FIXED:if(!h||h.length!==3){this.set("preferMatrix",[1,4,3])}m.x+=((this.preferMatrix[2]===0)?m.width:0)+this.preferMatrix[0];m.y+=((this.preferMatrix[2]===3)?m.height:0)+this.preferMatrix[1];break;default:m.y+=m.height;break}}else{m.y+=m.height}this._originCached=m;this._anchorCached=e}else{m=this._originCached;e=this._anchorCached}f=this.fitPositionToScreen(m,this.get("frame"),e);this.adjust({width:f.width,height:f.height,left:f.x,top:f.y})}else{this.adjust({width:g.width,height:g.height,centerX:0,centerY:0})}this.updateLayout();return this}});CW.SquareMenuPane=SC.MenuPane.extend({classNames:"me-square-menu",itemHeight:31,itemSeparatorHeight:7,menuHeightPadding:6});sc_require("views/scroller");CW.CaplessScrollerView=CW.ScrollerView.extend({classNames:"me-capless-scroller-view",hasButtons:NO,capLength:0,capOverlap:0,buttonLength:0,buttonOverlap:0});sc_require("views/scroller");CW.FadingCaplessScrollerView=CW.ScrollerView.extend({hasButtons:NO,classNames:"sc-fading-capless-scroller-view".w(),capLength:0,capOverlap:-2,buttonLength:0,buttonOverlap:-2,scrollbarThickness:8,minimumThumbLength:32,isVisibleDidChange:function(){if(!this.get("isVisible")){return}if(SC.browser.isLion&&SC.browser.isSafari){this.$(".sc-scroller-view").addClass("sc-fading-capless-scroller-view-invisible")}}.observes("isVisible")});CW.FadingCaplessScrollerViewSupport={_thumbHidden:NO,didCreateLayer:function(a){if(SC.browser.isLion&&SC.browser.isSafari){this.$(".sc-scroller-view").addClass("sc-fading-capless-scroller-view-invisible");this._thumbHidden=YES}a()}.enhance(),verticalOverlay:YES,horizontalOverlay:YES,mouseExited:function(){if(this._thumbHidden){return}var a=this.get("verticalScrollerView"),b=this.get("horizontalScrollerView");if((a&&!a._thumbDragging)||(b&&!b._thumbDragging)){if(SC.browser.isLion&&SC.browser.isSafari){this.$(".sc-scroller-view").addClass("sc-fading-capless-scroller-view-invisible");this._thumbHidden=YES}}},mouseMoved:function(){if(!this._thumbHidden){return}if(!this._thumbView){this._thumbView=this.$(".thumb")}if(SC.browser.isLion&&SC.browser.isSafari){this.$(".sc-scroller-view").removeClass("sc-fading-capless-scroller-view-invisible");this._thumbHidden=NO}}};CW.ImageMapView=SC.View.extend({classNames:["me-image-map-view"],regions:[],regionCoordinatesKey:"coordinates",regionTargetKey:"target",regionActionKey:"action",hoveredRegion:null,selectedRegion:null,mouseDown:function(a){var b,c;b=this.convertFrameFromView({x:a.pageX,y:a.pageY});c=this.regionForPoint(b);if(c){this._mouseDownRegion=c;return YES}return NO},touchStart:function(a){return this.mouseDown(a)},mouseUp:function(a){var c,e,d,b;c=this.convertFrameFromView({x:a.pageX,y:a.pageY});e=this.regionForPoint(c);if(e){b=SC.get(e,"regionActionKey");d=SC.get(e,"regionTargetKey")||null;if(d){this.getPath("pane.rootResponder").sendAction(b,d,this,this.get("pane"),{region:e,coords:c})}this.setIfChanged("selectedRegion",e);return YES}return NO},touchEnd:function(a){this.set("hoveredRegion",null);return this.mouseUp(a)},mouseMoved:function(b){var a=this.convertFrameFromView({x:b.pageX,y:b.pageY});this.setIfChanged("hoveredRegion",this.regionForPoint(a))},touchesDragged:function(a){this.mouseMoved(a)},mouseExited:function(a){this.set("hoveredRegion",null)},regionForPoint:function(c){var f=this.get("regions"),b=0,a=f.get("length"),e,d=this.get("regionCoordinatesKey");this._coordinatesCache=this._coordinatesCache||[];for(;b<a;b++){e=(f[b].get?f[b].get(d):f[b][d]);if(SC.typeOf(e)===SC.T_STRING){if(this._coordinatesCache[b]){e=this._coordinatesCache[b]}else{e=this._coordinatesCache[b]=this._coordinateObjectForString(e)}}if(this._pointInPoly(c,e)){return f[b]}}return null},_pointInPoly:function(c,g){var e=g.length,b=c.x,h=c.y,a,d=e-1,f=NO;for(a=0;a<e;a++){if(g[a][1]<h&&g[d][1]>=h||g[d][1]<h&&g[a][1]>=h){if(g[a][0]+(h-g[a][1])/(g[d][1]-g[a][1])*(g[d][0]-g[a][0])<b){f=!f}}d=a}return f},_coordinateObjectForString:function(c){var d=c.split(","),b=0,a=d.length,f=[];if(a%2!==0){var e=SC.Error.desc("SC.ImageMapView: Unable to parse coordinates string because there were an odd number of values.");console.error(e.toString());throw e}for(;b<a;b+=2){f.push([parseInt(d[b],10),parseInt(d[b+1],10)])}return f}});sc_require("views/scroller");CW.MiniScrollerView=CW.ScrollerView.extend({classNames:"me-mini-scroller-view",hasButtons:NO,buttonLength:5,buttonOverlap:2,capLength:5,capOverlap:2,scrollbarThickness:8});sc_require("views/mini_scroller");CW.InsetMiniScrollerView=CW.MiniScrollerView.extend({classNames:["inset"],scrollbarThickness:(CW.MiniScrollerView.prototype.scrollbarThickness-1),capLength:(CW.MiniScrollerView.prototype.capLength-1),buttonLength:(CW.MiniScrollerView.prototype.buttonLength-1)});sc_require("views/scroller");CW.InsetScrollerView=CW.ScrollerView.extend({classNames:["inset"],scrollbarThickness:(CW.ScrollerView.prototype.scrollbarThickness-1),capLength:(CW.ScrollerView.prototype.capLength-1),buttonLength:(CW.ScrollerView.prototype.buttonLength-1)});CW.LoadingView=SC.View.extend({classNames:"",layout:null,icon:"",text:"",adjustParent:NO,render:function(b,a,c){b(a,c);a.push('<table border="0" width="100%" height="100%" valign="center">',"<tr>",'<td align="center">','<span class="spinner-box" style="text-align: middle">','<span style="vertical-align: middle; display: inline-block; float: none;" class="%@ spinner message"/>'.fmt(this.get("icon")),'<span style="vertical-align: middle;" class="me-loading-app text">',this.get("text"),"</span>","</span>","</td>","</tr>","</table>")}.enhance()});CW.LoadingView.show=function(d,a,f,e,c){var b=this.create({layout:{width:d,height:a},classNames:[e||"content-loading-view"],text:f||"Status.Loading".loc(),icon:c||"spinner-32px-f3f5f5"});return b};sc_require("views/fading_capless_scroller");CW.MiniFadingCaplessScrollerView=CW.FadingCaplessScrollerView.extend({minimumThumbLength:16,classNames:"sc-mini-fading-capless-scroller-view".w()});CW.MiniFadingCaplessScrollerViewSupport=CW.FadingCaplessScrollerViewSupport;CW.PrefsTheme=SC.BaseTheme.create({name:"prefs-theme"});SC.Theme.addTheme(CW.PrefsTheme);CW.PrefsSegmentedView=SC.SegmentedView.extend(SC.Control,{themeName:"prefs-theme"});CW.PrefsTheme.buttonRenderDelegate=SC.RenderDelegate.create({name:"button",render:function(d,a){var c=d.get("title"),b=d.get("icon");a.push('<span class="sc-button-inner"><div class="sc-button-label">','<img src="',SC.BLANK_IMAGE_URL,'" alt="" class="icon '+b+'"/>','<div class="sc-button-title">',c,'</div><img src="'+SC.BLANK_IMAGE_URL+'" class="pointer" /></div></span>')},update:function(b,a){}});CW.ProgressVectorView=SC.ProgressView.extend({classNames:"me-progress-vector-view",render:function(b,f){var d=this.get("displayValue"),a=this.get("isIndeterminate"),c=this.get("isEnabled");if(this._lastTimeWasIndeterminate!==a){f=YES;this._lastTimeWasIndeterminate=a}if(a||d<=0||d>=1){var e={"sc-indeterminate":a,"sc-empty":(d<=0),"sc-complete":(d>=1)};b.setClass(e)}if(!f&&!a){this.updatePercentage(d,YES)}},isIndeterminateDidChange:function(){this.replaceLayer()}.observes("isIndeterminate"),didCreateLayer:function(){switch(this.get("isIndeterminate")){case YES:this.drawIndeterminate();break;case NO:this.drawDeterminate();break}},drawDeterminate:function(){var k=this.get("frame"),a=Raphael.format,s=k.width,D=k.height,u=2,A=(D-1)/2,e=A-u,r=s,z=s-u*2,c=A*2+1,t=Raphael(this.$()[0],s+2,c+2),p=t.set(),B=t.set(),v="M0 "+(e+u),x="M"+u+" "+(e+u),d="a{0},{0} 0 0,1 {0},-{0} h{1} a{0},{0} 0 0,1 {0},{0}",C="a{0},{0} 0 0,1 -{0},{0} h-{1} a{0},{0} 0 0,1 -{0},-{0} ",o=d+"a{0},{0} -180 0,0 -{2} -{2} h -{1} h-1 a{0},{0} 0 0,0 -{0} {2} z",y=x+a(d,e,z-(2*e)),b=a(C,e,z-(2*e)),q,E,g,n,j,m,f;q=t.path(y+b+" z").attr({fill:"#000","fill-opacity":"0.2",stroke:"none"});E=q.clone().attr({fill:"90-#949aa7-#d9dee8",stroke:"none","fill-opacity":"1.0"});g=t.path(x+a(o,e,z-(2*e),e-1)).attr({fill:"#fff","fill-opacity":".5",stroke:"none"});n=g.clone().scale(1,-1).translate(0,e+1).attr({fill:"#000","fill-opacity":"0.3"});p.push(g,E);B.push(n,q);j=t.path(v+a(d,A,r-(2*A))+a(C,A,r-(2*A))+"z");j.attr({stroke:"none",fill:"hsb(0,0,0.1)","fill-opacity":"0.6"}).toBack();m=t.path(v+a(o,A,r-2*A,A-1)).attr({fill:"#101724","fill-opacity":"0.4",stroke:"none"});f=m.clone().scale(1,-1).translate(0,A+1).attr({fill:"#fff","fill-opacity":"0.3"});this.set("paper",t);this.set("progressSet",p);this.set("shadowSet",B);this.set("innerProgressBar",E);this.updatePercentage(this.get("displayValue"),true);if(this.get("isEnabled")){this._animatePulsation()}},drawIndeterminate:function(){var k,a,s,D,u,A,e,r,z,C,t,c,q,v,x,d,B,p,y,b,o,F,g,n,j,m,f,E;k=this.get("frame");a=Raphael.format;s=k.width;D=k.height;u=2;A=(D-1)/2;e=A-u;r=s;z=s-u*2;c=A*2+1;t=Raphael(this.$()[0],s+2,c+2);q=t.set();v="M0 "+(e+u);x="M"+u+" "+(e+u);d="a{0},{0} 0 0,1 {0},-{0} h{1} a{0},{0} 0 0,1 {0},{0}";B="a{0},{0} 0 0,1 -{0},{0} h-{1} a{0},{0} 0 0,1 -{0},-{0} ";p=d+"a{0},{0} -180 0,0 -{2} -{2} h -{1} h-1 a{0},{0} 0 0,0 -{0} {2} z";E=z-(2*e);y=x+a(d,e,E);b=a(B,e,E);o="/system/coreweb/views/en-us/1FCS29.34215/source/resources/images/progress/ind-bg-fill.png";F=t.path(y+b+" z").attr({fill:"url("+o+")",stroke:"none"});g=t.path(x+a(p,e,E,e-1)).attr({fill:"#fff","fill-opacity":".5",stroke:"none"});n=g.clone().scale(1,-1).translate(0,e+1).attr({fill:"#000","fill-opacity":"0.3"});q.push(F,g,n);j=t.path(v+a(d,A,r-(2*A))+a(B,A,r-(2*A))+"z");j.attr({stroke:"none",fill:"hsb(0,0,0.1)","fill-opacity":"0.6"}).toBack();m=t.path(v+a(p,A,r-(2*A),A-1)).attr({fill:"#101724","fill-opacity":"0.4",stroke:"none"});f=m.clone().scale(1,-1).translate(0,A+1).attr({fill:"#fff","fill-opacity":"0.3"});this.set("innerProgressBar",F);if(this.get("isEnabled")){this.animateBg({x:24},400)}},updatePercentage:function(e,b){var a=this.get("frame"),j=a.width,d=a.height,g=j*e,f=this.get("progressSet"),c=this.get("shadowSet");if(!b){f.animate({"clip-rect":[0,0,g,d]},200);c.animateWith(f,{"clip-rect":[0,0,g+1,d]},200)}else{f.attr({"clip-rect":[0,0,g,d]});c.attr({"clip-rect":[0,0,g+1,d]})}},animateBg:function(d,e,g){if(d==="stop"){clearTimeout(this._ticker)}var c=this.get("innerProgressBar"),b=c.pattern||c.node.getElementsByTagName("fill")[0];if(!b){return}if(c._lastOffsetX===undefined){c._lastOffsetX=0}if(c._lastOffsetY===undefined){c._lastOffsetY=0}var a;(function f(){var h=d.x,m=d.y,j,k;if(h||m){k=(c._lastOffsetX+=1)%h;j=(c._lastOffsetY+=1)%h;if(c.paper.raphael.type==="SVG"){if(h){b.setAttribute("x",k)}if(m){b.setAttribute("y",j)}}else{if(b.origin){if(h){b.origin.x=(1-(k/h))}if(m){b.origin.y=(1-(j/m))}}}if(!this._ticker){a=setTimeout(f,e/h)}}})();this._ticker=a},_animatePulsation:function(){var a=this.get("innerProgressBar");if(this._pulseOpacity==1){this._pulseOpacity=0.85}else{this._pulseOpacity=1}a.animate({opacity:this._pulseOpacity},1000,"swing");this.invokeLater(this._animatePulsation,1000)}});CW.SpinnerView=SC.View.extend({layout:{left:0,top:0},frequency:3/2,size:NaN,asset:"/system/coreweb/views/en-us/1FCS29.34215/source/resources/images/spinner.png",didCreateLayer:function(){if(!(this._layer=this.get("layer"))){return}var a=this._image=new Image(),b=this;a.style.cssText="position:absolute; left:0px; display:none;";a.onload=function(){SC.run(function(){b._imageLoaded=YES;if(isNaN(b.get("size"))){b.set("size",a.width)}else{b._renderSize()}b._startStopSpin();a.style.display=""})};a.src=this.get("asset");this._layer.appendChild(a)},_startStopSpin:function(){var a=this.get("layout");var b=this.get("isVisibleInWindow")&&this._imageLoaded&&(SC.none(a.opacity)||a.opacity>0);b?this._startSpin():this._stopSpin()}.observes("isVisibleInWindow","layout"),_renderSize:function(){var a=this.get("size");if(isNaN(a)){return}this.adjust({width:this._size=a,height:a});this._image.style.width=a+"px";this._image.style.height=a*12+"px";this._renderPosition()}.observes("size"),_startSpin:function(){if(this._interval){return}var a=this;this._interval=setInterval(function(){a._rotateStep()},(1000/this.get("frequency"))/12)},_stopSpin:function(){if(!this._interval){return}clearInterval(this._interval);this._interval=null},_rotateStep:function(){this._pos=(this._pos+1)%12;this._renderPosition()},_renderPosition:function(){this._image.style.top=-(this._size||0)*this._pos+"px"},_pos:0});CW.BAR_OPACITY_DURATION=200;CW.BAR_LEFT_DURATION=350;CW.VIEW_LEFT_DURATION=350;CW.NAVIGATABLE_VIEW_PADDING=0;CW.NavigationController=SC.ObjectController.extend({layout:{top:0,left:0,right:0,bottom:0},viewStack:null,barStack:null,navigationView:null,previousNavigatableView:function(){var a=this.get("viewStack");return a[a.length-2]||null},init:function(){this.viewStack=[];this.barStack=[];this.navigationViewDidChange()},navigationViewDidChange:function(){var a=this.get("navigationView"),b=this.get("_oldNavigationView");if(a!==b){if(b){b.removeObserver("frame",this,this.navigationViewFrameDidChange)}if(a){a.addObserver("frame",this,this.navigationViewFrameDidChange);this.set("_oldNavigationView",a)}}}.observes("navigationView"),navigationViewFrameDidChange:function(){var c,e=this.getPath("navigationView.frame.width"),b=this.viewStack;for(var d=0,a=b.length;d<a;++d){c=b[d];c.adjust("width",e);this.barStack[d].adjust("width",e)}},push:function(c,d,h){if(d===undefined){d=YES}if(!c.isNavigatable){SC.error("Tried to push a view which doesn't mix-in the CW.NavigationSupport mixin.")}var b=this.get("viewStack"),j=this.get("barStack"),k=-1*this.getPath("navigationView.frame").width,g=b[b.length-1],f=j[j.length-1];this._pushViewAndBarToStack(c,YES);this.getPath("navigationView.pane").makeFirstResponder(c);var e=b[b.length-1],a=j[j.length-1];this._moveBarAndViewTo(e,a,d,0,1,NO);if(g){this._moveBarAndViewTo(g,f,d,k,0,NO,h)}},pop:function(e,o,k){if(e===undefined){e=YES}if(o===undefined){o=1}var b=this.get("viewStack"),m=this.get("barStack"),h=b.pop(),a=m.pop(),n,d,j,g,c;for(var f=0;f<o-1;f++){n=b.pop();d=m.pop();n.removeFromParent();d.removeFromParent()}j=b[b.length-1];g=m[m.length-1];c=this.get("navigationView").get("frame").width;this.getPath("navigationView.pane").makeFirstResponder(j);if(o>1){j.adjust({left:-1*c});g.adjust({left:-1*c})}this._moveBarAndViewTo(h,a,e,c,0,YES);if(j){this._moveBarAndViewTo(j,g,e,0,1,NO,k)}},_moveBarAndViewTo:function(n,j,e,g,f,p,h){var d=this.get("navigationView"),o=1,m=n.get("frame").x;if(e){n.adjust({left:m,height:d.get("frame").height-j.get("frame").height,bottom:null});j.adjust({left:m,opacity:o});n.set("wantsAcceleratedLayer",YES);j.set("wantsAcceleratedLayer",YES);var k=Math.max(CW.VIEW_LEFT_DURATION,CW.BAR_LEFT_DURATION,CW.BAR_OPACITY_DURATION);var b=d.$();if(b.find(".overlay").size()===0){var a="position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; z-index: 1000;";a+='background-image: url("%@");'.fmt("/system/sproutcore/foundation/en-us/1FCS29.34215/source/resources/blank.gif");b.append("<div class='overlay' style='%@'></div>".fmt(a))}var c=CW.Animation.create({view:n,bar:j,navigationView:d,tween:CW.Anim.tweens.WEBKIT_EASE_IN_OUT,viewLayer:n.get("layer"),barLayer:j.get("layer"),toLeft:g,fromLeft:m,toOpacity:f,fromOpacity:o,duration:k,name:SC.guidFor(this)+":navigationAnimation:"+SC.guidFor(n),update:function(){var r=this.current;var w=Math.round(this.fromLeft+(this.toLeft-this.fromLeft)*Math.min(1,Math.max(0,r*(this.duration/CW.VIEW_LEFT_DURATION))));var v=Math.round(this.fromLeft+(this.toLeft-this.fromLeft)*Math.min(1,Math.max(0,r*(this.duration/CW.BAR_LEFT_DURATION))));var q=this.fromOpacity+(this.toOpacity-this.fromOpacity)*Math.min(1,Math.max(0,r*(this.duration/CW.BAR_OPACITY_DURATION)));if(!this.viewLayer||!this.barLayer){this.viewLayer=this.view.get("layer");this.barLayer=this.bar.get("layer")}if(this.viewLayer&&this.barLayer){var u=this.viewLayer.style,s=this.barLayer.style;if(SC.platform.supportsCSS3DTransforms){u.width=this.view.get("frame").width;u.webkitTransform="translate3d("+w+"px,0,0)";s.webkitTransform="translate3d("+v+"px,0,0)"}else{u.left=w+"px";s.left=v+"px"}}},cleanUp:function(){if(p){this.view.removeFromParent();this.bar.removeFromParent();this.bar.destroy()}else{this.view.adjust({left:g});this.bar.adjust({left:g,opacity:f})}this.view.adjust({height:null,bottom:0});var r=this.navigationView.$();var q=r.find(".overlay");q.remove();if(h){h()}}.listens("finish")});setTimeout(function(){c.start()},100)}else{n.adjust({left:g});j.adjust({left:g,opacity:f})}},_pushViewAndBarToStack:function(g,a){var d=this.get("navigationView"),c=d.createChildView(CW.NavigationBarView),f=d.get("frame").width,e=d.get("frame").height,b=(((a)?1:-1)*f)+CW.NAVIGATABLE_VIEW_PADDING,h=d.get("navigationBarHeight");g.set("navigationController",this);g.set("layout",{top:0,bottom:0,left:b,width:f});c.set("layout",{top:0,left:b/2,width:f,height:h});c.set("navigationController",this);c.set("associatedView",g);d.appendChild(c);d.get("well").appendChild(g);this.get("viewStack").push(g);this.get("barStack").push(c)}});CW.ViewController=SC.Responder.extend({isViewController:YES,view:null});CW.NavigatableView=SC.View.extend(CW.Animatability,{isNavigatable:YES,navigationController:null,title:"",icon:null,escapeHTML:YES,navigationBarTheme:"iOS",hasLeftBarButton:YES,leftBarButtonTitle:"Back",leftBarButtonIsEnabled:YES,leftBarButtonTheme:"navigationBarBlackOpaqueBack",leftBarButtonTarget:this,leftBarButtonAction:function(){this.getPath("parentView.parentView.navigationController").pop()},rightBarButtonTheme:"navigationBarDone",hasRightBarButton:NO,rightBarButtonTitle:"",rightBarButtonIsEnabled:YES,rightBarButtonTarget:null,rightBarButtonAction:"",toolbarView:null,_realLeftBarButtonIsEnabled:null,realLeftBarButtonIsEnabled:function(a,b){if(b!==undefined){if(b===NO){this._realLeftBarButtonIsEnabled=b}else{this._realLeftBarButtonIsEnabled=null}}return SC.none(this._realLeftBarButtonIsEnabled)?this.get("leftBarButtonIsEnabled"):this._realLeftBarButtonIsEnabled}.property("leftBarButtonIsEnabled"),_realRightBarButtonIsEnabled:null,realRightBarButtonIsEnabled:function(a,b){if(b!==undefined){if(b===NO){this._realRightBarButtonIsEnabled=b}else{this._realRightBarButtonIsEnabled=null}}return SC.none(this._realRightBarButtonIsEnabled)?this.get("rightBarButtonIsEnabled"):this._realRightBarButtonIsEnabled}.property("rightBarButtonIsEnabled")});CW.ProxyDisplay={concatenatedProperties:"proxyDisplayProperties".w(),proxyDisplayProperties:[],displayDelegateKey:"displayDelegate",initMixin:function(){this._cwps_computedDisplayProxyProperties=[];this._cwps_computedProxyPropertyToPropertyMap={};this._cwps_contentKeys=[];this._cwps_contentKeyToComputedProxyPropertyMap={};this._cwps_computedProxyPropertyToContentKeyMap={};var a=this.get("proxyDisplayProperties");this._cwps_addContentKeyComputedDisplayProxyPropertyMapping(a);this._cwps_addComputedDisplayProxyProperties(a);this._cwps_setupContentPropertiesObserving();this._cwps_propertiesDidChange(this,"*")},destroyMixin:function(){this._cwps_tearDownContentPropertiesObserving()},computedDisplayProxyPropertyKey:function(a){return"display%@".fmt(a.classify())},_cwps_computedContentKey:function(b){var e="content%@Key".fmt(b.classify()),c=this.get(e);if(SC.none(c)){var d=this.get("displayDelegateKey"),a=d?this.get(d):null;c=a?a.get(e):null}return SC.none(c)?b:c},contentPropertyValueForComputedDisplayProxyProperty:function(d){var a=this.get("content"),b=this._cwps_computedProxyPropertyToContentKeyMap;if(!a||!b){return undefined}var c=b[d];return a.get(c)},contentPropertyValueForProxiedProperty:function(c){var a=this.get("content");if(!a){return undefined}var b=this._cwps_computedContentKey(c);return a.get(b)},computedDisplayProxyPropertyValue:function(d){var b=this.contentPropertyValueForComputedDisplayProxyProperty(d),c=this._cwps_computedProxyPropertyToPropertyMap;if(!SC.none(b)){return b}if(!c){return undefined}var a=c[d];return this.get(a)},addProxyDisplayProperty:function(a){this.addProxyDisplayProperties([a])},addProxyDisplayProperties:function(a){this._cwps_addContentKeyComputedDisplayProxyPropertyMapping(a);this._cwps_addComputedDisplayProxyProperties(a);var b=this.get("proxyDisplayProperties");this.set("proxyDisplayProperties",b.concat(a));a.forEach(function(c){this._cwps_propertiesDidChange(this,c)},this)},_cwps_addComputedDisplayProxyProperties:function(c){var a=this._cwps_computedDisplayProxyProperties,b=this._cwps_computedProxyPropertyToPropertyMap;c.forEach(function(g){if(g==="content"){throw"Can not proxy the content property"}var e=this.computedDisplayProxyPropertyKey(g),f=this[e];if(f===undefined){this[e]=null;a.push(e);b[e]=g}else{if(SC.typeOf(f)===SC.T_FUNCTION&&f.isProperty){a.push(e)}else{throw"'%@' is already defined. Can not proxy property '%@'".fmt(e,g)}}},this);var d=this.get("displayProperties");d=d.concat(a);this.set("displayProperties",d)},_cwps_addContentKeyComputedDisplayProxyPropertyMapping:function(b){var a=this._cwps_contentKeys,d=this._cwps_contentKeyToComputedProxyPropertyMap,c=this._cwps_computedProxyPropertyToContentKeyMap;b.forEach(function(g){var f=this._cwps_computedContentKey(g),e=this.computedDisplayProxyPropertyKey(g);a.push(f);d[f]=e;c[e]=f},this)},_cwps_contentDidChange:function(){this._cwps_tearDownContentPropertiesObserving();this._cwps_setupContentPropertiesObserving();this._cwps_contentPropertiesDidChange(this,"*")}.observes("content"),_cwps_setupContentPropertiesObserving:function(){var a=this.get("content");this._cwps_content=a;if(!a){return}a.addObserver("*",this,"_cwps_contentPropertiesDidChange")},_cwps_tearDownContentPropertiesObserving:function(){var a=this._cwps_content;this._cwps_content=null;if(!a){return}a.removeObserver("*",this,"_cwps_contentPropertiesDidChange")},_cwps_propertiesDidChange:function(c,b){var a=this.get("proxyDisplayProperties")||[],d=null;if(b==="*"){d=a}else{if(a.indexOf(b)>=0){d=[b]}}if(!d){return}this.beginPropertyChanges();d.forEach(function(e){var f=this.computedDisplayProxyPropertyKey(e);this._cwps_notifyComputedDisplayProxyPropertyChanged(f)},this);this.endPropertyChanges();this.displayDidChange()}.observes("*"),_cwps_contentPropertiesDidChange:function(c,b){var e=this.get("content"),a=this._cwps_contentKeys||[],d=null;if(b==="*"){d=a}else{if(a.indexOf(b)>=0){d=[b]}}if(!d){return}this.beginPropertyChanges();d.forEach(function(f){var g=this._cwps_contentKeyToComputedProxyPropertyMap[f];this._cwps_notifyComputedDisplayProxyPropertyChanged(g)},this);this.endPropertyChanges();this.displayDidChange()},_cwps_notifyComputedDisplayProxyPropertyChanged:function(a){var c=this.get(a);if(SC.typeOf(c)===SC.T_FUNCTION&&c.isProperty){this.notifyPropertyChange(a)}else{var b=this.computedDisplayProxyPropertyValue(a);this.set(a,b!==undefined?b:null)}}};var CW_ACTION_SHEET_BUTTON_HEIGHT=67;var CW_ACTION_SHEET_BOTTOM_PADDING=20;var CW_ACTION_SHEET_SIDE_MARGINS=10;var CW_ACTION_SHEET_TEXT_WIDTH=290;CW.ActionSheet=SC.View.extend(CW.Animatability,{classNames:"cw-action-sheet",actionSheetButtons:null,actionSheetMessage:null,actionSheetMessageEscaped:YES,childViews:["sheet"],sheetHeight:0,wantsAcceleratedLayer:YES,descriptionAction:null,sheet:SC.View.design(CW.Animatability,{classNames:"cw-actions"}),init:function(){arguments.callee.base.apply(this,arguments);var f,e;for(var d=0,a=this.actionSheetButtons.length;d<a;d++){e=this.actionSheetButtons[d];f=SC.ButtonView.create({themeName:e.themeName,target:e.target,action:e.action,title:e.title,layout:{left:CW_ACTION_SHEET_SIDE_MARGINS,right:CW_ACTION_SHEET_SIDE_MARGINS,height:46,bottom:CW_ACTION_SHEET_BUTTON_HEIGHT*(a-d-1)+CW_ACTION_SHEET_BOTTOM_PADDING}});this.sheet.appendChild(f)}var g=SC.heightForString(this.actionSheetMessage,CW_ACTION_SHEET_TEXT_WIDTH,null,"atv3 iOS sc-label-view sc-small-size".w(),!this.actionSheetMessageEscaped);var b=SC.LabelView.create({layout:{top:15,height:g,left:CW_ACTION_SHEET_SIDE_MARGINS,right:CW_ACTION_SHEET_SIDE_MARGINS},controlSize:SC.SMALL_CONTROL_SIZE,textAlign:SC.ALIGN_CENTER,escapeHTMLBinding:"*parentView.parentView.actionSheetMessageEscaped",valueBinding:"*parentView.parentView.actionSheetMessage"});this.sheet.appendChild(b);var c=a*CW_ACTION_SHEET_BUTTON_HEIGHT+CW_ACTION_SHEET_BOTTOM_PADDING+(15+g);this.sheet.set("layout",{right:0,left:0,bottom:-c,height:c})}});sc_require("views/action_sheet");CW.ActionSheetSupport={actionSheetClass:CW.ActionSheet,_currentActionSheet:null,_previousLeftBarButtonState:null,_previousRightBarButtonState:null,animationDuration:350,actionSheetHeight:null,showActionSheet:function(){this._currentActionSheet=this.actionSheetClass.create();this.childViews[0].appendChild(this._currentActionSheet);var a=this._currentActionSheet,b=a.childViews[0];this.set("actionSheetHeight",a.sheet.layout.height);this._disableNavigationButtons();if(!SC.browser.msie){a.animate({opacity:{to:1,from:0,duration:this.animationDuration}})}b.animate({bottom:{to:0,duration:this.animationDuration}})},hideActionSheet:function(){var a=this._currentActionSheet,c=a.childViews[0];this._enableNavigationButtons();if(!SC.browser.msie){a.animate({opacity:{to:0,from:1,duration:this.animationDuration}})}var b=this;c.animate({bottom:{to:-c.get("layout").height,duration:this.animationDuration}},{notifyThatIJustFinished:function(){b.childViews[0].removeChild(a);b._currentActionSheet=null;a.destroy()}.listens("finish")})},_disableNavigationButtons:function(){var a=this.getPath("navigationController.viewStack"),b=a[a.length-1];b.set("realLeftBarButtonIsEnabled",NO);b.set("realRightBarButtonIsEnabled",NO)},_enableNavigationButtons:function(){var a=this.getPath("navigationController.viewStack"),b=a[a.length-1];b.set("realLeftBarButtonIsEnabled",YES);b.set("realRightBarButtonIsEnabled",YES)}};CW.PanelPane=SC.PanelPane.extend({classNames:"cw-panel-pane".w(),displayProperties:["hasTabBar","hasNavigationBar"],hasTabBar:NO,hasNavigationBar:NO,renderDelegateName:"sheetPaneRenderDelegate"});SC.BaseTheme.borderRenderDelegate=SC.RenderDelegate.create({className:"border",render:function(b,a){a=a.begin("div").addClass("panel-background");this.includeSlices(b,a,SC.NINE_SLICE);a=a.end()},update:function(){}});CW.FIVE_SLICE=["left","middle one","pointer","middle two","right"];SC.BaseTheme.iOSCalloutRenderDelegate=SC.RenderDelegate.create({className:"ios_callout",render:function(c,a){var b=c.get("pointerPos");a=a.begin("div").addClass("panel-background");this.includeSlices(c,a,CW.FIVE_SLICE);a.addClass(b);a=a.end()},update:function(d,c){var b=d.get("pointerPos");var a=c.find(".panel-background").first();if(a){a.attr("class","panel-background "+b)}}});CW.TOP_SLICES=["middle","top-left","top one","top two","top-right"];CW.BOTTOM_SLICES=["bottom-left","bottom one","bottom two","bottom-right"];SC.BaseTheme.iOSPickerRenderDelegate=SC.RenderDelegate.create({className:"ios_picker",render:function(h,c){var g=h.get("pointerPos"),e=h.get("pointerPosY"),a=h.get("ariaLabel"),f=h._view.get("layout"),b,d;c=c.begin("div").addClass("panel-background");this.includeSlices(h,c,CW.TOP_SLICES);b=e+8;d=f.height-e-36;if(g==="perfectLeft"){c.push('<div class="left one"></div>');c.push('<div class="left two"></div>');c.push('<div class="right one" style="margin-top: '+b+'px"></div>');c.push('<div class="right two" style="display: block; margin-bottom: '+d+'px"></div>')}else{if(g==="perfectRight"){c.push('<div class="left one" style="margin-top: '+b+'px"></div>');c.push('<div class="left two" style="display: block; margin-bottom: '+d+'px"></div>');c.push('<div class="right one"></div>');c.push('<div class="right two"></div>')}else{c.push('<div class="left one"></div>');c.push('<div class="left two"></div>');c.push('<div class="right one"></div>');c.push('<div class="right two"></div>')}}this.includeSlices(h,c,CW.BOTTOM_SLICES);c.addClass(g);if(g==="perfectLeft"||g==="perfectRight"){c.push('<div class="sc-pointer" style="margin-top: '+e+'px"></div>')}else{c.push('<div class="sc-pointer"></div>')}c=c.end();if(g==="perfectLeft"||g==="perfectRight"){c.addStyle("-webkit-transform-origin-y",(e+"px"))}c.addClass(g);c.attr("aria-label",a||"")},update:function(a,d){var m=a.get("preferType"),e=a.get("pointerPos"),k=a.get("pointerPosY"),h=a._view.get("layout"),g,n,j,f,c,b=d.find(".panel-background").first();if(b){b.attr("class","panel-background "+e)}b=d.find(".sc-pointer").first();if(b){if(e==="perfectLeft"||e==="perfectRight"){b.attr("style","margin-top: "+k+"px");if(e==="perfectLeft"){j=".right"}else{j=".left"}g=d.find(".one"+j).first();n=d.find(".two"+j).first();f=k+8;c=h.height-k-36;if(f<0){f=0}if(c<0){c=0}g.attr("style","margin-top: "+f+"px");n.attr("style","display: block; margin-bottom: "+c+"px");if(e==="perfectLeft"){j=".left"}else{j=".right"}g=d.find(".one"+j).first();n=d.find(".two"+j).first();g.attr("style","");n.attr("style","")}else{b.attr("style","");g=d.find(".one");n=d.find(".two");g.attr("style","");n.attr("style","")}}}});SC.BaseTheme.sheetPaneRenderDelegate=SC.RenderDelegate.create({className:"panel",render:function(f,d){var e=f.get("hasTabBar");var c=f.get("hasNavigationBar");if(e){d.addClass("has-tab-bar")}if(c){d.addClass("has-navigation-bar")}var a=d.begin("div").addClass("panel-mask");d=d.begin("div").addClass("panel-background");this.includeSlices(f,d,SC.NINE_SLICE);d=d.end();a.end();if(c){d=d.begin("div").addClass("navigation-bar");this.includeSlices(f,d,SC.THREE_SLICE);d.end()}if(e){d=d.begin("div").addClass("tab-bar");this.includeSlices(f,d,SC.THREE_SLICE);d.end()}var b=f.get("ariaLabel");d.attr("aria-label",b||"")},update:function(e,d){var a=e.get("ariaLabel");d.attr("aria-label",a||"");var c=e.get("hasTabBar");var b=e.get("hasNavigationBar");if(c){d.addClass("has-tab-bar")}if(b){d.addClass("has-navigation-bar")}}});SC.BaseTheme.switchViewRenderDelegate=SC.RenderDelegate.create({className:"switchview",render:function(a,c){this.addSizeClassName(a,c);var e=a.get("theme"),f,b;b=SC.guidFor(a)+"-label";var d=a.get("isSelected")||NO,j=a.get("isActive"),h=!a.get("isEnabled"),g;if(d){g="true"}else{g="false"}c.attr("role","checkbox");c.attr("aria-checked",g);c.attr("aria-labelledby",b);c.setClass({active:j,disabled:h});c=c.begin("span").addClass("label").id(b);e.labelRenderDelegate.render(a,c);c=c.end();var k=c.begin("span").addClass("cw-switchview-container");c=c.push('<span class="cw-switchview-on-cap"></span>');c=c.begin("span").addClass("cw-switchview-tracks-container");this.includeSlices(a,c,["cw-switchview-off-track"]);c=c.end();c=c.push('<span class="cw-switchview-off-cap"></span>');c=c.begin("span").addClass("cw-switchview-text-container");this.includeSlices(a,c,["cw-switchview-on-text","cw-switchview-off-text"]);c=c.end();c.push('<span class = "cw-switchview-handle"></span>');k.end()},update:function(g,c){this.updateSizeClassName(g,c);var f=g.get("theme"),d=g.get("isSelected"),e=g.get("isActive"),b=!g.get("isEnabled"),a;if(d){a="true"}else{a="false"}c.attr("aria-checked",a);f.labelRenderDelegate.update(g,c.find("span.label"));c.setClass({active:e,disabled:b})}});CW.SectionedViewDataSource={isSectionedViewDataSource:YES,numberOfSectionsInSectionedView:function(a){return 0},sectionedViewSectionIsVisible:function(a,b){return YES},sectionedViewNumberOfRowsInSection:function(a,b){return 0},sectionedViewTitleForHeaderInSection:function(a,b){return undefined},sectionedViewTitleForFooterInSection:function(a,b){return undefined},sectionedViewCellForRowAtIndexPath:function(a,b){return undefined},sectionedViewContentForRowAtIndexPath:function(a,b){return undefined}};CW.SectionedViewDelegate={isSectionedViewDelegate:YES,sectionedViewHeightForRowAtIndexPath:function(a,b){return undefined},sectionedViewAccessoryButtonTappedForRowAtIndexPath:function(a,b){},sectionedViewWillSelectRowAtIndexPath:function(a,b){return b},sectionedViewDidSelectRowAtIndexPath:function(a,b){},sectionedViewWillDeselectRowAtIndexPath:function(a,b){return b},sectionedViewDidDeselectRowAtIndexPath:function(a,b){},sectionedViewViewForHeaderInSection:function(a,b){return undefined},sectionedViewViewForFooterInSection:function(a,b){return undefined},sectionedViewHeightForHeaderInSection:function(a,b){return undefined},sectionedViewHeightForFooterInSection:function(a,b){return undefined},sectionedViewShouldAutoResizeHeaderTitleInSection:function(a,b){return undefined},sectionedViewShouldAutoResizeFooterTitleInSection:function(a,b){return undefined},sectionedViewCellDisplayDelegateForRowAtIndexPath:function(a,b){return a},sectionedViewWillSetupAllCells:function(a){},sectionedViewDidSetupAllCells:function(a){},sectionedViewWillTearDownAllCells:function(a){},sectionedViewDidTearDownAllCells:function(a){}};sc_require("controllers/view_controller");sc_require("sectioned_view/mixins/sectioned_view_data_source");sc_require("sectioned_view/mixins/sectioned_view_delegate");CW.SectionedViewController=CW.ViewController.extend(CW.SectionedViewDataSource,CW.SectionedViewDelegate,{});CW.SectionedViewAutoResizingViewSupport={isSectionedViewAutoResizingView:YES,shouldAutoResize:YES,heightPadding:0,computeHeight:function(){var b=this.$()[0],c=this.getPath("frame.width"),a;if(SC.none(b)){return null}b.style.maxWidth=c+"px";a=SC.metricsForString(this.get("value"),b);return a.height+this.get("heightPadding")}};CW.SVCollectionSectionDelegate={isSVCollectionSectionDelegate:YES,collectionSectionCellForContentAtIndex:function(c,b,a){return null},collectionSectionRowHeightForContentAtIndex:function(c,b,a){return null}};sc_require("sectioned_view/mixins/sectioned_view_data_source");sc_require("sectioned_view/mixins/sectioned_view_delegate");CW.SectionedViewDesignSupport={};SC.mixin(CW.SectionedViewDesignSupport,CW.SectionedViewDataSource,CW.SectionedViewDelegate,{isSectionedViewDesigner:YES,sections:[],initMixin:function(){this.createSections()},createSections:function(){var e=this.get("sections"),a=e?e.length:0,b=0,d,c;for(;b<a;b+=1){d=e[b];c=this.createSection(this[d],b);e[b]=this[d]=c;if(!c){throw'sectioned view designer has invalid section "%@" for section[%@]'.fmt(d,b)}}},createSection:function(b,a){if(SC.kindOf(b,CW.SectionedViewSection)&&b.isClass){return b.create({owner:this,index:a})}return null},sectionForIndex:function(a){var b=this.get("sections");return b?b.objectAt(a):undefined},rowForIndexPath:function(a){var b=a.get("section"),c=a.get("row");b=this.sectionForIndex(b);return b?b.rowForIndex(c):b},numberOfSectionsInSectionedView:function(a){return this.getPath("sections.length")},sectionedViewSectionIsVisible:function(a,b){b=this.sectionForIndex(b);return b?b.get("isVisible"):NO},sectionedViewNumberOfRowsInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("rows").length:b},sectionedViewCellForRowAtIndexPath:function(b,c){var d=this.sectionForIndex(c.get("section")),e=this.rowForIndexPath(c),a;if(e&&(a=e.get("cell"))){return a}if(d&&(a=d.get("cell"))){return a}return null},sectionedViewContentForRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);if(!c||c.get("isContent")){return c}return c.get("content")},sectionedViewTitleForHeaderInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("headerTitle"):b},sectionedViewTitleForFooterInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("footerTitle"):b},sectionedViewHeightForRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);return c?c.get("height"):c},sectionedViewViewForHeaderInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("headerView"):b},sectionedViewViewForFooterInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("footerView"):b},sectionedViewHeightForHeaderInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("headerHeight"):b},sectionedViewHeightForFooterInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("footerHeight"):b},sectionedViewShouldAutoResizeHeaderTitleInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("autoResizeHeaderTitle"):NO},sectionedViewShouldAutoResizeFooterTitleInSection:function(a,b){b=this.sectionForIndex(b);return b?b.get("autoResizeFooterTitle"):NO},sectionedViewAccessoryButtonTappedForRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);if(!c){return null}c.accessoryButtonTapped(a)},sectionedViewWillSelectRowAtIndexPath:function(a,c){var f=this.rowForIndexPath(c),e=this.sectionForIndex(c.get("section")),b=f&&f.get("allowsSelection"),d=f&&f.get("isEnabled");if(!e.get("allowsSelection")||!f.get("allowsSelection")||!f.get("isEnabled")){return null}return c},sectionedViewDidSelectRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);if(c&&c.get("allowsSelection")){c.selected(a)}},sectionedViewWillDeselectRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);return c&&c.get("allowsSelection")?b:null},sectionedViewDidDeselectRowAtIndexPath:function(a,b){var c=this.rowForIndexPath(b);if(c&&c.get("allowsSelection")){c.deselected(a)}},sectionedViewCellDisplayDelegateForRowAtIndexPath:function(a,c){var d=this.sectionForIndex(c.get("section")),e=c.get("row"),b=null;if(d){b=d.displayDelegateForRow(e)}return b?b:a},sectionedViewWillSetupAllCells:function(a){this._notifySectionsOfAllCellUpdates("sectionedViewWillSetupAllCells",a)},sectionedViewDidSetupAllCells:function(a){this._notifySectionsOfAllCellUpdates("sectionedViewDidSetupAllCells",a)},sectionedViewWillTearDownAllCells:function(a){this._notifySectionsOfAllCellUpdates("sectionedViewWillTearDownAllCells",a)},sectionedViewDidTearDownAllCells:function(a){this._notifySectionsOfAllCellUpdates("sectionedViewDidTearDownAllCells",a)},_notifySectionsOfAllCellUpdates:function(b,a){var c=this.get("sections")||[];c.forEach(function(d){d[b](a)})}});CW.SectionedViewMonitor={isSectionedViewMonitor:YES,sectionedViewWillUpdateContentView:function(a){},sectionedViewDidUpdateContentView:function(a){},sectionedViewWillSetupContentView:function(a){},sectionedViewDidSetupContentView:function(a){},sectionedViewWillTearDownContentView:function(a){},sectionedViewDidTearDownContentView:function(a){}};CW.SectionedViewCellAccessoryType=SC.Object.extend({concatenatedProperties:["classNames"],classNames:[],buttonHitTest:function(a,b){return NO}});CW.SectionedViewCellAccessoryType.mixin({CLASS_NAME:"cw-accessory-type",render:function(b,c,a){a=a.begin().addClass(this.CLASS_NAME);if(b){a.addClass(b.get("classNames"))}a.end()},update:function(c,e,a){var d=a.find("."+this.CLASS_NAME);if(d){var b=[this.CLASS_NAME];if(c){b=b.concat(c.get("classNames"))}d.attr("class",b.join(" "))}}});CW.SectionedViewCellAccessoryType.DETAIL_CHECKMARK=CW.SectionedViewCellAccessoryType.create({classNames:"cw-detail-checkmark".w()});CW.SectionedViewCellAccessoryType.DISCLOSURE_INDICATOR=CW.SectionedViewCellAccessoryType.create({classNames:"cw-disclosure-indicator".w()});CW.SectionedViewCellAccessoryType.DETAIL_DISCLOSURE_BUTTON=CW.SectionedViewCellAccessoryType.create({classNames:"cw-detail-disclosure-button".w(),buttonHitTest:function(a,c){var d=c.target,b=a.$("."+this.get("classNames")[0]);return b.size()>0&&b.within(d)}});CW.IMAGE_ANCHOR_CLASS_NAME="cw-image-anchor";CW.SectionedViewCellImageAnchor=SC.Object.extend({concatenatedProperties:["classNames"],classNames:[CW.IMAGE_ANCHOR_CLASS_NAME]});CW.SectionedViewCellImageAnchor.CONTENT_AREA=CW.SectionedViewCellImageAnchor.create();CW.SectionedViewCellImageAnchor.TEXT_LEFT=CW.SectionedViewCellImageAnchor.create({classNames:["cw-image-left"]});CW.SectionedViewCellImageAnchor.DETAIL_TEXT_LEFT=CW.SectionedViewCellImageAnchor.create({classNames:["cw-image-left"]});CW.SectionedViewCellSelectionStyle=SC.Object.extend({classNames:[]});CW.SectionedViewCellSelectionStyle.NONE=CW.SectionedViewCellSelectionStyle.create();CW.SectionedViewCellSelectionStyle.BLUE=CW.SectionedViewCellSelectionStyle.create({classNames:["cw-selection-blue"]});sc_require("sectioned_view/modifiers/cell_image_anchor");CW.SectionedViewCellStyle=SC.Object.extend({concatenatedProperties:"classNames".w(),classNames:[],imageAnchor:CW.SectionedViewCellImageAnchor.CONTENT_AREA});CW.SectionedViewCellStyle.DEFAULT1=CW.SectionedViewCellStyle.create({classNames:["cw-default"],imageAnchor:CW.SectionedViewCellImageAnchor.TEXT_LEFT});CW.SectionedViewCellStyle.DEFAULT2=CW.SectionedViewCellStyle.create({classNames:["cw-default"],imageAnchor:CW.SectionedViewCellImageAnchor.DETAIL_TEXT_LEFT});CW.SectionedViewCellStyle.BUTTON=CW.SectionedViewCellStyle.create({classNames:["cw-button"],imageAnchor:CW.SectionedViewCellImageAnchor.TEXT_LEFT});CW.SectionedViewCellStyle.DELETE_BUTTON=CW.SectionedViewCellStyle.create({classNames:["cw-delete-button"],imageAnchor:CW.SectionedViewCellImageAnchor.TEXT_LEFT});CW.SectionedViewCellStyle.TEXT_FIELD=CW.SectionedViewCellStyle.create({classNames:["cw-text-field"]});CW.SectionedViewStyle=SC.Object.extend({contentLayout:{},sectionSpacing:0,classNames:[]});CW.SectionedViewStyle.NONE=CW.SectionedViewStyle.create();CW.SectionedViewStyle.PLAIN=CW.SectionedViewStyle.create({classNames:["cw-plain"]});CW.SectionedViewStyle.GROUPED=CW.SectionedViewStyle.create({_layout1:{top:15,left:10,right:10,bottom:15},_layout2:{top:20,left:30,right:30,bottom:30},contentLayout:function(){var a=SC.browser;return a.iPhone||a.iPod?this._layout1:this._layout2}.property(),sectionSpacing:23,classNames:["cw-grouped"]});CW.SectionedViewBlock=SC.Object.extend({sectionedView:null,views:[],height:0,top:0,hasViews:function(){var a=this.get("views");return a&&(a.length>0)}.property("view").cacheable(),setup:function(){},tearDown:function(){var a=this.get("views")||[];a.forEach(function(b){b.destroy()});this.set("views",[])},reload:function(){},readjustFromTop:function(a){this.set("top",a);this.doReadjustFromTop(a)},doReadjustFromTop:function(a){},readjustViewFromTop:function(a,b){a.adjust({top:b,bottom:null});return a.get("frame").height},updateHeightIfNeeded:function(){}});sc_require("sectioned_view/private/block");CW.SectionedViewFooterBlock=CW.SectionedViewBlock.extend({setup:function(){var b=this.get("sectionedView"),c=b.get("styleValue"),d=c.get("contentLayout"),e=b.get("footerView"),a=b.get("footerHeight");if(!e){return}if(!e.isClass||!SC.kindOf(e,SC.View)){SC.Logger.error("%@: sectioned view footer is not a view class".fmt(b));return}e=b.get("contentView").createChildView(e,{layerId:"%@-footer".fmt(b.get("layerId")),classNames:"cw-sectioned-footer",layout:{left:0,right:0,top:0,height:a}});this.set("views",[e]);this.set("height",a)},doReadjustFromTop:function(b){var a=this.get("views");if(a&&a.length>0){this.readjustViewFromTop(a[0],b)}}});sc_require("sectioned_view/private/block");CW.SectionedViewHeaderBlock=CW.SectionedViewBlock.extend({setup:function(){var b=this.get("sectionedView"),c=b.get("styleValue"),d=c.get("contentLayout"),e=b.get("headerView"),a=b.get("headerHeight");if(!e){return}if(!e.isClass||!SC.kindOf(e,SC.View)){SC.Logger.error("%@: sectioned view header is not a view class".fmt(b));return}e=b.get("contentView").createChildView(e,{layerId:"%@-header".fmt(b.get("layerId")),classNames:"cw-sectioned-header",layout:{left:0,right:0,top:0,height:a}});this.set("views",[e]);this.set("height",a)},doReadjustFromTop:function(b){var a=this.get("views");if(a&&a.length>0){this.readjustViewFromTop(a[0],b)}}});sc_require("sectioned_view/private/block");CW.SectionedViewSectionBlock=CW.SectionedViewBlock.extend({sectionIndex:null,headerView:null,footerView:null,rows:null,updateHeightIfNeeded:function(){var b=this.get("views")||[],a=NO;b.forEach(function(d){if(d.isSectionedViewAutoResizingView&&d.shouldAutoResize){var c=d.computeHeight();if(c){d.adjust("height",c);a=YES}}});if(a){this.notifyPropertyChange("height")}},height:function(){var g=this.get("sectionedView"),f=this.get("sectionIndex"),a=g.get("sectionedViewDataSource"),k=a.numberOfSectionsInSectionedView(g),h=this.get("views")||[],d=this.rowsContainerView;var j=0;h.forEach(function(m){if(m!=d){j+=m.get("frame").height}});var b=g.get("styleValue"),c=b.get("contentLayout"),e=b.get("sectionSpacing");if(f<k-1&&j>0){j+=e}return j}.property("views","sectionIndex").cacheable(),includeSectionRowsContainer:function(){return SC.browser.isIE8OrLower}.property().cacheable(),setup:function(){var b=this.get("sectionedView"),a=[];this.headerView=this._createHeaderView();this.rows=this._createRowCells();this.footerView=this._createFooterView();this.rowsContainerView=this._createRowsContainer();if(this.rowsContainerView){a.push(this.rowsContainerView)}if(this.headerView){a.push(this.headerView)}if(this.rows){a.pushObjects(this.rows)}if(this.footerView){a.push(this.footerView)}this.set("views",a)},reload:function(){this.tearDown();this.setup()},doReadjustFromTop:function(f){var c=this.headerView,h=this.footerView,m=this.rows,d=f,a=0,k=0;if(c){f+=this.readjustViewFromTop(c,f)}for(var b=0,g=m.length;b<g;b+=1){var j=m[b];if(b===0){a=f}k+=j.get("frame").height;f+=this.readjustViewFromTop(j,f)}if(h){f+=this.readjustViewFromTop(h,f)}var e=this.rowsContainerView;if(e){e.adjust({top:a,height:k})}},_createRowsContainer:function(){var c=this.get("sectionedView"),d=c.get("contentView");if(!this.get("includeSectionRowsContainer")){return null}var b=CW.SectionedViewSectionBlock,a=b.sectionRowsContainerViewExample;return d.createChildView(a)},_createRowCells:function(){var b=this.get("sectionedView"),e=this.get("sectionIndex"),g=b.get("sectionedViewDataSource"),d=g.sectionedViewNumberOfRowsInSection(b,e),c=[];for(var f=0,a;f<d;f+=1){a=this._createRowCell(e,f);if(a){c.push(a)}}return c},_createRowCell:function(g,p){var h=this.get("sectionedView"),b=h.get("sectionedViewDataSource"),n=h.get("sectionedViewDelegate"),f=CW.IndexPath.create({section:g,row:p}),j=b.sectionedViewCellForRowAtIndexPath(h,f),d=b.sectionedViewContentForRowAtIndexPath(h,f),m=n.sectionedViewHeightForRowAtIndexPath(h,f),a=["cw-section-row"],o=b.sectionedViewNumberOfRowsInSection(h,g),e=n.sectionedViewCellDisplayDelegateForRowAtIndexPath(h,f),c;m=m||h.get("rowHeight");if(p===0){a.push("cw-first-row")}if(p===o-1){a.push("cw-last-row")}if(!j){j=h.get("rowCellExample")}if(!j||!j.isClass||!SC.kindOf(j,CW.SectionedViewCoreCell)){SC.Logger.error("%@: cell for index path %@ is not a sectioned view core cell class".fmt(h,f));return null}c={classNames:a,layerId:"%@-section-%@-row-%@".fmt(h.get("layerId"),g,p),isSectionedViewCell:YES,indexPath:f,layout:{top:0,left:0,right:0,height:m},displayDelegate:e};if(d){c.content=d}var k=h.get("contentView");j=k.createChildView(j,c);j.owner=h;return j},_createHeaderView:function(){var f=this.get("sectionedView"),e=this.get("sectionIndex"),a=f.get("sectionedViewDataSource"),h=f.get("sectionedViewDelegate"),d=a.sectionedViewTitleForHeaderInSection(f,e),b=a.sectionedViewShouldAutoResizeHeaderTitleInSection(f,e),c=h.sectionedViewViewForHeaderInSection(f,e),j=h.sectionedViewHeightForHeaderInSection(f,e);j=j||f.get("sectionHeaderHeight");if(!SC.empty(d)&&!c){c=f.get("sectionHeaderViewExample").extend({value:d});if(b){c=c.extend(CW.SectionedViewAutoResizingViewSupport,{heightPadding:6})}}if(!c){return null}if(!c.isClass||!SC.kindOf(c,SC.View)){SC.Logger.error("%@: header view for section %@ is not a view class".fmt(f,e));return null}var g=f.get("contentView");c=g.createChildView(c,{layerId:"%@-section-header-%@".fmt(f.get("layerId"),e),classNames:"cw-section-header",layout:{left:0,right:0,top:0,height:j},displayDelegate:f});c.owner=f;return c},_createFooterView:function(){var f=this.get("sectionedView"),e=this.get("sectionIndex"),a=f.get("sectionedViewDataSource"),h=f.get("sectionedViewDelegate"),d=a.sectionedViewTitleForFooterInSection(f,e),b=a.sectionedViewShouldAutoResizeFooterTitleInSection(f,e),c=h.sectionedViewViewForFooterInSection(f,e),j=h.sectionedViewHeightForFooterInSection(f,e);j=j||f.get("sectionFooterHeight");if(!SC.empty(d)&&!c){c=f.get("sectionFooterViewExample").extend({value:d});if(b){c=c.extend(CW.SectionedViewAutoResizingViewSupport)}}if(!c){return null}if(!c.isClass||!SC.kindOf(c,SC.View)){SC.Logger.error("%@: footer view for section %@ is not a view class".fmt(f,e));return null}var g=f.get("contentView");c=g.createChildView(c,{layerId:"%@-section-footer-%@".fmt(f.get("layerId"),e),classNames:"cw-section-footer",layout:{left:0,right:0,top:0,height:j},displayDelegate:f});c.owner=f;return c}});CW.SectionedViewSectionBlock.mixin({sectionRowsContainerViewExample:SC.View.extend({classNames:"cw-section-rows-container",render:function(a,b){SC.RenderDelegate.includeSlices(this,a,SC.NINE_SLICE)}})});CW.SectionedViewCoreCellRenderDelegate=SC.RenderDelegate.extend({className:"cw-sectioned-view-cell",styleKey:"styleValue",selectionStyleKey:"selectionStyleValue",isEnabledKey:"isEnabledValue",render:function(g,d){var c=g.get("isSelected"),a=g.get("isHighlighted"),f=g.get(this.get("isEnabledKey")),e=g.get(this.get("styleKey")),b=g.get(this.get("selectionStyleKey"));if(c){d.addClass("cw-selected")}if(a){d.addClass("cw-highlighted")}if(!f){d.addClass("cw-disabled")}if(a||c){if(b){d.addClass(b.get("classNames"))}}if(e){d.addClass(e.get("classNames"))}this.willRenderCellBody(g,d);this.renderCellBody(g,d);this.didRenderCellBody(g,d)},renderCellBody:function(b,a){},willRenderCellBody:function(b,a){},didRenderCellBody:function(b,a){},update:function(g,c){var f=g.get(this.get("styleKey")),b=g.get(this.get("selectionStyleKey"));var d=g.get("isSelected");c.setClass("cw-selected",d);var a=g.get("isHighlighted");c.setClass("cw-highlighted",a);var e=g.get(this.get("isEnabledKey"));c.setClass("cw-disabled",!e);if(f){c.addClass(f.get("classNames"))}if(b){var h=b.get("classNames");if(a||d){c.addClass(h)}else{c.removeClass(h)}}this.willUpdateCellBody(g,c);this.updateCellBody(g,c);this.didUpdateCellBody(g,c)},updateCellBody:function(b,a){},willUpdateCellBody:function(b,a){},didUpdateCellBody:function(b,a){}});SC.BaseTheme.sectionedViewCoreCellRenderDelegate=CW.SectionedViewCoreCellRenderDelegate.create();sc_require("sectioned_view/render_delegates/core_cell_render_delegate");CW.SectionedViewCellRenderDelegate=CW.SectionedViewCoreCellRenderDelegate.extend({renderCellBody:function(b,a){this.renderContentArea(b,a);this.renderAccessoryType(b,a)},renderContentArea:function(a,c){var g=a.get("indentationLevelValue"),j=a.get("indentationWidthValue"),d=a.get("accessoryLayout");c=c.begin().addClass("cw-content");c.addStyle("margin-left",g*j);if(d){var b=d.width,e=d.left,h=d.right,f=5;if(b){c.addStyle("margin-right",b+h+f)}else{if(e){c.addStyle("margin-right",e+f)}}}this.willRenderContentAreaBody(a,c);this.renderContentAreaImage(a,c,CW.SectionedViewCellImageAnchor.CONTENT_AREA);this.renderContentAreaText(a,c);this.renderContentAreaDetailText(a,c);this.didRenderContentAreaBody(a,c);c.end()},willRenderContentAreaBody:function(b,a){},didRenderContentAreaBody:function(b,a){},renderContentAreaText:function(c,a){var b=c.get("textValue");if(!b){return}a=a.begin().addClass("cw-text ellipsis");this.renderContentAreaImage(c,a,CW.SectionedViewCellImageAnchor.TEXT_LEFT);this.willRenderContentAreaText(c,a);a.begin("span").text(b).end();this.didRenderContentAreaText(c,a);a.end()},willRenderContentAreaText:function(b,a){},didRenderContentAreaText:function(b,a){},renderContentAreaDetailText:function(c,b){var a=c.get("detailTextValue");if(!a){return}b=b.begin().addClass("cw-detail-text");this.renderContentAreaImage(c,b,CW.SectionedViewCellImageAnchor.DETAIL_TEXT_LEFT);this.willRenderContentAreaDetailText(c,b);b.begin("span").text(a).end();this.didRenderContentAreaDetailText(c,b);b.end()},willRenderContentAreaDetailText:function(b,a){},didRenderContentAreaDetailText:function(b,a){},renderContentAreaImage:function(a,e,h){var g=a.get("imageValue"),c=a.get(this.get("styleKey")),b=c.get("imageAnchor"),j=b===h;if(j){e.addClass(b.get("classNames"))}if(!g||!j){return}var d=null,f=["cw-image"];if(g&&SC.ImageView.valueIsUrl(g)){d=g}else{f.push(g);d=SC.BLANK_IMAGE_URL}this.willRenderContentAreaImage(a,e);e.begin("img").addClass(f).attr("src",d).end();this.didRenderContentAreaImage(a,e)},willRenderContentAreaImage:function(b,a){},didRenderContentAreaImage:function(b,a){},renderAccessoryType:function(c,a){var b=c.get("accessoryTypeValue");if(b){a.addClass("cw-has-accessory-type")}CW.SectionedViewCellAccessoryType.render(b,c,a)},updateCellBody:function(b,a){this.updateContentArea(b,a);this.updateAccessoryType(b,a)},updateContentArea:function(b,a){this.willUpdateContentArea(b,a);this.updateContentAreaText(b,a);this.updateContentAreaDetailText(b,a);this.updateContentAreaImage(b,a);this.didUpdateContentArea(b,a)},willUpdateContentArea:function(b,a){},didUpdateContentArea:function(b,a){},updateContentAreaText:function(e,b){if(!e.didChangeFor("update","textValue")){return}var d=e.get("textValue"),a=b.find(".cw-content .cw-text span"),c=!SC.empty(d);if(!c&&a.size()>0){a.remove();this.didRemoveContentAreaText(e,b)}else{if(c&&a.size()>0){a.text(d);this.didUpdateContentAreaText(e,b)}else{if(c){b.find(".cw-content").append('<div class="%@"><span>%@</span></div>'.fmt("cw-text",d));this.updateContentAreaImage(e,b.find(".cw-text"),CW.SectionedViewCellImageAnchor.DETAIL_TEXT_LEFT);this.didInsertContentAreaText(e,b)}}}},didRemoveContentAreaText:function(b,a){},didUpdateContentAreaText:function(b,a){},didInsertContentAreaText:function(b,a){},updateContentAreaDetailText:function(e,c){if(!e.didChangeFor("update","detailTextValue")){return}var b=e.get("detailTextValue"),a=c.find(".cw-content .cw-detail-text span"),d=!SC.empty(b);if(!d&&a.size()>0){a.remove();this.didRemoveContentAreaDetailText(e,c)}else{if(d&&a.size()>0){a.text(b);this.didUpdateContentAreaDetailText(e,c)}else{if(d){c.find(".cw-content").append('<div class="%@"><span>%@</span></div>'.fmt("cw-detail-text",b));this.updateContentAreaImage(e,c.find(".cw-detail-text"),CW.SectionedViewCellImageAnchor.DETAIL_TEXT_LEFT);this.didInsertContentAreaDetailText(e,c)}}}},didRemoveContentAreaDetailText:function(b,a){},didUpdateContentAreaDetailText:function(b,a){},didInsertContentAreaDetailText:function(b,a){},updateContentAreaImage:function(b,d,h){if(!b.didChangeFor("update","imageValue")){return}var e=b.get("imageValue"),f=d.find("."+CW.IMAGE_ANCHOR_CLASS_NAME),k=f.find(".cw-image"),j=SC.ImageView.valueIsUrl(e),g=!SC.empty(e);if(!g&&k.size()>0){k.remove();this.didRemoveContentAreaImage(b,d)}else{if(g&&k.size()>0){if(j){k.attr("src",e);k.attr("class","cw-image")}else{k.attr("src",SC.BLANK_IMAGE_URL);k.attr("class","cw-image %@".fmt(e))}this.didUpdateContentAreaImage(b,d)}else{if(g){var c=b.get("styleValue"),a=c.get("imageAnchor");if(f.size()===0&&h===a){f=d;f.addClass(a.get("classNames"))}if(j){f.prepend('<img class="cw-image" src="%@"/>'.fmt(e))}else{f.prepend('<img class="cw-image %@" src="%@"/>'.fmt(e,SC.BLANK_IMAGE_URL))}this.didInsertContentAreaImage(b,d)}}}},didRemoveContentAreaImage:function(b,a){},didUpdateContentAreaImage:function(b,a){},didInsertContentAreaImage:function(b,a){},updateAccessoryType:function(d,a){var c,b;b=d.get("accessoryTypeValue");a.setClass("cw-has-accessory-type",!!b);if(d.didChangeFor("update","accessoryTypeValue")){CW.SectionedViewCellAccessoryType.update(b,d,a)}if(d.didChangeFor("update","accessoryTypeButtonActive")){b=d.get("accessoryTypeValue");if(b){if(!c){c=a.find(".cw-accessory-type")}if(d.get("accessoryTypeButtonActive")){c.addClass("cw-active")}else{c.removeClass("cw-active")}}}}});SC.BaseTheme.sectionedViewCellRenderDelegate=CW.SectionedViewCellRenderDelegate.create();sc_require("sectioned_view/render_delegates/cell_render_delegate");CW.SectionedViewCollectionItemCellRenderDelegate=CW.SectionedViewCellRenderDelegate.extend({didRenderCellBody:function(c,a){var b=c.get("isSelectedItem");if(b){a.addClass("cw-selected-collection-item")}},didUpdateCellBody:function(c,a){if(c.didChangeFor("update","isSelectedItem")){var b=c.get("isSelectedItem");a.setClass("cw-selected-collection-item",!!b)}}});SC.BaseTheme.sectionedViewCollectionItemCellRenderDelegate=CW.SectionedViewCollectionItemCellRenderDelegate.create();sc_require("mixins/proxy_display");sc_require("sectioned_view/modifiers/cell_style");sc_require("sectioned_view/modifiers/cell_selection_style");CW.SectionedViewCoreCell=SC.View.extend(CW.ProxyDisplay,{renderDelegateName:"sectionedViewCoreCellRenderDelegate",proxyDisplayProperties:"isEnabled style selectionStyle".w(),indexPath:null,isHighlighted:NO,isSelected:NO,isEnabled:YES,isEnabledInSectionedView:YES,style:null,selectionStyle:CW.SectionedViewCellSelectionStyle.BLUE,owner:null,selectedTarget:null,selectedAction:null,deselectedTarget:null,deselectedAction:null,displayProperties:"isSelected isHighlighted isEnabledInSectionedView".w(),computedDisplayProxyPropertyKey:function(a){return a+"Value"},sectionedViewTapStartForEvent:function(a,b){return NO},sectionedViewTapEndForEvent:function(a,b){return NO},selected:function(){var b=this.get("selectedTarget"),a=this.get("selectedAction");this.handleCellAction(b,a)},deselected:function(){var b=this.get("deselectedTarget"),a=this.get("deselectedAction");this.handleCellAction(b,a)},handleCellAction:function(c,b){if(!b){return}var d=this.getPath("owner.pane"),a=d.get("rootResponder");a.sendAction(b,c,this,d)},isEnabledValue:function(){if(!this.get("isEnabledInSectionedView")||!this.get("isEnabledInPane")){return NO}var a=this.contentPropertyValueForProxiedProperty("isEnabled");return a===undefined?this.get("isEnabledInPane"):a}.property("isEnabledInPane","isEnabledInSectionedView").cacheable()});sc_require("sectioned_view/views/sectioned_view_core_cell");CW.SECTIONED_VIEW_CELL_DEFAULT_ACCESSORY_WIDTH=40;CW.SectionedViewCell=CW.SectionedViewCoreCell.extend({proxyDisplayProperties:"text detailText image accessoryType accessoryView indentationLevel indentationWidth".w(),content:null,text:null,detailText:null,image:null,accessoryType:null,accessoryView:null,style:CW.SectionedViewCellStyle.DEFAULT1,accessoryTypeButtonActive:NO,indentationLevel:0,indentationWidth:22,renderDelegateName:"sectionedViewCellRenderDelegate",displayProperties:"accessoryTypeButtonActive accessoryLayout".w(),accessoryViewValue:function(){var a;a=this.get("accessoryView");if(a){return a}a=this.contentPropertyValueForProxiedProperty("accessoryView");return a}.property().cacheable(),accessoryValue:function(){var b=this.get("accessoryTypeValue"),a=this.get("accessoryViewValue");if(a){return a}if(b){return b}return null}.property("accessoryTypeValue","accessoryViewValue").cacheable(),accessoryLayout:function(){var a=this.get("accessoryValue");return this._computeAccessoryLayout(a)}.property("accessoryValue").cacheable(),destroy:function(){this.accessoryView=null;this.contentView=null;arguments.callee.base.apply(this,arguments)},createChildViews:function(){var b=[],a;a=this.createAccessoryView();if(a){b.pushObject(a);this.beginPropertyChanges();this.set("accessoryView",a);this.set("childViews",b);this.endPropertyChanges()}return this},createAccessoryView:function(){var a=this.get("accessoryViewValue"),b=this.get("content"),c=this;if(!a||!(SC.kindOf(a,SC.View)&&a.isClass)){return null}a=this.createChildView(a,{layerId:this.get("layerId")+"-accessory",layout:this._computeAccessoryLayout(a),classNames:["cw-accessory"],isEnabledBinding:SC.Binding.oneWay(".parentView.isEnabledValue")});if(b&&b.get("isBindingAgent")){c=b}a.bindingAgent=c;return a},_computeAccessoryLayout:function(d){if(!d){return null}var c={},b=null,a=SC.typeOf(d);switch(a){case SC.T_OBJECT:b=d.get("layout");break;case SC.T_CLASS:b=d.prototype.layout;break;case SC.T_HASH:b=d.layout;break}b=b||{};if(!b){c.width=CW.SECTIONED_VIEW_CELL_DEFAULT_ACCESSORY_WIDTH}else{if(b.width){c.width=b.width}else{if(b.left){c.left=b.left}else{c.width=CW.SECTIONED_VIEW_CELL_DEFAULT_ACCESSORY_WIDTH}}}if(!SC.none(b.centerY)){c.centerY=b.centerY;c.height=b.height||0}else{c.top=b.top||0;c.bottom=b.bottom||0}c.right=b.right||0;return c},sectionedViewTapStartForEvent:function(a,c){var d=this.get("accessoryTypeValue"),b=this.get("isEnabledValue");if(b&&d&&d.buttonHitTest(this,c)){this._handlingRowTap=YES;this.set("accessoryTypeButtonActive",YES);return YES}return NO},sectionedViewTapEndForEvent:function(a,b){var c=this.get("accessoryTypeValue");if(!this._handlingRowTap){return NO}if(c&&c.buttonHitTest(this,b)){a.rowAccessoryButtonTappedAtIndexPath(this.get("indexPath"))}this._handlingRowTap=NO;this.set("accessoryTypeButtonActive",NO);return YES}});CW.SectionedViewRow=SC.Object.extend({owner:null,section:null,indexPath:null,cell:null,height:null,allowsSelection:YES,isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay(),content:null,selectedTarget:null,selectedAction:null,deselectedTarget:null,deselectedAction:null,accessoryButtonTappedTarget:null,accessoryButtonTappedAction:null,isBindingAgent:YES,isContent:function(){return !this.get("content")}.property("content").cacheable(),selected:function(a){var c=this.get("selectedTarget"),b=this.get("selectedAction");this.willRespondToSelectedAction(a);this.sendAction(a,c,b);this.didRespondToSelectedAction(a)},willRespondToSelectedAction:function(a){},didRespondToSelectedAction:function(a){},deselected:function(a){var c=this.get("deselectedTarget"),b=this.get("deselectedAction");this.willRespondToDeselectedAction(a);this.sendAction(a,c,b);this.didRespondToDeselectedAction(a)},willRespondToDeselectedAction:function(a){},didRespondToDeselectedAction:function(a){},accessoryButtonTapped:function(a){var c=this.get("accessoryButtonTappedTarget"),b=this.get("accessoryButtonTappedAction");this.willRespondToAccessoryButtonTappedAction(a);this.sendAction(a,c,b);this.didRespondToAccessoryButtonTappedAction(a)},willRespondToAccessoryButtonTappedAction:function(a){},didRespondToAccessoryButtonTappedAction:function(a){},sendAction:function(a,d,c){if(!c){return}var e=a.get("pane"),b=e.get("rootResponder");b.sendAction(c,d,this,e)}});sc_require("sectioned_view/views/sectioned_view_cell");sc_require("sectioned_view/rows/row");CW.SectionedViewButtonRow=CW.SectionedViewRow.extend({title:null,titleBindingDefault:SC.Binding.oneWay(),image:null,imageBindingDefault:SC.Binding.oneWay(),isEnabled:YES,isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),cellstyle:null,cell:CW.SectionedViewCell.extend({style:CW.SectionedViewCellStyle.BUTTON,styleBinding:SC.Binding.transform(function(a){if(SC.none(a)){return CW.SectionedViewCellStyle.BUTTON}return a}).from("*owner.cellStyle"),contentTextKey:"title",performKeyEquivalent:function(b,a){if(!this.get("isVisibleInWindow")){return NO}if(!this.get("isEnabled")){return NO}var c=this.get("content"),e=c.get("isDefault"),d=c.get("selectedAction"),f=c.get("selectedTarget");if(e&&(b==="return")){c.sendAction(this.owner,f,d)}return NO}}),willRespondToSelectedAction:function(a){a.deselectRowAtIndexPath(this.get("indexPath"))}});sc_require("sectioned_view/rows/row");sc_require("sectioned_view/views/sectioned_view_cell");CW.SectionedViewSelectRow=CW.SectionedViewRow.extend({title:null,value:null,items:null,itemTitleKey:"title",itemImageKey:"image",itemValueKey:"value",style:CW.SectionedViewCellStyle.DEFAULT2,cell:CW.SectionedViewCell.extend({contentTextKey:"title",accessoryType:CW.SectionedViewCellAccessoryType.DISCLOSURE_INDICATOR}),_valueDidChange:function(){var j=this.get("value"),h=this.get("items"),f=h.length,m=this.get("itemTitleKey"),k=this.get("itemValueKey"),e=this.get("itemImageKey"),c=null,d;if(!k&&SC.typeOf(j)===SC.T_NUMBER&&j>=0&&j<f){c=h[j]}else{if(k){for(d=0;d<f;d+=1){if(h[d][k]===j){c=h[d];break}}}}var a=SC.typeOf(c),g=null,b=null;if(a===SC.T_HASH){g=c[m];b=c[e]}else{if(a===SC.T_OBJECT){g=c.get(m);b=c.get(e)}else{if(!SC.none(c)){g=c}}}this.beginPropertyChanges();this.set("detailText",g);this.set("image",b);this.endPropertyChanges()}.observes("value")});CW.SWITCH_VIEW_WIDTH=79;CW.HANDLE_WIDTH=27;CW.CAP_WIDTH=15;CW.HANDLE_MAX_LEFT=52;CW.SwitchView=SC.CheckboxView.extend({classNames:["cw-switchview"],renderDelegateName:"switchViewRenderDelegate",animateOnPropertyChange:NO,animateOnPropertyChangeBindingDefault:SC.Binding.oneWay(),_isTracking:NO,_startingMouseOffset:0,_handleLocation:0,_container:null,_handle:null,_offTrack:null,_offText:null,_onText:null,_onCap:null,_offCap:null,_isSelectedDidChange:function(){if(!this._handle){this._initReferences()}var a=this.get("animateOnPropertyChange"),b=a?null:0;this._animateTo(this.get("isSelected"),NO,b)}.observes("isSelected"),keyDown:function(a){if(!this.get("isEnabled")){return NO}if(!this._handle){this._initReferences()}if(a.keyCode===13){this._animateTo(!this.get("isSelected"));return YES}else{if(a.keyCode===39){this._animateTo(YES);return YES}else{if(a.keyCode===37){this._animateTo(NO);return YES}else{return arguments.callee.base.apply(this,arguments)}}}},mouseDown:function(a){if(!this.get("isEnabled")){return NO}if(!this._handle){this._initReferences()}if(!a.target.className.indexOf("cw-switchview-handle")>0){this._handle.removeClass("highlight");this._handle.addClass("pressed")}this._onCap.addClass("cw-switchview-on");this._startingMouseOffset=this._makeValueRelativeToLeftEdgeOf(a.clientX,this._container);this._startingHandleLocation=parseInt(this._handle.css("left"),10)},touchesDragged:function(a){this.mouseDragged(a)},mouseDragged:function(a){if(!this.get("isEnabled")){return NO}if(!this._isTracking){this._handle.removeClass("highlight");this._handle.addClass("pressed")}this._isTracking=YES;var b=this._makeValueRelativeToLeftEdgeOf(a.clientX,this._container);var c=b-this._startingMouseOffset;this._repositionTo(this._startingHandleLocation+c)},mouseUp:function(b){if(!this.get("isEnabled")){return NO}var a=parseInt(this._handle.css("left"),10)>=CW.HANDLE_MAX_LEFT/2;if(!this._isTracking){this._animateTo(!this.get("isSelected"))}else{this._animateTo(a);this._isTracking=NO}},_makeValueRelativeToLeftEdgeOf:function(c,a){var b=0,d=0;if(a.offsetParent){do{if(a===document.body){break}d+=a.offsetLeft;b+=a.offsetTop}while(a=a.offsetParent)}return c-d},_initReferences:function(){this._container=this.$(".cw-switchview-container")[0];this._handle=this.$(".cw-switchview-handle");this._offTrack=this.$(".cw-switchview-off-track");this._offText=this.$(".cw-switchview-off-text");this._onText=this.$(".cw-switchview-on-text");this._onCap=this.$(".cw-switchview-on-cap");this._offCap=this.$(".cw-switchview-off-cap")}.observes("layer"),_repositionTo:function(a){a=Math.max(Math.min(a,CW.HANDLE_MAX_LEFT),0);this._handle.css("left",this._handleLocation=a);this._offTrack.css("left",a);this._onText.css("left",a-41);this._offText.css("left",a+34)},_animateTo:function(b,a,c){if(a===undefined){a=YES}this._handle.removeClass("pressed");if(b){this._onCap.addClass("cw-switchview-on")}else{this._handle.removeClass("highlight")}if(this._anim){this._anim.stop()}if(c===0){this._repositionTo(b?CW.HANDLE_MAX_LEFT:0)}else{this._anim=CW.Animation.create({name:this.toString(),that:this,updateValue:a,isSelected:b,updateValue:a,from:this._handleLocation,to:(b)?CW.HANDLE_MAX_LEFT:0,duration:SC.none(c)?350:c,update:function(){this.that._repositionTo(this.current)},onFinish:function(){if(this.updateValue){if(this.that.get("isSelected")!==this.isSelected){this.invokeLast(function(){this.that._action()})}this.that.set("isSelected",this.isSelected)}if(!this.isSelected){this.that._onCap.removeClass("cw-switchview-on")}}}).start()}}});sc_require("sectioned_view/rows/row");sc_require("views/switch_view");CW.SectionedViewSwitcherRow=CW.SectionedViewRow.extend({title:null,value:null,target:null,action:null,allowsSelection:NO,animateOnPropertyChange:NO,animateOnPropertyChangeBindingDefault:SC.Binding.oneWay(),cell:CW.SectionedViewCell.extend({contentTextKey:"title"}),accessoryView:CW.SwitchView.extend({layout:{width:80,centerY:1,height:27,right:10},animateOnPropertyChangeBinding:SC.Binding.oneWay(".bindingAgent.animateOnPropertyChange"),valueBinding:".bindingAgent.value",targetBinding:SC.Binding.oneWay(".bindingAgent.target"),actionBinding:SC.Binding.oneWay(".bindingAgent.action")})});sc_require("sectioned_view/rows/row");sc_require("sectioned_view/views/sectioned_view_cell");CW.SectionedViewTextFieldRow=CW.SectionedViewRow.extend({value:null,title:null,hint:null,hintBindingDefault:SC.Binding.oneWay(),isPassword:NO,isPasswordBindingDefault:SC.Binding.bool().oneWay(),spellCheckEnabled:NO,spellCheckEnabledBindingDefault:SC.Binding.bool().oneWay(),autoCorrect:YES,autoCorrectBindingDefault:SC.Binding.bool().oneWay(),autoCapitalize:YES,autoCapitalizeBindingDefault:SC.Binding.bool().oneWay(),type:"text",textBindingDefault:SC.Binding.oneWay(),layout:null,defaultLayout:{left:7,top:5,bottom:5,right:10},allowsSelection:NO,accessoryViewExample:SC.TextFieldView.extend({hintBinding:SC.Binding.oneWay(".bindingAgent.hint"),isPasswordBinding:SC.Binding.oneWay(".bindingAgent.isPassword"),valueBinding:".bindingAgent.value",spellCheckEnabledBinding:SC.Binding.oneWay(".bindingAgent.spellCheckEnabled"),autoCorrectBinding:SC.Binding.oneWay(".bindingAgent.autoCorrect"),autoCapitalizeBinding:SC.Binding.oneWay(".bindingAgent.autoCapitalize")}),cell:CW.SectionedViewCell.extend({style:CW.SectionedViewCellStyle.TEXT_FIELD,contentTextKey:"title"}),accessoryView:function(){var a=this.get("accessoryViewExample"),d=this.get("layout")||{},e=SC.clone(this.get("defaultLayout")),g=d.left,c=d.right,f=d.top,b=d.bottom;if(!SC.none(g)){e.left=g}if(!SC.none(c)){e.right=c}if(!SC.none(f)){e.top=f}if(!SC.none(b)){e.bottom=b}return a.extend({type:this.get("type"),layout:e})}.property("accessoryViewExample").cacheable()});CW.SectionedViewSection=SC.Object.extend({owner:null,index:0,rows:[],footerTitle:null,autoResizeFooterTitle:NO,headerTitle:null,autoResizeHeaderTitle:NO,footerView:null,headerView:null,footerHeight:null,headerHeight:null,allowsSelection:YES,isVisible:YES,isCellDisplayDelegate:YES,cell:null,init:function(){arguments.callee.base.apply(this,arguments);this.createRows()},rowForIndex:function(a){return this.get("rows").objectAt(a)},createRows:function(){var c=this.get("rows");for(var b=0,a=c?c.length:0;b<a;b+=1){var e=c[b],d=this.createRow(this[e],b);if(!d){throw'section has an invalid row "%@" for rows[%@]'.fmt(e,b)}c[b]=this[e]=d}},createRow:function(d,c,b){b=b||{};if(SC.kindOf(d,CW.SectionedViewCoreCell)&&d.isClass){var a=d;d=CW.SectionedViewRow.extend({isContent:NO,cell:a})}else{if(!(SC.kindOf(d,CW.SectionedViewRow)&&d.isClass)){return null}}d=d.create(b,{owner:this.get("owner"),section:this,indexPath:CW.IndexPath.create({section:this.get("index"),row:c})});return d},destoryRows:function(){var a=this.get("rows")||[];a.forEach(function(b){b.destroy()},this);this.set("rows",[])},reload:function(){this.destoryRows();this.createRows();this.get("owner").reloadSection(this.get("index"))},displayDelegateForRow:function(a){return this.get("isDisplayDelegate")?this:null},sectionedViewWillSetupAllCells:function(a){},sectionedViewDidSetupAllCells:function(a){},sectionedViewWillTearDownAllCells:function(a){},sectionedViewDidTearDownAllCells:function(a){}});sc_require("sectioned_view/sections/section");sc_require("sectioned_view/rows/button_row");CW.SectionedViewButtonSection=CW.SectionedViewSection.extend({title:null,titleBindingDefault:SC.Binding.oneWay(),image:null,imageBindingDefault:SC.Binding.oneWay(),isEnabled:YES,isEnabledBindingDefault:SC.Binding.oneWay(),isDefault:NO,isDefaultBindingDefault:SC.Binding.oneWay().bool(),selectedTarget:null,selectedAction:null,buttonRow:CW.SectionedViewButtonRow,cellStyle:null,createRows:function(){var a=this.get("buttonRow");a=this.createRow(a,0,{titleBinding:".section.title",imageBinding:".section.image",isEnabledBinding:".section.isEnabled",isDefaultBinding:".section.isDefault",selectedTarget:this.get("selectedTarget"),selectedAction:this.get("selectedAction"),style:this.get("cellStyle")});this.beginPropertyChanges();this.set("rows",[a]);this.set("buttonRow",a);this.endPropertyChanges()}});sc_require("sectioned_view/views/sectioned_view_cell");CW.SectionedViewCollectionItemCell=CW.SectionedViewCell.extend({renderDelegateName:"sectionedViewCollectionItemCellRenderDelegate",isSelectedItem:NO,accessoryType:function(){var a=this.get("isSelectedItem");return a?CW.SectionedViewCellAccessoryType.DETAIL_CHECKMARK:null}.property("isSelectedItem"),displayProperties:"isSelectedItem".w()});sc_require("sectioned_view/sections/section");sc_require("sectioned_view/rows/row");sc_require("sectioned_view/views/sectioned_view_collection_item_cell");sc_require("sectioned_view/mixins/collection_section_delegate");CW.SectionedViewCollectionSection=CW.SectionedViewSection.extend(SC.DelegateSupport,CW.SVCollectionSectionDelegate,{content:null,selection:null,delegate:null,target:null,action:null,retainItemSelection:NO,itemsHeaderRow:null,itemsHeaderHeight:null,itemsHeaderCell:null,itemsFooterRow:null,itemsFooterCell:null,itemsFooterHeight:null,itemRowHeight:null,itemCellExample:CW.SectionedViewCollectionItemCell,normalizedBasicItemValueKey:"text",hasItemsHeader:function(){return this.get("itemsHeaderRow")||this.get("itemsHeaderCell")}.property("itemsHeaderRow","itemsHeaderCell").cacheable(),hasItemsFooter:function(){return this.get("itemsFooterRow")||this.get("itemsFooterCell")}.property("itemsFooterRow","itemsFooterCell").cacheable(),collectionSectionDelegate:function(){var a=this.get("delegate");return this.delegateFor("isSVCollectionSectionDelegate",a)}.property("delegate").cacheable(),createRows:function(){var b=[],a=this._createItemRows(),d=this._createHeaderRow(),c=this._createFooterRow();if(d){b.push(d)}if(a){b.pushObjects(a)}if(c){b.push(c)}this._itemsHeaderRow=d;this._itemsFooterRow=c;this._itemRows=a;this.set("rows",b)},_createItemRows:function(){var e=[],c=this.get("content")||[],b=this.get("collectionSectionDelegate"),a=CW.SectionedViewCollectionSection,d=a._ItemRow,f;c.forEach(function(k,j){var h=b.collectionSectionCellForContentAtIndex(this,k,j);if(!h){h=this.get("itemCellExample")}var g=b.collectionSectionRowHeightForContentAtIndex(this,k,j);if(!g){g=this.get("itemRowHeight")}j+=this.get("hasItemsHeader")?1:0;f=this.createRow(d,j,{content:this._normalizeItem(k),cell:h,height:g});f._svcs_originalItem=k;e.push(f)},this);return e},_normalizeItem:function(c){var b=SC.typeOf(c);if(b===SC.T_OBJECT){return c}if(b===SC.T_HASH){return SC.Object.create(c)}var a={};a[this.get("normalizedBasicItemValueKey")]=c;return SC.Object.create(a)},_createHeaderRow:function(){var c=this.get("itemsHeaderRow"),b=this.get("itemsHeaderCell"),a=this.get("itemsHeaderHeight");if(b){c=CW.SectionedViewRow.extend({isContent:NO,cell:b,height:a})}else{if(!c){return null}}return this.createRow(c,0)},_createFooterRow:function(){var e=this.get("itemsFooterRow"),c=this.get("itemsFooterCell"),b=this.get("itemsFooterHeight");if(c){e=CW.SectionedViewRow.extend({isContent:NO,cell:c,height:b})}else{if(!e){return null}}var a=0,d=this.get("content")||[];if(this.get("hasItemsHeader")){a+=1}a+=d.get("length");return this.createRow(e,a)},_itemsDidChange:function(){this.reload();this._selectionDidChange()}.observes("*content.[]"),_selectionDidChange:function(){var b=this.get("owner"),c=this.get("selection"),a,d;d=this._selectedRow;if(d){a=b.cellForRowAtIndexPath(d.get("indexPath"));if(a){a.set("isSelectedItem",NO)}}d=this.rowForItem(c);if(d){a=b.cellForRowAtIndexPath(d.get("indexPath"));if(a){a.set("isSelectedItem",YES)}}this._selectedRow=d}.observes("selection"),rowForItem:function(c){var b=this.get("content")||[],d=this._itemRows||[],a=c?b.indexOf(c):-1;return a>=0?d[a]:null},selectItemRow:function(d){var a=this.get("owner"),c=this.get("target"),b=this.get("action");this.set("selection",d._svcs_originalItem);if(!this.get("retainItemSelection")){this.get("owner").deselectRowAtIndexPath(d.get("indexPath"))}this.invokeLast(function(){d.sendAction(a,c,b)})},sectionedViewDidSetupAllCells:function(a){this._selectionDidChange()},displayDelegateForRow:function(a){a=this.rows[a];return this._itemRows.indexOf(a)>=0?this:null}});CW.SectionedViewCollectionSection._ItemRow=CW.SectionedViewRow.extend({selected:function(a){this.get("section").selectItemRow(this)}});sc_require("sectioned_view/modifiers/sectioned_view_style");sc_require("sectioned_view/mixins/sectioned_view_data_source");sc_require("sectioned_view/mixins/sectioned_view_delegate");sc_require("sectioned_view/views/sectioned_view_cell");CW.SectionedView=SC.ScrollView.extend(CW.SectionedViewDelegate,CW.SectionedViewDataSource,CW.SectionedViewMonitor,{classNames:"cw-sectioned-view".w(),datasource:null,delegate:null,selection:null,allowsSelection:YES,rowHeight:44,style:null,sectionHeaderHeight:25,sectionFooterHeight:25,sectionHeaderViewExample:SC.LabelView,sectionFooterViewExample:SC.LabelView,headerView:null,footerView:null,headerHeight:18,footerHeight:18,rowCellExample:CW.SectionedViewCell,anchorLastSectionToBottom:NO,monitor:null,contentView:SC.View,styleValue:function(){var a=this.get("style");return a?a:CW.SectionedViewStyle.NONE}.property("style").cacheable(),sectionedViewDelegate:function(){var a=this.get("delegate");return this.delegateFor("isSectionedViewDelegate",a)}.property("delegate").cacheable(),sectionedViewDataSource:function(){var a=this.get("dataSource");return this.delegateFor("isSectionedViewDataSource",a)}.property("dataSource").cacheable(),sectionedViewMonitor:function(){var a=this.get("monitor");return this.delegateFor("isSectionedViewMonitor",a)}.property("monitor").cacheable(),reloadData:function(){this.clearSelection();this._updateContentView()},reloadSection:function(c){if(!this._sectionBlocks){return}var b=this._sectionBlocks[c],k=b.get("views")||[],g=k.length,j=this.get("contentView"),f=j.get("childViews")||[],a=f.length,d=null;var e=g>0?g[g-1]:null,h=f.indexOf(e);if(h>-1&&h<a-1){d=f[h+1]}j.beginPropertyChanges();k.forEach(function(m){j.removeChild(m)},this);b.reload();k=b.get("views")||[];k.forEach(function(m){j.insertBefore(m,d);d=m},this);this._readjustAllBlocks();j.endPropertyChanges()},reloadRowAtIndexPath:function(a){},didAppendToDocument:function(){var a=this;this.invokeLater(function(){var b=a._blocks||[];b.forEach(function(c){c.updateHeightIfNeeded()});a._readjustAllBlocks()})},cellForRowAtIndexPath:function(a){var f=this._sectionBlocks,d,c,b=a?a.get("section"):null,e=a?a.get("row"):null;if(!a||!f||b>(f.length-1)){return null}d=f[b];c=d.rows;if(!c||e>(c.length-1)){return null}return c[e]},cellForEvent:function(d){var e=d.target,b=this.get("layer"),c=e,a,f;while(c&&c!==b&&c!==document){if((f=c.id)&&(a=SC.View.views[f])&&a.isSectionedViewCell){return a}c=c.parentNode}return null},deselectRowAtIndexPath:function(a){if(!this.get("allowsSelection")||!a){return}if(!this.validIndexPath(a)){return}this.clearSelection()},selectRowAtIndexPath:function(b){if(!this.get("allowsSelection")||!b){return}this.propertyWillChange("selection");var a=this.cellForRowAtIndexPath(b);if(!a){return}this.propertyWillChange("selection");this.clearSelection();a.set("isSelected",YES);this.set("selection",b);this.propertyDidChange("selection")},clearSelection:function(){var b=this.get("selection"),a;if(!b){return}a=this.cellForRowAtIndexPath(b);if(a){a.set("isSelected",NO)}this.set("selection",null)},validIndexPath:function(b){var a,f,d,c,e;if(!b){return NO}f=this._sectionBlocks;a=f?f.length:0;d=b.get("section");if(d<0||d>=a){return NO}c=f[d].rows;a=c?c.length:0;e=b.get("row");if(e<0||e>=a){return NO}return YES},rowTapStartAtIndexPath:function(c){if(!this.get("allowsSelection")||!this.validIndexPath(c)){return}var b=this.get("sectionedViewDelegate"),e=this.get("selection"),f,d,a;a=this.cellForRowAtIndexPath(c);if(!a||!a.get("isEnabledValue")){return}f=b.sectionedViewWillSelectRowAtIndexPath(this,c);if(e){d=b.sectionedViewWillDeselectRowAtIndexPath(this,e)}a=this.cellForRowAtIndexPath(f);if(!a){return}this._rowTapInfo={selectIndexPath:f,deselectIndexPath:d,cell:a};a.set("isHighlighted",YES)},rowTapEndAtIndexPath:function(c){var b=this.get("sectionedViewDelegate"),e=this._rowTapInfo||{},f=e.selectIndexPath,d=e.deselectIndexPath,a;if(c&&c.equals(f)){this.selectRowAtIndexPath(f);b.sectionedViewDidSelectRowAtIndexPath(this,f);if(d){b.sectionedViewDidDeselectRowAtIndexPath(this,d)}a=this.cellForRowAtIndexPath(d);if(a){a.deselected()}a=this.cellForRowAtIndexPath(f);if(a){a.selected()}}this._cleanupRowTap()},cancelRowTap:function(){this._cleanupRowTap()},_cleanupRowTap:function(){var b=this._rowTapInfo||{},a=b.cell;if(a){a.set("isHighlighted",NO)}this._rowTapInfo=null},rowAccessoryButtonTappedAtIndexPath:function(b){var a=this.get("sectionedViewDelegate");a.sectionedViewAccessoryButtonTappedForRowAtIndexPath(this,b)},render:function(a,d){var b=this.get("styleValue"),c=b.get("classNames");if(d){a.addClass(c)}},createChildViews:function(){arguments.callee.base.apply(this,arguments);this.invokeLast(function(){this._setupContentView()},this);return this},destroy:function(){this._tearDownContentView();arguments.callee.base.apply(this,arguments)},_updateContentView:function(){var a=this.get("sectionedViewMonitor");a.sectionedViewWillUpdateContentView(this);this._tearDownContentView();this._setupContentView();a.sectionedViewDidUpdateContentView(this)},_setupContentView:function(){var e=this.get("contentView"),a=this.get("sectionedViewMonitor"),b=this.get("sectionedViewDelegate"),f=[];a.sectionedViewWillSetupContentView(this);b.sectionedViewWillSetupAllCells(this);this._headerBlock=this._createHeaderBlock();this._footerBlock=this._createFooterBlock();this._sectionBlocks=this._createSectionBlocks();var g=[];g.push(this._headerBlock);g.pushObjects(this._sectionBlocks);g.push(this._footerBlock);this._blocks=g;g.forEach(function(h){h.setup();f.pushObjects(h.get("views"))});e.beginPropertyChanges();var c=this.get("styleValue"),d=c.get("contentLayout");e.adjust({right:d.right||0,left:d.left||0});e.set("childViews",f);e.endPropertyChanges();this._readjustAllBlocks();e.replaceLayer();b.sectionedViewDidSetupAllCells(this);a.sectionedViewDidSetupContentView(this)},_frameDidChange:function(){var a=this._readjustAnchoredBottomBlocks();if(a){var b=this.get("contentView");b.adjust("height",a)}}.observes("frame"),_heightOfAllBlocksWithPadding:function(){var b=this.get("styleValue"),c=b.get("contentLayout"),d=c.top||0,a=c.bottom||0;return this._heightOfAllBlocks()+d+a},_heightOfAllBlocks:function(){var b=this._blocks,a=b?b.length:0;return this._heightOfBlocksToIndex(a-1)},_heightOfBlocksToIndex:function(c){var e=this._blocks,b=e?e.length:0,a=0;if(c>=b){throw"invalid index: "+c}for(var d=0;d<=c;d+=1){a+=e[d].get("height")}return a},_heightOfBlocksFromIndex:function(c){var e=this._blocks,b=e?e.length:0,a=0;if(c>=b){throw"invalid index: "+c}for(var d=c;d<b;d+=1){a+=e[d].get("height")}return a},_readjustAllBlocks:function(){var a=this.get("styleValue"),d=a.get("contentLayout");this._readjustBlockFromIndex(0,d.top||0);var c=this._readjustAnchoredBottomBlocks();if(!c){c=this._heightOfAllBlocksWithPadding()}var b=this.get("contentView");b.adjust("height",c)},_readjustBlockFromIndex:function(b,c){var d=this._blocks,a=d?d.length:0;if(b>=a){return}this._readjustBlockRegion(b,a-1,c)},_readjustAnchoredBottomBlocks:function(){if(!this.get("anchorLastSectionToBottom")){return}var b=this.get("sectionedViewDataSource"),k=b.numberOfSectionsInSectionedView(this),h=this.get("frame").height,c=this._blocks;if(!c){return}var j=c.length;if(k<2){return}var g=j-2;if(this._heightOfAllBlocksWithPadding()>=h){this._readjustBlockFromIndex(g);return}var d=this.get("styleValue"),f=d.get("contentLayout"),a=f.bottom||0,e=this._heightOfBlocksFromIndex(g);top=h-e-a;this._readjustBlockRegion(g,j-1,top);return h},_readjustBlockRegion:function(d,g,k){var b=this._blocks,j=b.length;if(d<0||g>=j){throw"invalid argument provided"}var e=k>=0;for(var h=d;h<=g;h+=1){var f=b[h],c=h-1>=0?b[h-1]:null,a=c?c.get("top")+c.get("height"):0;if(!e){k=c?a:0}f.readjustFromTop(k);e=false}},_createHeaderBlock:function(){return CW.SectionedViewHeaderBlock.create({sectionedView:this})},_createFooterBlock:function(){return CW.SectionedViewFooterBlock.create({sectionedView:this})},_createSectionBlocks:function(){var d=this.get("sectionedViewDataSource"),a=d.numberOfSectionsInSectionedView(this),e=[];for(var b=0;b<a;b+=1){if(d.sectionedViewSectionIsVisible(this,b)){var c=CW.SectionedViewSectionBlock.create({sectionedView:this,sectionIndex:b});e.push(c)}}return e},_tearDownContentView:function(){var a=this.get("sectionedViewMonitor"),b=this.get("sectionedViewDelegate");a.sectionedViewWillTearDownContentView(this);b.sectionedViewWillTearDownAllCells(this);this._tearDownAllBlocks();b.sectionedViewDidTearDownAllCells(this);a.sectionedViewDidTearDownContentView(this)},_tearDownAllBlocks:function(){var a=this.get("contentView");a.beginPropertyChanges();a.removeAllChildren();var b=this._blocks||[];b.forEach(function(c){c.tearDown()});a.endPropertyChanges()},mouseDown:function(a){return this._handleTapStartForEvent(a)},mouseUp:function(a){return this._handleTapEndForEvent(a)},touchStart:function(b){var d=b.averagedTouchesForView(this,YES),c={event:b,handled:NO,x:d.x,y:d.y};this._touchStartInfo=c;var a=this;setTimeout(function(){SC.RunLoop.begin();a._handleTouchStart();SC.RunLoop.end()},100);return arguments.callee.base.apply(this,arguments)},touchesDragged:function(a,d){arguments.callee.base.apply(this,arguments);var c=a.averagedTouchesForView(this),b=this._touchStartInfo;if(!b){return YES}b.touchDragged=YES;if(Math.abs(b.y-c.y)>3){this._touchStartInfo=null;this.cancelRowTap()}return YES},touchEnd:function(a){var c=a.averagedTouchesForView(this),b=this._touchStartInfo;if(b){if(b.handled){this._handleTapEndForEvent(a)}else{if(!b.touchDragged){this.invokeLater(function(){this._handleTapStartForEvent(b.event);this.invokeLater(function(){this._handleTapEndForEvent(a)},100)},10)}}}this._touchStartInfo=null;return arguments.callee.base.apply(this,arguments)},_handleTouchStart:function(){var a=this._touchStartInfo;if(!a){return}a.handled=YES;this._handleTapStartForEvent(a.event)},_handleTapStartForEvent:function(b){var c={};this._tapStartInfo=c;var a=this.cellForEvent(b);if(!a){this._tapStartInfo=null;return NO}c.cell=a;if(a.tryToPerform("sectionedViewTapStartForEvent",this,b)){c.cellHandlingRowTap=YES;return YES}this.rowTapStartAtIndexPath(a.get("indexPath"));return YES},_handleTapEndForEvent:function(c){if(!this._tapStartInfo){return NO}var d=this._tapStartInfo,a=d.cell,b;this._tapStartInfo=null;if(d.cellHandlingRowTap&&a.sectionedViewTapEndForEvent){return a.sectionedViewTapEndForEvent(this,c)}a=this.cellForEvent(c);if(a){b=a.get("indexPath")}this.rowTapEndAtIndexPath(b);return YES},_cw_sv_isEnabledChanged:function(){var b=this._sectionBlocks||[],a=this.get("isEnabled");b.forEach(function(d){var c=d.rows||[];c.forEach(function(e){e.set("isEnabledInSectionedView",a)})})}.observes("isEnabled")});CW.IndexPath=SC.Object.extend(SC.Copyable,{section:null,row:null,copy:function(a){return CW.IndexPath.create({section:this.get("section"),row:this.get("row")})},equals:function(a){if(!a||!SC.kindOf(a,CW.IndexPath)){return NO}return CW.IndexPath.compare(this,a)===0},toString:function(){var b=this.get("row"),a=this.get("section");return"IndexPath(row: %@, section: %@)".fmt(b,a)}});CW.IndexPath.mixin(SC.Comparable,{compare:function(d,c){var e=SC.kindOf(d,CW.IndexPath),f=SC.kindOf(c,CW.IndexPath);if(!e&&!f){throw"Can not compare. a and b must both be of type CW.IndexPath"}if(d.get("section")==c.get("section")){if(d.get("row")===c.get("row")){return 0}return d.get("row")<c.get("row")?-1:1}return d.get("section")<c.get("section")?-1:1}});CW.BUTTON1_STATUS="button1";CW.BUTTON2_STATUS="button2";CW.iOSAlert=SC.PanelPane.extend(CW.SpritePreloadEnforcement,{classNames:"ios-alert".w(),message:"",description:null,extraView:null,extraViewPaddingTop:-2,extraViewPaddingBottom:0,shouldOptimizeMessageLineWidth:YES,shouldOptimizeDescriptionLineWidth:YES,escapeHTML:NO,modalPane:SC.ModalPane.extend(CW.Animatability,CW.PaneFadingSupport,{classNames:"ios-modal",paneFadeInDuration:350,paneFadeOutDuration:350,paneOpacity:0.5,init:function(){arguments.callee.base.apply(this,arguments);var a=SC.RootResponder.responder.mainPane;if(a){var b=a.layout.minWidth,c=a.layout.minHeight;if(b){this.adjust("minWidth",b)}if(c){this.adjust("minHeight",c)}}}}),delegate:null,layout:{centerX:0,width:262},buttons:["OK"],buttonMixin:{themeName:"popupAlertSheet",localize:YES,action:"dismiss"},init:function(){if(!this.hasOwnProperty("buttons")){this.buttons=SC.clone(this.buttons)}arguments.callee.base.apply(this,arguments)},append:function(){var b=this,c=arguments.callee.base,a=arguments;SC.run(function(){c.apply(b,arguments)})},contentView:SC.View.extend({layout:{left:0,right:0,top:0,bottom:0},childViews:["buttons"],buttons:SC.View.extend({layout:{left:0,right:0,bottom:0}}),render:function(a){var d=this.get("pane"),c=d.get("message"),b=d.get("description");if(d.get("escapeHTML")){c=SC.RenderContext.escapeHTML(c);if(b){b=SC.RenderContext.escapeHTML(b)}}a.push('<div class="title-label">'+c+"</div>"+(b?'<div class="description">'+b+"</div>":""))},update:function(){var h=this.get("pane");var d=this.generateButtonsIfNeeded(),g=this.performTextLayoutIfNeeded(),c=this.prepareExtraViewIfNeeded(),b=this._extraView,a=Math.max(this._minHeight,d+g+c),e,f;if(b){e=g;f=a-c-d;b.adjust("top",Math.round((e+f)/2)+h.get("extraViewPaddingTop"))}h.adjust("height",a)},didCreateLayer:function(){this._message=this.$(".title-label")[0];this._description=this.$(".description")[0];this.invokeLast("update")},_messagePadding:{top:10,bottom:7,left:8,right:8},_descriptionPadding:{top:3,bottom:7,left:8,right:8},_buttonsPaddingTop:7,_buttonSpacing:6,_buttonGapRoom:12,_minHeight:119,performTextLayoutIfNeeded:function(){if(this._textLayout){return this._textLayout.totalHeight}var e=this._textLayout||(this._textLayout={messageStyle:{},descriptionStyle:{}}),f=e.messageStyle,m=this._message,j=this._messagePadding,g=e.descriptionStyle,k=this._description,d=this._descriptionPadding,c=this.get("pane"),b=c.get("frame").width,h,a;if(c.get("shouldOptimizeMessageLineWidth")){h=SC.bestStringMetricsForMaxWidth(m.innerHTML,b-j.left-j.right,m,null,true)}else{m.style.maxWidth=b-j.left-j.right+"px";h=SC.metricsForString(m.innerHTML,m,null,true)}f.top=j.top;f.width=h.width;f.height=h.height;f.marginLeft=Math.round(h.width/-2);e.totalHeight=f.top+f.height+j.bottom;for(a in f){f[a]+="px"}if(k){if(c.get("shouldOptimizeDescriptionLineWidth")){h=SC.bestStringMetricsForMaxWidth(k.innerHTML,b-d.left-d.right,k,null,true)}else{k.style.maxWidth=b-d.left-d.right+"px";h=SC.metricsForString(k.innerHTML,k,null,true)}g.top=e.totalHeight+d.top;g.width=h.width;g.height=h.height;g.marginLeft=Math.round(h.width/-2);e.totalHeight=g.top+g.height+d.bottom;for(a in g){g[a]+="px"}}SC.mixin(m.style,f);if(k){SC.mixin(k.style,g)}return e.totalHeight},generateButtonsIfNeeded:function(){if(this._areButtonsGenerated){return this._buttonsHeight}var c=this.get("pane"),o=this.get("buttons"),m=c.get("buttons"),p=c.get("buttonMixin"),n=CW.IOSBIG_BUTTON_REGULAR_HEIGHT,k=this._buttonSpacing,a=c.get("frame").width,d=m.length,j=d===2,q=0,g,b,f,e,h;for(f=0;e=m[f];f++){if(typeof e==="string"){m[f]={title:e}}}if(d===1&&(g=m[0])&&g.isDefault===undefined&&g.isCancel===undefined){g.isDefault=YES;g.isCancel=YES}if(j&&(g=m[0])&&(b=m[1])&&g.isDefault===undefined&&g.isCancel===undefined&&b.isDefault===undefined&&b.isCancel===undefined){g.isCancel=b.isDefault=YES}for(f=0;e=m[f];f++){if(d>2&&f>0&&e.isGapped){q+=this._buttonGapRoom}if(j&&f===0){h={left:0,right:Math.round(a/2+2),top:0,height:n}}else{if(j&&f===1){h={left:Math.round(a/2+2),right:0,top:0,height:n}}else{h={left:0,right:0,top:q,height:n}}}o.appendChild(m[f]=SC.ButtonView.create(p,e,SC.AutoResize,{shouldResizeWidth:NO,shouldAutoFitText:YES,layout:h,actionKey:CW["BUTTON"+(f+1)+"_STATUS"]||(CW["BUTTON"+(f+1)+"_STATUS"]="button"+(f+1))}));if(!j||f===0){q+=n+k}}q-=k;o.adjust("height",q);this._areButtonsGenerated=true;this._buttonsHeight=q+this._buttonsPaddingTop;return this._buttonsHeight},prepareExtraViewIfNeeded:function(){var f=this.get("pane");if(this._extraViewIsPrepared){return(this._extraView&&this._extraView.get("layout").height+f.get("extraViewPaddingTop")+f.get("extraViewPaddingBottom"))||0}this._extraViewIsPrepared=YES;var b=f.get("extraView"),c=this.get("frame").width,a,d,e;if(!b){return 0}if(b.isClass){f.set("extraView",b=b.create())}d=b.get("layout");if(typeof d.height==="number"){a=d.height}else{a=(e=b.get("frame")).height}if(typeof d.height!=="number"){SC.warn("The extraView provided to this iOSAlert did not have a recognizable height (in its layout, or in its frame). Ignoring the extraView.");f.set("extraView",null);return 0}if(b.get("parentView")!==this){b.removeFromParent();this.appendChild(b)}b.set("layout",{left:0,width:c,height:a});this.set("extraView",this._extraView=b);this._lastExtraViewHeight=a+f.get("extraViewPaddingTop")+f.get("extraViewPaddingBottom");return this._lastExtraViewHeight},extraViewFrameDidChange:function(){var b=this.getPath("extraView.frame"),c=this.get("pane"),a=(b&&b.height+c.get("extraViewPaddingTop")+c.get("extraViewPaddingBottom"))||0;if(this._lastExtraViewHeight===a){return}this._lastExtraViewHeight=a;this.update()}.observes("extraView.frame")}),repositionInWindow:function(){var a=this.get("frame").height,b=this.get("currentWindowSize");if(!b){SC.warn("currentWindowSize is not accessible from pane "+this+"! Aborting...");return}b=b.height;if(this._lastFHeight===a&&this._lastWHeight===b){return}this.adjust("top",Math.max(0,Math.round((b-a)/2.5)));this._lastFHeight=a;this._lastWHeight=b}.observes("frame","currentWindowSize"),dismiss:function(b){var a=this.delegate||this;if(a&&a.alertPaneDidDismiss){a.alertPaneDidDismiss(this,b&&b.get("actionKey"))}this.remove()}});CW.iOSAlert.show=function(r,o,g,a,b,c,p,n,f,m){var e;if(SC.typeOf(r)===SC.T_HASH){e=CW.iOSAlert.create(r);e.append();SC.run(function(){e.awake()});return e}var h=SC.A(arguments);var d=h[h.length-1],k=SC.typeOf(d);if(k===SC.T_OBJECT||k===SC.T_HASH){m=d}else{m=null}if(c&&!b){b=c;n=f;c=f=undefined}var j;if(b){j=[{title:b}]}if(c){j.push({title:c})}if(n!==undefined&&j[0]){j[0].isDefault=n}if(f!==undefined&&j[1]){j[1].isDefault=f}var q={message:r||"",description:o||null,escapeHTML:p||NO,delegate:m};!j||(q.buttons=j);e=this.create(q);e.append();SC.run(function(){e.awake()});return e};CW.BorderView=SC.View.extend({classNames:"cw-border-view",renderDelegateName:"borderRenderDelegate"});sc_require("render_delegates/ios_picker");CW.iOSPickerPane=SC.PickerPane.extend(CW.Animatability,CW.PaneFadingSupport,{renderDelegateName:"iOSPickerRenderDelegate",paneFadeInDuration:0,fitPositionToScreenPointer:function(d,j,c){var g=arguments.callee.base.apply(this,arguments),k=30,e;var b=this.get("pointerPos"),h=this.get("pointerPosY");if(b==="perfectLeft"||b==="perfectRight"){if(h>=0&&h<k){g.y=g.y-k;h+=k}}h-=2;this.set("pointerPosY",h);return g},popup:function(c,b,d,a){if(!a){a=[13,-13,-9,9]}arguments.callee.base.call(this,c,b,d,a)},performKeyEquivalent:function(b,a){switch(b){case"escape":this.modalPaneDidClick(a);return YES;default:return NO}}});CW.iOScallout=SC.PickerPane.extend(CW.Animatability,CW.PaneFadingSupport,{renderDelegateName:"iOSCalloutRenderDelegate",themeName:"iOS",preferMatrix:[2,2,2,2,2],layout:{height:43,width:215,minWidth:150},classNames:["iOSCallout"],titleValue:"Callout title",detailValue:"Callout detail",escapeTitle:YES,escapeDetail:YES,target:"",action:"",preferType:SC.PICKER_POINTER,acceptsKeyPane:NO,acceptsFirstResponder:NO,isModal:NO,repositionOnWindowResize:NO,pointerOffset:[0,0,0,0],contentView:SC.View.extend({childViews:["title","detail","button"],title:SC.LabelView.extend({layout:{top:0,height:25,left:9,right:35},classNames:"title",escapeHTMLBinding:"*parentView.parentView.escapeTitle",valueBinding:"*parentView.parentView.titleValue"}),detail:SC.LabelView.extend({layout:{top:24,left:9,height:15},classNames:"detail",escapeHTMLBinding:"*parentView.parentView.escapeDetail",valueBinding:"*parentView.parentView.detailValue"}),button:SC.ImageButtonView.extend({layout:{top:7,height:30,right:5,width:30},image:"info_button",targetBinding:"*parentView.parentView.target",actionBinding:"*parentView.parentView.action"})}),didCreateLayer:function(){this.invokeLater(this.recomputeLayout,0)},recomputeLayout:function(){var c=this.$(".title")[0],a=this.$(".detail")[0];if(SC.none(c)||SC.none(a)){return}var e=SC.metricsForString(this.get("titleValue"),c,null,NO),b=SC.metricsForString(this.get("detailValue"),a,null,NO),d=(e.width>b.width?e.width:b.width)+55;d=(d%2?d-1:d);this.adjust({width:d});this.positionPane()},showCalloutInContainer:function(a){this._hideOverflow();this.appendTo(a)},valuesObserver:function(){this.recomputeLayout()}.observes("detailValue","titleValue","layer"),modalPaneDidClick:function(){return NO}});sc_require("navigation_controller");CW.NavigationBarView=SC.View.extend(CW.Animatability,{classNames:["cw-navigation-bar"],themeNameBinding:".parentView.associatedView.navigationBarTheme",childViews:"barContainer".w(),barContainer:SC.View.design({childViews:"title leftBarButton rightBarButton".w(),classNames:"cw-bar-container".w(),layout:function(){var a=this.get("parentView");while(a){if(a.kindOf(CW.iOSPickerPane)){return{top:6,left:0}}a=a.get("parentView")}return{top:6,left:5,right:5}}.property(),title:SC.LabelView.design({layout:{left:70,right:70},classNames:["cw-navigation-bar-item","cw-navigation-bar-title"],textAlign:SC.ALIGN_CENTER,escapeHTMLBinding:".parentView.parentView.associatedView.escapeHTML",iconBinding:".parentView.parentView.associatedView.icon",valueBinding:".parentView.parentView.associatedView.title"}),leftBarButton:SC.ButtonView.design(SC.AutoResize,{layout:{top:1,left:0,height:30,width:60},autoResizePadding:8,classNames:["cw-navigation-bar-item"],themeNameBinding:".parentView.parentView.associatedView.leftBarButtonTheme",isVisibleBinding:".parentView.parentView.associatedView.hasLeftBarButton",isEnabledBinding:".parentView.parentView.associatedView.realLeftBarButtonIsEnabled",titleBinding:".parentView.parentView.associatedView.leftBarButtonTitle",targetBinding:".parentView.parentView.associatedView.leftBarButtonTarget",actionBinding:".parentView.parentView.associatedView.leftBarButtonAction",maxWidthBinding:".parentView.parentView.associatedView.leftBarButtonMaxWidth"}),rightBarButton:SC.ButtonView.design(SC.AutoResize,{layout:{top:1,right:0,height:30,width:60},autoResizePadding:10,classNames:["cw-navigation-bar-item"],themeNameBinding:".parentView.parentView.associatedView.rightBarButtonTheme",isVisibleBinding:".parentView.parentView.associatedView.hasRightBarButton",isEnabledBinding:".parentView.parentView.associatedView.realRightBarButtonIsEnabled",titleBinding:".parentView.parentView.associatedView.rightBarButtonTitle",targetBinding:".parentView.parentView.associatedView.rightBarButtonTarget",actionBinding:".parentView.parentView.associatedView.rightBarButtonAction",maxWidthBinding:".parentView.parentView.associatedView.rightBarButtonMaxWidth"})})});CW.NavigationView=SC.View.extend(CW.Animatability,{classNames:["cw-navigation-view"],navigationController:null,navigationBar:null,navigationBarHeight:44,actionSheetContent:null,contentView:null,wellViewClassType:CW.BorderView,init:function(){var a=this.get("navigationController"),b=this.get("contentView");a.set("navigationView",this);arguments.callee.base.apply(this,arguments)},createChildViews:function(){var a=this.get("wellViewClassType"),d=this.get("navigationBarHeight"),b={top:d,left:0,right:0,bottom:0};var c=this.createChildView(a,{layout:b,classNames:["cw-navigation-well"]});this.set("well",c);this.childViews=[c]},didCreateLayer:function(){var a=this.get("contentView").create();this.get("navigationController").push(a,NO)}});CW.iOSNotification=SC.PanelPane.extend(CW.SpritePreloadEnforcement,CW.Animatability,CW.PaneAnimationSupport).extend({acceptsKeyPane:NO,isIOSNotification:YES,hasBeenSeen:NO,isDismissable:YES,icon:undefined,iconWidth:35,iconHeight:35,iconInset:9,message:undefined,description:undefined,shouldAdornEndingDescriptionLinkWithArrow:YES,dismiss:function(){this.remove();this.didDismiss()},didDismiss:function(){},hiddenState:function(){return{top:-this.get("frame").height-31}}.property(),showingState:{top:1},MAX_WIDTH:1093,MIN_WIDTH:120,MIN_HEIGHT:48,maxWidth:Infinity,minimumSideClearance:100,layout:{centerX:0},isModal:NO,classNames:"ios-notification".w(),windowResized:function(){var b=this.get("currentWindowSize");if(!b||!b.width){return}var a=Math.max(CloudOS.MIN_WIDTH,b.width);this.set("maxWidth",Math.max(this.MIN_WIDTH,Math.min(a-this.get("minimumSideClearance")*2,this.MAX_WIDTH)))}.observes("currentWindowSize","minimumSideClearance"),render:function(b){window.iosnotification=this;for(var a=0,e="";a<9;a++){e+='<div class="'+SC.NINE_SLICE[a]+'"></div>'}b.push('<div class="shadow" aria-hidden=true>'+e+"</div>");b.push('<div class="background" aria-hidden=true>'+e+"</div>");var d=this._lastMess=this.get("message"),c=this._adornStringWithArrowIfNeeded(this._lastDesc=this.get("description"));b.push('<div class="message">'+d+"</div>");b.push('<div class="description">'+c+"</div>");this.adjust("zIndex",this.get("isDismissable")?CW.iOSNotification.runningDismissableZIndex++:CW.iOSNotification.runningNonDismissableZIndex++)},displayProperties:"message description icon maxWidth".w(),update:function(){var c,b,a;if(this._lastMess!==(this._lastMess=c=this.get("message"))){this.$(".message")[0].innerHTML=c}if(this._lastDesc!==(this._lastDesc=b=this.get("description"))){this.$(".description")[0].innerHTML=this._adornStringWithArrowIfNeeded(b);a=YES}if(this.didChangeFor("update","maxWidth")){a=YES}if(a){this.invokeLast("finishLayerDependentRendering")}},didCreateLayer:function(){this.$(".description")[0].cacheableForMetrics=YES;this.windowResized()},finishLayerDependentRendering:function(){var h=this.get("frame"),g=this.get("layer"),j,c=this.get("icon"),a,b,k,d;if(this._lastIconInput!==(this._lastIconInput=c)){if((j=this._icon)&&j.parentNode){j.parentNode.removeChild(j)}this._icon=null}if(!(j=this._icon)){if(typeof c==="string"&&c.indexOf("/")!==-1){(this._icon=j=new Image()).src=c;var e="z-index:3; position:absolute; left:"+this.get("iconInset")+"px; width:"+this.get("iconWidth")+"px; height:"+(k=this.get("iconHeight"))+"px; margin-top:-"+Math.floor(k/2)+"px; top:50%;";j.style.cssText=e;j.setAttribute("aria-hidden",true);g.appendChild(j)}else{if(c){if(typeof c==="string"){j=document.createElement("div");j.className=c;this._icon=j}a=(this._icon||(this._icon=j=c)).style;a.position="absolute";a.left=this.get("iconInset")+"px";a.top="50%";a.zIndex="3";j.setAttribute("aria-hidden",true);g.appendChild(j);this.invokeOnce(function(){var m,f;this.set("iconWidth",m=parseInt(jQuery(j).css("width"),0)||this.get("iconWidth"));this.set("iconHeight",f=parseInt(jQuery(j).css("height"),0)||this.get("iconHeight"));a.marginTop=-Math.ceil(f/2)+"px"})}else{if(this.get("iconWidth")){this.set("iconWidth",b=0)}if(this.get("iconHeight")){this.set("iconHeight",k=0)}if((d=this._separator)){if(d.parentNode){d.parentNode.removeChild(d)}this._separator=undefined}}}}this.invokeOnce(function(){if(this._icon&&!(d=this._separator)){(this._separator=d=document.createElement("div")).style.cssText="position:absolute; left:"+(this.get("iconInset")*2+this.get("iconWidth"))+"px; top:0px; width:1px; bottom:0px; z-index:4; background:black;";CW.Anim.setOpacity(d,0.12);d.setAttribute("aria-hidden",true);g.appendChild(d)}});this.invokeOnce("sizeToText")},sizeToText:function(){var a,b=29,j,f,e=0,c=0,g=27,d=6;a=2+((!!this.get("icon"))*2+1)*this.get("iconInset")+this.get("iconWidth");if((j=this._message||(this._message=this.$(".message")[0]))){j.style.left=a+"px"}if((f=this._description||(this._description=this.$(".description")[0]))){f.style.left=a+"px"}if(f){e=SC.bestStringMetricsForMaxWidth(f.innerHTML,this.get("maxWidth")-a-b,f,undefined,true);c=e.height;e=e.width}var h=Math.max(this.MIN_HEIGHT,d+g+c);if(this.get("iconHeight")){h=Math.round(h/2)*2+(this.get("iconHeight")%2!==0)}this.adjust({width:Math.max(this.MIN_WIDTH,a+b+e),height:h})},animateShow:function(){var b=CW.PaneAnimationSupport.animateShow,a=arguments;this.invokeLast(function(){b.apply(this,a)})},contentView:SC.ButtonView.design({classNames:"dismiss".w(),layout:{width:16,height:16,right:6,centerY:0},renderDelegate:{render:function(b,a){},update:function(a,b){}},action:"dismiss"}),append:function(){this.set("hasBeenSeen",YES);this._isAppended=YES;return this.appendTo(this.get("parentElement")||CW.iOSNotification.defaultParentElement||document.body)},remove:function(){var a=arguments.callee.base.apply(this,arguments);this._isAppended=NO;CW.iOSNotification.notificationWasRemoved(this);return a},replaceWith:function(a){CW.iOSNotification.replaceNotificationWithNotification(this,a)},init:function(){if(!this.get("isDismissable")){this.contentView=null}arguments.callee.base.apply(this,arguments)},_adornStringWithArrowIfNeeded:function(a){if(!this.get("shouldAdornEndingDescriptionLinkWithArrow")){return a}if(!a){return""}if(a.substring(a.length-4)==="</a>"){a=a.substring(0,a.length-4)+'<div class="ios-notification-link-arrow"></div></a>'}if(a.substring(a.length-5)==="</a>."){a=a.substring(0,a.length-5)+'.<div class="ios-notification-link-arrow"></div></a>'}return a}});SC.mixin(CW.iOSNotification,{runningDismissableZIndex:2000,runningNonDismissableZIndex:1000,show:SC.RunLoop.wrapFunction(function(b){var a=b.isIOSNotification?b:this._simpleCreate.apply(this,arguments);a.append();return a}),queue:[],enqueue:function(b){var a=b.isIOSNotification?b:this._simpleCreate.apply(this,arguments);a._isInQueue=YES;this.queue.unshift(a);this.updateToQueue();return a},updateToQueue:SC.RunLoop.wrapFunction(function(){var a=this.queue;if(!a.length){return}var b=a[a.length-1];if(!b._isAppended){b.append()}}),notificationWasRemoved:function(c){if(this._ignoreRemovals){return}for(var b=0,a=this.queue;this.queue[b];b++){if(a[b]===c){a.splice(b,1)}}this.updateToQueue()},replaceNotificationWithNotification:function(b,c){for(var d=0,a=this.queue,e;e=a[d];d++){if(e===b){a[d]=c;if(d===a.length-1){this._ignoreRemovals=YES;b.remove();this._ignoreRemovals=NO;c.append()}break}}},_simpleCreate:function(f,e,d,c,a){var b;if(typeof f==="object"){(b=this.create.apply(this,arguments))}else{(b=this.create({message:f,description:e,icon:d,isDismissable:!(c===NO),parentElement:a}))}return b}});CW.TouchScrollerView=SC.TouchScrollerView.extend({touchScrollDidStart:function(){arguments.callee.base.apply(this,arguments);this.$(".thumb").css("opacity",0.5)},touchScrollDidEnd:function(){arguments.callee.base.apply(this,arguments);this.$(".thumb").css("opacity",0)}});SC.ScrollView.prototype.verticalTouchScrollerView=CW.TouchScrollerView;SC.ScrollView.prototype.horizontalTouchScrollerView=CW.TouchScrollerView;SC.stringsFor("en-us",{"Name.Display.FirstAndFamilyNames":"%{firstName} %{familyName}"});CK=SC.Object.create({NAMESPACE:"CK",VERSION:"1.0.0",currentApplication:null});CK.mixin({getCurrentLocaleInISOFormat:function(){var b=String.preferredLanguage,a=null;if(b){a=b.substr(0,2).toLowerCase()+"_"+b.substr(3,5).toUpperCase()}return a},displayNameFor:function(d,b,f,e,a){var c;if(d&&b){c="Name.Display.FirstAndFamilyNames".loc({firstName:d,familyName:b})}else{if(d){c=d}else{if(b){c=b}else{if(e){c=e}else{if(a){c=a}}}}}if(!c){c=f||""}return c},readCookie:function(f,a){var c=document.cookie,b,e,d;if(c.length>0){if(a){d=c.match(new RegExp("("+f+")="));if(d){f=d[1]}}b=c.indexOf(f+"=");if(b!==-1){b=b+f.length+1;e=c.indexOf(";",b);if(e===-1){e=c.length}return window.unescape(c.substring(b,e))}}return null},writeCookie:function(a,c,j,f,g,h){var d,b,e;if(!a){return undefined}if(c===undefined||c===null){c="";d="expires=Thu, 01-Jan-1970 00:00:01 GMT;"}if(g){b=g*1000*60*60;d="expires="+new Date(new Date().getTime()+(b))}if(h){d+=";Secure"}if(!j){j="/"}if(!f){f="."+window.location.hostname}document.cookie=a+"="+c+";path="+j+";domain="+f+";"+d;return c},formatNumberWithLocale:function(a){return CW.formatNumber(a,"Numbers.ThousandsSeparator".loc(),"Numbers.DecimalSeparator".loc())}});CK.errorCatcher=SC.Object.create({enabledInDevMode:NO,bubbleErrorsToCloudOS:YES,exceptionCallback:null,namespacesToSymbolicate:null,isReporting:NO,init:function(){arguments.callee.base.apply(this,arguments);if(this.get("enabledInDevMode")||(SC.buildMode==="production")){this.set("enabled",YES);SC.ExceptionHandler=this}else{SC.ExceptionHandler=null}},reportBadRequest:function(a){if(!a){a={}}a.origin="client";a.type="bad request";return this._handleError(a)},reportServerError:function(a){if(!a){a={}}a.origin="server";a.type="error";return this._handleError(a)},handleException:function(a){a.recordedStack=a.recordedStack||CW.recordStack(YES,YES);return this._handleError({exception:a,isFatal:YES,origin:"client",type:"exception"})},_handleError:function(d){if(!d){SC.error("Warning: No parameters were specified in _handleError");return YES}if(this.get("isReporting")){return YES}SC.debug("CloudKit: ErrorCatcher dialog invoked.");if(d.isFatal&&CK.currentApplication&&this.get("bubbleErrorsToCloudOS")===YES){var c=SC.Logger.stringifyRecordedLogMessages();CloudOS.handleApplicationCrash(d,c);return NO}else{var b=CK.currentApplication,a=b?b.get("capitalizedName"):"cloudos";if(a&&!d.applicationName){d.applicationName=a}if(d.exception){SC.RunLoop.kill()}SC.Module.loadModule("cloudkit/error_catcher","CK.errorCatcher","moduleDidLoad",d);this.set("isReporting",YES)}return YES}});CK.AccountPreferences=SC.Object.extend({user:null,hasInitialized:NO,preferencesVersion:"",timeZone:"US/Pacific",timezoneName:"City.Cupertino - U.S.",locale:null,lastUsedApp:null,startupUrls:null,prefsList:["locale","timeZone","timezoneName","lastUsedApp","lastDismissedMotm"],prefsOmittedFromNotification:["locale","lastUsedApp","lastDismissedMotm"],prefsHash:function(){var e=this.get("prefsList"),d={},c,b,a;for(b=0,a=e.length;b<a;b++){c=e[b];if(this.get(c)!==null&&this.get(c)!==undefined){d[c]=this.get(c)}}return d},commit:function(a){if(this._commitTimer){this._commitTimer.invalidate()}this._commitTimer=null;COS.prefsController.savePreferences("account",this.prefsHash(),a)},commitLater:function(a,b){if(this._commitTimer){this._commitTimer.invalidate()}this._commitTimer=this.invokeLater("commit",a,b)},commitStartupUrls:function(b){var a={startupUrls:this.get("startupUrls")};COS.prefsController.savePreferences("account",a,b)},set:function(a,b){if(this.get("hasInitialized")&&this.prefsOmittedFromNotification.indexOf(a)===-1&&this.prefsList.indexOf(a)!==-1&&this[a]!==b){this.invokeOnce(COS.prefsController.notifyAccountPreferencesDidChange)}return arguments.callee.base.apply(this,arguments)}});CK.User=SC.Object.extend({_accountInfo:null,statusCode:undefined,firstName:undefined,lastName:undefined,primaryEmail:undefined,primaryEmailIsVerified:function(){return this.getPath("_accountInfo.primaryEmailVerified")}.property(),displayName:function(){var b=this.get("firstName"),a=this.get("lastName"),c=this.get("appleId");return CK.displayNameFor(b,a,c)}.property("firstName","lastName","appleId"),appleIdAlias:undefined,appleId:undefined,dsPrsID:undefined,preferences:function(){var b=this._preferences_cache;if(b){return b}var a=CK.AccountPreferences.create({user:this});this._preferences_cache=a;return a}.property(),unknownProperty:function(a){var b=this._accountInfo;if(!b){return}return b[a]},destroy:function(){var a=this._preferences_cache;if(a){a.destroy()}this._accountInfo=null;this._preferences_cache=null;return arguments.callee.base.apply(this,arguments)}});CK.User.mixin({PAID_LAPSED:-3,PAID_NOT_CREATED_YET:-2,FREE_NOT_CREATED_YET:-1,INACTIVE:0,PAID_ACTIVE:1,FREE_QUALIFIED:2,FREE_NOT_QUALIFIED:3});COS=SC.Object.create({NAMESPACE:"COS",VERSION:"1.0.0",getCredentialsFromQueryParameters:function(){var d=CW.getUrlParameters(),b=null,e=d.user||d.username,a=d.pass||d.password,c=d.extended||d.extendedLogin;c=!!c;if(e&&a){b={username:e,password:a,extendedLogin:c}}return b},handleApplicationCrash:function(a){SC.Module.loadModule("cloudkit/error_catcher","CK.errorCatcher","moduleDidLoad",a)},openHelp:function(f,g,e){var b=(f&&f.get&&f.get("name"))||"",a=COS.getLegacyLprojNameForLocale(String.preferredLanguage),d,c;if(b&&!g&&!e){c=b==="find"?"fmi":b}if(!c){d="http://help.apple.com/icloud/%@/".fmt(a)}else{d="http://help.apple.com/icloud/%@/%@".fmt(a,b)}if(e){d+="#"+e}window.open(d,"help","location=0,status=0,scrollbars=0, width=855,height=600")}});sc_require("core");COS.apps={contacts:{path:"/contacts/",hasPreferences:YES,requiredServices:["contacts","keyvalue"]},calendar:{path:"/calendar/",hasPreferences:YES,requiredServices:["calendar","keyvalue"]},find:{path:"/find/",requiredServices:["findme"]},mail:{path:"/mail/",requiredServices:["mail"]},iwork:{path:"/iwork/",requiredServices:["ubiquity"]},documents:{path:"/documents/",requiredServices:["ubiquity"]}};COS.AppInfo=SC.Object.extend({name:null,capitalizedName:function(){var a=this.get("name");if(a){if(a.charAt(0)!=="i"){a=a.capitalize()}else{a="i"+a.substring(1).capitalize()}}return a}.property("name").cacheable(),path:null,hasPreferences:NO,preferences:null,preferencesVersion:"",isReady:NO,isDisabled:NO,isUnqualified:NO,isRamped:NO,requiredServices:null,requestedStartupUrl:null,startupResponse:null,startupNotified:NO});sc_require("system/apps.js");sc_require("models/app_info_model.js");COS.appsController=SC.Object.create({getAppInfoFor:function(a){if(!a){CW.fatalError("getAppInfoFor():  An application name must be specified")}var b=this._appsInfo;return b[a]||null},init:function(){var b=arguments.callee.base.apply(this,arguments),e=COS.apps,d={},a,c;for(a in e){c=e[a];if(c){c=SC.clone(c,YES);c.name=a;d[a]=COS.AppInfo.create(c)}else{SC.warn("COS.appsController:  Ignoring application %@ because it has no hash information in COS.apps",a)}}this._appsInfo=d;return b},_appsInfo:null});COS.Request=CW.Request.extend({useCrossDomain:YES,attachIdentifyingHeaders:NO,contentType:undefined,init:function(){var a;arguments.callee.base.apply(this,arguments);if(this.get("useCrossDomain")){a=this.get("contentType");if(a===undefined){a="text/plain";this.set("contentType",a)}}if(!a){a=this.get("contentType")}if(a){this.header("Content-Type",a)}}});sc_require("system/request");COS.AuthController=SC.Object.extend(SC.DelegateSupport,{delegate:null,isAuthenticated:NO,isAuthenticating:NO,siteURL:"https://www.icloud.com",isLoadedFromSiteURL:null,validateURL:"https://setup.icloud.com/setup/ws/1/validate",loginURL:"https://setup.icloud.com/setup/ws/1/login",logoutURL:function(){var a=COS.servicesController.getServiceUrlFor("account");if(a){return a+"/setup/ws/1/logout"}else{return"https://setup.icloud.com/setup/ws/1/logout"}}.property(),environment:null,_auth_bag:null,_user_cache:null,init:function(){this.set("isLoadedFromSiteURL",(window.location.href.indexOf(this.get("siteURL"))===0?YES:NO))},getUser:function(){return this.get("user")},user:function(){return this._user_cache||(this._user_cache=!this._auth_bag?null:CK.User.create({_accountInfo:this._auth_bag.dsInfo}))}.property(),clearUserState:function(){var a=this._user_cache;if(a){a.destroy()}this._auth_bag=null;this._user_cache=null;CK.tryToPerform("clearLocalStorage")},validateUser:function(e){var a=this.get("delegate"),b=this.get("validateURL"),d=COS.Request.postUrl(b,null),c=this;d.notify(200,this,function(f){var h=f.get("body"),g=c._decodedResponseBody(h);if(!g||!g.dsInfo||!g.webservices){SC.debug("Missing critial information in bag: %@",h);SC.debug("CloudKit: invoking validateDidFail");c.invokeDelegateMethod(a,"validateDidFail",f,g);return YES}c._auth_bag=g;c.notifyPropertyChange("user");c.set("isAuthenticating",NO);c.set("isAuthenticated",YES);c._authCompleted(g,e,f,d);SC.debug("COS: invoking validateDidSucceed with body %@",g);c.invokeDelegateMethod(a,"validateDidSucceed",g);return YES});d.notify(0,this,function(f){var h=f.get("body"),g=c._decodedResponseBody(h);c.set("isAuthenticating",NO);c.set("isAuthenticated",NO);SC.debug("COS: invoking validateDidFail");c.invokeDelegateMethod(a,"validateDidFail",f,g);return YES});this.set("isAuthenticating",YES);SC.debug("COS: Sending validate POST request to %@",b);this.invokeDelegateMethod(a,"validateRequestWillBeSent");d.send()},loginUser:function(b,h,c,j,f){var a=this.get("loginURL"),g=COS.Request.postUrl(a,null),k=this.get("delegate"),e=this;g.notify(200,this,function(m){var o=m.get("body"),n=e._decodedResponseBody(o);if(!n||!n.dsInfo||!n.webservices){SC.debug("Missing critial information in bag:  %@",o);SC.debug("COS: invoking loginDidFail");e.invokeDelegateMethod(k,"loginDidFail",m,n);return YES}e._auth_bag=n;e.notifyPropertyChange("user");e.set("isAuthenticating",NO);e.set("isAuthenticated",YES);e._authCompleted(n,j,m,g);SC.debug("COS: invoking loginDidSucceed");e.invokeDelegateMethod(k,"loginDidSucceed",n);if(f){e.set("secondaryLoginAttemptsCount",0)}return YES});g.notify(0,this,function(m){var o=m.get("body"),n=e._decodedResponseBody(o);e.set("isAuthenticating",NO);if(!f){e.set("isAuthenticated",NO);SC.debug("COS: invoking loginDidFail");e.invokeDelegateMethod(k,"loginDidFail",m,n)}else{if(e.secondaryLoginAttemptsCount>=3){e.logoutUser()}else{CloudOS.statechart.sendAction("authDidNotValidate")}}return YES});e.set("isAuthenticating",YES);var d={apple_id:b,password:h,extended_login:c};this.set("isAuthenticating",YES);SC.debug("CloudKit: Sending login POST request to %@",a);this.invokeDelegateMethod(k,"loginRequestWillBeSent");g.send(SC.json.encode(d))},logoutUser:function(g,b,f){if(!SC.browser.msie||f){var c=this.get("logoutURL"),e=COS.Request.postUrl(c,null),a=this.get("delegate"),d=this;if(b===NO){e.set("isAsynchronous",b)}e.set("timeout",null);e.notify(200,this,function(h){d.set("isAuthenticating",NO);d.set("isAuthenticated",NO);SC.debug("CloudKit: invoking logoutDidSucceed");d.invokeDelegateMethod(a,"logoutDidSucceed");if(g instanceof Function){g(h)}return YES});e.notify(0,this,function(h){d.set("isAuthenticating",NO);d.set("isAuthenticated",NO);SC.debug("CloudKit: invoking logoutDidFail");d.invokeDelegateMethod(a,"logoutDidFail",h);if(g instanceof Function){g(e)}return YES});SC.debug("CloudKit: Sending logout POST request to %@",c);this.invokeDelegateMethod(a,"logoutRequestWillBeSent");e.send()}this.clearUserState()},secondaryLoginAttemptsCount:0,secondaryLogin:function(d,c,b,a){this.secondaryLoginAttemptsCount++;this.loginUser(d,c,b,function(){CloudOS.statechart.sendAction("authDidValidate");var f=CK.currentApplication||CloudOS.appManagerFor(a).get("instance"),e=f.get("delegate");f.invokeDelegateMethod(e||f,"secondaryAuthDidSucceed")},true)},_authCompleted:function(b,f,a,e){COS.servicesController._setupFromBag(b);var u=this.getUser(),d=u.get("statusCode"),h=this.get("delegate");this.set("environment",a.get("headers")["X-Responding-Instance"]);if(u.get("statusCode")===CK.User.PAID_ACTIVE){SC.debug("The user is a MobileMe user, %@. Invoking delegate userIsMobileMe()",d);this.invokeDelegateMethod(h,"userIsMobileMe");this.clearUserState();return}else{if(u.get("statusCode")!==CK.User.FREE_QUALIFIED){SC.debug("The user is not signed up to iCloud, %@. Invoking delegate userIsNotSignedUp()",d);this.invokeDelegateMethod(h,"userIsNotSignedUp");this.clearUserState();return}else{if(!u.get("primaryEmailIsVerified")){SC.debug("The user primary email is not verified. Invoking delegate userIsNotVerified()");this.invokeDelegateMethod(h,"userIsNotVerified");this.clearUserState();return}}}var c=COS.appsController._appsInfo,r,o,m,q,n,j,t,p=NO,k=u.get("hasICloudQualifyingDevice"),s=NO;for(r in c){o=c[r];n=o.get("requiredServices");if(!n){continue}for(m=0,q=n.length;m<q;m++){j=n[m];if(!(t=COS.servicesController.getServiceInfoFor(j))){SC.debug("Auth bag did not contain service %@, disabling app %@",j,r);o.set("isDisabled",YES);if(!k&&r!=="find"){o.set("isUnqualified",YES);s=YES}}else{if(t.status==="inactive:ramped"){p=YES;o.set("isDisabled",YES);o.set("isRamped",YES)}}}}if(!k&&s){this.invokeDelegateMethod(h,"userIsUnqualified")}else{if(p){this.invokeDelegateMethod(h,"userIsRamped")}}this.set("isUserRamped",p);this.set("isUserUnqualified",!k&&s);if(p&&!COS.servicesController.getServiceInfoFor("mail")){c.mail.set("isDisabled",YES);c.mail.set("isRamped",YES)}var g=e._crossDomainMethod;if(g&&g!=="cors"){this._enqueIFrameLogoutRequest()}if(!COS.authController.getPath("user.preferences.hasInitialized")){COS.prefsController.getPreferences(null,f)}else{if(f&&SC.typeOf(f)===SC.T_FUNCTION){f.call()}}},_enqueIFrameLogoutRequest:function(){var c=SC.Request.manager,f=c.get("crossDomainIFrames"),b=this.get("logoutURL"),a=COS.Request.postUrl(b,null),g=a.get("destinationDomain"),e,d;e=function(){var h={url:a.getFullAddress(),type:a.get("type"),headers:a.get("headers"),body:a.get("body"),sendOnlyAtClose:YES};this.contentWindow.postMessage(SC.json.encode(h),g)};d=f?f[g]:null;if(d){e.call(d)}else{c._createCrossDomainIFrame(g,a.get("iFrameScriptLocation"));f=c.get("crossDomainIFrames");d=f[g];if(!d){CW.fatalError("We expected the logout iframe to be created by now")}d.onload=d.onreadystatechange=function(){if(!d.loaded&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){d.loaded=true;e.call(this)}}}},_decodedResponseBody:function(c){var a;try{a=SC.json.decode(c)}catch(b){SC.warn("Could not decode JSON: %@",b.message)}return a}});sc_require("system/request");COS.prefsController=SC.Object.create(SC.DelegateSupport,{delegate:null,getPreferences:function(g,k){var a=[],e=COS.apps,b;if(g){a.push({"app-id":g,"registry-version":""})}else{a.push({"app-id":"account","registry-version":""});for(b in e){if(e[b].hasPreferences){a.push({"app-id":b,"registry-version":""})}}}var d=COS.Request.create({type:"POST",address:"/json/sync",applicationName:g,COPY_KEYS:COS.Request.prototype.COPY_KEYS.concat(["applicationName"])});var h=d.get("address"),f=COS.servicesController.getServiceUrlFor("keyvalue",YES);var c={"service-id":"appleprefs",apps:a};d.set("address",f+h);d.notify(200,this,this.getPreferencesDidSucceed,k);d.notify(0,this,this.getPreferencesDidFail,k);SC.debug("CloudKit: requesting preferences");var j=this.get("delegate");this.invokeDelegateMethod(j,"getPreferencesRequestWillBeSent");d.send(SC.json.encode(c))},getPreferencesDidSucceed:function(b,n){var a=b.get("body"),k=COS.appsController,e,q,h,m,j,c,d,f,o,g;if(!a){this.getPreferencesDidFail(b);return}var p=SC.json.decode(a);if(!p||p.status!==0){this.getPreferencesDidFail(b);return}for(j=0,c=p.apps.length;j<c;j++){q=p.apps[j];e=q["app-id"];o=q.keys;g=q["registry-version"];h=k.getAppInfoFor(e);if(h){f={};if(o){o.forEach(function(r){f[r.name]=r.data})}h.set("preferences",f);h.set("preferencesVersion",g)}else{if(e==="account"){d=COS.authController.getPath("user.preferences");if(d){d.set("preferencesVersion",g);if(o){o.forEach(function(r){d.set(r.name,r.data)})}d.set("hasInitialized",YES)}}else{SC.error("COS:  Cannot find application information for %@",e)}}}SC.debug("COS:  Successfully retrieved the preferences");if(n&&SC.typeOf(n)===SC.T_FUNCTION){n.call(this,b)}return YES},getPreferencesDidFail:function(a,c){var b=a.getPath("request.applicationName");SC.debug("COS:  There was an error getting the preferences, status %@, body %@",a.get("status"),a.get("body"));if(c&&SC.typeOf(c)===SC.T_FUNCTION){c.call(this,a)}return YES},savePreferences:function(k,a,n){if(SC.typeOf(a)!==SC.T_HASH){SC.debug("CloudKit: preferences to save is not hash");return}var j=COS.appsController,f=j.getAppInfoFor(k),g,o,c;if(f){o=f.get("preferences");g=f.get("preferencesVersion");if(CW.valuesAreEqual(a,o)){SC.debug("CloudKit: Preferences did not change for %@, so will not send to server.",k);return}}else{if(k==="account"){o=COS.authController.getPath("user.preferences");g=o&&o.get("preferencesVersion")}else{SC.debug("CloudKit: cannot save preferences for unknown app %@",k);return}}var d=COS.Request.create({type:"POST",address:"/json/sync",applicationName:k,COPY_KEYS:COS.Request.prototype.COPY_KEYS.concat(["applicationName","hash"])});c=this.hashToPrefKeys(a);var b={"service-id":"appleprefs",apps:[{"app-id":k,"registry-version":g,keys:c}]};var h=d.get("address"),e=COS.servicesController.getServiceUrlFor("keyvalue",YES);d.set("address",e+h);d.set("body",b);d.notify(200,this,this.savePreferencesDidSucceed,n);d.notify(0,this,this.savePreferencesDidFail,n);SC.debug("COS:  Saving preferences for %@",k);var m=this.get("delegate");this.invokeDelegateMethod(m,"savePreferencesRequestWillBeSent");d.send(SC.json.encode(b));if(f){f.set("preferences",a)}},clearPreferences:function(k){var d=COS.Request.create({type:"POST",address:"/json/wipe",COPY_KEYS:COS.Request.prototype.COPY_KEYS.concat(["hash"])});var j=COS.appsController,f,g,m,c,a;var b={"service-id":"appleprefs",apps:[]};b.apps.push("account");for(a in COS.apps){if(COS.apps.hasOwnProperty(a)&&COS.apps[a].hasPreferences){b.apps.push(a)}}var h=d.get("address"),e=COS.servicesController.getServiceUrlFor("keyvalue",YES);d.set("address",e+h);d.set("body",b);d.notify(200,this,this.clearPreferencesDidSucceed,k);d.notify(0,this,this.clearPreferencesDidFail,k);SC.debug("COS: Clearing all preferences...");d.send(SC.json.encode(b))},clearPreferencesDidSucceed:function(c,g){var a=SC.json.decode(c.get("body")),e=COS.appsController,f,d,b;if(!a.status||a.status!==0){this.clearPreferencesDidFail(c,g);return}if((b=COS.authController.get("user"))){b.set("preferences",{})}for(f in COS.apps){d=e.getAppInfoFor(f);if(d){d.set("preferences",{})}}},clearPreferencesDidFail:function(a,b){SC.error("COS:  There was an error clearing all preferences, status %@",a.get("status"));if(b&&SC.typeOf(b)===SC.T_FUNCTION){b.call()}return YES},savePreferencesDidSucceed:function(b,h){var f=b.getPath("request.applicationName"),a=b.get("body"),k,c,e,g,j,d=NO;if(!a){this.savePreferencesDidFail(b);return}var m=SC.json.decode(a);if(!m||m.status!==0){this.savePreferencesDidFail(b,h);return}e=m.apps[0]["registry-version"];j=m.apps[0]["keys"];j.forEach(function(n){g=n["update-status"];if(g!==undefined&&g!==0){SC.debug("CloudKit: error updating preferences key %@, update-status is %@",n.name,g);d=YES}});if(d){this.savePreferencesDidFail(b);return}k=COS.appsController.getAppInfoFor(f);if(k){c=k.get("preferences");k.set("preferencesVersion",e)}else{if(f==="account"){c=COS.authController.getUser().get("preferences");c.set("preferencesVersion",e)}}if(!c){this.savePreferencesDidFail(b);return}if(h&&SC.typeOf(h)===SC.T_FUNCTION){h.call()}SC.debug("CloudKit: successfully saved preferences for %@",f);return YES},savePreferencesDidFail:function(a,c){var b=a.getPath("request.applicationName");SC.error("COS:  There was an error saving the preferences for %@, status %@",b,a.get("status"));if(c&&SC.typeOf(c)===SC.T_FUNCTION){c.call()}return YES},hashToPrefKeys:function(c){var a=[],b,d;for(b in c){d=c[b];if(d!==null&&d!==undefined){a.push({name:b,data:d})}}return a},notifyAccountPreferencesDidChange:function(){var b=CK.currentApplication,c;if(!b){var a=CloudOS.appController.get("apps"),d;for(d in a){c=a[d].get("instance");if(!c){continue}SC.debug("Notifying %@ about accountPreferencesDidChange()".fmt(d));c.invokeDelegateMethod(c.get("delegate"),"accountPreferencesDidChange")}}else{b.invokeDelegateMethod(b.get("delegate"),"accountPreferencesDidChange")}}});COS.servicesController=SC.Object.create({getServiceInfoFor:function(a){if(!a){CW.fatalError("getServiceInfoFor():  A service name must be specified")}var b=this._servicesInfo;return b?b[a]:null},getServiceUrlFor:function(c,d){var e=this.getServiceInfoFor(c),b=null,a;if(e){b=e.get("url")||null;if(!b){a="getServiceUrlFor():  Could not find the URL for %@".fmt(c)}}else{a="getServiceUrlFor():  Could not find service information for %@".fmt(c)}if(a){if(d){CW.fatalError(a)}else{SC.error(a)}}return b},getServiceStatusFor:function(c,d){var e=this.getServiceInfoFor(c),b=null,a;if(e){b=e.get("status")||null;if(!b){a="getServiceStatusFor():  Could not find the status for %@".fmt(c)}}else{a="getServiceStatusFor():  Could not find service information for %@".fmt(c)}if(a){if(d){CW.fatalError(a)}else{SC.error(a)}}return b},servicesInfoHasBeenReceived:function(){return(this._servicesInfo!==null)}.property("_servicesInfo"),_setupFromBag:function(c){if(!c){CW.fatalError("_parseInformationFromBag():  The bag must be supplied")}var a=c.webservices,d,b,e;if(a){d={};for(b in a){e=SC.clone(a[b],YES);e.name=b;d[b]=COS.ServiceInfo.create(e)}this.set("_servicesInfo",d)}else{SC.error("COS.servicesController:  The bag does not contain any services information")}},_servicesInfo:null});sc_require("system/request");COS.startupController=SC.Object.create({getStartupUrl:function(a){var c=COS.authController.getUser().get("preferences"),b;if(c){b=c.get("startupUrls");if(b){return b[a]}}},setStartupUrl:function(a,b){var d=COS.authController.getUser().get("preferences"),c,e;if(d){c=d.get("startupUrls");e=(c&&SC.typeOf(c)===SC.T_HASH)?c:{};if(e[a]!==b){SC.debug("Storing new startup url %@ for %@",b,a);e[a]=b;d.set("startupUrls",e);d.commitStartupUrls()}}},requestStartup:function(a){var b=this.getStartupUrl(a),c=COS.appsController.getAppInfoFor(a),e;if(!c){SC.error("COS: Cannot find application information for application %@",a)}if(b){var d=COS.Request.create({type:"GET",applicationName:a,COPY_KEYS:COS.Request.prototype.COPY_KEYS.concat(["applicationName"])});d.set("address",b);d.set("timeout",30000);d.notify(this,this.didFetchStartup);d.send();SC.debug("COS: Requesting startup for %@ with url %@",a,b);c.set("requestedStartupUrl",b)}},didFetchStartup:function(b){var a=b.getPath("request.applicationName"),c=COS.appsController.getAppInfoFor(a);if(!c){SC.error("COS: No application info found for application %@".fmt(applicationName))}c.set("startupResponse",b);this.notifyStartup(a);return YES},notifyStartup:function(a){var b=COS.authController.getUser().get("preferences").get("startupUrls");if(!b||!b[a]){return}var e=CK.currentApplication||CloudOS.appManagerFor(a).get("instance"),c=COS.appsController.getAppInfoFor(a),d;if(!e){SC.debug("COS: We received a response to 'startup' for %@ but cannot notify it yet, as were waiting for it to be running",a);return}d=c.get("startupResponse");if(d&&!c.get("startupNotified")){SC.debug("COS: Giving startup response to the app");e.invokeDelegateMethod(e.get("delegate"),"didFetchStartup",d.get("body"),d.get("status"));c.set("startupNotified",YES)}}});COS.ServiceInfo=SC.Object.extend({name:undefined,url:undefined,isEnabled:undefined});COS.mixin({getLegacyLprojNameForLocale:function(a){var b={"en-us":"English","ja-jp":"Japanese","fr-fr":"French","de-de":"German","es-es":"Spanish","zh-cn":"zh_CN","nl-nl":"Dutch","it-it":"Italian","ko-kr":"ko","zh-tw":"zh_TW","pt-pt":"pt_PT","pt-br":"pt","sv-se":"sv","pl-pl":"pl"};return b[a]+".lproj"}});(function(){var a="cloudkit/photo/photoPicker";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:[],styles:["/system/cloudkit/photo/photoPicker/en-us/1FCS29.34215/stylesheet.css"],styles2x:["/system/cloudkit/photo/photoPicker/en-us/1FCS29.34215/stylesheet.css"],scriptURL:"/system/cloudkit/photo/photoPicker/en-us/1FCS29.34215/javascript.js",stringURL:"/system/cloudkit/photo/photoPicker/en-us/1FCS29.34215/javascript-strings.js"})})();SC.stringsFor("en-us",{"Dialog.Photo.UploadError.Title":"Could Not Upload Photo","Dialog.Photo.UploadError.Text":"There was a server error.","Dialog.Photo.UploadError.TooLarge.Text":"The image you are trying to upload is too large. Maximum file size allowed is 10 megabytes.","Dialog.Photo.UploadError.Close":"Close","Dialog.Photo.UnsupportedFile.Text":"Make sure the format of your photo is JPEG, GIF, PNG or BMP"});CK.Photo=SC.Object.create({isFileDroppedAValidImage:function(c,b){if(!c||SC.typeOf(b)!==SC.T_ARRAY){return}var a=c.fileType||c.type;a=a&&a.indexOf("/")!==-1?a.split("/")[1]:a;return a&&b.indexOf(a)!==-1},showErrorForInvalidFileType:function(){CW.iOSAlert.show({message:"Dialog.Photo.UploadError.Title".loc(),description:"Dialog.Photo.UnsupportedFile.Text".loc(),buttons:[{title:"Button.OK".loc()}]})},showErrorForMaximumFileSizeExceeded:function(){CW.iOSAlert.show({message:"Dialog.Photo.UploadError.Title".loc(),description:"Dialog.Photo.UploadError.TooLarge.Text".loc(),buttons:[{title:"Button.OK".loc()}]})},displayUploaderErrors:function(a){if(!a){return}if(a===1){this.showErrorForInvalidFileType()}else{if(a===2){this.showErrorForMaximumFileSizeExceeded()}}}});CK.Photo.CanvasImage={imgHeight:64,imgWidth:64,initialWidth:64,initialHeight:64,dimensions:{width:64,height:64},boundaryRadius:3,editView:null,staticImage:null,editViewIsVisible:NO,editShadeImage:null,repositionImage:function(){var q=this.get("imgHeight"),m=this.get("imgWidth"),w=this.get("imgLoadError")?null:this.get("value"),r=w?w:this.get("staticImage"),u=w?this.get("photoCrop"):null,f=this.get("initialWidth"),s=this.get("initialHeight"),h=this.get("dimensions"),k=this.get("editShadeImage"),e=this.get("editView"),z=this.get("innerBoundaryRect"),v=this.get("boundaryRadius");var a=u&&w?u.width:null,c=u&&w?u.height:null,n=a?h.width/a:f/m,d=c?h.height/c:s/q,g=w?Math.round(m*n):h.width,b=w?Math.round(q*d):h.height,p=w&&u?-u.x*n:-(f-h.width)/2,o=w&&u?-(b-u.y*d-h.height):-(s-h.height)/2,j=this.get("raphael"),A=this.get("img");if(j){this.set("moveX",p);this.set("moveY",o);if(g===0){g=f;SC.error("The photo crop properties got are wrong. crop-width = %@".fmt(a))}if(b===0){b=f;SC.error("The photo crop properties got are wrong. crop-height = %@".fmt(c))}var t="0, 0, %@, %@, %@".fmt(h.width,h.height,v);if(!A){A=j.image(r,p*f/g,o*s/b,f,s);A.attr({r:v,"clip-rect":t});this.set("img",A)}else{A.scale(1,1);A.attr({width:f,height:s,x:p*f/g,y:o*s/b,src:r});if(!A.attr("clip-rect")){A.attr({"clip-rect":t})}if(!u){this.set("zoomLevel",0)}}if(this.get("imgOrientation")){this.setupOrientation()}if(u){if(m!==f){this.set("zoomLevel",Math.round((g-f)*100/(m-f)))}else{this.set("zoomLevel",0)}this.notifyPropertyChange("zoomLevel")}A.show();this.createInnerBoundaryRect(j);if(w){if(e){k=this.createEditView(j,h,v);if(k){if(this.get("editViewIsVisible")){A.toBack()}}else{SC.error("The Edit View provided does not have the properties image and rect")}}}else{if(!w){if(k){k.hide()}}}}},computedForRaphael:function(c,b,a){return Math.ceil((b-c-a)*a/b)},setImageWidthAndHeight:function(f,e,a,d){var b=document.createElement("img");b.onload=function(){if(e.get("value")===f){e.set("imgHeight",this.height||this.naturalHeight);e.set("imgWidth",this.width||this.naturalWidth);e.set("imgLoadError",NO);if(a){e.tryToPerform(a,f)}}if(this.parentNode){this.parentNode.removeChild(this)}};var c=function(){if(this.naturalHeight===0||this.naturalWidth===0){if(e.get("value")===f){if(e.resetInitialValues){e.resetInitialValues()}e.set("imgLoadError",YES);if(d){e.tryToPerform(d,f)}}if(this.parentNode){this.parentNode.removeChild(this)}}};$(b).bind("error",c);b.style.cssText="top:-10000px; left: -10000px;  position: absolute;";b.src=f;b.id="dummyImg";document.body.appendChild(b)},setupInitialDimensions:function(h,j,n){var a=this.get("dimensions"),d,b,k=h,f=j,g=this.get("photoCrop"),e,c,m=h/j;if(n){k=h<=a.width?((h<j)?a.width*2:(h/j)*a.width*2):h*2;f=j<=a.height?((j<h)?a.height*2:(j/h)*a.height*2):j*2;this.set("imgWidth",k);this.set("imgHeight",f);this.set("convertToSmallerSizeRatio",c=k/h);if(g){e={x:g.x*c,y:g.y*c,width:g.width*c,height:g.height*c};this.set("photoCrop",e)}}d=k>=f?a.height:Math.round(f*a.height/k);b=f>=k?a.width:Math.round(k*a.width/f);this.set("initialWidth",b);this.set("initialHeight",d)},horizontalScale:function(){var a=this.get("imgWidth"),b=this.get("initialWidth");if(a&&b&&a>=b){return(a-b)/100}else{return 0}}.property("imgWidth","initialWidth"),verticalScale:function(){var a=this.get("imgHeight"),b=this.get("initialHeight");if(a&&b&&a>=b){return(a-b)/100}else{return 0}}.property("imgHeight","initialHeight"),imageIsSmallerThenCanvas:function(){var b=this.get("verticalScale"),a=this.get("horizontalScale");return b===0||a===0}.property("verticalScale","horizontalScale"),zoomLevelDidChange:function(){var o=this.get("raphael"),h=this.get("img"),k=this.get("horizontalScale"),n=this.get("verticalScale"),g=this.get("zoomLevel"),j=this.get("initialHeight"),e=this.get("initialWidth"),a=this.get("dimensions"),b=h?h.attr("width"):0,d=h?h.attr("height"):0,f=this.get("moveX"),c=this.get("moveY");if(h&&!!g){h.scale(e/a.width,j/a.height);h.scale((e+k*g)/e,(j+n*g)/j);if(f){h.attr("x",f);this.set("moveX",0)}if(c){h.attr("y",c);this.set("moveY",0)}if(!f&&!c){var m=h.getBBox();if(m.x>0){h.attr({x:0})}if(m.y>0){h.attr({y:0})}if((m.x+m.width)<a.width){h.attr({x:a.width-m.width})}if((m.y+m.height)<a.height){h.attr({y:a.height-m.height})}}}}.observes("zoomLevel"),resetInitialValues:function(){var a=this.get("dimensions");if(a){this.set("imgWidth",a.width);this.set("imgHeight",a.height);this.set("initialWidth",a.width);this.set("initialHeight",a.height)}},createEditView:function(d,c,a){var h=this.get("editView"),e=this.get("editShadeImage"),g=this.get("editViewIsVisible");if(h&&h.image&&h.rect&&!e){var f=h.image,b=h.rect;e=d.image(f,b.x,b.y,b.width,b.height);e.attr({"clip-rect":"0, 0, %@, %@, %@".fmt(c.width,c.height,a)});this.set("editShadeImage",e)}if(e){if(g){e.show();e.toFront()}else{e.hide()}}return e},createInnerBoundaryRect:function(m){var e=this.get("boundaryRadius"),b=this.get("dimensions"),a=this.get("innerBoundaryRect"),k=!SC.browser.isIE8OrLower;if(!a){var c=k?b.width:b.width-1,h=k?b.height:b.height-1,j=k?0:-1,g=k?0:-1,f=k?b.width:b.width+1,d=k?b.height:b.height+1;a=m.rect(0,0,c,h,e);a.attr({stroke:"#000","stroke-opacity":"0.4","clip-rect":"%@, %@, %@, %@, %@".fmt(j,g,f,d,e)});this.set("innerBoundaryRect",a)}a.show();a.toFront()},editViewIsVisibleObserver:function(){var b=this.get("editShadeImage"),c=this.get("editViewIsVisible"),a=this.get("imgLoadError");if(b){if(c&&!a){b.show();b.toFront()}else{b.hide()}}}.observes("editViewIsVisible"),setupOrientation:function(){var c=this.get("imgOrientation"),b=this.get("img"),d=this.get("lastRotation"),a;switch(c){case 3:a=b.rotate(180-this.get("lastRotation"));this.set("lastRotation",180);break;case 6:a=b.rotate(90-this.get("lastRotation"));this.set("lastRotation",90);break;case 8:a=b.rotate(-90-this.get("lastRotation"));this.set("lastRotation",-90);break;default:if(this.get("lastRotation")!==0){b.rotate(0-this.get("lastRotation"));this.set("lastRotation",0)}}},resetRaphaelViews:function(){var a=this.get("img"),c=this.get("innerBoundaryRect"),b=this.get("editShadeImage");if(a){a.remove();this.set("img",null)}if(c){c.remove();this.set("innerBoundaryRect",null)}if(b){b.remove();this.set("editShadeImage",null)}}};CK.Photo.photoPicker=SC.State.extend({initialSubstate:"photoPickerUnloadedState",photoPickerUnloadedState:SC.State.design({loadPhotoPicker:function(a){this.gotoState("photoPickerLoadedState",{evt:a})},editPhoto:function(c,b,a){SC.Module.loadModule("cloudkit/photo/photoPicker",this,"photoPickerDidLoad",c)},photoPickerDidLoad:function(d,c){var b=SC.MODULE_INFO["cloudkit/photo/photoPicker"],a=this.get("statechart");if(a){c.statechart=a;a.sendAction("loadPhotoPicker",c)}else{throw"statechart not defined"}}}),photoPickerLoadedState:SC.State.design({initialSubstate:"photoPickerLoadedInitialState",enterState:function(a){PhotoPicker.setupPicker(a)},photoPickerLoadedInitialState:SC.State.design({cropPhoto:function(b,a){var c=b.getPath("parentView.parentView.imageCropper");c.cropPhoto();PhotoPicker.photoUploadController.get("_imgPicker").set("isVisible",NO)},closePicker:function(c,a){var b=PhotoPicker.photoUploadController;b.get("_imgPicker").set("isVisible",YES);if(b.get("isImageAltered")){b.callExitAction()}this.gotoState("photoPickerUnloadedState")},activeXFileDropped:function(a){this.invokeLater(function(){PhotoPicker.photoUploadController.fileDropped(a)},50)},uploadNewPhoto:function(){PhotoPicker.photoUploadController.uploadNewPhoto()},cancel:function(){PhotoPicker.photoUploadController.get("_imgPicker").set("isVisible",YES);if(SC.browser.isIE8OrLower){CW.notificationCenter.postNotification("cleanUpCanvas");PhotoPicker.photoUploadController.cleanup()}this.gotoState("photoPickerUnloadedState")},clickedOutside:function(b,a){this.cropPhoto(b.getPath("contentView.buttons.done"),a)},uploadingPhoto:function(){this.gotoState("photoPickerLoadedUploadedState")},activeXFileDragStarted:function(){CW.notificationCenter.postNotification("activeXFileDragStarted")},activeXFileDragEnded:function(){CW.notificationCenter.postNotification("activeXFileDragEnded")}}),photoPickerLoadedUploadedState:SC.State.design({submitEvents:function(b,a){return YES}.handleEvents("clickedOutside","uploadNewPhoto","cropPhoto"),uploadingPhotoCompleted:function(){this.gotoState("photoPickerLoadedInitialState")}}),exitState:function(){PhotoPicker.photoUploadController.cleanup()}})});CK.Photo.Theme=SC.BaseTheme.create({name:"photo"});SC.Theme.addTheme(CK.Photo.Theme);sc_require("mixins/canvas_image");CK.Photo.PhotoIconCanvasView=SC.View.extend(CK.Photo.CanvasImage,{status:null,zoomLevel:0,childViews:["spinner"],staticImage:null,spinner:SC.View.extend({layout:{centerX:0,centerY:0,width:24,height:24},classNames:["spinner-24px-f3f5f5"],isVisibleBinding:"*parentView.isLoading"}),didCreateLayer:function(a){a();this.createRaphael();this.invokeLater(function(){this.valueObserver()},50)}.enhance(),resetValues:function(){if(this.getPath("pane.isPaneAttached")){this.set("currentValue",null);this.set("currentPhotoCrop",null);this.set("currentStaticImage",null)}}.observes("*pane.isPaneAttached"),createRaphael:function(){if(this.get("raphael")){return}var b=this.get("frame"),a=new Raphael(this.$()[0],b.width,b.height);this.set("raphael",a)},isValueDataURL:function(){var a=this.get("value");return a&&a.indexOf("data:image/jpeg;base64,")===0}.property("value"),valueObserver:function(){var f=this.get("value"),b=this.get("photoCrop"),g=this.get("staticImage"),d=this.get("currentValue"),c=this.get("currentPhotoCrop"),a=this.get("currentStaticImage"),e=this.get("raphael");if(!e){return}if(d===f&&CW.valuesAreEqual(b,c)&&g===a){return}if(SC.browser.isIE8OrLower){e.remove();this.set("raphael",null);this.createRaphael();this.resetRaphaelViews()}if(f){this.invokeLater(function(){if(!this.get("status")){this.set("status","loading")}},300);this.set("status",null);this.setImageWidthAndHeight(f,this,"afterImageLoaded","afterImageLoadingFailed")}else{this.set("status","loaded");this.resetInitialValues();this.repositionImage()}this.set("currentValue",f);this.set("currentPhotoCrop",b);this.set("currentStaticImage",g)}.observes("value","photoCrop","staticImage"),afterImageLoaded:function(a){this.setupInitialDimensions(this.get("imgWidth"),this.get("imgHeight"));this.repositionImage();if(!(SC.browser.isIE8OrLower&&this.get("isValueDataURL"))){this.set("status","loaded")}},afterImageLoadingFailed:function(a){this.set("status","failed");this.repositionImage()},isLoading:function(){var a=this.get("status"),b=this.get("img");if(a==="loading"){if(b){b.hide()}return YES}return NO}.property("status")});SC.mixin(CK,{OFFLINE_TYPE_SESSION_STORAGE:"SessionStorage",OFFLINE_TYPE_LOCAL_STORAGE:"LocalStorage",OFFLINE_TYPE_SQL_DATABASE:"SQLDatabase",OFFLINE_REASON_NETWORKING_ERROR:"NetworkingError",OFFLINE_REASON_TIMEOUT:"Timeout",OFFLINE_REASON_SERVER_ERROR:"ServerError",OFFLINE_REASON_STARTUP_WAIT:"StartupWait"});CK.offlineController=SC.Object.create({isOfflineEnabled:NO,offlineType:null,isOffline:function(){var a=NO,b;if(this.get("isOfflineEnabled")&&this.get("offlineType")){b=this.get("offlineReasons");if(b&&b.get("length")>0){a=YES}}return a}.property("isOfflineEnabled","offlineType","offlineReasons").cacheable(),offlineReason:function(){var b="",a;if(this.get("isOfflineEnabled")&&this.get("offlineType")){a=this.get("offlineReasons");if(a&&a.get("length")>0){if(a.contains(CK.OFFLINE_REASON_NETWORKING_ERROR)){b="NetworkingError"}else{if(a.contains(CK.OFFLINE_REASON_TIMEOUT)){b="Timeout"}else{if(a.contains(CK.OFFLINE_REASON_SERVER_ERROR)){b="ServerError"}else{b=a.get("firstObject")}}}b=(("Dock."+b).loc()!==("Dock."+b))?b:""}}return b}.property("offlineReasons").cacheable(),offlineReasons:null,addOfflineReason:function(a){var b=this.get("offlineReasons");if(!b){b=SC.Set.create([a]);this.set("offlineReasons",b);b.addObserver("[]",this,this.offlineReasonsContentDidChange)}else{b.add(a)}},removeOfflineReason:function(a){var b=this.get("offlineReasons");if(b&&b.contains(a)){b.remove(a)}},hasOfflineReasonOtherThan:function(a){if(!this.get("isOffline")){return NO}var b=this.get("offlineReasons");if(b.contains(a)){return !(b.get("length")===1)}else{return(b.get("length")>=1)}},offlineReasonsContentDidChange:function(){this.notifyPropertyChange("isOffline");this.notifyPropertyChange("offlineReason")},deviceStateDidChange:function(){var a=SC.device.get("isOffline"),b=CK.OFFLINE_REASON_NETWORKING_ERROR;if(a){this.addOfflineReason(b)}else{this.removeOfflineReason(b)}}.observes("SC.device.isOffline"),init:function(){this.deviceStateDidChange()},toString:function(){var a=arguments.callee.base.apply(this,arguments);if(a){a="Offline controller ("+a+")"}return a}});CK.RequestDelegate={isCKRequestDelegate:YES,getUrlForServiceName:function(a){return null}};CK.Application=SC.Application.extend(SC.DelegateSupport,{isCloudKitApplication:YES,name:null,primaryServiceName:null,capitalizedName:function(){var a=this.get("name");if(a){if(a.charAt(0)!=="i"){a=a.capitalize()}else{a="i"+a.substring(1).capitalize()}}return a}.property("name").cacheable(),isReadyToTerminate:YES,delegate:null,init:function(){arguments.callee.base.apply(this,arguments);SC.Logger.set("outputMessagePrefix",this.get("capitalizedName")+":  ");CK.currentApplication=this;SC.suppressMain=YES;this.invokeLater(CK.setupShortCuts,3000)},applicationWillBecomeActive:function(){SC.debug("APPLICATION: Received applicationWillBecomeActive")},applicationDidBecomeActive:function(){SC.debug("APPLICATION: Received applicationDidBecomeActive")},applicationWillSuspend:function(){SC.debug("APPLICATION: Received applicationWillSuspend")},applicationDidSuspend:function(){SC.debug("APPLICATION: Received applicationDidSuspend")},applicationWillTerminate:function(){SC.debug("APPLICATION: Received applicationWillTerminate")},secondaryAuthDidSucceed:function(){SC.debug("APPLICATION: Received secondaryAuthDidSucceed")},didFetchStartup:function(b,a){SC.debug("APPLICATION: Received didFetchStartup")},applicationShouldRefresh:function(a){SC.debug("APPLICATION: Received applicationShouldRefresh")},accountPreferencesDidChange:function(){SC.debug("APPLICATION: Received accountPreferencesDidChange")},userDidRevalidate:function(){SC.Request.manager.resumeAllServices()},_sleepCount:0,_sleep:function(){var a=this._sleepCount++;if(a===0){CW.Request.suspendResponses();SC.backgroundTaskQueue.suspend();SC.Module.suspend()}},_wake:function(){var a=--this._sleepCount;if(a<0){SC.warn("CK.Application._wake() was called without a paired _sleep() invocation; ignoring");this._sleepCount=0}else{if(a===0){SC.Module.resume();SC.backgroundTaskQueue.resume();CW.Request.resumeResponses()}}}});CK.keyResponder=SC.Object.create({performKeyEquivalent:function(a){if(!window.CloudOS||CloudOS.isCloudOSClient){return}CloudOS.relayKeyboardShortcut(a)}});SC.ready(function(){CW.installKeyResponder();CW.keyResponders.unshift(CK.keyResponder)});SC.RootResponder.reopen({mousemove:function(b,a){if(window.CloudOS){CloudOS.relayMouseMove(a.clientX,a.clientY)}return b(a)}.enhance()});sc_require("mixins/request_delegate");CK.Request=CW.Request.extend(SC.DelegateSupport,{serviceName:null,useCrossDomain:YES,attachIdentifyingHeaders:NO,contentType:undefined,delegate:null,requestDelegate:function(){var a=this.get("delegate")||window.CloudOS;if(!a){CW.fatalError("A CK.Request must have a delegate",{target:this})}return a}.property("delegate").cacheable(),addressPrefix:function(){var c=null,a,b,d;if(this.get("useCrossDomain")){a=this.get("requestDelegate");b=this.get("address")||"";d=this._getServiceName();if(b.toLowerCase().indexOf("http")<0){c=a.getUrlForServiceName(d);if(c){if(c[c.length-1]==="/"){if(b[0]==="/"){c=c.slice(0,-1)}}else{if(b[0]!=="/"){c+="/"}}}}}return c}.property("useCrossDomain"),COPY_KEYS:CW.Request.prototype.COPY_KEYS.concat(["serviceName","delegate"]),init:function(){var f,e,c,a,b,d;arguments.callee.base.apply(this,arguments);if(!this.get("source")){if(this.get("useCrossDomain")){f=this.get("contentType");if(f===undefined){f="text/plain";this.set("contentType",f)}}if(!f){f=this.get("contentType")}if(f){this.header("Content-Type",f)}e=this._specialResponseStatuses;if(e){d=this._specialResponseWasReceived;for(c=0,a=e.length;c<a;++c){b=e[c];this.notify(b,this,d)}}}},_specialResponseStatuses:[330,401,503],_specialResponseWasReceived:function(c){SC.debug("Received special response:  %@",c);var q=this.get("requestDelegate"),f=c.get("status"),e=c.get("request"),k=e._getServiceName(),d=e.get("overallTimeout"),o=c.get("addedToOutgoingQueueTimestamp"),n=YES,m=NO,j=NO,g,p,h,b,a;if(f===330){if(k){SC.Request.manager.suspendService(k)}else{SC.error("We received a response with status 330 but the request (%@) was not annotated with a service name",e)}m=YES}else{if(f===503){g=c.get("body");if(g){for(p in g){if(p.match(/^retry[ _\-]?after$/i)){h=g[p];break}}}if(h){h=parseInt(h,10)}if(h){h*=1000;if(d&&o){b=new Date()-o;SC.debug("The server is telling us to retry after %@ms, it has been %@ms, and our overall timeout is %@ms",h,b,d);if((b+h+5000)<d){SC.debug("  -  it looks like we can make it so automatically retrying request %@",e);m=YES;n=NO}else{SC.debug("  -  it doesnt look like we can make it so not automatically retrying request %@",e);m=NO;n=YES;a={retryAfter:(h/1000)}}}}}}if(m){if(d&&o){b=new Date()-o;if(b<d){e=e.copy()._prep();e.set("overallTimeout",d-b)}}e.resend(c);j=YES}if(n){q.requestFailed(f,a)}return j},_getServiceName:function(){var a=this.get("serviceName"),b;if(!a){b=CK.currentApplication;a=b.get("primaryServiceName")||b.get("name")}return a}});SC.Request.manager.mixin({serviceIsSuspended:function(a){if(!a){CW.fatalError("serviceIsSuspended():  A service name must be specified",{target:this})}var b=this._suspendedServices;return(b&&b[a])},suspendService:function(a){if(!a){CW.fatalError("suspendService():  A service name must be specified",{target:this})}var b=this._suspendedServices;if(!b){b=this._suspendedServices={}}if(!b[a]){SC.debug("Suspending requests to %@ service",a)}b[a]=YES},resumeService:function(a){if(!a){CW.fatalError("resumeService():  A service name must be specified",{target:this})}var b=this._suspendedServices;if(b){if(b[a]){SC.debug("Resuming requests to %@ service",a)}delete b[a]}SC.Request.manager.fireRequestIfNeeded()},resumeAllServices:function(){var b=this._suspendedServices,a;if(b){for(a in b){if(b[a]){this.resumeService(a)}}}SC.Request.manager.fireRequestIfNeeded()},_suspendedServices:null});SC.Request.manager.mixin({shouldFireRequest:function(a){if(!a){CW.fatalError("shouldFireRequest():  A response must be specified",{target:this})}var c=a.get("request"),b=c._getServiceName?c._getServiceName():null;if(!b){return YES}else{return !SC.Request.manager.serviceIsSuspended(b)}}});CK.StyleSheet={styles:null,styleSheet:null,setStyleString:function(c){if(c){var b=c.join("");this.styles=c;if(this.styleSheet.styleSheet){this.styleSheet.styleSheet.cssText=b}else{var a=this.styleSheet.childNodes[0];var d=document.createTextNode(b);if(!a){this.styleSheet.appendChild(d)}else{this.styleSheet.replaceChild(d,a)}}}return this.styles}};SC.mixin(CK.StyleSheet,{create:function(c){var d=SC.beget(CK.StyleSheet);var a=document.getElementsByTagName("head")[0];var b=document.createElement("style");b.type="text/css";a.appendChild(b);d.styleSheet=b;d.setStyleString((c)?c:[]);return d}});CK.mixin({persistAfterLogoutSuffix:".persist",getValueFromSessionStorage:function(a){return this._getValueFromStorage(window.sessionStorage,a)},setValueInSessionStorage:function(a,b){return this._setValueInStorage(window.sessionStorage,a,b)},getKeysInSessionStorage:function(){return this._getKeysInStorage(window.sessionStorage)},clearSessionStorage:function(){return this._clearStorage(window.sessionStorage)},getValueFromLocalStorage:function(b,a){return this._getValueFromStorage(window.localStorage,b,a)},setValueInLocalStorage:function(b,c,a){return this._setValueInStorage(window.localStorage,b,c,a)},getKeysInLocalStorage:function(){return this._getKeysInStorage(window.localStorage)},clearLocalStorage:function(){return this._clearStorage(window.localStorage,YES)},_getValueFromStorage:function(f,c,a){var b=null,d,e;if(f&&f.getItem){e=CK.currentApplication;d=e?e.get("name"):"iCloud";if(d){c=d+"."+c}if(a){c+=this.get("persistAfterLogoutSuffix")}b=f.getItem(c)}return b},_setValueInStorage:function(j,c,f,a){var b=NO,d,h;if(j&&j.setItem){h=CK.currentApplication;d=h?h.get("name"):"iCloud";if(d){c=d+"."+c}if(a){c+=this.get("persistAfterLogoutSuffix")}try{j.setItem(c,f);b=YES}catch(g){}}return b},_getKeysInStorage:function(f){var a=[],e,c,d,b;if(f){e=CK.currentApplication;c=e?e.get("name"):"iCloud";if(c){c+="."}d=c?c.length:0;for(b in f){if(b.indexOf(c)===0){a.push(b.substring(d))}}}return a},_clearStorage:function(c,h){var e=YES,a,m,b,k,d;if(h){try{a={};m=this.get("persistAfterLogoutSuffix");b=m.length;for(k in c){d=k.indexOf(m);if(d!==-1){if(d===(k.length-b)){a[k]=c.getItem(k)}}}}catch(j){}}if(c){if(!c.clear){e=NO}else{try{c.clear()}catch(g){e=NO}}}if(h){try{for(k in a){c.setItem(k,a[k])}}catch(f){}}return e}});CK.AddDeleteButton=SC.ButtonView.extend({layout:{left:0,height:30,centerY:0,width:28},acceptsFirstResponder:NO,displayProperties:["buttonType"],buttonType:"delete",themeName:"addDelete",render:function(a){arguments.callee.base.apply(this,arguments);a.setClass("delete-icon",this.get("buttonType")==="delete");a.setClass("add-row",this.get("buttonType")==="add")},action:"buttonClicked",titleMinWidth:20,isEmpty:YES});CK.AddDeleteButton.Theme=SC.BaseTheme.create({name:"addDelete"});SC.Theme.addTheme(CK.AddDeleteButton.Theme);CK.ActiveXView=SC.View.extend({classNames:["activex"],fileTypes:"",maxImageSize:1000,maxFileSizeBytes:500000,classId:"82E5DF24-51E8-47CD-864A-F4BD5005AA73",fileVersion:"1,0,19,0",delegate:null,isInitialized:NO,isVisible:NO,init:function(){arguments.callee.base.apply(this,arguments);if(!SC.browser.isIE){return}this.set("isVisible",YES);SC.RootResponder.responder.listenFor("mouseenter mouseleave".w(),SC.$("body")[0],this);CK.ActiveXView.currentView=this;this.onStart();CK.ActiveXView.removeEventsOnDropTargets()},destroy:function(){if(this._timer){this._timer.invalidate()}this._timer=null;arguments.callee.base.apply(this,arguments)},render:function(a,c){if(c&&SC.browser.isIE){var b;if(SC.buildMode==="debug"){b="/system/cloudkit/yacht/en-us/1FCS29.34215/resources/iCloud.cab"}else{b="/system/iCloud.cab"}a.push('<object id="YachtV2" classid="CLSID:%@" codebase="%@#version=%@" width="100%" height="100%" style="position:absolute;top:0px;left:0px;"></object>'.fmt(this.get("classId"),b,this.get("fileVersion")))}},isVisibleDidChange:function(){if(!SC.browser.isIE||!this.get("isInitialized")){return}if(this.get("isVisible")){CK.ActiveXView.removeEventsOnDropTargets()}else{CK.ActiveXView.reinstateEventsOnDropTargets()}}.observes("isVisible"),mouseMoved:function(a){this.set("isVisible",NO);return NO},mouseleave:function(a){if(!this.get("isInitialized")){return}var b=this;SC.run(function(){b.set("isVisible",YES)})},mouseenter:function(a){var b=this;SC.run(function(){if(!b._isDragging){b.set("isVisible",NO)}})},onStart:function(){if(this._didStart){return}var b;try{b=window.YachtV2.getVersion}catch(c){SC.warn("ActiveX: onStart called but YachtV2 is undefined")}if(!b){if(!this._timer){this._timer=SC.Timer.schedule({target:this,action:"onStart",interval:1000,repeats:YES,until:Date.now()+1200000})}return}YachtV2.fileTypes=this.get("fileTypes");YachtV2.maxImageSize=this.get("maxImageSize");YachtV2.maxFileSizeBytes=this.get("maxFileSizeBytes");YachtV2.attachEvent("onDragEnter",function(h,f,e,g,d){SC.run(function(){CK.ActiveXView.currentView.onDragEnter(h,f,e,g,d)})});YachtV2.attachEvent("onDragOver",function(h,f,e,g,d){SC.run(function(){CK.ActiveXView.currentView.onDragOver(h,f,e,g,d)})});YachtV2.attachEvent("onDragLeave",function(){SC.run(function(){CK.ActiveXView.currentView.onDragLeave()})});YachtV2.attachEvent("onInvalidFileDropped",function(g,d,f,e){SC.run(function(){CK.ActiveXView.currentView.onInvalidFileDropped(g,d,f,e)})});YachtV2.attachEvent("onFileDropped",function(j,f,g,e,h,d){SC.run(function(){CK.ActiveXView.currentView.onFileDropped(j,f,g,e,h,d)})});YachtV2.attachEvent("onEnd",function(){SC.run(function(){CK.ActiveXView.currentView.onEnd()})});this.set("isInitialized",YES);var a=this.get("delegate");if(a){a.tryToPerform("onStart",this)}SC.debug("ActiveX: Component properly initialized, version %@.",b);this.set("isVisible",YES);if(this._timer){this._timer.invalidate();this._timer=null}this._didStart=YES},onEnd:function(){this.set("isInitialized",NO);var a=this.get("delegate");if(a){a.tryToPerform("onEnd",this)}},onFileDropped:function(h,d,e,b,g,a){var c=this.get("delegate"),f;if(c){f={fileName:h,fileType:d,fileData:e,x:b,y:g,fileSize:a};c.tryToPerform("onFileDropped",this,f)}this.set("isVisible",NO);CK.ActiveXView._dragEndedOnDropTargets()},onInvalidFileDropped:function(f,a,e,c){var b=this.get("delegate"),d;if(b){d={fileName:f,errorCode:c,x:a,y:e};b.tryToPerform("onInvalidFileDropped",this,d)}this.set("isVisible",NO);CK.ActiveXView._dragEndedOnDropTargets()},onDragEnter:function(h,e,b,g,a){var d=this.get("delegate"),f;if(d){f={fileName:h,fileType:e,x:b,y:g,fileSize:a};d.tryToPerform("onDragEnter",this,f)}this._isDragging=YES;var c={pageX:b,pageY:g};CK.ActiveXView._getDragOperation(c,this)},onDragOver:function(g,d,b,f,a){var c=this.get("delegate"),e;if(c){e={fileName:g,fileType:d,x:b,y:f,fileSize:a};c.tryToPerform("onDragOver",this,e)}this.set("currentDragX",b);this.set("currentDragY",f)},onDragLeave:function(){var a=this.get("delegate");if(a){a.tryToPerform("onDragLeave",this)}this._isDragging=NO;CK.ActiveXView._dragEndedOnDropTargets()}});CK.ActiveXView.mixin({currentView:null,_dragOperation:null,_getDragOperation:function(a,b){var d=CK.ActiveXView._dragOperation;if(d){return d}var c=SC.Drag.start({event:a,source:b,ghost:NO,slideBack:NO,sourceIsDraggable:NO});CK.ActiveXView._dragOperation=c;return c},_dragEndedOnDropTargets:function(){var e=CK.ActiveXView._dragOperation;if(!e){return}var d=e._dropTargets(),b,a,c;for(b=0,a=d.length;b<a;b++){c=d[b];c.tryToPerform("dragEnded",this,e.event);if(c&&c.get("acceptsFileDrags")){c._isCurrentlyHovered=NO}}CK.ActiveXView._dragOperation=null},_dropTargetEvents:"dragenter dragover dragleave drop".w(),removeEventsOnDropTargets:function(){CK.ActiveXView._eventOnDropTarget(SC.Event.remove)},reinstateEventsOnDropTargets:function(){CK.ActiveXView._eventOnDropTarget(SC.Event.add)},_eventOnDropTarget:function(c){var g=SC.Drag._dropTargets,d=CK.ActiveXView._dropTargetEvents,h,e,j,f,b,a;for(j in g){f=g[j];for(h=0,e=d.length;h<e;h++){b=d[h];a=f[b];if(a){c(document,b,f,f[b])}}}}});if(!window.CW){CW=SC.Object.create()}SC.REGULAR_BUTTON_HEIGHT=27;CW.CANVAS_BUTTON_HEIGHT=26;CW.TOOLBAR_BUTTON_HEIGHT=26;CW.SQUARE_BUTTON_REGULAR_HEIGHT=27;CW.CAPSULE_BUTTON_REGULAR_HEIGHT=27;CW.SELECT_BUTTON_REGULAR_HEIGHT=27;CW.POPUP_BUTTON_REGULAR_HEIGHT=27;CW.SQUARE_BUTTON_REGULAR_MIN_WIDTH=68;CW.SQUARE_BUTTON_SMALL_MIN_WIDTH=56;CW.SQUARE_BUTTON_TINY_MIN_WIDTH=52;CW.CAPSULE_BUTTON_REGULAR_MIN_WIDTH=72;CW.CAPSULE_BUTTON_SMALL_MIN_WIDTH=60;CW.CAPSULE_BUTTON_TINY_MIN_WIDTH=52;CW.HELP_BUTTON_REGULAR_MIN_WIDTH=26;CW.HELP_BUTTON_SMALL_MIN_WIDTH=22;CW.HELP_BUTTON_TINY_MIN_WIDTH=18;AppleThemeV3=SC.BaseTheme.create({name:"atv3"});SC.Theme.addTheme(AppleThemeV3);SC.defaultTheme="atv3";require("theme");AppleThemeV3.menuRenderDelegate=SC.BaseTheme.menuRenderDelegate.create({itemHeight:22,itemSeparatorHeight:7,menuHeightPadding:6,"sc-small-size":{itemHeight:18,itemSeparatorHeight:7,menuHeightPadding:6,submenuOffsetX:2},"sc-large-size":{itemHeight:31,itemSeparatorHeight:9,menuHeightPadding:8,submenuOffsetX:4}});CW.SQUARE_MENU_ITEM_HEIGHT=31;CW.SQUARE_MENU_ITEM_SEPARATOR_HEIGHT=7;CW.SQUARE_MENU_HEIGHT_PADDING=6;AppleThemeV3.PreferencesTheme=AppleThemeV3.subtheme("preferences");AppleThemeV3.PreferencesTheme.buttonRenderDelegate=SC.RenderDelegate.create({name:"button",render:function(d,a){var c=d.get("title"),b=d.get("icon");a.push('<img src="',SC.BLANK_IMAGE_URL,'" alt="" class="icon '+b+'"/>');a.push('<div class = "title">'+c+"</div>");a.push('<img src="',SC.BLANK_IMAGE_URL,'" alt="" class="pointer"/>')}});sc_require("theme");AppleThemeV3.mainBackgroundRenderDelegate=SC.RenderDelegate.create({className:"cw-main-background",render:function(b,a){this.includeSlices(b,a,SC.NINE_SLICE)}});(function(){var a="cloudos/auth_ui";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:[],styles:["/system/cloudos/auth_ui/en-us/1FCS29.34215/stylesheet.css"],styles2x:["/system/cloudos/auth_ui/en-us/1FCS29.34215/stylesheet.css"],scriptURL:"/system/cloudos/auth_ui/en-us/1FCS29.34215/javascript.js",stringURL:"/system/cloudos/auth_ui/en-us/1FCS29.34215/javascript-strings.js",isPrefetched:YES})})();(function(){var a="cloudos/language";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:[],styles:[],styles2x:[],scriptURL:"/system/cloudos/language/en-us/1FCS29.34215/javascript.js",stringURL:"/system/cloudos/language/en-us/1FCS29.34215/javascript-strings.js",isPrefetched:YES})})();(function(){var a="cloudkit/error_catcher";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:[],styles:["/system/cloudkit/error_catcher/en-us/1FCS29.34215/stylesheet.css"],styles2x:["/system/cloudkit/error_catcher/en-us/1FCS29.34215/stylesheet.css"],scriptURL:"/system/cloudkit/error_catcher/en-us/1FCS29.34215/javascript.js",stringURL:"/system/cloudkit/error_catcher/en-us/1FCS29.34215/javascript-strings.js",isPrefetched:YES})})();(function(){var a="cloudos/account";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:["coreweb/timezone_picker"],styles:["/system/cloudos/account/en-us/1FCS29.34215/stylesheet.css"],styles2x:["/system/cloudos/account/en-us/1FCS29.34215/stylesheet.css"],scriptURL:"/system/cloudos/account/en-us/1FCS29.34215/javascript.js",stringURL:"/system/cloudos/account/en-us/1FCS29.34215/javascript-strings.js",isPrefetched:YES})})();(function(){var a="coreweb/timezone_picker";if(!SC.MODULE_INFO){throw"SC.MODULE_INFO is not defined!"}if(SC.MODULE_INFO[a]){return}SC.MODULE_INFO[a]=SC.Object.create({dependencies:[],styles:["/system/coreweb/timezone_picker/en-us/1FCS29.34215/stylesheet.css"],styles2x:["/system/coreweb/timezone_picker/en-us/1FCS29.34215/stylesheet.css"],scriptURL:"/system/coreweb/timezone_picker/en-us/1FCS29.34215/javascript.js",stringURL:"/system/coreweb/timezone_picker/en-us/1FCS29.34215/javascript-strings.js",isPrefetched:YES})})();CW.installKeyResponder();CloudOS=SC.Application.create(SC.DelegateSupport,{isCloudOSClient:YES,NAMESPACE:"CloudOS",VERSION:"0.1.0",MIN_WIDTH:950,MIN_HEIGHT:550,APP_LOAD_TIMEOUT:2*60*1000,APP_POST_READY_DELAY:500,ACTIVE_IDLE_INTERVAL:30,INACTIVE_IDLE_INTERVAL:600,INACTIVE_THRESHOLD:120,REFRESH_VALIDATE_TOKEN_INTERVAL:60*60*23,AUTO_UPDATE_INTERVAL:60*15,NOWHERE:0,AUTH:1,APP:2,SPRINGBOARD:3,HAS_SHOWN_PRE_AUTH_INFO:CK.getValueFromLocalStorage("ispi",true),supportedLocales:window.supportedLocales,delegate:null,shouldShowPreInfo:!CK.getValueFromLocalStorage("hasDismissedPreInfo",YES),init:function(){arguments.callee.base.apply(this,arguments);var b=SC.Logger,a=SC.LOGGER_LEVEL_DEBUG,c=(SC.buildMode==="debug")?a:SC.LOGGER_LEVEL_WARN;b.set("logOutputLevel",c);b.set("logRecordingLevel",a);CW.set("requestLoggingLevel",a);SC.Logger.set("outputMessagePrefix","CloudOS:  ");this.incrementWindowRefCount();var d=this;window.onbeforeunload=function(){return CloudOS.appController.cloudOSWillTerminate()};window.onunload=function(){d.decrementWindowRefCount(YES)};window.onhashchange=function(){var e=CloudOS.appController.getAppFromHash();CloudOS.openApp(e)}},run:function(){if(this._hasRunRun===(this._hasRunRun=YES)){SC.warn("CloudOS.run() has been called, but has already been called once. Perhaps there is some logic error in the machinery that calls this function.");return}CloudOS.loadLocalizedStrings();CloudOS.localizationController.relocalizeIfNeeded("CloudOS.run() wants the initial relocalize call");CloudOS.appController.initializeAppManagers();CloudOS.statechart.initStatechart();SC.RootResponder.responder.set("defaultResponder",CloudOS.statechart)},focus:function(){try{window.focus()}catch(a){SC.debug("Failed to focus CloudOS client window. Exception text: "+a)}},incrementWindowRefCount:function(){var b=parseInt(CK.readCookie("COS_REFCOUNT"),10),a=isNaN(b)||SC.typeOf(b)!==SC.T_NUMBER?1:++b;CK.writeCookie("COS_REFCOUNT",a);CK.writeCookie("SEND_REQUESTS_ON_CLOSE",0,"/",".icloud.com")},decrementWindowRefCount:function(b){var c=parseInt(CK.readCookie("COS_REFCOUNT"),10),a=isNaN(c)||SC.typeOf(c)!==SC.T_NUMBER?0:--c;if(a<0){a=0}CK.writeCookie("COS_REFCOUNT",a);if(a===0&&!CloudOS.authController.get("isExtendedLogin")){if(!CloudOS.hasLoggedOut){CK.writeCookie("SEND_REQUESTS_ON_CLOSE",1,"/",".icloud.com");CloudOS.authController.logoutUser(null,NO)}}},logoutAndReload:function(){CloudOS.authController.logoutUser(function(){CloudOS.hasLoggedOut=YES;var a=window.location.toString();if(a.indexOf("#")===a.length-1){window.location=a.substring(0,a.length-1)}else{window.location.reload()}},YES,YES);CloudOS.blockUserInput()},localeDidLoad:window.localeDidLoad,_ldl:window.localeDidLoad,localeDidLoadDidChange:function(){if(!this.get("localeDidLoad")||!this.get("mainHasCompleted")){return}SC.debug("Got localized strings back AFTER app is loaded and CloudOS.main() has run. Running CloudOS.run() now, because CloudOS.localeDidLoad changed from "+this._ldl+" to "+this.localeDidLoad);CloudOS.run()}.observes("localeDidLoad"),loadLocalizedStrings:function(){SC.debug("Loading localized strings and metrics");var c=window.localizedStrings,b=window.localizedMetrics,a;for(a in c){SC.stringsFor(a,c[a])}for(a in b){SC.metricsFor(a,b[a])}},appManagerFor:function(c){var b=arguments.callee.apps||(arguments.callee.apps=CloudOS.appController.get("apps"));var a=arguments.callee.appsList||(arguments.callee.appsList=CloudOS.appController.get("appList"));if(typeof c==="number"){return a&&a[c]}if(typeof c==="string"){return b&&b[c]}if(c&&c.isAppManager){return c}if(!c){return}return b&&b[c.get("name")]},openApp:function(b){var a=CloudOS.workspaceController.get("nowShowing");if(a===CloudOS.AUTH||a===CloudOS.NOWHERE){return}CloudOS.appController.set("pendingApp",b=CloudOS.appManagerFor(b));CloudOS.statechart.sendAction("globalAppSwitchWasRequested")},_userInputBlocked:0,blockUserInput:function(){if(!this._userInputBlocked){CloudOS.blockInputController.block()}this._userInputBlocked++},unblockUserInput:function(){if(this._userInputBlocked<=0){SC.warn("User input already unblocked. unblockUserInput has no effect.");return}this._userInputBlocked--;if(this._userInputBlocked===0){CloudOS.blockInputController.unblock()}},isPhotoPickerOpen:function(){if(CloudOS.statechart){var a=CloudOS.statechart.get("currentStates").getEach("name");return a.indexOf("photoPickerLoadedInitialState")!==-1||a.indexOf("photoPickerLoadedUploadedState")!==-1}else{return NO}},shouldAppHaveFocus:function(){if(CloudOS.workspaceController.nowShowing!==CloudOS.APP){return NO}return CloudOS._numberDialogsAboveApp===0},_numberDialogsAboveApp:0,notifyDialogAboveApp:function(){CloudOS._numberDialogsAboveApp++},notifyRemovalOfDialogAboveApp:function(){CloudOS._numberDialogsAboveApp--;if(CloudOS._numberDialogsAboveApp<0){CloudOS._numberDialogsAboveApp=0}},lockedAlertDescription:function(b,a,c){if(SC.none(a)){b+="NoETA"}else{if(a<=60){b+="Minute"}else{if(a<3600){b+="Minutes"}else{b+="HourOrMore"}}}return b.loc({appName:c,minutes:Math.ceil(a/60)})}});(function(){var a=parseFloat(SC.browser.webkit||"",0)||0;CloudOS.ENABLE_TRANSFORM_ANIMATIONS=SC.platform.supportsAcceleratedLayers&&(a>=534.51||!SC.browser.isWindows);CloudOS.ENABLE_SCALE_ANIMATION=CloudOS.ENABLE_TRANSFORM_ANIMATIONS&&(a<534||a>=534.51)&&!SC.browser.chrome;CloudOS.ENABLE_APP_ANIMATION=CloudOS.ENABLE_TRANSFORM_ANIMATIONS;CloudOS.ANIMATE_SPRINGBOARD_LAYOUT=SC.browser.safari&&(a>=534.51||SC.browser.isMac);CloudOS.ANIMATE_SPRINGBOARD_SCALE=!!a||!!SC.browser.mozilla;CW.Animator.ENABLE_OLD_IE=NO})();(function(){var c=CloudOS.defaultAppOptions={maskAsset:SC.browser.isIE8OrLower?"/system/cloudos/en-us/1FCS29.34215/source/resources/images/mask_ie8.png":"/system/cloudos/en-us/1FCS29.34215/source/resources/images/mask.png",warningArrowAsset:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/warning_arrow.png",shadowAsset:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/shadow.png",focusAsset:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/app_icon_ring.png",spinnerAsset:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/spinner.png",decorShadowAsset:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/decor_shadow.png",minWidth:1,minHeight:1};var b,f,e,a,d;CloudOS.displayApps=[{name:"mail",icon:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/mail_icon.png"},{name:"contacts",icon:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/contacts_icon.png"},b={name:"calendar",icon:null},{name:"find",dashInTitle:YES,icon:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/find_icon.png"},{name:"iwork",dashInTitle:YES,icon:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/mobile_documents_icon.png"},{name:"documents",icon:"",isHidden:YES}];for(d in c){for(e=0;f=CloudOS.displayApps[e];e++){if(!f.hasOwnProperty(d)){f[d]=c[d]}}}if(!SC.browser.msie||SC.browser.msie>=9){SC.mixin(b,{_appendCanvas:!!SC.browser.msie,init:function(){this.staticIcon="_Springboard.CalendarTileStatic.Asset".loc();this.icon="_Springboard.CalendarTile.Asset".loc();arguments.callee.base.apply(this,arguments)},relocalize:function(){arguments.callee.base.apply(this,arguments);this.staticIcon="_Springboard.CalendarTileStatic.Asset".loc();this.set("icon","_Springboard.CalendarTile.Asset".loc())},iconDidLoad:function(){var h=this._iconAssetVessel,j=this._iconCanvas||(this._iconCanvas=document.createElement("canvas")),g=this._iconContext||(this._iconContext=j.getContext("2d"));j.width=j.height=142;if(this._appendCanvas&&this.get("iconElement")!==j){this.set("iconElement",j)}this._paintIconAndSchedule(true)},_paintIconAndSchedule:function(m){try{this._ensureIconHasPaintedToday(undefined,m);var g=new Date*1,k=new Date().getTimezoneOffset()*60000,h=Math.ceil((g-k)/86400000)*86400000-(g-k),j=this;if(this._daySwitchTimeout){clearTimeout(this._daySwitchTimeout)}this._daySwitchTimeout=setTimeout(function(){j._paintIconAndSchedule(false,true)},h+1)}catch(n){this._revertToStaticIcon()}},_revertToStaticIcon:function(){var g=new Image();g.src=this.get("staticIcon");this.set("iconElement",g);if(this._iconCanvas.parentNode){this._iconCanvas.parentNode.removeChild(this._iconCanvas)}},_ensureIconHasPaintedToday:function(j,g){var C;window.cb=this;if(!j){j=new Date()}var y,E;if(typeof j==="number"){y=0;E=j.toString()}else{y=j.getDay();E=j.getDate().toString()}if(!g&&this._lastPaintedDow===(this._lastPaintedDow=y)&&this._lastPaintedDate===(this._lastPaintedDate=E)){return}var I=this._iconAssetVessel,v=this._iconCanvas,p=this._iconContext;if(!I._isDownloaded||!I.width||!I.height){SC.debug(C="Calendar tile sprite is not downloaded. Reverting to static sprite.");throw C}v.width=0+v.width;p.drawImage(I,0,100,142,142,0,0,142,142);p.drawImage(I,216,117+30*y,142,30,0,5,142,30);var n=this._iconNumeralMetrics,G=this._iconNumeralTop,D=this._iconNumeralBottom,s=this._iconNumeralOffsets,H=E.length===2,q=parseInt(E.charAt(E.length-1),10),A=H?parseInt(E.charAt(0),10):"0",u=n[q][1]-n[q][0],B=H?n[A][1]-n[A][0]:0,o=u+B,r=H?this._iconNumeralKern:0,t=Math.round(142/2-o/2)+s[A],h=t+B+r,z=D-G;p.drawImage(I,n[q][0],G,u,z,h,56,u,z);if(H){p.drawImage(I,n[A][0],G,B,z,t,56,B,z)}if(!this._appendCanvas){var w=this.get("iconElement");if(!w){w=new Image();w.owner=this;w.onload=function(){this.owner.set("iconElement",this)}}w.src=v.toDataURL()}else{if(v.toDataURL().length<5*1024){var m=5,k=50,F="_triesFor_"+y+"_"+A+q,x=this[F]||(this[F]=m+1);this[F]--;if(!x){SC.debug(C="Calendar tile sprite drawing resulted in a blank, transparent canvas in _appendCanvas mode. No retries remaining. Now reverting to static sprite.");throw C}else{SC.debug("Calendar tile sprite drawing resulted in a blank, transparent canvas in _appendCanvas mode. Trying again. Retries remaining: "+x);this.invokeLater("_paintIconAndSchedule",k,true,true)}}}},_iconNumeralMetrics:[[20,68],[74,115],[123,170],[177,225],[231,280],[287,335],[341,389],[395,445],[451,500],[506,554]],_iconNumeralKern:6,_iconNumeralTop:14,_iconNumeralBottom:89,_iconNumeralOffsets:[0,-4,-2,-2,0,0,0,0,0,0]})}else{SC.mixin(b,{init:function(){this.icon="_Springboard.CalendarTileStatic.Asset".loc();arguments.callee.base.apply(this,arguments)},relocalize:function(){arguments.callee.base.apply(this,arguments);this.set("icon","_Springboard.CalendarTileStatic.Asset".loc())}})}})();CloudOS.API={getCurrentlyActiveApplication:function(){return CloudOS.appController.get("currentApp").get("name")},userIsAuthenticated:function(){return CloudOS.authController.get("isAuthenticated")},sessionIsExtendedLogin:function(){return CloudOS.authController.get("isExtendedLogin")},getUser:function(){return CloudOS.authController.getUser()},getUrlForServiceName:function(a){var b=COS.servicesController;a=arguments[1];if(!b.get("servicesInfoHasBeenReceived")){CW.fatalError("CloudOS.getUrlForServiceName() should never be called before services information has been received")}if(!a){CW.fatalError("getUrlForServiceName():  You must specify a service name")}return b.getServiceUrlFor(a,YES)},getStatusForServiceName:function(a){var b=COS.servicesController;a=arguments[1];if(!a){CW.fatalError("getStatusForService(): You must specify a service name")}return b.getServiceStatusFor(a)},applicationIsReady:function(){var a=arguments[0];CloudOS.appController.appDidBecomeReady(a)},startupDataIsLoaded:function(){var a=arguments[0];CloudOS.appController.appStartupDataDidLoad(a)},showAppSwitcher:function(){CloudOS.statechart.sendAction("appCalledShowAppSwitcher")},showSecondaryAuth:function(){var a=CloudOS.appManagerFor(arguments[0]);if(!a.get("isActive")){a.set("wantsSecondaryAuth",YES);return}CloudOS.statechart.sendAction("showSecondaryAuth")},showHelp:function(c,a){var b=arguments[0];c=arguments[1];a=arguments[2];COS.openHelp(b,c,a)},switchToApplication:function(e,b){var d=arguments[0];e=arguments[1];b=arguments[2];var c=CloudOS.appManagerFor(d),a=CloudOS.appManagerFor(e);if(!c||!c.get("isActive")){SC.debug("%@ is not allowed to switch to a different app while in background",c.get("name"));return}else{if(!a){SC.debug("Cannot switch to unknown app %@",e);return}}a.set("route",b);CloudOS.appController.set("pendingApp",a);CloudOS.statechart.sendAction("appCalledSwitchToApplication")},mailTo:function(m,j,f,d,g){var h=arguments[0],a=CloudOS.appManagerFor(h),c=CloudOS.appManagerFor("mail"),o=arguments[1],b="",n,k;if(!o){SC.debug("mailTo() requires an email address");return}o=encodeURI(o);var e={subject:arguments[2]?encodeURI(arguments[2]):null,body:arguments[3]?encodeURI(arguments[3]):null,cc:arguments[4]?encodeURI(arguments[4]):null,bcc:arguments[5]?encodeURI(arguments[5]):null};for(n in e){k=e[n];if(!k){continue}if(b){b+="&"}b+=n+"="+e[n]}if(c&&!c.get("isDisabled")){a.get("contentWindow").open("https://%@/mail/message/%@/#compose?to=%@%@".fmt(window.location.hostname,String.preferredLanguage,o,(b?"&"+b:"")),"","width=810,height=677,status=no,toolbar=no")}else{window.location="mailto:%@?%@".fmt(o,b)}},setRoute:function(a){var c=arguments[0];a=arguments[1];var b=CloudOS.appManagerFor(c);if(!b){return}b.set("route",a)},getRoute:function(){var b=arguments[0];var a=CloudOS.appManagerFor(b);if(!a){return}return a.get("route")},getAccountPreferences:function(){return this.getUser().get("preferences")},getAppPreferences:function(a){var c=arguments[0];a=arguments[1]?arguments[1]:c.get("name");var b=COS.appsController.getAppInfoFor(a);if(!b){SC.warn("getAppPreferences(): Could not find application information for %@".fmt(a));return}return SC.clone(b.get("preferences"),YES)},setAppPreferences:function(c,d){var b=arguments[0],a=b.get("name");c=SC.clone(arguments[1],YES);d=arguments[2];COS.prefsController.savePreferences(a,c,d)},refreshAppPreferences:function(c){var b=arguments[0],a=b.get("name");COS.prefsController.getPreferences(a,c)},getStartupUrl:function(){var b=arguments[0],a=b.get("name");return COS.startupController.getStartupUrl(a)},setStartupUrl:function(b){var c=arguments[0],a=c.get("name");b=arguments[1];if(!b){CW.fatalError("CloudOS.setStartupUrl():  You need to provide a url to set")}COS.startupController.setStartupUrl(a,b)},getRequestedStartupUrl:function(){var c=arguments[0],a=c.get("name");var b=COS.appsController.getAppInfoFor(a);return b.get("requestedStartupUrl")},getEnvironment:function(){return COS.authController.get("environment")},setTitle:function(c){var b=arguments[0];c=arguments[1];var a=CloudOS.appManagerFor(b);if(a){a.set("title",c)}},reload:function(){var a=arguments[0];CloudOS.appController.reloadApplication(a.get("name"))},exit:function(a){var b=arguments[0];a=arguments[1];if(a===undefined){SC.warn("statusCode must be provided for exit()");return}this.invokeLast(function(){CloudOS.appController.exitApplication(b.get("name"),a)})},handleApplicationCrash:function(d,b){var c=arguments[0],a=c.get("name");d=arguments[1];b=arguments[2];d=d?SC.clone(d,NO):{};d.applicationName=a;if(b){d.log=b}COS.handleApplicationCrash(d)},requestFailed:function(b,a){b=arguments[1];a=arguments[2];switch(b){case 330:CloudOS.authController.validateUser(function(){CloudOS.appController.userDidRevalidate()});break;case 401:CloudOS.logoutAndReload();break;case 503:CloudOS.statechart.sendAction("showServiceLocked",a);break}},relayKeyboardShortcut:function(b,a){CW.performKeyEquivalent(a)},relayMouseMove:function(c,b,a){}};(function(){var a,b,c;for(a in CloudOS.API){if(!((b=CloudOS.API[a]) instanceof Function)){continue}CloudOS.API[a]=SC.RunLoop.wrapFunction(b)}})();CloudOS.mixin(CloudOS.API);CloudOS.NotificationSupport={hasNotificationSupport:YES,initMixin:function(){var e=this.get("subscribesTo"),a=e&&e.length,c,b,f,d;if(!a){return}for(c=0;c<a;c++){f=e[c];d="__notifier"+c+"__";b=function(){var j=arguments.callee,k=j.__path__,h=j.__previous__,g=j.__owner__;if(h){g.unsubscribeFrom(h)}g.subscribeTo(j.__previous__=g.get(k))};b.__path__=d;b.__owner__=this;this.addObserver(d,b);this.bind(d,f);this[d]=SC.objectForPropertyPath(f);b()}},subscribeTo:function(a){if(!a){return}if(a&&!a.hasNotificationSupport){SC.warn("Warning: "+this+" is attempting to subscribe to "+a+", which lacks NotificationSupport. Ignoring call.");return}a.addSubscriber(this);return this},unsubscribeFrom:function(a){if(!a||!a.hasNotificationSupport){return}a.removeSubscriber(this);return this},addSubscriber:function(c){var b=this._subscribers||(this._subscribers=[]),a=SC.guidFor(c);if(!isNaN(b[a])){return}b[a]=b.length;b.push(c)},removeSubscriber:function(d){var c=this._subscribers;if(!c||!d){return}var b=SC.guidFor(d),a=c[b];if(isNaN(a)){return}delete c[b];c[a]=undefined;c.__holes__=(c.__holes__||0)+1;if(c.__holes__>=10){this._coalesceSubscriberList()}},notifySubscribers:function(f){var d=this._subscribers,b=undefined;if(d){if(arguments.length>1){b=SC.$A(arguments);b.splice(0,1)}for(var c=0,a=d.length,e;c<a;c++){if((e=d[c])&&e[f] instanceof Function){if(!b){e[f].call(e)}else{e[f].apply(e,b)}}if(e.didReceiveNotification instanceof Function){e.didReceiveNotification(f,this)}}}this.didSendNotification(f)},didReceiveNotification:function(a,b){},didSendNotification:function(a){},_coalesceSubscriberList:function(){var c=this._subscribers;if(!c||!c.length){return}var a=c.length,b;for(b=0;b<a;b++){if(!c[b]){c.splice(b,1)}else{c[SC.guidFor(c[b])]=b}b--;a--}}};require("mixins/notification_support");CloudOS.AppManager=SC.Object.extend(CloudOS.NotificationSupport,{subscribesTo:"CloudOS.localizationController".w(),isAppManager:YES,instance:null,appInfo:null,nameBinding:".appInfo.name",isReadyBinding:".appInfo.isReady",isDisabledBinding:".appInfo.isDisabled",isRampedBinding:".appInfo.isRamped",isUnqualifiedBinding:".appInfo.isUnqualified",path:function(){var c=COS.authController.getPath("user.preferences"),a=c&&c.get("locale");var b=CW.getUrlParameters();if(b.locale){a=b.locale}if(!a||CloudOS.supportedLocales.indexOf(a)===-1){SC.warn("Locale %@ is not supported, so using en-us",a);a="en-us"}var d=this.getPath("appInfo.path")+a+"/";if(SC.buildMode==="production"){d="/applications"+d}return d}.property("appInfo.path"),locationHash:function(){var b=this.get("name"),a=this.get("route");if(a){b+="/%@".fmt(a)}return b}.property("route"),route:null,routeDidChange:function(){var a=this.get("contentWindow");if(a){a.location.hash=this.get("route")}}.observes("route"),contentWindow:function(){var a=this.get("view");if(a){return a.get("contentWindow")}else{return null}}.property("view"),isFailed:NO,isActive:NO,isWaiting:NO,startupDataHasBeenLoaded:NO,isHidden:NO,title:null,displayName:null,view:null,_hasLoaded:NO,getReady:function(){if(this._view){return}SC.debug("Beginning to load "+this.get("name"));COS.startupController.requestStartup(this.get("name"));var a=CloudOS.AppFrameView.create({path:this.getPath("appInfo.path"),minWidth:this.get("minWidth"),minHeight:this.get("minHeight"),app:this});this.set("view",this._view=a);CloudOS.getPath("mainPage.mainPane.appsView").addAppFrame(a);this.set("isWaiting",YES);this._checkLoadFailureTimer=this.invokeLater("_checkLoadFailure",CloudOS.APP_LOAD_TIMEOUT)},relocalize:function(b){SC.debug("Relocalizing "+this.get("name")+" because: "+b);this.teardown();var a="AppTitle.%@".fmt(this.get("name")).loc();this.set("displayName",a);this.set("title",a)},teardown:function(){SC.debug("Ensuring that %@ is torn down.",this.get("name"));this.passMessage("applicationWillTerminate");var a=this.get("view");if(a){a.destroy()}this.set("view",this._view=null);if(this._checkLoadFailureTimer){this._checkLoadFailureTimer.invalidate()}if(this.get("isFailed")){this.set("hasFailedOnce",YES)}this.set("isFailed",NO);this.set("instance",null);this.set("isWaiting",NO);this.set("isActive",NO);this._hasLoaded=NO;var b=this.get("appInfo");b.set("startupNotified",NO);b.set("isReady",NO);this.set("isReady",NO)},_checkLoadFailure:function(){if(!this.get("isReady")){this._didFailToBecomeReady()}},_didFailToBecomeReady:function(){this.set("isFailed",YES);this.set("isWaiting",NO);if(CloudOS.appController.get("pendingApp")===this){CloudOS.statechart.sendAction("applicationDidFailToBecomeReady")}CloudOS.getPath("mainPage.mainPane.appsView").removeAppFrame(this._view)},didBecomeReady:function(c){var e=SC.Benchmark,b=c.get("capitalizedName"),a=b+":  Waiting for startup data";e.end(b+":  Waiting for application to become visible");e.start(a);if(this.get("startupDataHasBeenLoaded")){e.end(a)}if(this.get("isFailed")){return}window[this.get("name").substr(0,2)]=this.get("contentWindow");this.set("instance",c);COS.startupController.notifyStartup(c.get("name"));var d=function(){this.set("isReady",YES);this.set("isWaiting",NO);if(CloudOS.appController.get("pendingApp")===this){CloudOS.statechart.sendAction("applicationDidBecomeReady")}};if(CloudOS.APP_POST_READY_DELAY){this.invokeLater(d,CloudOS.APP_POST_READY_DELAY)}else{d.call(this)}},startupDataDidLoad:function(){this.set("startupDataHasBeenLoaded",YES);if(!this.get("isWaiting")){var a=this.getPath("instance.capitalizedName");SC.Benchmark.end(a+":  Waiting for startup data")}},show:function(a){if(!this.get("isReady")){return}this.notifyPropertyChange("title");CloudOS.getPath("mainPage.mainPane.appsView").showApp(this,a)},hide:function(a){if(!this.get("isReady")){return}CloudOS.getPath("mainPage.mainPane.appsView").hideApp(this,a)},iconElement:null,iconDidLoad:function(){this.set("iconElement",this._iconAssetVessel)},prepareIcon:function(){var b=this.get("icon");if(this._lastIcon===(this._lastIcon=b)||!b){return}var c=this,a;a=this._iconAssetVessel=new Image();a._onload=function(){if(c._iconAssetVessel===this){try{c.iconDidLoad()}catch(d){SC.error("Exception while attempting to handle newly loaded icon image for "+c.get("name")+". Exception text: "+d)}}};a.onload=function(){this._isDownloaded=YES;this._onload()};setTimeout(function(){if(!a._isDownloaded){a._onload()}},4000);a.src=b}.observes("icon"),init:function(){arguments.callee.base.apply(this,arguments);this.prepareIcon()},focus:function(){var a=this.get("view");if(!a){return}a.focus()},passMessage:function(d,g,c){var a=this.get("instance");if(!a){return undefined}var b=a.get("delegate")||a;var f=undefined;try{f=a.invokeDelegateMethod(b,d,g,c)}catch(h){SC.error("Exception while invoking "+d+" for "+this.get("displayName")+". CloudOS and other applications are not affected. Exception text: "+h)}return f},sleep:function(){this.callMethod("_sleep")},wake:function(){this.callMethod("_wake")},callMethod:function(b){var a=this.get("instance");if(!a){return undefined}try{a.invokeDelegateMethod(null,b)}catch(c){SC.error("Exception while invoking "+b+" for "+this.get("displayName")+". CloudOS and other applications are not affected. Exception text: "+c)}},ensureWillSuspend:function(){this.ensureDidBecomeActive();if(this._messageState!==this._DID_BECOME_ACTIVE){return}this._messageState=this._WILL_SUSPEND;this.passMessage("applicationWillSuspend")},ensureDidSuspend:function(){if(this._messageState!==this._WILL_SUSPEND){return}this._messageState=this._DID_SUSPEND;this.passMessage("applicationDidSuspend")},ensureWillBecomeActive:function(){this.ensureDidSuspend();if(this._messageState!==this._DID_SUSPEND){return}this._messageState=this._WILL_BECOME_ACTIVE;if(this._hasLoaded){this.passMessage("applicationShouldRefresh",NO)}this.passMessage("applicationWillBecomeActive");this.sleep()},ensureDidBecomeActive:function(){if(this._messageState!==this._WILL_BECOME_ACTIVE){return}this._messageState=this._DID_BECOME_ACTIVE;this.wake();this._hasLoaded=YES;if(this.get("wantsSecondaryAuth")){this.set("wantsSecondaryAuth",NO);CloudOS.statechart.invokeLater("sendAction",100,"showSecondaryAuth")}this.passMessage("applicationDidBecomeActive")},_DID_SUSPEND:1,_WILL_SUSPEND:2,_DID_BECOME_ACTIVE:3,_WILL_BECOME_ACTIVE:4,_messageState:1});sc_require("controllers/app_manager");CloudOS.appController=SC.Object.create({initializeAppManagers:function(){var a={},d=this.getAppFromHash(),m=this.getAppRouteFromHash(),f=[],g,b,j,n,k,e,c,h;for(k=0,e=CloudOS.displayApps.length;k<e;k++){n=CloudOS.displayApps[k];g=n.name;j=COS.appsController.getAppInfoFor(g);c=g===d?m:null;h="AppTitle.%@".fmt(g).loc();f.push(a[g]=CloudOS.AppManager.create(n,{appInfo:j,index:f.length,route:c,displayName:h}))}this.set("appList",f);this.set("apps",a)},appDidBecomeReady:function(c){CloudOS.appManagerFor(c).didBecomeReady(c);var b=CloudOS.authController.getPath("user.preferences"),a=c.get("name");if(b&&b.get("lastUsedApp")!==a){b.set("lastUsedApp",a);b.commitLater(4000)}},appStartupDataDidLoad:function(a){CloudOS.appManagerFor(a).startupDataDidLoad(a)},reloadApplication:function(d){var e=CloudOS.appController,b=CloudOS.appManagerFor(d),c=this,a=e.get("currentApp");if(!b){SC.warn("reloadApplication():  Application %@ does not exist",d);return}if(a&&a.get("name")===d){CloudOS.statechart.sendAction("appMustReload",function(){b.teardown();c.invokeLater(function(){e.set("pendingApp",b);CloudOS.statechart.sendAction("userDidChooseApp")},500)})}else{b.teardown()}},exitApplication:function(j,f){var k=CloudOS.appController,a=CloudOS.appManagerFor(j),d=NO,h=this,g,e;if(!a){SC.warn("application %@ does not exist".fmt(j));return}a.set("isFailed",YES);if(f===1){g=a.get("contentWindow");e=g&&g.SC?g.SC.Logger.stringifyRecordedLogMessages():null;d=YES}var b=k.get("currentApp"),c=k.get("pendingApp");if((b&&b.get("name")===j)||(c&&c.get("name")===j)){CloudOS.statechart.sendAction("appMustExit",f,e)}else{a.teardown();if(d){this.showErrorReporter(b)}}},exitApplicationSilently:function(b){CloudOS.statechart.sendAction("appMustExitSilently");var a=CloudOS.appManagerFor(b);if(a){a.teardown()}},currentApp:null,pendingApp:null,activateCurrentApp:function(a){var c=this.get("currentApp");if(!c){SC.debug("No app is ready to be activated yet, waiting for it to call back when ready");return}c.set("isActive",YES);c.show(a);var b=this._lastUsedApp;if(b===c){return}if(b){b.hide(a)}if(b){b.set("isActive",NO)}this._lastUsedApp=c},deactivateCurrentApp:function(){var a=this.get("currentApp");if(!a){SC.debug("No app is ready to be deactivated yet.");return}CK.currentApplication=null;this.set("currentApp",null);a.set("isActive",NO)},cloudOSWillTerminate:function(){var e=this.get("apps"),d=this.get("currentApp"),c,h,g,a,f,b;for(a in e){g=e[a];h=g.passMessage("applicationWillTerminate");if(g===d){c=h}}return c},isAuthenticatedBinding:"CloudOS.authController.isAuthenticated",isAuthenticatedDidChange:function(){if(!this.get("isAuthenticated")){var a=this;setTimeout(function(){SC.run(function(){(function(){var b=this.get("apps");for(var c in b){b[c].teardown()}}).apply(a)})},100)}}.observes("isAuthenticated"),userDidRevalidate:function(){var b=this.get("apps"),a,c;for(a in b){c=b[a];c.passMessage("userDidRevalidate")}},getDefaultApp:function(){var c=this.getAppFromHash(),b=CloudOS.authController.getPath("user.preferences"),a;if(c){a=c;SC.debug("Found user's preferred app from location.hash: %@",a)}else{if(b&&b.get("lastUsedApp")){a=b.get("lastUsedApp");SC.debug("Found user's lastUsedApp from account preferences: %@",a)}}if(!a){return null}var d=CloudOS.appManagerFor(a);if(d&&!d.get("isDisabled")){return d}},getAppFromHash:function(){var c=window.location.hash,b=c.indexOf("/"),a,d;d=c.substring(1,(b!==-1?b:c.length));if(COS.apps[d]){a=d}return a},getAppRouteFromHash:function(){var b=window.location.hash,a=b.indexOf("/");if(a===-1){return}return b.substring(a+1,b.length)},showErrorReporter:function(e,d){var a=e.get("name"),b=e.get("contentWindow"),c;if(d){c=d}else{c=b&&b.SC&&b.SC.Logger?b.SC.Logger.stringifyRecordedLogMessages():null}CK.errorCatcher.reportServerError({isFatal:YES,applicationName:a,title:"Error.AppLoading.Title".loc("AppTitle.%@".fmt(a).loc()),message:"Error.AppLoading.Description".loc(),log:c})}});CloudOS.workspaceController=SC.Object.create(CloudOS.NotificationSupport,{nowShowing:CloudOS.NOWHERE,nextShowDelayTime:0,applicationIsFullwindow:NO,applicationIsOnscreen:NO,layoutChanger:function(){var b=this.get("applicationIsFullwindow"),a=this.get("applicationIsOnscreen");var c=!b&&!(this._usingMin&&a);if(this._usingMin!==(this._usingMin=c)){this.notifySubscribers(c?"activateMinimumSize":"deactivateMinimumSize")}}.observes("applicationIsOnscreen","applicationIsFullwindow"),_usingMin:YES,updateTitle:function(){var e=CloudOS.appController.get("currentApp"),a=e?e.get("name"):null,c=a?("AppTitle."+a).loc():null,d=e?e.get("title"):null,b;if(!e||!e.get("isActive")){b="iCloud"}else{if(d){b=d}else{b="iCloud "+(e.get("dashInTitle")?"- ":"")+c}}this.set("title",b);return b}.observes("CloudOS.appController*currentApp.title","CloudOS.appController*currentApp.isActive"),updateHash:function(){var a=CloudOS.appController.get("currentApp");this.set("hash",(a&&a.get("isActive"))?a.get("locationHash"):"")}.observes("CloudOS.appController*currentApp","CloudOS.appController*currentApp.route","CloudOS.appController*currentApp.isActive"),title:null,titleDidChange:function(){window.document.title=this.get("title")}.observes("title"),hash:null,hashDidChange:function(){window.location.hash=this.get("hash")}.observes("hash"),removeRHTMLSpinner:function(){if(window._removeRHTMLSpinner){window._removeRHTMLSpinner()}},set:function(b,c){if(b==="nowShowing"){this.beginPropertyChanges();var a=arguments.callee.base.apply(this,arguments);this.chooseDelayFromNowShowing();this.endPropertyChanges();return a}else{return arguments.callee.base.apply(this,arguments)}},chooseDelayFromNowShowing:function(){var b=this.get("nowShowing");var a=this._previousNowShowing;this._previousNowShowing=b;this.set("nextShowDelayTime",this.get("nowShowingDelays")[a||0][b||0])},nowShowingDelays:[[0,0,500,500],[0,0,0,500],[0,500,0,0],[0,500,0,0]],springboardVisualCenterY:0,accountSignoutHelpProtrusion:0,init:function(){arguments.callee.base.apply(this,arguments);CW.iOSNotification=CW.iOSNotification.extend({minimumSideClearanceBinding:SC.Binding.transform(function(a){return a-29}).from("CloudOS.workspaceController.accountSignoutHelpProtrusion")})}});sc_require("mixins/notification_support");sc_require("controllers/workspace");CloudOS.authController=COS.AuthController.create(CloudOS.NotificationSupport,{isSpinning:NO,areFieldsEditable:YES,subscribesTo:"CloudOS.localizationController".w(),relocalize:function(){var a=this.get("user");if(a){a.notifyPropertyChange("displayName")}},needSimpleAccountUI:function(){var a=COS.servicesController.getServiceInfoFor("contacts");return !a||a.status!=="active"}.property("isUserRamped","isUserUnqualified"),init:function(){arguments.callee.base.apply(this,arguments);CloudOS._authController=this;COS.authController=this;var d=this,a=this.checkPreferences;this.checkPreferences=function(){return a.apply(d,arguments)};var c=CW.getUrlParameters(),b=CloudOS.appController.getAppRouteFromHash(),e,f;if(c.username){f=c.username}if(!f&&b){e=CW.getUrlParameters(b);if(e.username){f=e.username;CloudOS.workspaceController.set("hash","")}}if(!f){f=CK.getValueFromSessionStorage("username")}if(f){this.set("loginUsername",f)}},loginUsername:"",loginPassword:"",isExtendedLogin:NO,validateDidSucceed:function(d){var b=d?d.dsInfo:null,e=b?b.appleId:null,a=b?b.appleIdAlias:null;var c=CK.readCookie("X-APPLE-WEB-ID");if(c&&!this.appleIdsAreEqual(c,e,a)){SC.info(SC.json.encode(d));CK.errorCatcher.reportServerError({showDialog:NO,error:'RedJello: Validate: client="%@", bag="%@", alias="%@"'.fmt(c,e,a)})}this.set("loginUsername",CloudOS.authController.getPath("user.appleId"));this.set("isExtendedLogin",d.isExtendedLogin);CloudOS.meCardController.getMeCard(function(f){if(f){return}})},validateDidFail:function(a,b){if(a.status===401){CloudOS.statechart.sendAction("authDidNotValidate")}else{CloudOS.statechart.sendAction("authDidNotConnect")}},loginDidSucceed:function(c){var d=this.get("loginUsername");CK.setValueInSessionStorage("username",d);this.set("isExtendedLogin",c.isExtendedLogin);CloudOS.meCardController.getMeCard(function(f){if(f){return}});var b=c?c.dsInfo:null,e=b?b.appleId:null,a=b?b.appleIdAlias:null;if(!this.appleIdsAreEqual(d,e,a)){SC.info(SC.json.encode(c));CK.errorCatcher.reportServerError({showDialog:NO,error:'RedJello: Login: client="%@", bag="%@", alias="%@"'.fmt(d,e,a)})}else{CK.writeCookie("X-APPLE-WEB-ID",d,null,".icloud.com",48,YES)}},loginDidFail:function(a,b){this.set("loginPassword","");var c=b?b.error:null;if(b&&a.status===401){if(c===1){CloudOS.statechart.sendAction("authDidNotValidate")}else{SC.warn("Auth: 401 response but no recognized error code");CloudOS.statechart.sendAction("authDidNotConnect")}}else{if(a.status===403){if(c===9){CloudOS.statechart.sendAction("authDidNotValidateLocked")}else{if(c===8){CloudOS.statechart.sendAction("authDidNotValidateLocked")}else{if(c===7){CloudOS.statechart.sendAction("authDidNotValidateLocked")}else{if(c===6){CloudOS.statechart.sendAction("authDidNotValidateMMeOnly")}else{if(c===5){CloudOS.statechart.sendAction("authDidNotValidateNotICloudUser")}else{if(c===4){CloudOS.statechart.sendAction("authDidNotValidateMMeOnly")}else{if(c===3){CloudOS.statechart.sendAction("authDidNotValidateNotICloudUser")}else{if(c===2){CloudOS.statechart.sendAction("authDidNotValidateNotICloudUser")}else{SC.warn("Auth: 403 response but no recognized error code");CloudOS.statechart.sendAction("authDidNotConnect")}}}}}}}}}else{if(a.status===503){this.handle503(a)}else{SC.warn("Auth: No auth bag or recognized status code");CloudOS.statechart.sendAction("authDidNotConnect")}}}},logoutDidSucceed:function(){CK.writeCookie("X-APPLE-WEB-ID",null,null,".icloud.com",null,YES);CK.writeCookie("X-APPLE-APPLEID",null,null,".icloud.com")},userIsMobileMe:function(){CloudOS.statechart.sendAction("authDidNotValidateMMeOnly")},userIsNotSignedUp:function(){CloudOS.statechart.sendAction("authDidNotValidateNotICloudUser")},userIsNotVerified:function(){CloudOS.statechart.sendAction("authDidNotValidateNotVerified")},userIsRamped:function(){this.set("userRequiresRampNotification",YES)},userIsUnqualified:function(){this.set("userRequiresUnqualifiedNotification",YES)},handle503:function(c){var a,e,b;try{a=SC.json.decode(c.get("body"))}catch(d){SC.error("Cannot read DR response")}if(a){for(e in a){if(e.match(/^retry[ _\-]?after$/i)){b=a[e];break}}}if(b){b=parseInt(b,10)}CloudOS.statechart.sendAction("authDRLocked",{retryAfter:b})},checkPreferences:function(c){if(c&&c.get("status")===503){this.handle503(c);return}else{if(!c||c.get("status")!==200){this.clearUserState();SC.warn("KVS returned invalid response.");CloudOS.statechart.sendAction("authDidNotConnect");return}}var b=this.getUser(),d=b.get("preferences"),a=CW.getUrlParameters();if(a.clearprefs){if(confirm("Are you sure you want to clear all preferences?")){COS.prefsController.clearPreferences(function(){document.location=document.location.href.replace("clearprefs","firstrun")})}else{CloudOS.statechart.sendAction("authDidValidate")}}else{if(!d||!d.get("locale")||(!this.get("isUserRamped")&&!this.get("isUserUnqualified")&&!d.get("timeZone"))){SC.debug("Missing account preferences; let's show first run");CloudOS.statechart.sendAction("accountPreferencesMissing")}else{if(a.firstrun){SC.debug("First run flag is on, lets show it");CloudOS.statechart.sendAction("showFirstRun")}else{SC.debug("Account preferences look good, moving on...");CloudOS.statechart.sendAction("authDidValidate")}}}},appleIdsAreEqual:function(b,d,e){b=b?b.toLowerCase():"";d=d?d.toLowerCase():"";e=e?e.toLowerCase():"";var c=b===d||b===e,a;if(!c&&/@(me|mac)\.com$/.test(b)){a=b.replace(/@.*$/,"");c=a===d.replace(/@.*$/,"")||a===e.replace(/@.*$/,"")}return c}});CloudOS.autoUpdateController=SC.Object.create({init:function(){this.startAutoUpdateTimer();return arguments.callee.base.apply(this,arguments)},autoUpdateTimer:null,startAutoUpdateTimer:function(){if(this.get("autoUpdateTimer")){return}var a=SC.Timer.schedule({target:this,action:"checkVersion",interval:(CloudOS.AUTO_UPDATE_INTERVAL*1000),repeats:YES});this.set("autoUpdateTimer",a)},checkVersion:function(){var a=new Date().getTime();if(this._lastCheck+((CloudOS.AUTO_UPDATE_INTERVAL-10)*1000)>a){SC.info("autoUpdate: Already checked %@ms ago, ignoring",(a-this._lastCheck));return}this._lastCheck=a;var b=CW.getUrlParameters();if(SC.buildMode==="debug"&&!b.autoUpdate){SC.debug("autoUpdate: Not checking while in debug or without the autoUpdate queryParam set.");return}var c=SC.Request.getUrl("/system/version.json").json();c.notify(200,this,function(g){var d=g.get("body"),e,f;if(d){e=d.buildNumber;f=d.autoUpdate;if(!SC.none(e)&&!SC.none(f)){this.handleVersionResponse(e,f)}}});c.notify(0,this,function(d){SC.warn("autoUpdate: Could not fetch version.json");if(b.autoUpdate){SC.warn("autoUpdate: Will simulate response since autoUpdate flag is set.");this.handleVersionResponse("override",parseInt(b.autoUpdate,10))}});c.send()},handleVersionResponse:function(a,b){if(b===CloudOS.UPDATE_IGNORE){SC.debug("autoUpdate: Update flag for %@ is UPDATE_IGNORE",a);return}if(SC.buildNumber===a){SC.debug("autoUpdate: Running latest build, %@",a);return}var c=CK.getValueFromLocalStorage("didReloadToBuild",YES);if(c===a){SC.warn("autoUpdate: We already reloaded the user to try an update to %@, so will not do it again!",a);return}if(b===CloudOS.UPDATE_PROMPT){SC.debug("autoUpdate: Prompt the user to reload to %@",a);if(this._reloadPane&&this._reloadPane.get("isVisibleInWindow")){SC.info("autoUpdate: There is already an auto update alert pane showing, so ignoring request for a second one.");return}var d=this;this._reloadPane=CW.iOSAlert.show({message:"AutoUpdate.Title".loc(),description:"AutoUpdate.Description".loc(),buttons:[{title:"AutoUpdate.Later".loc(),isCancel:YES,isGapped:YES,action:function(){this.get("pane").dismiss()}},{title:"AutoUpdate.Reload".loc(),isDefault:YES,action:function(){d.reloadToBuildNumber(a)}}]})}if(b===CloudOS.UPDATE_FORCE){SC.debug("autoUpdate: Force the user to reload to %@",a);d.reloadToBuildNumber(a)}},reloadToBuildNumber:function(a){CK.setValueInLocalStorage("didReloadToBuild",a,YES);window.location.reload()}});CloudOS.mixin({UPDATE_IGNORE:0,UPDATE_PROMPT:1,UPDATE_FORCE:2});CloudOS.blockInputController=SC.Object.create({showFeedbackAfter:1000,shouldShowFeedback:NO,_userInputWasBlockedAt:0,block:function(){this.set("shouldShowFeedback",NO);this._userInputWasBlockedAt=Date.now();CloudOS.blockInputModalPane.get("modalPane").append();this.invokeLater("showFeedback",this.get("showFeedbackAfter"))},unblock:function(){this._userInputWasBlockedAt=0;CloudOS.blockInputModalPane.get("modalPane").remove()},showFeedback:function(){var a=this._userInputWasBlockedAt;if(a>0&&(this.get("showFeedbackAfter")+a<=Date.now())){this._userInputWasBlockedAt=0;this.set("shouldShowFeedback",YES)}}});CloudOS.idleController=SC.Object.create({init:function(){this.startIdleTimers();return arguments.callee.base.apply(this,arguments)},activeAppTimer:null,inactiveAppTimer:null,startIdleTimers:function(){if(this.get("activeAppTimer")){return}var b=SC.Timer.schedule({target:this,action:"activeAppShouldRefresh",interval:(CloudOS.ACTIVE_IDLE_INTERVAL*1000),repeats:YES});this.set("activeAppTimer",b);var a=SC.Timer.schedule({target:this,action:"inActiveAppsShouldRefresh",interval:(CloudOS.INACTIVE_IDLE_INTERVAL*1000),repeats:YES});this.set("inactiveAppTimer",a);var c=SC.Timer.schedule({target:this,action:"shouldRefreshValidateToken",interval:(CloudOS.REFRESH_VALIDATE_TOKEN_INTERVAL*1000),repeats:YES});this.set("validateTokenTimer",c)},activeAppShouldRefresh:function(){var b=CloudOS.appController.getPath("currentApp.instance"),a;if(!b){return}a=b.get("delegate");b.invokeDelegateMethod(a,"applicationShouldRefresh",NO)},inActiveAppsShouldRefresh:function(){var c=CloudOS.appController.get("apps"),a,d,b;for(a in c){d=CloudOS.appManagerFor(a).get("instance");if(!d||(d&&d.get("isActive"))){continue}b=d.get("delegate");d.invokeDelegateMethod(b,"applicationShouldRefresh",NO)}},shouldRefreshValidateToken:function(){CloudOS.authController.validateUser(function(){SC.debug("idleController: Successfully refreshed the validate token")})}});require("mixins/notification_support");CloudOS.localizationController=SC.Object.create(CloudOS.NotificationSupport,{_lastPreferredLanguage:null,relocalizeIfNeeded:function(b,a){b=b||"unknown reason"+(a?" that was forced":"");(this._reasons||(this._reasons=[])).push(b);this.invokeOnce(a?"_forceReloc":"_relocalizeIfNeeded")},_forceReloc:function(){this._relocalizeIfNeeded(true)},_relocalizeIfNeeded:function(b){var c=this._reasons.join(", ")||"no reasons known";this._reasons.length=0;var a=b||(String.preferredLanguage!==this._lastPreferredLanguage);SC.debug("Language check: "+this._lastPreferredLanguage+" -> "+String.preferredLanguage+". We "+(a?"WILL":"WILL NOT")+" relocalize.");if(!a){return}this._lastPreferredLanguage=String.preferredLanguage;this.notifySubscribers("relocalize",(b?"FORCED: ":"")+c)}});CloudOS.meCardController=SC.Object.create({NO_PHOTO_SRC:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/no_photo.png",NO_PHOTO_SMALL_SRC:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/no_photo_small.png",meCardUrl:function(){var a=COS.servicesController.getServiceUrlFor("contacts")+"/co/mecard/";return a}.property(),meCard:null,meCardRequirementSatisfied:NO,imgLoadError:NO,getMeCard:function(d){if(!COS.servicesController.getServiceInfoFor("contacts")){SC.debug("meCardController: not requesting me-card since contacts is disabled.");this.set("meCardRequirementSatisfied",YES);return}var a=this.get("meCardUrl"),c=COS.Request.getUrl(a,null),b=this;c.notify(200,this,function(f){var e=SC.json.decode(f.get("body"));if(!e.contacts){SC.debug("no me-card is set");this.notifyPropertyChange("meCard")}else{SC.debug("me-card received");b.set("meCard",e.contacts[0])}if(d&&SC.typeOf(d)===SC.T_FUNCTION){d.call(0)}b.set("meCardRequirementSatisfied",YES);return YES});c.notify(0,this,function(e){SC.debug("problem receiving me-card");if(d&&SC.typeOf(d)===SC.T_FUNCTION){d.call(1)}b.set("meCardRequirementSatisfied",YES);return YES});SC.debug("Sending me card GET request to %@",a);c.send()},storeMeCard:function(e,m){var d=this.get("meCard");if(!COS.servicesController.getServiceInfoFor("contacts")){SC.debug("meCardController: not storing me-card since contacts is disabled.");return}var c=!d,a=c?"POST":"PUT",b=this.get("meCardUrl")+"?method="+a,j=COS.Request.postUrl(b,null),h=this,g,k;g=d?d:{};if(e){for(k in e){if(!e.hasOwnProperty(k)){continue}g[k]=e[k]}}j.notify(200,this,function(p){var o=SC.json.decode(p.get("body"));if(!o.contacts){SC.debug("no me-card is set")}else{SC.debug("me-card received");this.set("meCard",o.contacts[0])}if(m&&SC.typeOf(m)===SC.T_FUNCTION){m.call(0)}return YES});j.notify(0,this,function(o){SC.debug("problem storing me-card");if(m&&SC.typeOf(m)===SC.T_FUNCTION){m.call(1)}return YES});if(c){g.contactId=CW.upperCaseUUID();var n=CloudOS.authController.getUser();g.firstName=n.get("firstName");g.lastName=n.get("lastName");g.emailAddresses=[{field:n.get("primaryEmail"),label:"home"}]}var f={contacts:[g]};SC.debug("Sending me card GET request to %@",b);j.send(SC.json.encode(f))},completePhotoPicker:function(b){var a={url:b.photoUrl,crop:b.photoCrop,signature:(b.photoUrl.indexOf("contacts.icloud.com")===-1?null:this.get("photoSignature"))};this.set("photo",a);if(SC.browser.isIE8OrLower){this.storeMeCard({photo:a},this.meCardPosted)}},meCardPosted:function(){CloudOS.meCardController.getMeCard()},contactPhoto:function(){return this.get("photoUrl")||this.NO_PHOTO_SRC}.property("photoUrl"),smallContactPhoto:function(){return this.get("photoUrl")||this.NO_PHOTO_SMALL_SRC}.property("photoUrl"),validate:function(a){return a&&!a.match(new RegExp("https://p[0-9][0-9]+-contacts.icloud.com"))&&a.indexOf("data:image/jpeg;base64,")!==0?null:a},photoUrl:function(b,c){if(c!==undefined){var a=this.get("photo");a.url=c}else{return this.validate(this.getPath("photo.url"))||null}}.property("photo"),photoCrop:function(b,c){if(c!==undefined){var a=this.get("photo");a.crop=c}else{return this.getPath("photo.crop")||null}}.property("photo"),photoSignature:function(b,c){if(c!==undefined){var a=this.get("photo");a.signature=c}else{return this.getPath("photo.signature")}}.property("photo"),photo:function(b,c){if(c!==undefined){var a=this.get("meCard");if(a){a.photo=c}else{this._photo=c}}else{return this.getPath("meCard.photo")||this._photo||{}}}.property("meCard"),isPhotoUrlValid:function(){return !this.get("imgLoadError")&&!!this.get("photoUrl")}.property("photoUrl","imgLoadError")});CloudOS.motmController=SC.Object.create(CloudOS.NotificationSupport,{subscribesTo:"CloudOS.localizationController".w(),baseUrl:"https://www.icloud.com/user_news/current/",hasFetchedOneMotm:NO,relocalize:function(){if(!this.get("hasFetchedOneMotm")){return}var a=CloudOS.authController.getPath("user.preferences");if(a){a.set("lastDismissedMotm",0)}this.invokeLater("fetchMotm",500)},fetchMotmIfFirst:function(){if(!this.get("hasFetchedOneMotm")){this.fetchMotm()}},fetchMotm:function(){return;if(!CloudOS.authController.get("user")){return}this.set("hasFetchedOneMotm",YES);jQuery.ajax({url:this.get("baseUrl")+CK.getCurrentLocaleInISOFormat()+".json",context:this,dataType:"json",success:function(){var b=this,a=arguments;SC.run(function(){b.didReceiveMotm.apply(b,a)})}})},didReceiveMotm:function(a){this._ensureMotmGuid(a);this._motm=a;this.notifySubscribers("performOrScheduleMotmDisplay")},displayMotm:function(){return;if(CloudOS.authController.getPath("user.preferences.lastDismissedMotm")===this._motm.guid){SC.debug("The MOTM with guid="+this._motm.guid+" has already been dismissed. Aborting display of this MOTM.");return}var a=this._showingMotm;if(a&&a._referenceMotm.guid===this._motm.guid){return}var b=this._showingMotm=this._createMotm();if(a){a.replaceWith(b)}else{CW.iOSNotification.enqueue(b)}},_createMotm:function(){return CW.iOSNotification.create({message:this._motm.title,description:this._motm.description,icon:this.get("baseUrl")+this._motm.imageName,owner:this,_referenceMotm:this._motm,didDismiss:function(){this.owner.didDismissMotm()}})},didDismissMotm:function(){this._showingMotm=null;var a=CloudOS.authController.getPath("user.preferences");if(a){SC.debug("Recording to preferences as dismissed the MOTM with guid="+this._motm.guid);a.set("lastDismissedMotm",this._motm.guid);a.commit()}},_ensureMotmGuid:function(a){if(!a.guid){a.guid=this._stringTotal(a.title)+this._stringTotal(a.description)+this._stringTotal(a.imageName)}},_stringTotal:function(e){var d=0;e=e.toString();for(var b=0,c,a=e.length;b<a;b++){c=e.charCodeAt(b);if(!isNaN(c)){d+=c*(1+b%4)}}d+=e.length;return d}});CloudOS.keyResponder=SC.Object.create(CW.KeyResponder,{keyboardShortcuts:{escape:"showAppSwitcherEscape",shift_escape:"showAppSwitcher",ctrl_shift_r:"reloadCurrentApplication",ctrl_shift_p:"refreshCurrentApplication",ctrl_shift_w:"exitCurrentApplication",ctrl_shift_1:"open1",ctrl_shift_2:"open2",ctrl_shift_3:"open3",ctrl_shift_4:"open4",ctrl_shift_5:"open5"},showAppSwitcherEscape:function(){this.showAppSwitcher()},showAppSwitcher:function(){CloudOS.showAppSwitcher()},reloadCurrentApplication:function(){var a=CloudOS.appController.get("currentApp");if(a){CloudOS.appController.reloadApplication(a.get("name"))}},exitCurrentApplication:function(){var a=CloudOS.appController.get("currentApp");if(a){CloudOS.appController.exitApplication(a.get("name"),0)}},refreshCurrentApplication:function(){var a=CloudOS.appController.get("currentApp");if(a){a.passMessage("applicationShouldRefresh",YES)}},open1:function(){CloudOS.openApp(1-1)},open2:function(){CloudOS.openApp(2-1)},open3:function(){CloudOS.openApp(3-1)},open4:function(){CloudOS.openApp(4-1)},open5:function(){CloudOS.openApp(5-1)}});CloudOS.IsShowingSupport={firstIsShowing:NO,displayKeys:null,nowShowing:null,_isShowingSupport_nowShowingObserver:function(){for(var a=NO,e=this.get("displayKeys"),f=this.get("nowShowing"),d=0,c;c=e[d];d++){if(f===c){a=YES}}var g=this._lastIsShowing;if(g===undefined){g=this.get("firstIsShowing")}if(a===g){return}this._lastIsShowing=a;if(!a){this.set("isShowing",NO);if(this._showTimer){this._showTimer.invalidate();this._showTimer=null}this.hide()}else{var b=CloudOS.workspaceController.get("nextShowDelayTime");if(!b){this.set("isShowing",YES);this.show()}else{this._showTimer=this.invokeLater(function(){this.set("isShowing",YES);this.show()},b)}CloudOS.workspaceController.set("nextShowDelayTime",0)}}.observes("nowShowing"),initMixin:function(){if(this.displayKey){this.displayKeys=[this.displayKey]}this.isShowing=this.firstIsShowing;if(!this.show){this.show=this._default_isShowing_show}if(!this.hide){this.hide=this._default_isShowing_hide}},_default_isShowing_show:function(){this.set("isVisible",YES)},_default_isShowing_hide:function(){this.set("isVisible",NO)}};CloudOS.Paneness={isPaneAttached:YES,init:function(){arguments.callee.base.apply(this,arguments);this.invokeOnce("_paneness_checkInitialState")},_paneness_checkInitialState:function(){var c=this.get("parentView"),b=this.get("usualParent"),a=this.get("isPaneAttached");if(!c){this.set("isPaneAttached",a=NO)}if(!b&&c){this.set("usualParent",b=c)}if(!a&&c){c.removeChild(this)}if(a&&b&&b!==c){if(c){c.removeChild(this)}b.appendChild(this)}},append:function(){var c=this.get("parentView"),b=this.get("usualParent");if(!b){return}if(c===b){return}if(c&&c!==b){this.removeFromParent()}var a=b.appendChild(this);this.set("isPaneAttached",YES);return a},appendTo:SC.RunLoop.wrapFunction(function(a){this.set("usualParent",a);return this.append()}),remove:function(){var a=this.removeFromParent();this.set("isPaneAttached",NO);return a}};SC.RootResponder.reopen({focus:function(b){SC.debug("CloudOS window received focus event");if(!this.get("hasFocus")){SC.$("body").addClass("sc-focus").removeClass("sc-blur");if(!SC.TABBING_ONLY_INSIDE_DOCUMENT&&SC.browser.isIE8OrLower){var a=SC.RootResponder.responder.get("keyPane");if(a){var d=a.get("nextValidKeyView");if(d){a.makeFirstResponder(d)}}}SC.run(function(){this.set("hasFocus",YES)},this)}if(CloudOS.shouldAppHaveFocus()){var c=CloudOS.appController.get("currentApp");if(c){SC.debug("Active app "+c.get("name")+" focusing");c.focus()}}else{CloudOS.workspaceController.notifySubscribers("windowDidFocus")}return YES},blur:function(a){CloudOS.workspaceController.notifySubscribers("windowDidBlur");return YES}});CloudOS.moduleLocalizer={localizedModules:["cloudkit/error_catcher","cloudkit/photo/photoPicker","coreweb/timezone_picker","cloudos/account","cloudos/language"],_defaultLocale:String.preferredLanguage,_locale:"en-us",_previousLocale:null,setLocale:function(a){if(!a){if(CW.getUrlParameters().locale){a=String.preferredLanguage}else{a=CloudOS.authController.getPath("user.preferences.locale")}}if(this._locale===a||!a){return NO}this._previousLocale=this._locale;this._locale=a;String.preferredLanguage=a;var b=this._monkeyPatchModules();SC.Locale.createCurrentLocale();$(document.body).removeClass(this._defaultLocale).removeClass(this._previousLocale).addClass(this._locale);return b},_monkeyPatchModules:function(){var g=SC.MODULE_INFO,e=this.localizedModules,b,a=e.length,d,f,c,h=NO;for(b=0;b<a;b++){d=e[b];f=SC.MODULE_INFO[d];if(!f){throw"Localized module not found: "+d}c=this._updateURL(f.stringURL);if(c!==f.stringURL){f.stringURL=c;f.scriptURL=this._updateURL(f.scriptURL);this._unloadModule(d,f);h=YES}}return h},_unloadModule:function(b,c){c.isLoaded=NO;c.isReady=NO;c.isWaitingForRunLoop=NO;c.source=undefined;if(c.isPrefetched){var a=SC.Module.PrefetchModuleTask.create({prefetchedModuleName:b});SC.backgroundTaskQueue.push(a)}},_updateURL:function(a){return a.replace(this._defaultLocale,this._locale).replace(this._previousLocale,this._locale)}};CloudOS.blockInputModalPane=SC.Page.design({modalPane:SC.Pane.design({layout:{zIndex:100000},childViews:"feedback".w(),shouldShowFeedback:NO,shouldShowFeedbackBinding:"CloudOS.blockInputController.shouldShowFeedback",shouldShowFeedbackDidChange:function(){var b=this.get("shouldShowFeedback"),a=this.get("feedback");var c=b?250:0;a.animate({opacity:b?1:0,duration:c});a.set("isVisible",b)}.observes("shouldShowFeedback"),feedback:SC.View.design(CW.Animatability,{layout:{opacity:0},isVisible:NO,classNames:"block-input-feedback",childViews:"spinner".w(),spinner:CW.SpinnerView.design({layout:{centerX:0,centerY:0}})})})});CloudOS.WaitingForAppState=SC.State.extend({succeededState:"active.application",disabledState:"active.desiredAppDisabled",failedState:"active.appLoadFailure",abortedState:"active.springboard",shouldForceDelegateMethods:NO,enterState:function(){if(CloudOS.appController.get("loadingApp")){CloudOS.appController.loadingApp.teardown()}var a=CloudOS.appController.get("pendingApp");this._app=a;if(a&&a.get("name")==="mail"&&a.get("isDisabled")&&!a.get("isRamped")&&!a.get("isUnqualified")){CW.iOSAlert.show({message:"Error.MailNotEnabled.Title".loc(),description:"Error.MailNotEnabled.Description".loc(),buttons:["Button.OK"]});this.gotoState(this.abortedState);return}if(!a||a.get("isDisabled")){this.gotoState(this.disabledState);return}if(a.get("isFailed")){this.applicationDidFailToBecomeReady();return}if(a.get("isReady")){this.applicationDidBecomeReady(true)}else{CloudOS.appController.set("loadingApp",a);a.invokeLast("getReady")}},abortLoad:function(){if(CloudOS.appController.get("loadingApp")){CloudOS.appController.loadingApp.teardown()}this.gotoState(this.abortedState)},exitState:function(){},applicationDidFailToBecomeReady:function(){this.gotoState(this.failedState)},applicationDidBecomeReady:function(a){CloudOS.appController.set("loadingApp",null);CloudOS.appController.set("currentApp",this._app);CloudOS.appController.activateCurrentApp(this.get("shouldForceDelegateMethods"));return this.gotoState(this.succeededState)},gotoState:function(){if(this._gotoStateTimer){this._gotoStateTimer.invalidate()}this._gotoStateTimer=null;return arguments.callee.base.apply(this,arguments)},appMustExit:function(d,c){var f=this._app;if(d===0){this.gotoState(this.abortedState);f.teardown();return}var a=f.get("name"),e="AppTitle.%@".fmt(a).loc(),b=d===2?"Error.AppNotLoading.Title".loc(e):"Error.AppCrashed.Title".loc(e);this.gotoState(this.abortedState);CW.iOSAlert.show({message:b,buttons:[{title:"Error.Button.TryAgain".loc(),isDefault:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();f.teardown();CloudOS.openApp(a)}},{title:"Error.Button.Report".loc(),classNames:"like-default".w(),action:function(){this.getPath("pane.modalPane").set("paneFadeOutDuration",0);this.get("pane").dismiss();CloudOS.appController.showErrorReporter(f,c)}},{title:"Button.OK".loc(),isCancel:YES,isGapped:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();f.teardown()}}]})},init:function(){var d="appCalledShowAppSwitcher appCalledSwitchToApplication appMustReload appMustExit appMustExitSilently showSecondaryAuth".w(),c,a,b;for(a=0;c=d[a];a++){b=function(){var e=arguments.callee.state._app;if(!e){return}e.set("preDisplayAction",arguments.callee.actionName);e.set("preDisplayActionArgs",SC.$A(arguments))};b.actionName=c;b.state=this;if(!this[c]){this[c]=b}}arguments.callee.base.apply(this,arguments)}});CloudOS.WaitingForDefaultAppState=CloudOS.WaitingForAppState.extend({disabledState:"active.allAppsDisabled"});CloudOS.SecondaryAuthState=SC.State.design({enterState:function(){var b=this,a=CloudOS.appController.get("currentApp").get("name"),c=("AppTitle."+a).loc();CloudOS.notifyDialogAboveApp();this.authAlert=CW.iOSAlert.show({message:"Auth.Secondary.Title".loc(c),description:CloudOS.authController.getPath("user.appleId"),alertPaneDidDismiss:function(){CloudOS.notifyRemovalOfDialogAboveApp()},extraView:SC.TextFieldView.extend({paneDidChange:function(){this.becomeFirstResponder()}.observes("pane"),classNames:["secondary-auth"],layout:{height:30},isPassword:YES,hint:"Auth.Secondary.Hint".loc(),hintOnFocus:YES,didCreateLayer:function(){this.invokeLater(function(){try{this.$input()[0].focus()}catch(d){}},50)}}),extraViewPaddingTop:6,extraViewPaddingBottom:6,buttons:[{title:"Button.Cancel".loc(),action:function(){this.get("pane").dismiss();b.gotoState("active.springboard")},isCancel:YES},{title:"Button.OK".loc(),isDefault:YES,action:function(){var e=this.get("pane").$("input")[0],f=e.value;var d=CloudOS.authController;d.secondaryLogin(d.get("loginUsername"),f,d.get("isExtendedLogin"),a);e.value="";this.get("pane").dismiss()}}]})},appCalledShowAppSwitcher:function(){if(this.authAlert){this.authAlert.get("pane").dismiss()}if(this.validationAlert){this.validationAlert.get("pane").dismiss()}if(this.connectionAlert){this.connectionAlert.get("pane").dismiss()}this.gotoState("active.springboard")},authDidValidate:function(){CloudOS.statechart.gotoState("displayingCurrentApp")},authDidNotValidate:function(){var a=this;this.validationAlert=CW.iOSAlert.show({message:"Error.AuthDidNotValidate.Title".loc(),description:"Error.AuthDidNotValidate.Description".loc(),buttons:[{title:"Error.AuthDidNotValidate.iForgot".loc(),action:"iForgot"},{title:"Button.OK".loc(),action:function(){a.gotoState(a);this.get("pane").dismiss()},isDefault:YES,isCancel:YES}],iForgot:function(){window.open("Error.AuthDidNotValidate.iForgot.URL".loc())}})},authDidNotValidateNotICloudUser:function(){CloudOS.authController.logoutUser(function(){window.location.reload()},YES,YES)},authDidNotValidateMMeOnly:function(){CloudOS.authController.logoutUser(function(){window.location.reload()},YES,YES)},authDidNotValidateLocked:function(){CloudOS.authController.logoutUser(function(){window.location.reload()},YES,YES)},authDidNotValidateNotVerified:function(){CloudOS.authController.logoutUser(function(){window.location.reload()},YES,YES)},authDRLocked:function(){CloudOS.authController.logoutUser(function(){window.location.reload()},YES,YES)},authDidNotConnect:function(){var a=this;this.connectionAlert=CW.iOSAlert.show({message:"Error.AuthDidNotConnect.Title".loc(),description:"Error.AuthDidNotConnect.Description".loc(),buttons:[{title:"Error.AuthDidNotConnect.Support".loc(),action:"support"},{title:"Button.OK".loc(),action:function(){a.gotoState(a);this.get("pane").dismiss()},isDefault:YES,isCancel:YES}],support:function(){window.open("Error.AuthDidNotValidate.iForgot.URL".loc())}})}});sc_require("states/waiting_for_app");sc_require("states/auth_secondary");CloudOS.ApplicationState=SC.State.extend({initialSubstate:"displayingCurrentApp",isReentering:NO,enterState:function(){CloudOS.workspaceController.notifySubscribers("springboardMayProceed");CloudOS.workspaceController.removeRHTMLSpinner();CloudOS.workspaceController.set("nowShowing",CloudOS.APP)},displayingCurrentApp:SC.State.design({enterState:function(){this.get("parentState").set("isReentering",NO);var a=CloudOS.appController.get("currentApp"),b=a.get("preDisplayAction"),c=a.get("preDisplayActionArgs");a.set("preDisplayAction",undefined);a.set("preDisplayActionArgs",undefined);if(b!==undefined){this[b].apply(this,c)}},appCalledShowAppSwitcher:function(){this.invokeLater(function(){CloudOS.autoUpdateController.checkVersion()},1000);this.gotoState("active.springboard")},appCalledSwitchToApplication:function(){this.gotoState("active.application.waitingForNewApp")},globalAppSwitchWasRequested:function(){if(CloudOS.appController.get("currentApp")===CloudOS.appController.get("pendingApp")){return}this.gotoState("active.application.waitingForNewApp")},appMustReload:function(a){this.gotoState("active.springboard",a)},appMustExit:function(e,d){if(this._exitPane&&this._exitPane.get("isVisibleInWindow")){SC.warn("There is already an app exit alert pane showing, so ignoring request for a second one.");return}var c=CloudOS.appController.get("currentApp");if(e===0){this.gotoState("active.springboard");c.teardown();return}var a=c.get("name"),g=this,f="AppTitle.%@".fmt(a).loc(),b=e===2?"Error.AppNotLoading.Title".loc(f):"Error.AppCrashed.Title".loc(f);this._exitPane=CW.iOSAlert.show({message:b,description:"Error.HelpImprove.Description".loc(),buttons:[{title:"Error.Button.Reload".loc(),isDefault:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();c.teardown();CloudOS.appController.reloadApplication(a)}},{title:"Error.Button.Report".loc(),classNames:"like-default".w(),action:function(){this.getPath("pane.modalPane").set("paneFadeOutDuration",0);this.get("pane").dismiss();CloudOS.appController.showErrorReporter(c,d)}},{title:"Error.Button.CloseApp".loc(f),isCancel:YES,isGapped:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();g.gotoState("active.springboard");c.teardown()}}]})},appMustExitSilently:function(){this.gotoState("active.springboard")},showSecondaryAuth:function(){this.gotoState("secondaryAuth")},showServiceLocked:function(a){this.gotoState("serviceLocked",a)}}),waitingForNewApp:CloudOS.WaitingForAppState.design({shouldForceDelegateMethods:YES,enterState:function(){arguments.callee.base.apply(this,arguments);CloudOS.blockUserInput()},appCalledSwitchToApplication:function(){this.gotoState("active.application.waitingForNewApp")},globalAppSwitchWasRequested:function(){if(CloudOS.appController.get("pendingApp")===this._app){return}this.gotoState("active.application.waitingForNewApp")},appCalledShowAppSwitcher:function(){this.gotoState("active.springboard")},exitState:function(){arguments.callee.base.apply(this,arguments);this.get("parentState").set("isReentering",YES);CloudOS.unblockUserInput()}}),secondaryAuth:SC.State.plugin("CloudOS.SecondaryAuthState"),serviceLocked:SC.State.plugin("CloudOS.ServiceLockedState"),exitState:function(){if(!this.get("isReentering")){CloudOS.appController.deactivateCurrentApp()}CloudOS.focus()}});sc_require("states/waiting_for_app");CloudOS.AuthUIState=SC.State.extend({initialSubstate:"downloadingAuthModule",downloadingAuthModule:SC.State.design({enterState:function(a){SC.Module.loadModule("cloudos/auth_ui",this,"moduleDidBecomeReady",a)},moduleDidBecomeReady:function(c,b){var a=CloudOS.authController;a.set("isAuthenticated",NO);CloudOS.workspaceController.set("nowShowing",CloudOS.AUTH);if(b&&b.loadFirstRun){a.set("isAuthenticating",YES);this.invokeLater(function(){this.gotoState("firstRun")},50)}else{this.gotoState("fieldsEditable")}}}),fieldsEditable:SC.State.design({enterState:function(){CloudOS.authController.set("isSpinning",NO);CloudOS.authController.set("areFieldsEditable",YES);CloudOS.authController.invokeLater("notifySubscribers",300,"focusCorrectField")},userDidSubmit:function(){var a=CloudOS.authController;a.loginUser(a.get("loginUsername"),a.get("loginPassword"),a.get("isExtendedLogin"),a.checkPreferences);a.set("isSpinning",YES);CloudOS.authController.set("areFieldsEditable",NO);this.gotoState("attemptIsSubmitted")},firstRun:function(){}}),attemptIsSubmitted:SC.State.design({authDidValidate:function(){CloudOS.moduleLocalizer.setLocale();SC.Module.loadModule("cloudos/language",this,"languageDidLoad")},languageDidLoad:function(){CloudOS.localizationController.relocalizeIfNeeded("Signin Submission Succeeded and Language Loaded");CloudOS.motmController.fetchMotmIfFirst();var a=CloudOS.appController.getDefaultApp();if(!a){this.gotoState("active.springboard")}else{CloudOS.appController.set("pendingApp",a);this.gotoState("active.authUI.waitingForApp")}},authDidNotValidate:function(){CloudOS.authController.set("isSpinning",NO);this.gotoState("fieldsEditable");CloudOS.authController.invokeLater("notifySubscribers",20,"showIForgotDialog");CloudOS.authController.invokeLater("notifySubscribers",20,"shake")},authDidNotValidateNotICloudUser:function(){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Error.AuthDidNotValidateNotICloudUser.Title".loc(),description:"Error.AuthDidNotValidateNotICloudUser.Description".loc(),buttons:[{title:"Button.Close".loc(),isCancel:YES},{title:"Error.AuthDidNotValidateNotICloudUser.LearnMore",isDefault:YES,action:"move"}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")},move:function(){window.open("Error.AuthDidNotValidateNotICloudUser.LearnMore.URL".loc())}})},authDidNotValidateMMeOnly:function(){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Error.AuthDidNotValidateMMeOnly.Title".loc(),buttons:[{title:"Button.Close".loc(),isCancel:YES},{title:"Error.AuthDidNotValidateMMeOnly.Move",isDefault:YES,action:"move"}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")},move:function(){window.open("Error.AuthDidNotValidateMMeOnly.Move.URL".loc())}})},authDidNotValidateLocked:function(){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Error.AuthDidNotValidateLocked.Title".loc(),description:"Error.AuthDidNotValidateLocked.Description".loc(),buttons:[{title:"Error.AuthDidNotValidateLocked.Reset".loc(),action:"reset"},{title:"Button.OK".loc(),isDefault:YES,isCancel:YES}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")},reset:function(){window.open("Error.AuthDidNotValidateLocked.Reset.URL".loc())}})},authDidNotValidateNotVerified:function(){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Error.AuthDidNotValidateNotVerified.Title".loc(),description:"Error.AuthDidNotValidateNotVerified.Description".loc(CloudOS.authController.getPath("user.primaryEmail")),buttons:[{title:"Button.OK".loc()}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")}})},authDidNotConnect:function(){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Error.AuthDidNotConnect.Title".loc(),description:"Error.AuthDidNotConnect.Description".loc(),buttons:[{title:"Error.AuthDidNotConnect.Support".loc(),action:"support"},{title:"Button.OK".loc(),isDefault:YES,isCancel:YES}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")},support:function(){window.open("Error.AuthDidNotConnect.Support.URL".loc())}})},authDRLocked:function(a){CloudOS.authController.set("isSpinning",NO);CW.iOSAlert.show({message:"Auth.Locked.Title".loc(),description:CloudOS.lockedAlertDescription("Auth.Locked.Description.",a.retryAfter),buttons:[{title:"Button.OK".loc()}],fromState:this,alertPaneDidDismiss:function(){this.fromState.gotoState("fieldsEditable")}})},accountPreferencesMissing:function(){this.gotoState("active.authUI.firstRun")},showFirstRun:function(){this.gotoState("active.authUI.firstRun")}}),firstRun:SC.State.design({substatesAreConcurrent:YES,enterState:function(){if(SC.browser.isIE){var a=AuthUI.ActiveXView.create();a.createLayer();document.body.appendChild(a.get("layer"));this._activeX=a}},exitState:function(){if(this._activeX){document.body.removeChild(this._activeX.get("layer"))}},defaultState:SC.State.design({enterState:function(){SC.Module.loadModule("cloudos/account",this,"moduleDidBecomeReady")},moduleDidBecomeReady:function(){CloudOS.authController.set("isSpinning",NO);CloudOS.AccountSettings.loadFirstRunView()},userDidSubmit:function(){CloudOS.AccountSettings.submitPrefsAndMeCard();CloudOS.moduleLocalizer.setLocale();SC.Module.loadModule("cloudos/language",this,"languageDidLoad")},languageDidLoad:function(){CloudOS.localizationController.relocalizeIfNeeded("User Changed Language during FirstRun and Language Loaded");CloudOS.motmController.fetchMotmIfFirst();this.gotoState("active.springboard")},deletePhoto:function(){CloudOS.meCardController.set("photo",null)},activeXFileDropped:function(a){CW.notificationCenter.postNotification("activeXFileDropped",a)},activeXFileDragged:function(a){CW.notificationCenter.postNotification("activeXFileDragged",a)},activeXFileDragEnded:function(){CW.notificationCenter.postNotification("activeXFileDragEnded")}}),photoPicker:SC.State.plugin("CK.Photo.photoPicker")}),waitingForApp:CloudOS.WaitingForDefaultAppState.design({}),exitState:function(){CloudOS.authController.invokeLater("set",1000,"isSpinning",NO);CloudOS.authController.invokeLater("set",1000,"loginPassword","")}});sc_require("states/waiting_for_app");CloudOS.statechart=SC.Statechart.create({trace:YES,monitorIsActive:NO,rootState:SC.State.design({initialSubstate:"loading",loading:SC.State.design({enterState:function(){var a=function(){CK.writeCookie("COS_BOOTSTRAP_COOKIE_TEST","1");return CK.readCookie("COS_BOOTSTRAP_COOKIE_TEST")==="1"};if(!navigator.cookieEnabled&&!a()){this.gotoState("cookiesDisabled")}else{if(!CloudOSBootstrap.isBrowserVersionAtLeast({safari:5,mobilesafari:0,firefox:5,chrome:12,ie:8,otherwise:false})){this.gotoState("browserWarning")}else{this.gotoState("validatingAuth")}}}}),cookiesDisabled:SC.State.design({enterState:function(){window.location="http://www.icloud.com/enable_cookies"}}),browserWarning:SC.State.design({enterState:function(){var a=CK.getValueFromLocalStorage("skipBrowserReminder");if(!a){CloudOS.workspaceController.removeRHTMLSpinner();CW.iOSAlert.show({message:"Error.UnsupportedBrowser.Title".loc(),description:"Error.UnsupportedBrowser.Description".loc(),buttons:[{title:"Error.UnsupportedBrowser.Ignore".loc(),isCancel:YES,action:function(){this.get("pane").dismiss();CK.setValueInLocalStorage("skipBrowserReminder",true);CloudOS.statechart.gotoState("validatingAuth")}},{title:"Error.UnsupportedBrowser.LearnMore".loc(),isDefault:YES,action:function(){this.get("pane").dismiss();window.open("Error.UnsupportedBrowser.LearnMore.URL".loc());CloudOS.statechart.gotoState("validatingAuth")}}]})}else{this.gotoState("validatingAuth")}}}),validatingAuth:SC.State.design({initialSubstate:"gettingReply",gettingReply:SC.State.design({enterState:function(){var a=CloudOS.authController,b=COS.getCredentialsFromQueryParameters();if(b){a.loginUser(b.username,b.password,b.extendedLogin,a.checkPreferences);return}a.validateUser(a.checkPreferences)},authDidValidate:function(){CloudOS.moduleLocalizer.setLocale();SC.Module.loadModule("cloudos/language",this,"languageDidLoad")},languageDidLoad:function(){CloudOS.localizationController.relocalizeIfNeeded("Validated Auth and Received Language");CloudOS.motmController.fetchMotmIfFirst();var a=CloudOS.appController.getDefaultApp();if(!a||window.location.hash==="#springboard"){this.gotoState("active.springboard")}else{CloudOS.appController.set("pendingApp",a);this.gotoState("validatingAuth.waitingForApp")}},authDidNotValidate:function(){this.gotoState("active.authUI")},authDidNotValidateLocked:function(){this.gotoState("active.authUI")},authDidNotValidateMMeOnly:function(){this.gotoState("active.authUI")},authDidNotValidateNotICloudUser:function(){this.gotoState("active.authUI")},authDidNotValidateNotVerified:function(){this.gotoState("active.authUI")},authDidNotConnect:function(){this.gotoState("active.authUI")},authDRLocked:function(){this.gotoState("active.authUI")},accountPreferencesMissing:function(){this.gotoState("active.authUI.downloadingAuthModule",{loadFirstRun:YES})},showFirstRun:function(){this.gotoState("active.authUI.downloadingAuthModule",{loadFirstRun:YES})}}),waitingForApp:CloudOS.WaitingForDefaultAppState.design({})}),active:SC.State.design({initialSubstate:"authUI",authUI:SC.State.plugin("CloudOS.AuthUIState"),application:SC.State.plugin("CloudOS.ApplicationState"),springboard:SC.State.plugin("CloudOS.SpringboardState"),allAppsDisabled:SC.State.design({enterState:function(){this.gotoState("active.springboard")}}),desiredAppDisabled:SC.State.design({enterState:function(){var c=CloudOS.appController.get("pendingApp");if(c){var a="AppTitle.%@".fmt(c.get("name")).loc();if(c.get("isUnqualified")){var b=c.get("name")==="mail"?"Error.AppUnqualified.Description.mail".loc():"Error.AppUnqualified.Description.others".loc(a);CW.iOSAlert.show(("Error.AppUnqualified.Title").loc(a),b)}else{if(c.get("isRamped")){CW.iOSAlert.show(("Error.AppRamped.Title").loc(a),"Error.AppRamped.Description".loc())}}}this.gotoState("active.springboard")}}),appLoadFailure:SC.State.design({enterState:function(){this.gotoState("active.springboard");var c=CloudOS.appController.get("pendingApp"),a=c.get("name");var b="AppTitle.%@".fmt(a).loc();c.set("isWaiting",NO);CW.iOSAlert.show({message:"Error.AppNotLoading.Title".loc(b),buttons:[{title:"Error.Button.TryAgain".loc(),isDefault:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();c.teardown();CloudOS.statechart.sendAction("reloadApp")}},{title:"Error.Button.Report".loc(),classNames:"like-default".w(),action:function(){this.getPath("pane.modalPane").set("paneFadeOutDuration",0);this.get("pane").dismiss();CloudOS.appController.showErrorReporter(c)}},{title:"Button.Cancel".loc(),isCancel:YES,isGapped:YES,action:function(){this.getPath("pane.modalPane").set("hideDelay",10);this.get("pane").dismiss();c.teardown()}}]})}}),reloadApp:function(){this.gotoState("active.springboard.waitingForApp")}})})});CloudOS.ServiceLockedState=SC.State.design({enterState:function(d){var g=this,b=d?d.retryAfter:null,c=CloudOS.appController.get("currentApp"),a=c.get("name"),h=("AppTitle."+a).loc(),f="Service.Locked.Title".loc({appName:h}),e=CloudOS.lockedAlertDescription("Service.Locked.Description.",b,h);CloudOS.notifyDialogAboveApp();CW.iOSAlert.show({message:f,description:e,alertPaneDidDismiss:function(){CloudOS.notifyRemovalOfDialogAboveApp();c.set("isDisabled",YES);if(b){c.invokeLater(function(){this.set("isDisabled",NO)},b*1000)}g.gotoState("displayingCurrentApp");g.get("owner").sendAction("appMustExit",0)},buttons:[{title:"Button.OK".loc(),isDefault:YES,action:function(){this.get("pane").dismiss()}}]})}});sc_require("states/waiting_for_app");CloudOS.SpringboardState=SC.State.extend({initialSubstate:"displayingSpringboard",enterState:function(b){CloudOS.workspaceController.set("nowShowing",CloudOS.SPRINGBOARD);CloudOS.workspaceController.notifySubscribers("springboardMayProceed");var a=CloudOS.authController.getPath("user.preferences");if(a){a.set("lastUsedApp","");a.commitLater(2000)}if(b){b.call()}},displayingSpringboard:SC.State.design({initialSubstate:"springboard",springboard:SC.State.design({userDidChooseApp:function(){this.gotoState("active.springboard.waitingForApp")},globalAppSwitchWasRequested:function(){this.gotoState("active.springboard.waitingForApp")},showAccountSettings:function(){CloudOS.blockUserInput();SC.Module.loadModule("cloudos/auth_ui",this,"accountSettingsCanNowLoad")},accountSettingsCanNowLoad:function(){SC.Module.loadModule("cloudos/account","CloudOS.AccountSettings","loadAccountSettings");SC.Module.loadModule("cloudos/account","CloudOS","unblockUserInput")},logout:function(){CK.clearSessionStorage();CloudOS.logoutAndReload()},accountSettingsOpen:function(){this.gotoState("AccountSettingsOpen")}}),AccountSettingsOpen:SC.State.design({substatesAreConcurrent:YES,enterState:function(){if(SC.browser.isIE){var a=AuthUI.ActiveXView.create();a.createLayer();document.body.appendChild(a.get("layer"));this._activeX=a}},exitState:function(){if(this._activeX){document.body.removeChild(this._activeX.get("layer"))}},defaultState:SC.State.design({removePaneWithoutSaving:function(){CloudOS.AccountSettings.removePaneWithoutSaving();this.gotoState("springboard")},removePane:function(b,a){CloudOS.AccountSettings.removePane();this.gotoState("springboard")},help:function(){CloudOS.showHelp(true)},deletePhoto:function(){CloudOS.meCardController.set("photo",null)},activeXFileDropped:function(a){CW.notificationCenter.postNotification("activeXFileDropped",a)},activeXFileDragged:function(a){CW.notificationCenter.postNotification("activeXFileDragged",a)},activeXFileDragEnded:function(){CW.notificationCenter.postNotification("activeXFileDragEnded")}}),accountPhotoPicker:SC.State.plugin("CK.Photo.photoPicker")})}),waitingForApp:CloudOS.WaitingForAppState.design({userDidChooseApp:function(){this.gotoState("active.springboard.waitingForApp")},globalAppSwitchWasRequested:function(){if(CloudOS.appController.get("pendingApp")===this._app){return}this.gotoState("active.springboard.waitingForApp")},logout:function(){this.abortLoad();CloudOS.statechart.sendAction("logout")},showAccountSettings:function(){this.abortLoad();CloudOS.statechart.sendAction("showAccountSettings")}}),exitState:function(){}});(function(){var a={render:function(){},update:function(){}};CloudOS.AccountSignoutHelpView=SC.View.extend({layout:{right:30-14,top:30-9,height:28,zIndex:100},childViews:"account signOut help".w(),classNames:"account-signout-help".w(),render:function(b){b.push('<div class="separator"></div>')},didCreateLayer:function(){this.update()},update:function(){var b=this.get("layer");var c=this._seps=this.$(".separator")},performLayout:function(){if(!this._seps){return}var d=this.signOut.get("calculatedWidth")||200;var c=this.signOut.get("layout").right||26;var b=d+c+11;this._seps[0].style.right=b+"px";this.account.adjust("right",d+c+25);this.invokeLast("calculateWidth")}.observes(".signOut.calculatedWidth"),calculateWidth:function(){var b=this.account.get("layout");if(!b||!b.width||!b.right){return}this.adjust("width",b.right+b.width||200)}.observes(".account.calculatedWidth"),account:SC.ButtonView.extend(SC.AutoResize,{renderDelegate:a,layout:{height:28,top:0},init:function(){window.accountbutton=this;arguments.callee.base.apply(this,arguments)},classNames:"account-button".w(),titleBinding:"CloudOS.authController*user.displayName",autoResizeLayer:function(){return this.$(".title")[0]}.property("layer"),autoResizeText:function(){return this.get("title")}.property("title"),supportsAutoResize:YES,displayProperties:"photoUrl photoCrop".w(),photoUrlBinding:"CloudOS.meCardController.photoUrl",photoCropBinding:"CloudOS.meCardController.photoCrop",autoResizePadding:{width:37,height:0},renderDelegate:{render:function(b,e){e.push('<div class="title"></div><div class="photo-frame"></div><div class="photo-container"></div>')},update:function(e,f){f.find(".title")[0].innerHTML=e.get("title");var d=f.find("img")[0],b=f.find(".photo-container")[0],c=e.get("photoUrl");crop=e.get("photoCrop");if(d&&d._src!==c){if(d.parentNode){d.parentNode.removeChild(d)}d=null}if(!d&&c){d=new Image();d.onerror=function(){jQuery(b).addClass("no-photo")};d.onload=function(){jQuery(b).removeClass("no-photo");if(!d.parentNode){b.appendChild(d)}if(!crop){d.style.cssText="position:absolute; left:0px; top:0px; width:22px; height:22px;"}else{d.style.cssText="position:absolute; left:"+Math.round(-crop.x*22/crop.width)+"px; top:"+Math.round(-(d.height-crop.y-crop.height)*22/crop.height)+"px; width:"+Math.round(d.width*22/crop.width)+"px; height:"+Math.round(d.height*22/crop.height)+"px;"}};d._src=c;d.src=c}if(!d&&!c){jQuery(b).addClass("no-photo")}}},action:function(){CloudOS.statechart.sendAction("showAccountSettings")}}),signOut:SC.ButtonView.extend(SC.AutoResize,CloudOS.NotificationSupport,{layout:{right:26,height:28,top:0},init:function(){window.signout=this;arguments.callee.base.apply(this,arguments)},classNames:"signout-button".w(),subscribesTo:"CloudOS.localizationController".w(),relocalize:function(){this.set("title","Springboard.AccountAlert.SignOut".loc());this.renderDelegate.update(this,this.$())},autoResizeLayer:function(){return this.get("layer")}.property("layer"),autoResizeText:function(){return this.get("title")}.property("title"),supportsAutoResize:YES,renderDelegate:{render:function(b,e){},update:function(e,c){var b=c&&c[0];if(!b){return}b.innerHTML=e.get("title")}},action:function(){CloudOS.statechart.sendAction("logout")}}),help:SC.ImageButtonView.extend(CloudOS.NotificationSupport,{layout:{right:0,top:0,width:28,height:28},classNames:"help-button".w(),subscribesTo:"CloudOS.localizationController".w(),relocalize:function(){this.set("toolTip","AuthFooter.Help.Text".loc())},action:function(){CloudOS.showHelp(true)}})})})();CloudOS.AppFrameView=SC.View.extend({tagName:"iframe",classNames:["app-frame"],isFailedBinding:"app.isFailed",useStaticLayout:YES,isAppFrameView:YES,minWidth:0,minHeight:0,app:null,render:function(b){var e=this.get("app"),a=e.get("route"),d=a?"#"+a:"",c=window.location.search;b.attr("src",e.get("path")+c+d);b.attr("frameBorder",0)},update:function(){},didCreateLayer:function(){var a=this.getApplicationName();SC.Benchmark.start(a+":  Waiting for iframe to load");SC.Event.add(this.get("layer"),"load",this,this._iframeDidLoad)},_iframeDidLoad:function(){if(!this._attachCloudOSMethods()){return}var c=SC.Benchmark,b=this.get("contentWindow"),a=this.getApplicationName(),d;if(b&&b.main){c.end(a+":  Waiting for iframe to load");c.start(a+":  Waiting for application to become visible");b.main()}else{SC.warn("main() was not found for application %@",a);this.set("isFailed",true);CloudOS.statechart.sendAction("applicationDidFailToBecomeReady")}},_attachCloudOSMethods:function(){var a=this.get("contentWindow");try{a.CloudOS=SC.Object.create({_authController:CloudOS.authController})}catch(c){SC.warn("Attempted to install CloudOS API Object into contentWindow for %@, but access was denied.  Perhaps the iframe was torn down.",this.getApplicationName());return false}for(var b in CloudOS.API){a.CloudOS[b]=(function(){var d=b;return function(){var h=a.CK.currentApplication;var g=arguments.callee.argScratch||(arguments.callee.argScratch=[]);g.length=0;g.push(h);for(var f=0,e=arguments.length;f<e;f++){g.push(arguments[f])}return CloudOS[d].apply(CloudOS,g)}})()}return true},contentWindow:function(){var a=this.get("layer");if(a){return a.contentWindow}else{return null}}.property().cacheable(),destroy:function(){if(this.get("layer")){this.get("layer").src="about:blank;"}return arguments.callee.base.apply(this,arguments)},focus:function(){var b=this.get("contentWindow");if(!b){return}var a=this.getApplicationName();try{SC.debug("Now focusing %@ for application %@",b,a);b.focus()}catch(c){SC.error("Focusing failed for %@.  Exception text: %@",a,c)}},getApplicationName:function(){return this.getPath("app.appInfo.capitalizedName")}});CloudOS.AppsContainerView=SC.View.extend(CW.Animatability,{layout:{zIndex:100},classNames:"apps-container-view overflow-visible".w(),isOnscreen:NO,isOnscreenBinding:"CloudOS.workspaceController.applicationIsOnscreen",wantsAcceleratedLayer:NO,displayProperties:["isOnscreen"],update:function(){window.appsView=this;var c=this.get("isOnscreen"),g=document,a=g.body,f=g.documentElement,b=window.innerWidth||f.clientWidth||a.clientWidth,e=window.innerHeight||f.clientHeight||a.clientHeight,d;if(c){this.set("layout",{left:0,top:0,right:0,bottom:0,zIndex:100})}else{this.set("layout",{left:-10000,top:-10000,width:b,height:e,zIndex:100})}if(c){this.layoutAppForShow()}},didCreateLayer:function(){this.update()},layoutAppForShow:function(c){var a,b;if(!(c||(c=this._currentApp))||!(a=c.get("view"))){return}if(!(b=a.get("layer"))){return}b.style.cssText="left:0px; top:0px; width:100%; height:100%; z-index:10; position:absolute;";b.setAttribute("width","100%");b.setAttribute("height","100%")},layoutAppForHide:function(j){var c,d;if(!(c=j.isAppFrameView?j:j.get("view"))){return}if(!(d=c.get("layer"))){return}var g=document,a=g.body,f=g.documentElement,b=window.innerWidth||f.clientWidth||a.clientWidth,e=window.innerHeight||f.clientHeight||a.clientHeight;d.style.cssText="left:-10000px; top:-10000px; width:"+b+"px; height:"+e+"px; z-index:10; position:absolute;";d.setAttribute("width","");d.setAttribute("height","")},addAppFrame:function(a){this.appendChild(a);this.layoutAppForHide(a)},removeAppFrame:function(a){if(a&&a.get("parentView")===this){this.removeChild(a)}if(a===this._currentView){this._currentApp=this._currentView=null}},showApp:function(b,a){if(b===true&&a===undefined){a=true;b=undefined}if(!b&&!(b=this._currentApp)){return}if(this._currentApp!==b){this.hideApp(a);this._currentApp=b;if(a){this._currentApp.ensureWillBecomeActive()}this._currentView=b.get("view");if(a){this._currentApp.ensureDidBecomeActive()}if(a){this._currentApp.focus()}}this.layoutAppForShow()},hideApp:function(b,a){if(b===true&&a===undefined){a=true;b=undefined}if(!b&&!(b=this._currentApp)){return}if(a){b.ensureWillSuspend()}this.layoutAppForHide(b);if(b===this._currentApp){this._currentApp=null;this._currentView=null}if(a){b.ensureDidSuspend()}},show:function(){var a={opacity:{from:0,to:1}};if(CloudOS.ENABLE_TRANSFORM_ANIMATIONS&&CloudOS.ENABLE_SCALE_ANIMATION){a.scale={to:1,from:0}}this.set("isOnscreen",YES);this.invokeLast(function(){this.animate(a,this.gpuLayerFunctions,{duration:800*CloudOS.ENABLE_APP_ANIMATION,onstart:function(){this.view.showAnimationDidBegin()},onfinish:function(){this.view.showAnimationDidComplete()}})})},hide:function(){var a={opacity:0};if(CloudOS.ENABLE_TRANSFORM_ANIMATIONS&&CloudOS.ENABLE_SCALE_ANIMATION){a.scale=0}this.animate(a,this.gpuLayerFunctions,{duration:600*CloudOS.ENABLE_APP_ANIMATION,onstart:function(){this.view.hideAnimationDidBegin()},onfinish:function(){this.view.hideAnimationDidComplete();this.view.set("isOnscreen",NO)}})},gpuLayerFunctions:(CloudOS.ENABLE_TRANSFORM_ANIMATIONS&&CloudOS.ENABLE_APP_ANIMATION)?{addLayer:function(){this.view.set("wantsAcceleratedLayer",YES)}.listens("start"),removeLayer:function(){this.view.set("wantsAcceleratedLayer",NO)}.listens("finish")}:{},showAnimationDidComplete:function(){if(this._currentApp){this._currentApp.ensureDidBecomeActive();this._currentApp.focus()}CloudOS.workspaceController.set("applicationIsFullwindow",YES)},showAnimationDidBegin:function(){if(this._currentApp){this._currentApp.ensureWillBecomeActive()}},hideAnimationDidComplete:function(){if(this._currentApp){this._currentApp.ensureDidSuspend()}this.hideApp()},hideAnimationDidBegin:function(){if(this._currentApp){this._currentApp.ensureWillSuspend()}CloudOS.workspaceController.set("applicationIsFullwindow",NO)}});CloudOS.ButtonView=SC.ButtonView.extend(CW.Animatability,{isDown:NO,classNames:"auth-button-view custom-button".w(),renderDelegate:null,renderDelegateName:null,displayProperties:"isEnabled".w(),mouseDown:function(){this.set("isDown",YES);return arguments.callee.base.apply(this,arguments)},mouseUp:function(){this.set("isDown",NO);return arguments.callee.base.apply(this,arguments)},render:function(a){authButton=this;a.push('<div class="bg normal"><div class="left"></div><div class="middle"></div><div class="right"></div></div><div class="bg active"><div class="left"></div><div class="middle"></div><div class="right"></div></div><div class="text"></div>')},didCreateLayer:function(){this._layer=this.get("layer");this._bg=this.$(".bg.normal")[0];this._bgActive=this.$(".bg.active")[0];this._text=this.$(".text")[0];CW.Anim.setOpacity(this._bgActive,0);this.update()},update:function(){if(!this._layer){return}if(this.didChangeFor("update","isActive")){var b=this.get("isActive");this._activeFader=CW.Anim.Fader.create({element:this._bgActive,to:0+b,duration:(300-b*250)*(!this.get("isAnimatingWithParent"))}).start()}if(this.didChangeFor("update","isEnabled")){var a=this.get("isEnabled");this.animate("opacity",0.5+0.5*a,{duration:300*(!this.get("isAnimatingWithParent"))})}if(this.didChangeFor("update","displayTitle")){this._text.innerHTML=this.get("displayTitle")}},finisher:function(){if(!this.get("isAnimatingWithParent")){return}this.finishAnimation();if(this._activeFader){this._activeFader.finish()}}.observes("isAnimatingWithParent")});CloudOS.BackgroundViewAbstract=SC.View.extend({layout:{left:0,top:0,right:0,bottom:0,minHeight:CloudOS.MIN_HEIGHT,minWidth:CloudOS.MIN_WIDTH,zIndex:1},width:null,height:null,srcs:null,html:"<img>",classNames:"background-view".w(),fade:YES,persistOnGPU:NO,ariaHidden:YES,init:function(){window.bg=this;arguments.callee.base.apply(this,arguments)},render:function(a){a.push(this.html)},update:function(){},initialCSS:function(){var b=this._element,a=b.style;a.position="absolute";a.zIndex=50;a.left=a.top="50%";a.marginLeft=Math.round(this.width/-2)+"px";a.marginTop=Math.round(this.height/-2)+"px";a.width=this.width+"px";a.height=this.height+"px";if(this.fade){a.webkitTransform="translate3d(0,0,0)";CW.Anim.setOpacity(b,0)}else{if(!SC.browser.msie||SC.browser.msie>=9){a.display="none"}}if(this.customCSS){this.customCSS(b)}},didCreateLayer:function(){this._layer=this.get("layer");this._element=this._layer.childNodes[0];this.preloadImages();if(this.initialRendering){this.initialRendering()}this.initialCSS();this.update()},preloadImages:function(){var d=this.srcs,g={},f,c=this,e=SC.browser.msie&&SC.browser.msie<=8;this._srcCount=0;var b=function(){c.imageDidLoad(this)};for(var a in d){if(!d.hasOwnProperty(a)){continue}this._srcCount++;f=this.mainSrc===a?this._element:new Image();if(!e){f.onload=b}f.key=a;f.src=f._src_=d[a];g[a]=f}if(e){for(a in g){if(!g.hasOwnProperty(a)){continue}b.apply(g[a])}}},imageDidLoad:function(b){(this.assets||(this.assets={}))[b.key]=b;this._srcCount--;var a=this;if(this._srcCount===0){SC.run(function(){a.allImagesDidLoad()})}},allImagesDidLoad:function(){if(this.willBecomeVisible){this.willBecomeVisible()}if(this.fade){return CW.Anim.Fader.create({element:this._element,owner:this,to:1,duration:SC.browser.msie?0:1000,killGPULayer:this.persistOnGPU?null:function(){this.element.style.webkitTransform=""}.listens("finish"),tellDone:function(){if(this.owner.didBecomeVisible){this.owner.didBecomeVisible()}}.listens("finish")}).start()}else{this._element.style.display="";if(this.didBecomeVisible){this.didBecomeVisible()}}},removeGPULayerOnInvisible:function(){if(!this.fade||!this.persistOnGPU||this.get("isVisibleInWindow")){return}this._element.style.webkitTransform=""}.observes("isVisibleInWindow")});if(SC.browser.msie&&SC.browser.msie<=8){CloudOS.BackgroundView=CloudOS.BackgroundViewAbstract.extend({width:1792,height:1280,fade:!SC.browser.isIE8OrLower,html:"<div></div>",srcs:{tile:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/bg_tile.jpg",radial:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/bg_radial.png"},willBecomeVisible:function(){this._element.style.background="url("+this.srcs.tile+")";if(this.assets&&this.assets.radial&&!this.assets.radial.parentNode){this._element.appendChild(this.assets.radial);this.assets.radial.style.cssText="position:absolute; z-index:10; left:0px; width:"+this.width+"px; height:"+this.height+"px; top:0px;"}}})}else{CloudOS.BackgroundView=CloudOS.BackgroundViewAbstract.extend(CloudOS.NotificationSupport,{width:1792,height:1280,tileWidth:256,tileHeight:256,srcs:{tile:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/bg_tile.jpg"},FALLBACK_RADIAL_ASSET:"/system/cloudos/en-us/1FCS29.34215/source/resources/images/bg_radial.png",html:"<canvas></canvas>",initialRendering:function(){var b=this.can=this._element,a=this.con=this.can.getContext("2d");b.style.width=(b.width=this.width)+"px";b.style.height=(b.height=this.height)+"px"},subscribesTo:"CloudOS.workspaceController".w(),windowDidFocus:function(){this.repaintWithSelf()},repaintWithSelf:function(){if(SC.browser.safari&&this._hasPainted&&this.con&&this.can){this.con.drawImage(this.can,0,0)}},willBecomeVisible:function(){try{var z=this.assets.tile,k=this.can,b=this.con,v=this.tileWidth,c=this.tileHeight,n=this.width,r=this.height,d=0,a=new Date*1,m,j;var q=document.createElement("canvas"),o=q.getContext("2d"),f=q.width=v*1,p=q.height=c*5;for(m=0;m<f;m+=v){for(j=0;j<p;j+=c){o.drawImage(z,m,j,v,c);d++}}for(m=0;m<n;m+=f){for(j=0;j<r;j+=p){b.drawImage(q,m,j,f,p);d++}}q=document.createElement("canvas");q.width=n;q.height=r;o=q.getContext("2d");o.save();o.scale(1,r/n);var s=o.createRadialGradient(n/2,n/2,0,n/2,n/2,n/2);s.addColorStop(0,"transparent");s.addColorStop(0.2,"transparent");s.addColorStop(1,"#0a0a0a");o.fillStyle=s;o.fillRect(0,0,n,n);o.restore();o.globalCompositeOperation="destination-out";o.save();o.translate(-(650/600-1)*n/2,0);o.scale(650/600,1);s=o.createRadialGradient(n/2,r/2,0,n/2,r/2,600/2);s.addColorStop(0,"#0a0a0a");s.addColorStop(1,"transparent");o.fillStyle=s;o.fillRect(n/2-600/2,r/2-600/2,600,600);o.restore();b.drawImage(q,0,0);this._hasPainted=YES;SC.debug("Spent "+(new Date*1-a)+"ms painting the background canvas, which, in addition to the radial gradient, required "+d+" drawImage calls for the tiles.")}catch(t){SC.debug("Exception while attempting to painting background image in canvas: falling back to two-piece image-tag radial with tiling background-image.");if(this._layer){var u=this.can.style.cssText;this.can.width=this.can.height=1;this._layer.innerHTML='<img src="'+this.FALLBACK_RADIAL_ASSET+'">';this._element=this._layer.firstChild;this.initialCSS();this._element.style.background="url("+this.srcs.tile+")"}}}})}CloudOS.BadgeContainerView=SC.ContainerView.extend(CloudOS.Paneness).extend(CW.Animatability,CW.SpritePreloadEnforcement,CW.PaneAnimationSupport,{layout:{centerX:-2,centerY:0,width:508,height:528},contentLayout:{left:94,width:326,top:44,height:340,zIndex:5},classNames:"badge-container-view".w(),centerY:0,centerYObserver:function(){this.adjust("centerY",this.get("centerY")+52+5)}.observes("centerY"),contentView:null,contentViewChanged:function(){this.setContentLayout()}.observes("contentView"),setContentLayout:function(){var a=this.get("contentView");if(!a){return}a.set("layout",this.get("contentLayout"))},render:function(a){this.setContentLayout();a.push('<div class="background-lighting" aria-hidden="true"></div><div class="background" aria-hidden="true"></div>')},didCreateLayer:function(){this._bgLighting=this.$(".background-lighting")[0]},update:function(){},isFront:YES,wantsFlip:NO,shouldFlip:function(){return this.get("wantsFlip")&&CloudOS.ENABLE_TRANSFORM_ANIMATIONS}.property("wantsFlip").cacheable(),showDuration:function(){return this.get("shouldFlip")?1000:1500}.property(),hideDuration:function(){return this.get("shouldFlip")?1000:350}.property(),showingState:function(){return this.get("shouldFlip")?{rotateY:0}:{opacity:1}}.property(),hiddenState:function(){var b=179.99;var a=this.get("shouldFlip")?{rotateY:this._animatingShow?(this.isFront?b:-b):(this.isFront?-b:b)}:{opacity:0};return a}.property(),paneWillShow:function(){this._isShowing=YES;if(this.get("shouldFlip")){this._hiddenForShow=YES;this.set("isVisible",NO)}},paneDidHide:function(){this._isShowing=NO},showDidFrame:function(a){if(!this.get("shouldFlip")||!this._hiddenForShow){return}if(!a.rotateY||a.rotateY.tweenedProgress>=0.5){this._hiddenForShow=NO;this.set("isVisible",YES)}},hideDidFrame:function(a){if(this._isFinishing){return}this._isFinishing=true;if(this.get("shouldFlip")&&a.rotateY&&a.rotateY.tweenedProgress>=0.5){a.finish()}this._isFinishing=false},flipFlipSwitchTo:function(a){if(!CloudOS.ENABLE_TRANSFORM_ANIMATIONS){return}if(a!==undefined){this.set("wantsFlip",a)}else{a=this.get("shouldFlip")}if(this._isShowing){return}if(a){this.adjust("opacity",1);this.adjust(this.get("hiddenState"))}else{this.adjust(this.get("hiddenState"));this.adjust("rotateY",0)}}});require("mixins/notification_support");CloudOS.SpringboardButtonView=SC.View.extend(CW.Animatability,CloudOS.NotificationSupport,{subscribesTo:".springboardView CloudOS.localizationController".w(),_ARROW_WIDTH_MULTIPLE:71/142,_ARROW_HEIGHT_MULTIPLE:70/142,_ARROW_LEFT_MULTIPLE:73/142,_ARROW_TOP_MULTIPLE:73/142,_SHADOW_SIZE_MULTIPLE:328/142,_SHADOW_DROP_RATIO:50/142,_FOCUS_SIZE_MULTIPLE:172/142,_SPINNER_SIZE_MULTIPLE:42/142,_TITLE_SIZE_MULTIPLE:19/142,_TITLE_TOP_MULTIPLE:161/142,_ERROR_SIZE_MULTIPLE:15/142,_ERROR_TOP_MULTIPLE:1.3+1/142,ASPECT_RATIO:1/1.35,_DECOR_SHADOW_SIZE_MULTIPLE:180/142,_DECOR_SHADOW_DROP_RATIO:7/142,_USE_EXTERNAL_SHADOW:SC.browser.msie||SC.browser.opera,wantsAcceleratedLayer:YES,layout:{zIndex:15},classNames:["springboard-button-view"],ariaRole:"button",displayProperties:"size displayName isFocused x y isSpinning errorText isDarkTo app isUnclickable isShowingWarning isAnimatingWithParent iconElement titleIntensity isDecorativeDimmed".w(),action:function(){var a=this.get("app");if(!a){return}CloudOS.appController.set("pendingApp",a);CloudOS.statechart.sendAction("userDidChooseApp")},size:142,x:300,y:300,wantsSpinningBinding:".app.isWaiting",displayNameBinding:".app.displayName",isFocused:NO,_lastIsFocused:NO,iconElementBinding:".app.iconElement",layoutBoundsCacher:function(){this._layoutBounds=this.getPath("springboardView.layoutBounds")||CloudOS.SpringboardButtonView.prototype._layoutBounds},_layoutBounds:{top:0,centerY:1,bottom:2,left:0,centerX:1,right:2},animatedLayoutBoundsCacher:function(){this._animatedLayoutBounds=this.getPath("springboardView.animatedLayoutBounds")},app:null,mouseDown:function(){this.set("isDown",YES)},touchStart:function(a){this.mouseEntered(a);return this.mouseDown(a)},mouseUp:function(c){var a=this.get("isActive")&&!this.get("isUnclickable");this.set("isDown",NO);if(!a){return}this.action();if(c!=="keyboard"){var b=this.get("springboardView");if(b&&b.focusNone){b.focusNone()}}},touchEnd:function(a){this.mouseUp(a);return this.mouseExited(a)},mouseMoved:function(b){if(!this._USE_EXTERNAL_SHADOW){return}if(!this.convertPointToView(b)){return}var a=this._pt_.x,e=this._pt_.y,c=this.get("frame"),d=a>=0&&a<=c.width&&e>=0&&e<=c.height;if(this._lastIsOver!==d){this.set("isOver",this._lastIsOver=d)}},mouseEntered:function(a){if(this._USE_EXTERNAL_SHADOW){return}this.set("isOver",this._lastIsOver=YES)},touchEntered:function(a){return this.mouseEntered(a)},mouseExited:function(){this.set("isOver",this._lastIsOver=NO)},touchExited:function(a){return this.mouseExited(a)},isDecorativeDimmedBinding:"*springboardView.isDecorativeDimmed",isSpinning:function(){return this.get("wantsSpinning")&&!this.get("isDecorativeDimmed")}.property("wantsSpinning","isDecorativeDimmed"),isActive:function(){return this.get("isDown")&&this.get("isOver")}.property("isDown","isOver").cacheable(),isDark:function(){return this.get("isActive")||this.get("isSpinning")}.property("isActive","isSpinning","isUnclickable").cacheable(),isFailedBinding:"*app.isFailed",isDisabled:function(){var a=this.getPath("app.name");if(a==="mail"){return NO}else{return this.getPath("app.isDisabled")}}.property("app"),isDisabledObserver:function(){this.notifyPropertyChange("isDisabled")}.observes("*app.isDisabled"),isRampedBinding:"*app.isRamped",isUnqualifiedBinding:"*app.isUnqualified",isDimmed:function(){if(this.get("isDecorativeDimmed")){return NO}return this.get("isRamped")||this.get("isUnqualified")}.property("isRamped","isUnqualified","isDecorativeDimmed").cacheable(),isUnclickable:function(){if(this.get("isDecorativeDimmed")){return YES}if(this.get("isDimmed")){return NO}return this.getPath("app.isFailed")||this.get("isDisabled")}.property("isFailed","isDisabled","isDimmed","isDecorativeDimmed"),isShowingWarning:function(){if(this.get("isDecorativeDimmed")){return NO}if(this.get("isDimmed")){return NO}return this.getPath("app.isFailed")||this.get("isDisabled")}.property("isFailed","isDisabled","isDimmed","isDecorativeDimmed"),isDarkTo:function(){if(this.get("isDecorativeDimmed")){return 0}var b=this.get("isDark");var d=this.get("isUnclickable");var c=this.get("isDimmed");var a;if(!b&&!d&&!c){a=0}if(b&&!d&&!c){a=0.4}if(!b&&d&&!c){a=0.75}if(b&&d&&!c){a=0.75}if(!b&&!d&&c){a=0.75}if(b&&!d&&c){a=0.8}if(!b&&d&&c){a=0.75}if(b&&d&&c){a=0.75}return a}.property("isDark","isUnclickable","isDimmed","isDecorativeDimmed"),titleIntensity:function(){var a=this.get("isDimmed");if(a){return 0.25}return 1}.property("isDimmed"),_setWarningArrowSrc:function(){this.invokeLast(function(){if(!this.get("isUnclickable")){return}var a=this._warningArrow,b=this.getPath("app.warningArrowAsset");if(!a||!b){return}a.src=b})}.observes("isUnclickable"),_forceDisableChangeObserver:function(){this.invokeLast(function(){if(this.get("isDarkTo")===0.75){this.update()}})}.observes("isDarkTo"),errorText:function(){if(!this.get("isUnclickable")){return""}if(this.get("isDisabled")){return this.getPath("app.isDisabledForMaintenance")?"Springboard.Icon.Maintenance".loc():"Springboard.Icon.Offline".loc()}if(this.get("isFailed")){return"Springboard.Icon.Error".loc()}}.property("isUnclickable","isDisabled","isFailed"),setCenter:function(a,d,b){this.beginPropertyChanges();var c=this._layoutBounds;this.set("x",(a-c.left)/(c.right-c.left));this.set("y",(d-c.top)/(c.bottom-c.top));if(b!==undefined){this.set("size",b)}this.endPropertyChanges()},animateCenter:function(a,e,c){if(this.get("isAnimatingWithParent")){return this.setCenter(a,e,c)}var d=this._layoutBounds;var b={x:(a-d.left)/d.width,y:(e-d.top)/d.height};if(c!==undefined){b.size=c}this.animateProperties(b,{speed:23,headStart:0.002,inertia:8,ticked:5})},getPxX:function(){var a=this._animatedLayoutBounds,b=this._layoutBounds;return a.left.current+this.x*a.width.current*b.fullWidth},getPxY:function(){var a=this._animatedLayoutBounds,b=this._layoutBounds;return a.top.current+this.y*a.height.current*b.fullHeight},finishAllAnimationExceptSpinner:function(){if(!this.get("isAnimatingWithParent")){return}this.finishAnimation();if(this._maskFader){this._maskFader.finish()}if(this._focusFader){this._focusFader.finish()}if(this._arrowFader){this._arrowFader.finish()}if(this._errorTextFader){this._errorTextFader.finish()}this._maskFader=this._focusFader=this._arrowFader=this._errorTextFader=null}.observes("isAnimatingWithParent"),render:function(a){window.tb=this;a.push('<div class="sb-spinner sb-el"><img class="sb-spinner-image sb-el"></div><img class="sb-mask sb-el"><img class="sb-focus sb-el"><div class="sb-title sb-el '+SC.guidFor(this)+'-label"></div><div class="sb-error-text sb-el"></div><img class="sb-arrow sb-el"></img>'+(this._USE_EXTERNAL_SHADOW?"":'<img class="sb-shadow sb-el">'));a.attr("tabindex","0")},parentViewDidResize:function(){arguments.callee.base.apply(this,arguments);this.invokeLast(function(){this.update("reposition")})},update:function(B){var g=this,D,f,q,y,k,x,w,b,v,C,s,j,d,p,h,e,u,z=NO,t=this.get("isAnimatingWithParent"),n,a,A,m,c=NO;this.$().attr("aria-labelledby",SC.guidFor(this)+"-label");if(!(u=this.get("iconElement"))){return}if(u.parentNode!==this._layer){z=YES;if(this._lastIconElement&&this._lastIconElement!==u&&this._lastIconElement.parentNode===this._layer){this._layer.removeChild(this._lastIconElement)}this._lastIconElement=u;jQuery(u).addClass("sb-icon").addClass("sb-el");if(u.parentNode){u.parentNode.removeChild(u)}this._layer.appendChild(u)}if(this._USE_EXTERNAL_SHADOW){if(!(x=this._externalShadow)){(this._externalShadow=x=new Image()).className="sb-external-shadow";x.setAttribute("aria-hidden","true")}if(!x.parentNode&&this._layer.parentNode){this._layer.parentNode.appendChild(x)}}if(this.didChangeFor("update","isDecorativeDimmed")&&(h=this.get("app"))){m=this.get("isDecorativeDimmed");if(!SC.browser.isIE8OrLower){this._titleFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._title,to:1-m,duration:m?0:500}).start()}else{this._title.style.display=m?"none":"block"}this._shadowFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._shadow||this._externalShadow,to:1-m,duration:m?0:500}).start();if(!(!this._decorShadow&&!m)){this._decorShadowFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._decorShadow||(this._decorShadow=(function(){c=YES;var o=new Image();o.className="sb-el sb-decor-shadow";o.src=h.get("decorShadowAsset");g._layer.appendChild(o);return o})()),to:0+m,duration:m?0:500}).start()}}if(c||z||(D=this.didChangeFor("update","size"))||(f=this.didChangeFor("update","isSpinning"))){(y=u.style).width=y.height=(y=this._mask.style).width=y.height=Math.round(q=CloudOS.ENABLE_TRANSFORM_ANIMATIONS?142:this.get("size"))+"px";if((y=this._shadow&&this._shadow.style)){y.width=y.height=Math.round(w=(q*this._SHADOW_SIZE_MULTIPLE))+"px";y.left=Math.round(b=Math.floor((q-w)/2))+"px";y.top=Math.round(b+q*this._SHADOW_DROP_RATIO)+"px"}(y=this._warningArrow.style).width=Math.round(q*this._ARROW_WIDTH_MULTIPLE)+"px";y.height=Math.round(q*this._ARROW_HEIGHT_MULTIPLE)+"px";y.left=Math.round(q*this._ARROW_LEFT_MULTIPLE)+"px";y.top=Math.round(q*this._ARROW_TOP_MULTIPLE)+"px";(y=this._focus.style).width=y.height=Math.round(v=Math.ceil(0.5*Math.round(2*q*this._FOCUS_SIZE_MULTIPLE)))+"px";y.left=Math.round(C=Math.floor((q-v)/2))+"px";y.top=Math.round(C)+"px";(y=this._title.style).width=Math.round(q+60)+"px";y.height=Math.ceil(1.3*this._TITLE_SIZE_MULTIPLE*q)+"px";y.top=Math.round(this._TITLE_TOP_MULTIPLE*q)+"px";y.fontSize=Math.round(this._TITLE_SIZE_MULTIPLE*q)+"px";(y=this._errorText.style).width=Math.round(q)+"px";y.height=Math.ceil(1.3*this._ERROR_SIZE_MULTIPLE*q)+"px";y.top=Math.round(this._ERROR_TOP_MULTIPLE*q)+"px";y.fontSize=Math.round(this._ERROR_SIZE_MULTIPLE*q)+"px";if((y=this._decorShadow)){(y=y.style).width=y.height=Math.ceil(w=(q*this._DECOR_SHADOW_SIZE_MULTIPLE))+"px";y.left=Math.ceil(b=Math.floor((q-w)/2))+"px";y.top=Math.ceil(b+q*this._DECOR_SHADOW_DROP_RATIO)+"px"}if(this.get("isSpinning")){(y=this._spinner.style).width=y.height=(this._spinnerSize=s=Math.round(this._SPINNER_SIZE_MULTIPLE*q))+"px";y.left=y.top=Math.round(q-s)/2+"px";(y=this._spinnerImage.style).width=s+"px";y.height=s*12+"px"}if(CloudOS.ENABLE_TRANSFORM_ANIMATIONS){this.adjust("scale",this.get("size")/142)}}if(B==="reposition"||D||this.didChangeFor("update","x","y")){this.adjust(k={top:Math.round(this.getPxY()-(p=Math.round((q=CloudOS.ENABLE_TRANSFORM_ANIMATIONS?142:this.get("size"))/2))),left:Math.round(this.getPxX()-p),width:Math.round(q),height:Math.round(q)});if(this._USE_EXTERNAL_SHADOW){(y=this._externalShadow.style).width=y.height=(w=(q*this._SHADOW_SIZE_MULTIPLE))+"px";y.left=(b=Math.floor((q-w)/2))+k.left+"px";y.top=b+q*this._SHADOW_DROP_RATIO+k.top+"px"}}if(this.didChangeFor("update","app")&&(h||(h=this.get("app")))){this._mask.src=h.get("maskAsset");this._warningArrow.src="data:image/gif;base64,R0lGODlhAQABAJAAAP///wAAACH5BAUQAAAALAAAAAABAAEAAAICBAEAOw==";this._focus.src=h.get("focusAsset");this._spinnerImage.src=h.get("spinnerAsset");if(this._shadow){this._shadow.src=h.get("shadowAsset")}if(this._externalShadow){this._externalShadow.src=h.get("shadowAsset")}}if(this.didChangeFor("update","displayName")&&(e=this.get("displayName"))){this._title.innerHTML=e}if(this.didChangeFor("update","errorText")||B==="relocalization"){this._errorText.innerHTML=this.get("errorText")}if((n=this._lastIsDarkTo)!==(this._lastIsDarkTo=this.get("isDarkTo"))){this._maskFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._mask,to:isDarkTo=this.get("isDarkTo"),duration:!t?(((n===0&&isDarkTo===0.4)||(n===0.75&&isDarkTo===0.8))?0:180):0}).start()}if(this.didChangeFor("update","isFocused")&&this._lastIsFocused!==(this._lastIsFocused=this.get("isFocused"))){this.$()[0].focus();this._focusFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._focus,to:0+(isFocused=this.get("isFocused")),duration:!t?(isFocused?100:180):0}).start()}if(this.didChangeFor("update","isShowingWarning")&&this._lastisShowingWarning!==(this._lastisShowingWarning=this.get("isShowingWarning"))){this._arrowFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._warningArrow,to:0+(A=this.get("isShowingWarning")),duration:!t?(A?300:300):0}).start();this._errorTextFader=CW.Anim.Fader.create(CW.Anim.DisplayNoneAtZero,{element:this._errorText,to:0+(A=this.get("isShowingWarning")),duration:!t?(A?300:300):0}).start()}if(this.didChangeFor("update","titleIntensity")){if(SC.browser.isIE8OrLower){CW.Anim.setOpacity(this._title,this.get("titleIntensity"))}else{var r=this.get("titleIntensity");this._title.style.color="rgba(255,255,255,"+r+")";if(!SC.browser.msie||SC.browser.msie>=10){this._title.style.textShadow="0px 7px 12px rgba(0,0,0,"+(((r+2)/3)*0.4)+")"}}}if(f||this.didChangeFor("update","isAnimatingWithParent")){if((j=this.get("isSpinning"))&&!t){if(!this._spinnerAnim){this._spinnerAnim=CW.Animation.create({view:this,signal:function(o){return Math.round(o*12)%12},speed:1,name:"spinnerAnim"+this.toString(),update:function(){var o=-this.current*this.view._spinnerSize+"px";if(this._lastTop===o){return}this._lastTop=o;this.view._spinnerImage.style.top=o},onstart:function(){this.view._spinner.style.display="block";this.spinFader=CW.Fader.create({element:this.view._spinner,to:1,duration:0,name:"spinnerAnim"+this.toString()}).start()},fadeStop:function(){this.spinFader=CW.Fader.create({element:this.view._spinner,to:0,duration:500,owner:this,onfinish:function(){this.owner.stop()}}).start()},onstop:function(){this.view._spinner.style.display="none";if(this.spinFader){this.spinFader.stop()}CW.Anim.setOpacity(this.view._spinner,0)}})}this._spinnerAnim.start()}else{if(this._spinnerAnim){if(!j&&!t){this._spinnerAnim.fadeStop()}if(t){this._spinnerAnim.stop()}}}}},relocalize:function(){this.update("relocalization")},didCreateLayer:function(){this._getPointers();this._doInitialInlineCSS();this.update()},_getPointers:function(){this._layer=this.get("layer");this._spinner=this.$(".sb-spinner")[0];this._spinnerImage=this.$(".sb-spinner-image")[0];this._focus=this.$(".sb-focus")[0];this._mask=this.$(".sb-mask")[0];this._warningArrow=this.$(".sb-arrow")[0];this._errorText=this.$(".sb-error-text")[0];this._title=this.$(".sb-title")[0];this._shadow=(this._shadow=this.$(".sb-shadow"))&&this._shadow[0]},_doInitialInlineCSS:function(){this._layer.style.overflow="visible";this._spinner.style.display="none";CW.Anim.setOpacity(this._mask,0);CW.Anim.setOpacity(this._focus,0);CW.Anim.setOpacity(this._spinner,0);CW.Anim.setOpacity(this._warningArrow,0);CW.Anim.setOpacity(this._errorText,0)},willRemoveFromParent:function(){if(this._externalShadow&&this._externalShadow.parentNode){this._externalShadow.parentNode.removeChild(this._externalShadow)}},getLayerPositionInWindow:function(){var a=this._layerPos||(this._layerPos_={});var b=this.get("frame");a.x=b.x;a.y=b.y;return a},convertPointToView:function(a,d){var c,b;if(!this.getLayerPositionInWindow()){return}if(typeof a==="object"&&d===undefined){if(typeof a.clientX==="number"){d=a.clientY;a=a.clientX}else{d=a.y;a=a.x}}(c=this._pt_||(this._pt_={})).x=a-(b=this._layerPos_).x;c.y=d-b.y;return c}});require("mixins/notification_support");CloudOS.SpringboardView=SC.View.extend(CW.Animatability,CloudOS.NotificationSupport,{ALL_FOUR_EDGE_SPACING:0,TOP_INSET:0,BOTTOM_INSET:0,MIN_INTER_BUTTON_SPACING:35,layout:{left:0,top:0,width:0,height:0,minHeight:CloudOS.MIN_HEIGHT,minWidth:CloudOS.MIN_WIDTH,zIndex:50},classNames:["springboard-view"],displayProperties:"frame isOnscreen isAnimating".w(),wantsAcceleratedLayer:CloudOS.ENABLE_TRANSFORM_ANIMATIONS,isVisible:YES,isOnscreen:NO,acceptsFirstResponder:YES,isDecorativeDimmed:NO,subscribesTo:"CloudOS.workspaceController".w(),_requiredSRCs:[CloudOS.defaultAppOptions.shadowAsset,CloudOS.defaultAppOptions.decorShadowAsset],childViews:"buttonsContainer".w(),buttonsContainer:SC.View.extend(CW.Animatability,{layout:{left:0,top:0,right:0,bottom:0,zIndex:1}}),apps:undefined,isReadyToShow:NO,init:function(){arguments.callee.base.apply(this,arguments);this._buttons=[];window.sv=this;this.sizeToParent(true);this.handleOnscreen()},show:function(){if(!this.get("isReadyToShow")){this._pendingShow=YES;return}this.becomeFirstResponder();this._pendingShow=NO;this._showing=YES;CloudOS.workspaceController.removeRHTMLSpinner();if(this.get("isDecorativeDimmed")){return this.showDecorative()}if(CloudOS.ENABLE_TRANSFORM_ANIMATIONS){return this.showAwesome()}this.set("isOnscreen",YES);this.animate("opacity",{from:0,to:1,duration:800*CloudOS.ENABLE_APP_ANIMATION},{doneShowing:function(){this.view.didShow()}.listens("stop")})},didShow:function(){},hide:function(){this._pendingShow=NO;if(!this._showing){return}this.resignFirstResponder();this._showing=NO;if(this.get("isDecorativeDimmed")){return this.hideDecorative()}if(CloudOS.ENABLE_TRANSFORM_ANIMATIONS){return this.hideAwesome()}this.animate("opacity",{to:0,duration:800*CloudOS.ENABLE_APP_ANIMATION},{doneHiding:function(){this.view.set("isOnscreen",NO);this.view.didHide()}.listens("stop")})},didHide:function(){},showWhenReady:function(){var a=this.get("isReadyToShow");if(this._lastIsReadyToShow===(this._lastIsReadyToShow=a)){return}if(a&&this._pendingShow){this.show()}}.observes("isReadyToShow"),AwesomeAnim:CW.Animation.extend({duration:800,TRAVEL:1,update:function(){var o=this.view,d=o._buttonCenters,m=o._buttons,c=this._frame,b=this.TRAVEL*(1-this.current),q=o._layoutBounds,f=q.centerX,e=q.centerY;for(var g=0,p,n,h,k,j,a;(a=d[g])&&(h=m[g]);g++){k=a.x;j=a.y;if(k===f&&j===e&&g!==0){k=d[g-1].x;j=d[g-1].y}p=a.x+b*(k-f);n=a.y+b*(j-e);h.setCenter(p,n)}this._layer.style.opacity=this.current;this.view.adjust("opacity",this.current)},onstop:function(){this.view.decrementAnimationCount()},onfinish:function(){if(this.to===0){this.view.set("isOnscreen",NO);this.view.didHide()}if(this.to===1){this.view.didShow()}},onstart:function(){if(this.to!==0){this.view.handleOnscreen();this.view.set("isOnscreen",YES);this.view.sizeToParent(true);this.view.update()}this._frame=this.view.get("frame");this._layer=this.view.get("layer");this.view.incrementAnimationCount()}}),showAwesome:function(){this._awesomeAnim||(this._awesomeAnim=this.AwesomeAnim.create({from:0,to:1,view:this}));this._awesomeAnim.duration=600;this._awesomeAnim.redirectTo(1);this._awesomeAnim.start()},hideAwesome:function(){this._awesomeAnim||(this._awesomeAnim=this.AwesomeAnim.create({from:1,to:0,view:this}));this._awesomeAnim.duration=800;this._awesomeAnim.redirectTo(0);this._awesomeAnim.start()},showDecorative:function(){this.animate("opacity",{from:0,to:1,duration:1500},{onstop:function(){this.view.adjust("opacity",1);this.view.didShow()}});this.set("isOnscreen",YES)},hideDecorative:function(){this.set("isOnscreen",NO);this.didHide();this.finishAnimation("scale")},__lastDim__:NO,handleDecorativeDimming:function(){var a=this.get("isDecorativeDimmed");if(this.__lastDim__===(this.__lastDim__=a)){return}if(a){this.stopAnimation("scale");this.buttonsContainer.adjust("scale",0.95);this.didDim()}else{if(!this.get("isShowing")){this.buttonsContainer.adjust("scale",1);this.didUndim()}else{this.buttonsContainer.animate("scale",1,{duration:500*CloudOS.ANIMATE_SPRINGBOARD_SCALE,tween:CW.Anim.tweens.make("linearInterpolation",[0,3,10,22,43,79,141,227,292,329,346,354,355,351,345,336,326,313,300,283,268,251,245].map(function(b){return b/245})),onstop:function(){this.view.owner.didUndim()}})}}}.observes("isDecorativeDimmed"),didDim:function(){},didUndim:function(){},sizeToParent:function(d){var b=this.getPath("parentView.frame");if(d!==true&&!this.get("isOnscreen")){return}if(!b){return}var a=this._lastPFWidth!==(this._lastPFWidth=b.width);var c=this._lastPFHeight!==(this._lastPFHeight=b.height);if(!a&&!c&&!this.didChangeFor("sizeToParent","isOnscreen")){return}this.adjust({width:b.width,height:b.height})}.observes("*parentView.frame","isOnscreen"),handleOnscreen:function(){var a=this.get("isOnscreen");this.adjust({left:-20000*(!a),top:-20000*(!a)})}.observes("isOnscreen"),update:function(){if(this.get("isAnimating")){return}var d=this.didChangeFor("update","isOnscreen");if(!this._buttons.length){return}this._decideButtonLocations();var h=this._buttonCenters.hClearance,b=this._buttonCenters.vClearance;var g=h,j=b*CloudOS.SpringboardButtonView.prototype.ASPECT_RATIO;var c=g/j;var k;if(c>1){k=Math.ceil(j)}else{k=Math.ceil(g)}k=Math.min(142,k);this._buttonSize=k;for(var e=0,f,a;(a=this._buttonCenters[e])&&(f=this._buttons[e]);e++){if(d||!CloudOS.ANIMATE_SPRINGBOARD_LAYOUT){f.stopAnimation();f.setCenter(a.x,a.y,k)}else{f.animateCenter(a.x,a.y,k)}}},appsObserver:function(){this._buttons.length=0;this.createButtons();this.update()}.observes("apps"),_globalVertOffsetsByColumnQuantity:[0-5,-16-5,-15-5,-11-5,-13-5,function(a,b){return -18-5+Math.max(0,Math.min(18,(300-b)*18/(300-192)))},function(a,b){return -18-5+Math.max(0,Math.min(18,(300-b)*18/(300-192)))}],maxSpreadDimensionsByColumnQuantity:[[Infinity,Infinity],[Infinity,1500],[767,1188],[1320,900],[1320,900],[1500,Infinity],[1500,Infinity]],_decideButtonLocations:function(){var c=this.get("frame");var a=c.width-this.ALL_FOUR_EDGE_SPACING*2;var d=c.height-this.ALL_FOUR_EDGE_SPACING*2-this.TOP_INSET-this.BOTTOM_INSET;var p=a/d;var O=this._buttons.length;this._gridInfo=this._gridInfo||[];this._gridInfo.length=0;var o=1,L,s,w,N;for(var K=1;K<20;K++){o=K;w=Math.ceil(O/o);N=Math.ceil(O/w);s=(a/(N+1))/(d/(w+1));this._gridInfo[K]=s/CloudOS.SpringboardButtonView.prototype.ASPECT_RATIO}s=Infinity;var B;o=-1;for(K=0;K<this._gridInfo.length;K++){B=this._gridInfo[K];if(B<1){B=1/B}if(B<s){s=B;o=K}}o!==-1||(o=3);L=Math.ceil(O/o);o=Math.ceil(O/L);this._rows=L;this._cols=o;var D=this.maxSpreadDimensionsByColumnQuantity[o][0]||Infinity;var k=this.maxSpreadDimensionsByColumnQuantity[o][1]||Infinity;var f=a;var r=d;a=Math.min(f,D);d=Math.min(r,k);var v=this._globalVertOffsetsByColumnQuantity[o]||0;if(v instanceof Function){v=v.call(this,f,r)}var g,h,n,j;var G=(this._buttonCenters||(this._buttonCenters=[])),q,b;var P=this.ALL_FOUR_EDGE_SPACING+(f-a)/2;var C=this.ALL_FOUR_EDGE_SPACING+this.TOP_INSET+(r-d)/2+v;for(K=0;q=this._buttons[K];K++){n=Math.floor(K/o);j=Math.floor(K%o);g=(j+1)*a/(o+1);h=(n+1)*d/(L+1);g=Math.ceil(g+P);h=Math.ceil(h+C);b=(G[K]||(G[K]={}));b.x=g;b.y=h}var x=this._layoutBounds;if(!x){this.set("layoutBounds",x=this._layoutBounds={});var m=YES}x.centerX=Math.ceil(0.5*a+P);x.centerY=Math.ceil(0.5*d+C);x.top=Math.ceil(C);x.bottom=Math.ceil(d+C);x.height=x.bottom-x.top;x.left=Math.ceil(P);x.right=Math.ceil(a+P);x.width=x.right-x.left;x.fullWidth=f;x.fullHeight=r;var H=this._animatedLayoutBounds;if(!H){var t=CloudOS.ANIMATE_SPRINGBOARD_LAYOUT?15:Infinity;this.set("animatedLayoutBounds",H=this._animatedLayoutBounds=CW.Animation.create({freevars:"left top width height".w(),view:this,left:{from:x.left,to:x.left,inertia:3,speed:t,headStart:0},width:{from:x.width/f,to:x.width/f,inertia:3,speed:t,headStart:0},top:{from:x.top,to:x.top,inertia:3,speed:t,headStart:0},height:{from:x.height/r,to:x.height/r,inertia:3,speed:t,headStart:0},update:function(){this.view.notifySubscribers("update","reposition")}}));var e=YES}H.left.redirectTo(x.left);H.width.redirectTo(x.width/f);H.top.redirectTo(x.top);H.height.redirectTo(x.height/r);H.start();var y=(x.centerY-c.height/2);this.set("visualCenterY",y);CloudOS.workspaceController.set("springboardVisualCenterY",y);var M=Math.max(0.95,(0.95+7/1440)+(1440-x.width)*16/490/100);for(K=0;b=G[K];K++){b.x=(b.x-x.centerX)*M+x.centerX;b.y=(b.y-x.centerY)*M+x.centerY}if(m){for(var z=0,F;F=this._buttons[z];z++){F.layoutBoundsCacher()}}if(e){for(var E=0,A;A=this._buttons[E];E++){A.animatedLayoutBoundsCacher()}}var J=1/(o+1)*a,I=1/(L+1)*d;this._buttonCenters.hClearance=J-this.MIN_INTER_BUTTON_SPACING;this._buttonCenters.vClearance=I-this.MIN_INTER_BUTTON_SPACING},_numberPiecesReady:0,_numberPieces:0,createButtons:function(){if(this._buttons.length){return true}var d=this._apps=this.get("apps");if(!d){return}for(var c=0,f,b;f=d[c];c++){if(!f.get("isHidden")){this._numberPieces++}}var e,a;for(c=0;e=this._requiredSRCs[c];c++){(a=new Image()).onload=function(){this.owner._pieceDidBecomeReady()};a.owner=this;a.src=e;this._numberPieces++}this._numberPieces++;for(c=0;f=d[c];c++){if(f.get("isHidden")){continue}this._buttons.push(b=CloudOS.SpringboardButtonView.create({springboardView:this,app:f,init:function(){arguments.callee.base.apply(this,arguments);this.notifyParentWhenReady()},notifyParentWhenReady:function(){if(this._notifiedParent||!this.get("iconElement")){return}this._notifiedParent=YES;this.get("springboardView")._pieceDidBecomeReady()}.observes("iconElement")}));this.buttonsContainer.appendChild(b)}this.invokeLater("set",4000,"isReadyToShow",YES);return true},_pieceDidBecomeReady:function(){this._numberPiecesReady++;if(this._numberPiecesReady===this._numberPieces){this.set("isReadyToShow",YES)}},springboardMayProceed:function(){if(this._receivedGreenlight===(this._receivedGreenlight=YES)){return}this._pieceDidBecomeReady()},keyDown:function(a){if(!this.get("isShowing")){return}var c=SC.FUNCTION_KEYS,b=SC.FUNCTION_KEYS[a.which]||SC.PRINTABLE_KEYS[a.which];if(b==="right"){this.focusRight()}if(b==="left"){this.focusLeft()}if(b==="up"){this.focusUp()}if(b==="down"){this.focusDown()}if(b==="return"||b===" "){this.activateFocusedButton()}a.allowDefault();return NO},currentFocus:NaN,_lastCurrentFocus:NaN,focusNone:function(){this.set("currentFocus",NaN)},focusRight:function(){var a=this.get("currentFocus");if(isNaN(a)||a>=this._buttons.length-1){return this.set("currentFocus",0)}return this.set("currentFocus",a+1)},focusLeft:function(){var a=this.get("currentFocus");if(isNaN(a)||a<=0){return this.set("currentFocus",this._buttons.length-1)}return this.set("currentFocus",a-1)},focusUp:function(){var a=this.get("currentFocus");if(a<this._cols){return}if(isNaN(a)){return this.set("currentFocus",this._buttons.length-1)}return this.set("currentFocus",(a-this._cols+this._buttons.length)%this._buttons.length)},focusDown:function(){var a=this.get("currentFocus");if(a>=(this._rows-1)*this._cols||a+this._cols>=this._buttons.length){return}if(isNaN(a)){return this.set("currentFocus",0)}return this.set("currentFocus",(a+this._cols)%this._buttons.length)},currentFocusObserver:function(){var b=this.get("currentFocus"),a=this._lastCurrentFocus;if(a===(this._lastCurrentFocus=b)){return}if(!isNaN(a)){this._buttons[a].set("isFocused",NO)}if(!isNaN(b)){this._buttons[b].set("isFocused",YES)}}.observes("currentFocus"),activateFocusedButton:function(){var b=this.get("currentFocus");if(isNaN(b)){return}var a=this._buttons[b];if(!a){return}a.mouseEntered("keyboard");a.mouseDown("keyboard");a.invokeLater(function(){this.mouseUp("keyboard");this.mouseExited("keyboard")},100)}});require("views/background_view");CloudOS.mainPage=SC.Page.design({classNames:"overflow-visible".w(),mainPane:SC.MainPane.design(CloudOS.NotificationSupport,CW.DropTarget,{layout:{left:0,right:0,top:0,bottom:0,zIndex:2,minHeight:CloudOS.MIN_HEIGHT,minWidth:CloudOS.MIN_WIDTH},subscribesTo:"CloudOS.workspaceController".w(),isShowingObserver:function(){if(CloudOS.workspaceController.get("nowShowing")===CloudOS.AUTH){this.$(".springboard-button-view").attr("tabindex","-1")}else{this.$(".springboard-button-view").attr("tabindex","0")}}.observes("CloudOS.workspaceController.nowShowing"),activateMinimumSize:function(){this.set("layout",{left:0,right:0,top:0,bottom:0,zIndex:2,minHeight:CloudOS.MIN_HEIGHT,minWidth:CloudOS.MIN_WIDTH});this.invokeLast(function(){if(typeof this._prevScrollTop==="number"){document.body.scrollTop=this._prevScrollTop;this._prevScrollTop=undefined}if(typeof this._prevScrollLeft==="number"){document.body.scrollLeft=this._prevScrollLeft;this._prevScrollLeft=undefined}})},deactivateMinimumSize:function(){this._prevScrollTop=document.body.scrollTop;this._prevScrollLeft=document.body.scrollLeft;this.set("layout",{left:0,right:0,top:0,bottom:0,zIndex:2});this.setBodyOverflowIfNeeded(true)},classNames:"overflow-visible".w(),childViews:"appsView springboardView backgroundView".w(),backgroundView:CloudOS.BackgroundView.design(SC.browser.isIE8OrLower?{isVisible:YES}:{isVisibleBinding:SC.Binding.not("CloudOS.workspaceController.applicationIsFullwindow")}),appsView:CloudOS.AppsContainerView.design(CloudOS.IsShowingSupport,{displayKey:CloudOS.APP,nowShowingBinding:"CloudOS.workspaceController.nowShowing"}),springboardView:CloudOS.SpringboardView.design(CloudOS.IsShowingSupport,{displayKeys:[CloudOS.SPRINGBOARD,CloudOS.AUTH],nowShowingBinding:"CloudOS.workspaceController.nowShowing",subscribesTo:CloudOS.SpringboardView.prototype.subscribesTo.concat("CloudOS.motmController".w()),visualCenterYBinding:"CloudOS.workspaceController.springboardVisualCenterY",childViews:CloudOS.SpringboardView.prototype.childViews.concat("accountSignoutHelp".w()),accountSignoutHelp:CloudOS.AccountSignoutHelpView.extend(CW.Animatability,{protrusionBinding:"CloudOS.workspaceController.accountSignoutHelpProtrusion",frameObserver:function(){this.set("protrusion",this.getPath("frame.width")||0+this.getPath("layout.right")||0)}.observes("frame")}),isOffscreen:YES,isDecorativeDimmed:function(){return this.get("nowShowing")===CloudOS.AUTH||!!this.get("wantsDD")}.property("nowShowing","wantsDD"),_setWantsDD:function(){var a=this.get("nowShowing")===CloudOS.AUTH;if(a){this.set("wantsDD",YES);if(this._ddSetter){this._ddSetter.invalidate()}this._ddSetter=null}else{this._ddSetter=this.invokeLater(function(){this.set("wantsDD",NO)},200)}}.observes("nowShowing"),render:function(a){a.push('<div class="icloud-text"></div>');arguments.callee.base.apply(this,arguments)},didCreateLayer:function(){CW.iOSNotification.defaultParentElement=this.get("layer");this._icloudText=this.$(".icloud-text")[0]},appsSetterHackInsteadOfBindingFail:function(){this.set("apps",CloudOS.appController.get("appList"))}.observes("CloudOS.appController.appList"),toggleChrome:function(){var a=this.get("isDecorativeDimmed");if(this.__lastToggleChromeDim__===(this.__lastToggleChromeDim__=a)){return}if(SC.browser.isIE8OrLower){this._icloudText.style.display=a?"none":"block";this.accountSignoutHelp.set("isVisible",!a)}else{this._icloudFader=CW.Anim.Fader.create({element:this._icloudText,to:1-a,duration:a?0:500}).start();this.accountSignoutHelp.animate("opacity",1-a,{duration:a?0:500,mustKeepLayoutSync:NO})}}.observes("isDecorativeDimmed"),__lastToggleChromeDim__:NO,didShow:function(){this.showNotificationsIfNeeded()},didUndim:function(){this.showNotificationsIfNeeded()},showNotificationsIfNeeded:function(){this.notifyRampedOrUnqualified();if(this._hasPendingMotm){this.performOrScheduleMotmDisplay()}},notifyRampedOrUnqualified:function(){if(!this._hasNotifiedUnqualified&&CloudOS.authController.get("userRequiresUnqualifiedNotification")){CW.iOSNotification.enqueue(CloudOS.NotificationSupport,{message:"Auth.Notification.Unqualified.Title".loc(),description:"Auth.Notification.Unqualified.Description".loc(),icon:"icloud-tile",subscribesTo:"CloudOS.localizationController".w(),relocalize:function(){this.set("message","Auth.Notification.Unqualified.Title".loc());this.set("description","Auth.Notification.Unqualified.Description".loc())}});this._hasNotifiedUnqualified=YES}if(!this._hasNotifiedRamped&&CloudOS.authController.get("userRequiresRampNotification")){CW.iOSNotification.enqueue(CloudOS.NotificationSupport,{message:"Auth.Notification.Ramped.Title".loc(),description:"Auth.Notification.Ramped.Description".loc(),icon:"icloud-tile",subscribesTo:"CloudOS.localizationController".w(),relocalize:function(){this.set("message","Auth.Notification.Ramped.Title".loc());this.set("description","Auth.Notification.Ramped.Description".loc())}});this._hasNotifiedRamped=YES}},performOrScheduleMotmDisplay:function(){if(this.get("isDecorativeDimmed")||!this.get("isShowing")){this._hasPendingMotm=YES;return}this._hasPendingMotm=NO;CloudOS.motmController.displayMotm()}})})});CloudOS.main=function main(){var a=CloudOS.get("delegate");CloudOS.invokeDelegateMethod(a,"applicationWillStart");CW.addKeyResponder(CloudOS.keyResponder);jQuery(document).mousemove(function(f){var c,d;if(!(d=CloudOS.appController.getPath("currentApp.contentWindow"))||!(c=d.SC)||!(c=c.RootResponder)||!(c=c.responder)){return NO}try{c.mousemove(d.SC.Event.create(f));return YES}catch(b){SC.debug("Passing the mousemove event into the active app failed with an exception. Exception: "+b)}return NO});jQuery(document).mouseup(function(f){var c,d;if(!(d=CloudOS.appController.getPath("currentApp.contentWindow"))||!(c=d.SC)||!(c=c.RootResponder)||!(c=c.responder)){return NO}try{c.mouseup(d.SC.Event.create(f));return YES}catch(b){SC.debug("Passing the mouseup event into the active app failed with an exception. Exception: "+b)}return NO});CloudOS.moduleLocalizer.setLocale(String.preferredLanguage);CloudOS.getPath("mainPage.mainPane").append();if(window.localeDidLoad){SC.debug("CloudOS.main() already has localized strings, proceeding to run CloudOS.run() now.");CloudOS.run()}else{SC.debug("CloudOS.main() missing localized strings, waiting for them...")}CloudOS.invokeDelegateMethod(a,"applicationDidStart");CloudOS.set("mainHasCompleted",YES)};function main(){CloudOS.main()};